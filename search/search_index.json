{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"I can programing Hello World! \ud83d\ude02","text":""},{"location":"android/Android%E8%B5%84%E6%BA%90/","title":"Android\u8d44\u6e90","text":""},{"location":"android/Android%E8%B5%84%E6%BA%90/#aosp","title":"AOSP","text":"<p>CarbonROM</p> <p>crDroid</p> <p>dotOS</p> <p>Havoc-OS</p> <p>PixelExperience</p> <p>Resurrection Remix OS</p>"},{"location":"android/Android%E8%B5%84%E6%BA%90/#twrp","title":"TWRP","text":"<p>TWRP</p> <p>wzsx</p>"},{"location":"android/Android%E8%B5%84%E6%BA%90/#opengapps","title":"OpenGApps","text":"<p>\u6c47\u603b: Download and install the latest GApps: Open GApps, and more! (xda-developers.com)</p> <p>Open GApps</p> <p>Gapps\u5404\u7248\u672c\u533a\u522b</p> \u7248\u672c \u8bf4\u660e aroma \u4e0e <code>super</code> \u7248\u6240\u5305\u542b\u7684 GApps \u76f8\u540c, \u4f46\u662f\u5728 Recovery \u4e2d\u5f15\u5165\u4e86\u56fe\u5f62\u5316\u754c\u9762, \u53ef\u4ee5\u81ea\u884c\u9009\u62e9\u5b89\u88c5\u54ea\u4e9b GApps super \u5305\u542b\u4e86\u6240\u6709 GApps, \u50cf\u97e9\u8bed\u65e5\u8bed\u4e2d\u6587\u62fc\u97f3\u4e2d\u6587\u6ce8\u97f3\u8f93\u5165\u6cd5\u7b49, \u8bf7\u6ce8\u610f: \u5982\u679c\u4f60\u662f\u7528\u7684\u662f\u57fa\u4e8e\u539f\u751f\u7684 ROM, \u672c\u7248\u672c\u4f1a\u66ff\u6362\u76f8\u673a, \u901a\u8baf\u5f55\u7b49\u7b49\u6240\u6709\u6709\u5173\u5e94\u7528 stock \u7c7b\u4f3c\u4e8e Google Pixel \u51fa\u5382\u5185\u7f6e\u7684 GApps, \u76f8\u6bd4 <code>super</code> \u7248\u5c11\u4e86\u5176\u4ed6\u8bed\u79cd\u7684\u8f93\u5165\u6cd5\u4ee5\u53ca Google \u5730\u7403\u7b49, \u8bf7\u6ce8\u610f: \u5982\u679c\u4f60\u662f\u7528\u7684\u662f\u57fa\u4e8e\u539f\u751f\u7684 ROM, \u672c\u7248\u672c\u4f1a\u66ff\u6362\u76f8\u673a, \u901a\u8baf\u5f55\u7b49\u7b49\u6240\u6709\u6709\u5173\u5e94\u7528 full \u4e0e <code>stock</code> \u7248\u6240\u5305\u542b\u7684\u5185\u5bb9\u76f8\u540c\uff0c\u4f46\u6b64\u7248\u672c\u4e0d\u4f1a\u66ff\u6362\u624b\u673a\u539f\u672c\u7684\u5e94\u7528 mini \u5305\u542b\u57fa\u7840\u7684 Google \u670d\u52a1\u6846\u67b6, \u4ee5\u53ca\u4e00\u4e9b\u5f71\u54cd\u529b\u8f83\u5927\u7684 GApps, \u76f8\u6bd4 <code>full</code> \u7248\u53bb\u6389\u4e86 Docs \u7b49\u5e94\u7528 micro \u5305\u542b\u57fa\u7840\u7684 Google \u670d\u52a1\u6846\u67b6\u548c Gmail \u7b49\u5e38\u89c1 GApps nano \u5305\u542b\u57fa\u7840\u7684 Google \u670d\u52a1\u6846\u67b6, \u4f46\u4e0d\u4f1a\u6709\u5176\u4ed6 \u4e0d\u5fc5\u8981\u7684 GApps pico \u5305\u542b\u6700\u8ff7\u4f60\u7684 Google \u670d\u52a1\u6846\u67b6, \u4f46\u7531\u4e8e\u6846\u67b6\u5e76\u975e\u5b8c\u6574, \u90e8\u5206 GApps\u53ef\u80fd\u65e0\u6cd5\u8fd0\u884c <p>NikGapps</p> <p>FlameGApps</p> <p>BiTGApps</p> <p>LiteGApps</p> <p>MindTheGapps</p>"},{"location":"android/Android%E8%B5%84%E6%BA%90/#gmscore","title":"GmsCore","text":"<p>GmsCore\u662f\u4e00\u4e2a\u53d8\u79cd, \u5728\u4e0d\u5b89\u88c5OpenGApps\u7684\u60c5\u51b5\u4e0b\u652f\u6301\u5404\u79cdGoogle APPS\u7684\u5b89\u88c5</p> <p>GmsCore</p>"},{"location":"android/Android%E8%B5%84%E6%BA%90/#magisk","title":"Magisk","text":"<p>Magisk</p>"},{"location":"android/Android%E8%B5%84%E6%BA%90/#adb-tool","title":"ADB Tool","text":"<p>SDK Platform Tools</p> <p>Google USB Driver</p>"},{"location":"android/Android%E8%B5%84%E6%BA%90/#google-play","title":"\u79bb\u7ebf\u4e0b\u8f7dGoogle Play\u5e94\u7528","text":"<p>APK Downloader</p> <p>APKPure</p>"},{"location":"android/Fastboot%E5%88%B7%E6%9C%BA/","title":"Fastboot\u5237\u673a","text":"<p>1\u3001\u6b63\u5e38\u542f\u52a8\u624b\u673a, \u5f00\u542f\u8c03\u8bd5\u6a21\u5f0f</p> <p>2\u3001\u8fdb\u5165fastboot\u6a21\u5f0f</p> <pre><code>adb reboot bootloader\n</code></pre> <p>3\u3001\u68c0\u67e5\u8bbe\u5907</p> <pre><code>fastboot devices\n</code></pre> <p>4\u3001\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u64e6\u9664</p> <pre><code>\u5fc5\u9009\u64e6\u9664\nfastboot erase system\nfastboot erase cache\nfastboot erase config\nfastboot erase userdata\n\n\u53ef\u9009\u64e6\u9664\nfastboot erase boot\nfastboot erase recovery\n</code></pre> <p>5\u3001\u5237\u673a</p> <pre><code>fastboot flash boot boot.img\nfastboot flash recovery recovery.img\nfastboot flash system system.img\n</code></pre> <p>boot.img\u548csystem.img\u9700\u8981\u63d0\u524d\u4ece\u5237\u673a\u5305\u4e2d\u89e3\u538b\u51fa\u6765, recovery.img\u4e00\u822c\u662ftwrp.img</p> <p>6\u3001\u91cd\u542f</p> <pre><code>fastboot reboot \n</code></pre>"},{"location":"docker/container_cmd/","title":"\u5e38\u7528\u5bb9\u5668\u547d\u4ee4","text":"<p>Postgres\uff1a</p> <pre><code>docker run -d \\\n        --name postgres \\\n        --restart unless-stopped \\\n        -p 5432:5432 \\\n        -e POSTGRES_PASSWORD=postgres \\\n        -e PGDATA=/var/lib/postgresql/data/pgdata \\\n        -v ~/container/volume/postgres:/var/lib/postgresql/data \\\n        postgres\n</code></pre> <p>Redis:</p> <pre><code>docker run -d \\\n        --name redis \\\n        --restart unless-stopped \\\n        -p 6379:6379 \\\n        -v ~/container/volume/redis:/data \\\n        redis \\\n        redis-server --requirepass redis\n</code></pre> <p>Debian:</p> <pre><code>docker run -dit \\\n        --name debian \\\n        --restart unless-stopped \\\n        -p 22:22 \\\n        debian bash\n</code></pre>"},{"location":"docker/vscode-docker-dev_v1/","title":"\u57fa\u4e8eDocker\u7684\u5f00\u53d1\u73af\u5883 V1","text":"<pre><code>FROM debian:bullseye-slim\n\nENV LANG C.UTF-8\n\nRUN set -eux; \\\n    # \u8bbe\u7f6e\u65f6\u533a\n    ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime; \\\n    echo 'Asia/Shanghai' &gt; /etc/timezone; \\\n    # \u914d\u7f6eapt\u6e90\n    echo 'deb http://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free \\n\\\ndeb http://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free \\n\\\ndeb http://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free \\n\\\ndeb http://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free' &gt; /etc/apt/sources.list; \\\n    # \u66f4\u65b0\u6e90\n    apt update; \\\n    # \u5b89\u88c5\u7cfb\u7edf\u8f6f\u4ef6\n    # iproute2\u63d0\u4f9b`ip a`\u548c`ss`\u547d\u4ee4, iputils-ping\u63d0\u4f9b`ping`\u547d\u4ee4, procps\u63d0\u4f9b`ps`\u548c`top`\u547d\u4ee4\n    apt install -y --no-install-recommends --no-install-suggests \\\n        iproute2 \\\n        iputils-ping \\\n        procps \\\n    ; \\\n    # \u5b89\u88c5\u5de5\u5177\u8f6f\u4ef6, ca-certificates\u53ef\u907f\u514dwget\u4e0b\u8f7dhttps\u534f\u8bae\u6587\u4ef6\u7684\u8bc1\u4e66\u5b89\u5168\u63d0\u793a\n    apt install -y --no-install-recommends --no-install-suggests \\\n        ca-certificates \\\n        curl \\\n        git \\\n        ssh \\\n        wget \\\n        vim \\\n   ; \\\n   # \u5b89\u88c5\u5f00\u53d1\u8f6f\u4ef6\n    apt install -y --no-install-recommends --no-install-suggests \\\n        mariadb-client \\\n        mariadb-server \\\n        nginx \\\n        postgresql \\\n        python3 \\\n        python3-pip \\\n        python3-venv \\\n        redis \\\n   ; \\\n    # \u907f\u514dpip\u5b89\u88c5mysqlclient\u548cpsycopg2\u62a5\u9519\n    apt install -y --no-install-recommends --no-install-suggests \\\n        build-essential \\\n        libmariadb-dev \\\n        libpq-dev \\\n        python3-dev \\\n    ; \\\n    # \u914d\u7f6epip\u6e90\n    pip3 config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple; \\\n    # \u5b89\u88c5golang\n    wget https://go.dev/dl/go1.20.4.linux-arm64.tar.gz; \\\n    rm -rf /usr/local/go; \\\n    tar -C /usr/local -xzf go1.20.4.linux-arm64.tar.gz; \\\n    rm -rf go1.20.4.linux-arm64.tar.gz; \\\n    # \u8bbe\u7f6egolang\u73af\u5883\u53d8\u91cf\n    echo \"PATH=$PATH:/usr/local/go/bin\" &gt;&gt; /root/.bashrc; \\\n    # \u6e05\u7406\u7f13\u5b58\n    rm -rf /var/lib/apt/lists/*; \\\n    # \u914d\u7f6essh\u5141\u8bb8root\u767b\u5f55\n    sed -i \"s@#PermitRootLogin prohibit-password@PermitRootLogin yes@g\" /etc/ssh/sshd_config; \\\n    # \u914d\u7f6essh\u5141\u8bb8\u7a7a\u5bc6\u7801\u767b\u5f55\n    sed -i \"s@#PermitEmptyPasswords no@PermitEmptyPasswords yes@g\" /etc/ssh/sshd_config; \\\n    # \u5220\u9664root\u5bc6\u7801\n    passwd -d root; \\\n    # \u8bbe\u7f6essh\u81ea\u542f\u52a8\n    echo \"service ssh start &gt; /dev/null\" &gt;&gt; /root/.bashrc\n\nEXPOSE 22 80 3306 5432 6379\n\nCMD [\"bash\" ]\n\n# docker build -f Dev.Dockerfile -t mydev:latest .\n# docker run -dit -h mydev -p 22:22 -p 80:80 -p 3306:3306 -p 5432:5432 -p 6379:6379 -v /path/to/host:/path/to/docker --name mydev --restart=unless-stopped mydev\n# docker exec -it mydev bash\n</code></pre>"},{"location":"docker/vscode-docker-dev_v2/","title":"\u57fa\u4e8eDocker\u7684\u5f00\u53d1\u73af\u5883 V2","text":"<pre><code>#\n# \u6784\u5efaDocker\u5f00\u53d1\u73af\u5883\n# \n# 1\u3001\u6784\u5efa\u955c\u50cf\n# docker build -f dev.Dockerfile -t gfourdx/dev:latest . \n# 2\u3001\u8fd0\u884c\u5bb9\u5668\n# docker run -dit -h dev -p 2222:22 -p 80:80  -p 443:443 -p 3306:3306 -p 5432:5432 -p 6379:6379 --name dev --restart=unless-stopped gfourdx/dev:latest\n# 3\u3001\u5feb\u901f\u8fdb\u5165\u5bb9\u5668\n# echo 'alias dev=\"docker exec -it dev bash\"' &gt;&gt; ~/.zprofile\n# \n# \u5229\u7528\u591a\u6bb5\u6784\u5efa\u6784\u5efa\u89e3\u51b3\u4e24\u4e2a\u95ee\u9898:\n# 1\u3001\u56e0\u7f3a\u5c11\u7f16\u8bd1\u5de5\u5177\u5bfc\u81f4 pip \u547d\u4ee4\u5b89\u88c5\u67d0\u4e9b\u5305\u65f6\u5931\u8d25\u7684\u95ee\u9898\n# 2\u3001\u51cf\u5c11\u955c\u50cf\u7684\u4f53\u79ef\n#\n\n# \u7b2c\u4e00\u9636\u6bb5\u6784\u5efa\nFROM debian:bookworm-slim AS base\n\n# \u914d\u7f6e\u7f16\u8bd1\u73af\u5883\n# \u6bcf\u6761\u547d\u4ee4\u4e4b\u95f4\u4f7f\u7528 &amp;&amp; \u8fde\u63a5\n# \u8868\u793a\u53ea\u6709\u4e0a\u6761\u547d\u4ee4\u6267\u884c\u6210\u529f\u540e\u624d\u4f1a\u6267\u884c\u4e0b\u6761\u547d\u4ee4\nRUN set -eux; \\\n    # \u914d\u7f6e\u56fd\u5185\u6e90\n    echo \"Types: deb\" &gt; /etc/apt/sources.list.d/debian.sources &amp;&amp; \\\n    echo \"URIs: http://mirrors.tuna.tsinghua.edu.cn/debian\" &gt;&gt; /etc/apt/sources.list.d/debian.sources &amp;&amp; \\\n    echo \"Suites: bookworm bookworm-updates bookworm-backports\" &gt;&gt; /etc/apt/sources.list.d/debian.sources &amp;&amp; \\\n    echo \"Components: main contrib non-free non-free-firmware\" &gt;&gt; /etc/apt/sources.list.d/debian.sources &amp;&amp; \\\n    echo \"Signed-By: /usr/share/keyrings/debian-archive-keyring.gpg\" &gt;&gt; /etc/apt/sources.list.d/debian.sources &amp;&amp; \\\n    echo \"\" &gt;&gt; /etc/apt/sources.list.d/debian.sources &amp;&amp; \\\n    echo \"Types: deb\" &gt;&gt; /etc/apt/sources.list.d/debian.sources &amp;&amp; \\\n    echo \"URIs: http://mirrors.tuna.tsinghua.edu.cn/debian-security\" &gt;&gt; /etc/apt/sources.list.d/debian.sources &amp;&amp; \\\n    echo \"Suites: bookworm-security\" &gt;&gt; /etc/apt/sources.list.d/debian.sources &amp;&amp; \\\n    echo \"Components: main contrib non-free non-free-firmware\" &gt;&gt; /etc/apt/sources.list.d/debian.sources &amp;&amp; \\\n    echo \"Signed-By: /usr/share/keyrings/debian-archive-keyring.gpg\" &gt;&gt; /etc/apt/sources.list.d/debian.sources &amp;&amp; \\\n    # \u66f4\u65b0\u6e90\n    apt-get update\n\nRUN set -eux; \\\n    # \u5b89\u88c5\u5305\n    apt-get install --no-install-recommends --no-install-suggests -y \\\n        # python\u76f8\u5173\u7684\u5305\n        python3 \\\n        python3-pip \\\n        python3-venv \\\n        python3-dev \\\n        \\\n        # \u7f16\u8bd1\u9700\u8981\u7684\u5305\n        pkg-config \\\n        gcc \\\n        \\\n        # mysqlclient\u548cpsycopg2\u4f9d\u8d56\u7684\u5305\n        default-libmysqlclient-dev \\\n        libpq-dev &amp;&amp; \\\n    # \u6e05\u9664\u7f13\u5b58\n    rm -rf /var/lib/apt/lists/*\n\n# \u914d\u7f6e\u865a\u62df\u73af\u5883\u5e76pip\u5b89\u88c5\u7f16\u8bd1\u5305\nRUN set -eux; \\\n    # \u914d\u7f6e\u56fd\u5185\u6e90\n    pip3 config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple &amp;&amp; \\\n    # \u521b\u5efa\u865a\u62df\u73af\u5883\n    python3 -m venv /root/venv &amp;&amp; \\\n    # \u6fc0\u6d3b\u865a\u62df\u73af\u5883\n    # dockerfile\u4e2dsource\u8bed\u6cd5\u65e0\u6548\n    # \u4f7f\u7528 . \u4ee3\u66ff\n    . /root/venv/bin/activate &amp;&amp; \\\n    # \u5b89\u88c5wheel\n    pip install wheel &amp;&amp; \\\n    # \u5b89\u88c5\u9700\u8981\u7f16\u8bd1\u7684\u5305\n    pip install mysqlclient psycopg2\n\n# \u7b2c\u4e8c\u9636\u6bb5\u6784\u5efa\nFROM debian:bookworm-slim\n\n# \u914d\u7f6e\u73af\u5883\u53d8\u91cf\nENV LANG=C.UTF-8\n\n# \u914d\u7f6e\u5de5\u4f5c\u76ee\u5f55\nWORKDIR /root/\n\nRUN set -eux; \\\n    # \u914d\u7f6e\u672c\u5730\u65f6\u95f4\n    ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; \\\n    # \u914d\u7f6e\u672c\u5730\u65f6\u533a\n    echo 'Asia/Shanghai' &gt; /etc/timezone\n\nRUN set -eux; \\\n    # \u914d\u7f6e\u56fd\u5185\u6e90\n    echo \"Types: deb\" &gt; /etc/apt/sources.list.d/debian.sources &amp;&amp; \\\n    echo \"URIs: http://mirrors.tuna.tsinghua.edu.cn/debian\" &gt;&gt; /etc/apt/sources.list.d/debian.sources &amp;&amp; \\\n    echo \"Suites: bookworm bookworm-updates bookworm-backports\" &gt;&gt; /etc/apt/sources.list.d/debian.sources &amp;&amp; \\\n    echo \"Components: main contrib non-free non-free-firmware\" &gt;&gt; /etc/apt/sources.list.d/debian.sources &amp;&amp; \\\n    echo \"Signed-By: /usr/share/keyrings/debian-archive-keyring.gpg\" &gt;&gt; /etc/apt/sources.list.d/debian.sources &amp;&amp; \\\n    echo \"\" &gt;&gt; /etc/apt/sources.list.d/debian.sources &amp;&amp; \\\n    echo \"Types: deb\" &gt;&gt; /etc/apt/sources.list.d/debian.sources &amp;&amp; \\\n    echo \"URIs: http://mirrors.tuna.tsinghua.edu.cn/debian-security\" &gt;&gt; /etc/apt/sources.list.d/debian.sources &amp;&amp; \\\n    echo \"Suites: bookworm-security\" &gt;&gt; /etc/apt/sources.list.d/debian.sources &amp;&amp; \\\n    echo \"Components: main contrib non-free non-free-firmware\" &gt;&gt; /etc/apt/sources.list.d/debian.sources &amp;&amp; \\\n    echo \"Signed-By: /usr/share/keyrings/debian-archive-keyring.gpg\" &gt;&gt; /etc/apt/sources.list.d/debian.sources &amp;&amp; \\\n    # \u66f4\u65b0\u6e90\n    apt-get update\n\nRUN set -eux; \\\n    # \u5b89\u88c5\u5305\n    apt-get install --no-install-recommends --no-install-suggests -y \\\n        python3 \\\n        python3-pip \\\n        python3-venv \\\n        \\\n        mariadb-server \\\n        mariadb-client \\\n        postgresql \\\n        \\\n        redis \\\n        \\\n        nginx \\\n        \\\n        git \\\n        ssh \\\n        vim \\\n        \\\n        curl \\\n        wget \\\n        \\\n        # \u63d0\u4f9bip xx\u548css\u547d\u4ee4\n        iproute2 \\ \n        # \u63d0\u4f9bping\u7b49\u547d\u4ee4\n        iputils-ping \\\n        # \u63d0\u4f9bps\u3001top\u3001free\u548csysctl\u7b49\u547d\u4ee4\n        procps &amp;&amp; \\\n    # \u6e05\u7406\u7f13\u5b58\n    rm -rf /var/lib/apt/lists/* &amp;&amp; \\\n    # \u521b\u5efa\u865a\u62df\u73af\u5883\n    python3 -m venv venvs/venv\n\nRUN set -eux; \\\n    # \u914d\u7f6ePIP\u56fd\u5185\u6e90\n    pip3 config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple &amp;&amp; \\\n    # \u914d\u7f6emariaDB\u76d1\u542c\u6240\u6709IP\n    sed -i 's/127.0.0.1/0.0.0.0/' /etc/mysql/mariadb.conf.d/50-server.cnf &amp;&amp; \\\n    # \u914d\u7f6ePostgreSQL\u5141\u8bb8\u4efb\u4f55IP\u767b\u5f55\n    sed -i '0,/127.0.0.1\\/32/s//0.0.0.0\\/0/' /etc/postgresql/15/main/pg_hba.conf &amp;&amp; \\\n    # \u914d\u7f6ePostgreSQL\u76d1\u542c\u6240\u6709IP\n    sed -i \"0,/#listen_addresses = 'localhost'/s//listen_addresses = '*'/\" /etc/postgresql/15/main/postgresql.conf &amp;&amp; \\\n    # \u914d\u7f6eredis\u76d1\u542c\u6240\u6709IP\n    sed -i '0,/^bind 127.0.0.1/s//bind 0.0.0.0/' /etc/redis/redis.conf &amp;&amp; \\\n    # \u914d\u7f6eredis\u975e\u4fdd\u62a4\u6a21\u5f0f(\u5141\u8bb8\u975e\u56de\u73af\u5730\u5740\u8bbf\u95ee)\n    sed -i \"s/protected-mode yes/protected-mode no/\" /etc/redis/redis.conf&amp;&amp; \\\n    # \u914d\u7f6essh\u5141\u8bb8root\u767b\u5f55\n    sed -i \"s/#PermitRootLogin prohibit-password/PermitRootLogin yes/\" /etc/ssh/sshd_config &amp;&amp; \\\n    # \u914d\u7f6essh\u5141\u8bb8\u7a7a\u5bc6\u7801\u767b\u5f55\n    sed -i \"s/#PermitEmptyPasswords no/PermitEmptyPasswords yes/\" /etc/ssh/sshd_config &amp;&amp; \\\n    # \u5220\u9664root\u5bc6\u7801\n    passwd -d root\n\n# \u4ece\u7b2c\u4e00\u9636\u6bb5\u62f7\u8d1d\u865a\u62df\u73af\u5883\u4e2d\u7684\u5305\nCOPY --from=base /root/venv/lib/python3.11/site-packages/ venvs/venv/lib/python3.11/site-packages/\n\n# 22 ssh\n# 80 443 nginx\n# 3306 mariadb\n# 5432 postgresql\n# 7379 redis\nEXPOSE 22 80 443 3306 5432 6379\n\n# \u901a\u8fc7 bash -c \u53c2\u6570\u7684\u65b9\u5f0f\u542f\u52a8\u670d\u52a1\n# \u6700\u540e\u4f7f\u7528 bash \u6216 tail -f /dev/null \u6302\u8d77\n# \u4fdd\u8bc1\u5bb9\u5668\u8fd0\u884c\u540e\u4e0d\u4f1a\u76f4\u63a5\u9000\u51fa\n# CMD [\"bash\", \"-c\", \"service server1 start &amp;&amp; service server2 start &amp;&amp; xxx &amp;&amp; tail -f /dev/null\"]\nCMD [\"bash\", \"-c\", \"service ssh start &amp;&amp; service nginx start &amp;&amp; service mariadb start &amp;&amp; service postgresql start &amp;&amp; service redis-server start &amp;&amp; bash\"]\n</code></pre>"},{"location":"golang/GO%E7%9A%84%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/","title":"Linux\u4e2d\u73af\u5883GO\u7684\u73af\u5883\u53d8\u91cf","text":""},{"location":"golang/GO%E7%9A%84%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/#linux","title":"\u4f7f\u7528 Linux \u547d\u4ee4\u914d\u7f6e","text":"<p>\u4ee5GOPATH\u4e3e\u4f8b</p> <p>\u65b9\u5f0f1</p> <pre><code>~# echo $GOPATH               # \u672a\u914d\u7f6e\u73af\u5883\n\n~# go env|grep GOPATH         # \u67e5\u770bGOPATH, \u662f\u9ed8\u8ba4\u503c\nGOPATH=\"/root/go\"\n~# \n~# export GOPATH=/root/gos    # \u914d\u7f6e\u73af\u5883\u53d8\u91cf\n~# \n~# echo $GOPATH               # \u67e5\u770b\u73af\u5883\u53d8\u91cf, \u5df2\u6539\u53d8\n/root/gos\n~# \n~# go env|grep GOPATH         # \u67e5\u770bGOPATH, \u5df2\u6539\u53d8\nGOPATH=\"/root/gos\"\n~# \n</code></pre> <p>\u7ed3\u8bba: export GOPATH=/root/gos \u53ef\u66f4\u6539go env</p> <p>\u6ce8\u610f: </p> <p>1\u3001\u4f7f\u7528export\u65b9\u5f0f\u8bbe\u7f6e\u7684\u73af\u5883\u53d8\u91cf, \u4ec5\u5bf9\u5f53\u524d\u7ec8\u7aef\u8d77\u4f5c\u7528, \u5173\u95ed\u5f53\u524d\u7ec8\u7aef\u73af\u5883\u53d8\u91cf\u5931\u6548, \u4e0d\u5173\u95ed\u5f53\u524d\u7ec8\u7aef\u4e5f\u4e0d\u4f1a\u5f71\u54cd\u5176\u4ed6\u65b0\u5f00\u7ec8\u7aef\u7684\u73af\u5883\u53d8\u91cf;</p> <p>2\u3001\u60f3\u8981\u6c38\u4e45\u751f\u6548\u8bf7\u5c06\u547d\u4ee4<code>export GOPATH=/root/gos</code>\u5199\u5165 .bashrc \u6216 .profile\u4e2d</p> <p>3\u3001\u5982\u679c\u60f3\u8981\u53d6\u6d88\u8be5\u73af\u5883\u53d8\u91cf, \u6267\u884c\u547d\u4ee4<code>unset GOPATH</code> , \u6216\u8005\u4ece  .bashrc \u6216 .profile\u4e2d\u5220\u9664<code>export GOPATH=/root/gos</code>\u540e\u518d\u6267\u884csource\u547d\u4ee4</p>"},{"location":"golang/GO%E7%9A%84%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/#go-env","title":"\u4f7f\u7528 go env \u547d\u4ee4\u914d\u7f6e","text":"<pre><code>~# go env|grep GOPATH            # \u67e5\u770bGOPATH, \u662f\u9ed8\u8ba4\u503c\nGOPATH=\"/root/go\"\n~# \n~# go env -w GOPATH=/root/gos    # \u914d\u7f6e\u73af\u5883\u53d8\u91cf\n~# \n~# cat ~/.config/go/env          # \u73af\u5883\u53d8\u91cf\u5df2\u5199\u5165\u914d\u7f6e\u6587\u4ef6\nGOPATH=/root/gos\n~# \n~# go env|grep GOPATH            # \u67e5\u770bGOPATH, \u5df2\u6539\u53d8\nGOPATH=\"/root/gos\"\n~# \n~# go env -u GOPATH              # \u53d6\u6d88\u914d\u7f6e\u73af\u5883\u53d8\u91cf\n~# \n~# cat ~/.config/go/env          # \u73af\u5883\u53d8\u91cf\u5df2\u4ece\u914d\u7f6e\u6587\u4ef6\u4e2d\u5220\u9664\n~# \n~# go env|grep GOPATH            # \u67e5\u770bGOPATH, \u5df2\u53d8\u6210\u9ed8\u8ba4\u503c\nGOPATH=\"/root/go\"\n~# \n~# export GOPATH=/root/gos\n~# go env -w GOPATH=/root/go \nwarning: go env -w GOPATH=... does not override conflicting OS environment variable\n~# \n</code></pre> <p>\u7ed3\u8bba: </p> <p>1\u3001\u6b64<code>go env -w</code>\u7684\u65b9\u5f0f\u914d\u7f6e\u73af\u5883\u53d8\u91cf, \u4f1a\u5199\u5165\u914d\u7f6e\u6587\u4ef6\u5e76\u6c38\u4e45\u751f\u6548, \u60f3\u8981\u64a4\u9500\u9700\u8981\u6267\u884c\u547d\u4ee4<code>go env -u</code></p> <p>2\u3001<code>go env -w</code>\u7684\u65b9\u5f0f\u548c\u901a\u8fc7\u547d\u4ee4<code>export</code>\u6c38\u4e45\u751f\u6548\u7684\u6548\u679c\u4e00\u6837, \u533a\u522b\u5c31\u662f\u5199\u5165\u7684\u6587\u4ef6(\u524d\u8005\u662f~/.config/go/env, \u540e\u8005\u662f~/.bashrc\u6216~/.profile)\u548c\u7ba1\u7406\u65b9\u5f0f(\u524d\u8005\u662fgo\u7ba1\u7406,\u540e\u8005\u662flinux\u7ba1\u7406)</p> <p>3\u3001<code>go env -w</code>\u7684\u4f18\u5148\u7ea7\u6bd4<code>export</code>\u4f4e, \u5982\u679c\u5148\u7528<code>export</code>\u914d\u7f6e\u4e86\u73af\u5883\u53d8\u91cf, <code>go env -w</code>\u4e0d\u4f1a\u751f\u6548</p>"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEDocker/","title":"Debian\u5b89\u88c5\u548c\u914d\u7f6eDocker","text":""},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEDocker/#_1","title":"\u5728\u7ebf\u5b89\u88c5","text":"<pre><code>curl -fsSL https://get.docker.com -o get-docker.sh\nsh get-docker.sh\n</code></pre> <p>\u6216</p> <pre><code>wget -qO- https://get.docker.com | sh\n</code></pre>"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEDocker/#ip","title":"\u914d\u7f6eIP\u5730\u5740\u6bb5\u548c\u4ee3\u7406","text":"<pre><code>mkdir -p /etc/docker\n\ntee /etc/docker/daemon.json &lt;&lt;-'EOF'\n{\n  \"bip\": \"192.168.255.1/24\",\n  \"proxies\": {\n    \"http-proxy\": \"http://127.0.0.1:7891\",\n    \"https-proxy\": \"http://127.0.0.1:7891\",\n    \"no-proxy\": \"127.0.0.0/8\"\n  }\n}\n</code></pre> <p>bip\u662f\u4fee\u6539Docker\u9ed8\u8ba4\u5206\u914dbridge\u7f51\u7edc\u7684\u5730\u5740\u6bb5</p> <p>\u82e5\u8981\u914d\u7f6eDNS, \u8bf7\u6dfb\u52a0 \"dns\": [\"223.5.5.5\", \"223.6.6.6\"]</p> <p>\u82e5\u8981\u914d\u7f6eDocker\u955c\u50cf\u548c\u5bb9\u5668\u7684\u5b58\u50a8\u914d\u7f6e, \u8bf7\u6dfb\u52a0 \"data-root\": \"/path/to/custom\"</p>"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEDocker/#sudo","title":"\u514dsudo","text":"<p>\u53c2\u8003\uff1a https://docs.docker.com/engine/install/linux-postinstall/</p> <pre><code>sudo groupadd docker  # \u53ef\u4ee5\u7701\u7565\nsudo usermod -aG docker $USER\nnewgrp docker\n</code></pre>"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEDocker/#_2","title":"\u79bb\u7ebf\u5b89\u88c5","text":"<pre><code>https://download.docker.com\n</code></pre> <p>\u4ee5Debian12\u4e3a\u4f8b:</p> <pre><code>https://download.docker.com/linux/debian/dists/bookworm/pool/stable/amd64/\n</code></pre> <p>\u5fc5\u9009</p> <pre><code>containerd\ndocker-ce-cli\ndocker-ce\n</code></pre> <p>\u53ef\u9009</p> <pre><code>docker-buildx-plugin\ndocker-ce-rootless-extras\ndocker-compose-plugin\ndocker-scan-plugin\n</code></pre>"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEMariaDB/","title":"Debian\u5b89\u88c5\u548c\u914d\u7f6eMariaDB","text":""},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEMariaDB/#_1","title":"\u5b89\u88c5","text":"<pre><code>apt install -y mariadb-server mariadb-client\n</code></pre>"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEMariaDB/#_2","title":"\u914d\u7f6e","text":""},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEMariaDB/#ip","title":"\u76d1\u542c\u6240\u6709IP","text":"<pre><code>sed -i 's/127.0.0.1/0.0.0.0/' /etc/mysql/mariadb.conf.d/50-server.cnf\n</code></pre>"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEMariaDB/#_3","title":"\u542f\u52a8\u670d\u52a1","text":"<pre><code>service mariadb start\n</code></pre>"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEMariaDB/#_4","title":"\u5b89\u5168\u914d\u7f6e","text":"<pre><code># \u6267\u884c\u4e0b\u65b9\u547d\u4ee4\u914d\u7f6emysql\nmysql_secure_installation\n\n# \u6267\u884c\u4e0a\u65b9\u547d\u4ee4\u51fa\u73b0\u4ea4\u4e92\u5f0f\u4f1a\u8bdd(\u6839\u636e\u5b9e\u9645\u8981\u6c42\u914d\u7f6e\u5373\u53ef)\nEnter current password for root (enter for none):    # \u6b64\u5904\u76f4\u63a5\u6309\u4e0b\u56de\u8f66\nSwitch to unix_socket authentication [Y/n]           # \u8f93\u5165n\u540e\u6309\u4e0b\u56de\u8f66\nChange the root password? [Y/n]                      # \u8f93\u5165y\u540e\u6309\u4e0b\u56de\u8f66\nNew password:                                        # \u8bbe\u7f6e\u5bc6\u7801\nRe-enter new password:                               # \u91cd\u590d\u521a\u521a\u8bbe\u7f6e\u7684\u5bc6\u7801\nRemove anonymous users? [Y/n]                        # \u8f93\u5165y\u540e\u6309\u4e0b\u56de\u8f66\nDisallow root login remotely? [Y/n]                  # \u8f93\u5165n\u540e\u6309\u4e0b\u56de\u8f66\nRemove test database and access to it? [Y/n]         # \u8f93\u5165y\u540e\u6309\u4e0b\u56de\u8f66\nReload privilege tables now? [Y/n]                   # \u8f93\u5165y\u540e\u6309\u4e0b\u56de\u8f66\n\n# \u767b\u5f55mysql\u7ee7\u7eed\u914d\u7f6e\uff0c\u6ce8\u610f\uff1a\u7b2c\u4e09\u6761\u547d\u4ee4\u4e2d\u7684\"mariadb\"\u662f\u5bc6\u7801\uff0c\u5efa\u8bae\u4e0e\u4e0a\u9762\u7684\u5bc6\u7801\u4fdd\u6301\u4e00\u81f4\nmysql -u root\nuse mysql\ngrant all privileges on *.* to 'root'@'%' identified by 'mariadb' with grant option;\nflush privileges;\nexit\n</code></pre>"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEMariaDB/#_5","title":"\u6388\u6743","text":"<pre><code>mysql -u root\n\nuse mysql\n\ngrant all privileges on *.* to 'root'@'%' identified by 'mariadb' with grant option;\n\nflush privileges;\n\nexit\n</code></pre>"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEPostgres/","title":"Debian\u5b89\u88c5\u548c\u914d\u7f6ePostgres","text":""},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEPostgres/#_1","title":"\u5b89\u88c5","text":"<p>\u53c2\u8003\uff1aPostgreSQL: Linux downloads (Debian)</p> <pre><code>sudo sh -c 'echo \"deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main\" &gt; /etc/apt/sources.list.d/pgdg.list'\nwget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -\nsudo apt-get update\nsudo apt-get -y install postgresql\n</code></pre>"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEPostgres/#_2","title":"\u914d\u7f6e","text":""},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEPostgres/#ip","title":"\u5141\u8bb8\u4efb\u4f55IP","text":"<pre><code>sed -i '0,/127.0.0.1\\/32/s//0.0.0.0\\/0/' /etc/postgresql/15/main/pg_hba.conf\n</code></pre>"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEPostgres/#ip_1","title":"\u76d1\u542c\u4efb\u4f55IP","text":"<pre><code>sed -i \"0,/#listen_addresses = 'localhost'/s//listen_addresses = '*'/\" /etc/postgresql/15/main/postgresql.conf\n</code></pre>"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEPostgres/#_3","title":"\u542f\u52a8","text":"<pre><code>service postgresql start\n</code></pre>"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEPostgres/#postgres","title":"\u5207\u6362postgres\u7528\u6237","text":"<pre><code>su - postgres\n</code></pre> <p>\u4e00\u822c\u65e0\u9700\u5bc6\u7801\u5373\u53ef\u5207\u6362\u5230postgres\u7528\u6237</p> <p>\u5982\u63d0\u793a\u8f93\u5165\u5bc6\u7801\u6216\u60f3\u8bbe\u7f6e\u5bc6\u7801\u53ef\u6267\u884c\u547d\u4ee4 <code>passwd postgres</code></p>"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEPostgres/#postgres_1","title":"\u4fee\u6539postgres\u5bc6\u7801","text":"<pre><code>psql\nalter user postgres with password 'postgres';\n\\q\nexit\n</code></pre> <p>\u6ce8\u610f, \u8fd9\u91cc\u7684postgres\u5bc6\u7801\u662f\u6307postgres\u6570\u636e\u5e93\u4e2dpostgres\u7528\u6237\u7684\u5bc6\u7801</p>"},{"location":"linux/Debian%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/","title":"Debian\u7f51\u7edc\u7ba1\u7406","text":"<p>Debian\u4e2d\u5b58\u5728\u4e24\u5957\u7ba1\u7406\u7f51\u7edc\u7684\u65b9\u6848\uff1a</p> <p>1\u3001/etc/network/interfaces</p> <p>2\u3001Network-Manager</p> <p>\u65b9\u68481\u9ed8\u8ba4\u5b58\u5728\uff0c\u5f53\u5b89\u88c5DE\u65f6\uff0c\u6bd4\u5982Gnome\uff0c\u4f1a\u4ea7\u751f\u65b9\u68482\uff0c\u4e24\u5957\u65b9\u6848\u662f\u51b2\u7a81\u7684\u3002</p> <p>\u65e2\u80fd\u907f\u514d\u65b9\u6848\u51b2\u7a81\u53c8\u80fd\u5171\u4eab\u914d\u7f6e\u7684\u89e3\u51b3\u65b9\u6848\uff1a</p> <p>1\u3001\u5f53Network-Manager\u53d1\u73b0/etc/network/interfaces\u88ab\u6539\u52a8\u7684\u65f6\u5019\uff0c\u5219\u5173\u95ed\u81ea\u5df1\uff08\u663e\u793a\u4e3a\u672a\u6258\u7ba1\uff09\uff0c\u9664\u975emanaged\u8bbe\u7f6e\u6210\u771f\u3002</p> <p>2\u3001\u5f53managed\u8bbe\u7f6e\u6210\u771f\u65f6\uff0c/etc/network/interfaces\uff0c\u5219\u4e0d\u751f\u6548\u3002</p> <p>\u5bf9\u4e8e\u5b89\u88c5\u684c\u9762\u73af\u5883\u7684\u7528\u6237\u5efa\u8bae</p> <p>\u7f16\u8f91/etc/NetworkManager/NetworkManager.conf</p> <p>\u628a\u6700\u540e\u4e00\u884c\u7684\u201cmanaged=false\u201d\u6539\u4e3a\u201cmanaged=true\u201d</p> <p>\u7136\u540e\u91cd\u542fNetworkManager\u6216\u7cfb\u7edf\u5373\u53ef</p>"},{"location":"linux/U%E7%9B%98%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%88%86%E5%8C%BA%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD/","title":"\u683c\u5f0f\u5316\u91cd\u5efa\u5206\u533a","text":""},{"location":"linux/U%E7%9B%98%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%88%86%E5%8C%BA%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD/#1u","title":"1\u3001\u67e5\u627eU\u76d8","text":"<pre><code>fdisk -l\n</code></pre> <p>\u5047\u8bbe\u627e\u5230U\u76d8 /dev/sda</p>"},{"location":"linux/U%E7%9B%98%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%88%86%E5%8C%BA%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD/#2ext4","title":"2\u3001\u683c\u5f0f\u5316ext4\u6587\u4ef6\u7cfb\u7edf","text":"<pre><code>mkfs.ext4 /dev/sda\n</code></pre> <p>\u8f93\u5165<code>y</code>\u56de\u8f66, \u7b49\u5f85\u547d\u4ee4\u6267\u884c\u5b8c\u6bd5</p>"},{"location":"linux/U%E7%9B%98%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%88%86%E5%8C%BA%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD/#3","title":"3\u3001\u521b\u5efa\u5206\u533a","text":"<pre><code>fdisk /dev/sda\n</code></pre> <p>\u8f93\u5165<code>n</code>\u65b0\u5efa\u5206\u533a</p> <p>\u8f93\u5165<code>p</code>\u521b\u5efa\u4e3b\u5206\u533a</p> <p>\u8f93\u5165<code>1</code>\u8bbe\u7f6e\u4e3b\u5206\u533a\u5e8f\u53f7</p> <p>\u8bbe\u7f6e\u5206\u533a\u8d77\u59cb\u5730\u5740, \u4fdd\u6301\u9ed8\u8ba4, \u76f4\u63a5\u56de\u8f66</p> <p>\u8bbe\u7f6e\u5206\u533a\u7ed3\u675f\u5730\u5740, \u4fdd\u6301\u9ed8\u8ba4, \u76f4\u63a5\u56de\u8f66</p> <p>\u8f93\u5165<code>w</code>\u4fdd\u5b58\u5e76\u5199\u5165\u5206\u533a\u8868</p> <p>\u6b64\u65f6, \u901a\u8fc7\u547d\u4ee4<code>fdisk -l</code>\u53ef\u770b\u5230\u5206\u533a<code>/dev/sda1</code>\u521b\u5efa\u5b8c\u6bd5</p>"},{"location":"linux/U%E7%9B%98%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%88%86%E5%8C%BA%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD/#4","title":"4\u3001\u683c\u5f0f\u5316\u5206\u533a","text":"<pre><code>mkfs.ext4 /dev/sda1\n</code></pre>"},{"location":"linux/U%E7%9B%98%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%88%86%E5%8C%BA%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD/#5ulabel","title":"5\u3001\u66f4\u6539U\u76d8Label","text":"<pre><code>e2label /dev/sda1 \"mydiskname\"\n</code></pre>"},{"location":"linux/U%E7%9B%98%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%88%86%E5%8C%BA%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD/#u","title":"\u81ea\u52a8\u6302\u8f7dU\u76d8","text":""},{"location":"linux/U%E7%9B%98%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%88%86%E5%8C%BA%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD/#1uuuid","title":"1\u3001\u67e5\u770bU\u76d8UUID","text":"<pre><code>blkid|grep -i sda\n</code></pre> <p>\u5f97\u5230\u7c7b\u4f3c\u8fd9\u6837\u7684\u5185\u5bb9: <code>UUID=\"6f17b453-511e-4cb0-8655-ed487c51c54b\"</code></p>"},{"location":"linux/U%E7%9B%98%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%88%86%E5%8C%BA%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD/#2","title":"2\u3001\u81ea\u52a8\u6302\u8f7d","text":"<pre><code>echo \"UUID=6f17b453-511e-4cb0-8655-ed487c51c54b /mnt/sda1 ext4 defaults 0 0\" &gt;&gt; /etc/fstab\n</code></pre> <p>\u89e3\u91ca:</p> <p>/etc/fstab\u6587\u4ef6\u4e3b\u8981\u5305\u62ec6\u6bb5\uff0c\u4f9d\u6b21\u662f\uff1a</p> <p>device\u3000\u3000mount point\u3000\u3000filesystem\u3000\u3000options\u3000\u3000dump\u3000\u3000pass</p> <ul> <li> <p>device: \u8bbe\u5907\u6587\u4ef6\u7684UUID</p> </li> <li> <p>mount point: \u6302\u8f7d\u70b9, \u5373\u6587\u4ef6\u5939, \u9700\u8981\u63d0\u524d\u521b\u5efa</p> </li> <li> <p>filesystem: \u6587\u4ef6\u7cfb\u7edf\u7684\u683c\u5f0f\uff0c\u5305\u62ecext2\u3001ext3\u3001zfs\u3001nfs\u3001vfat\u7b49</p> </li> <li> <p>options: \u5982\u4e0b</p> </li> </ul> Defaults \u540c\u65f6\u5177\u6709rw,suid,dev,exec,auto,nouser,async\u7b49\u9ed8\u8ba4\u53c2\u6570\u7684\u8bbe\u7f6e Async/sync \u8bbe\u7f6e\u662f\u5426\u4e3a\u540c\u6b65\u65b9\u5f0f\u8fd0\u884c\uff0c\u9ed8\u8ba4\u4e3aasync auto/noauto \u5f53\u4e0b\u8f7dmount -a \u7684\u547d\u4ee4\u65f6\uff0c\u6b64\u6587\u4ef6\u7cfb\u7edf\u662f\u5426\u88ab\u4e3b\u52a8\u6302\u8f7d\u3002\u9ed8\u8ba4\u4e3aauto rw/ro \u662f\u5426\u4ee5\u4ee5\u53ea\u8bfb\u6216\u8005\u8bfb\u5199\u6a21\u5f0f\u6302\u8f7d exec/noexec \u9650\u5236\u6b64\u6587\u4ef6\u7cfb\u7edf\u5185\u662f\u5426\u80fd\u591f\u8fdb\u884c\"\u6267\u884c\"\u7684\u64cd\u4f5c user/nouser \u662f\u5426\u5141\u8bb8\u7528\u6237\u4f7f\u7528mount\u547d\u4ee4\u6302\u8f7d suid/nosuid \u662f\u5426\u5141\u8bb8SUID\u7684\u5b58\u5728 Usrquota \u542f\u52a8\u6587\u4ef6\u7cfb\u7edf\u652f\u6301\u78c1\u76d8\u914d\u989d\u6a21\u5f0f Grpquota \u542f\u52a8\u6587\u4ef6\u7cfb\u7edf\u5bf9\u7fa4\u7ec4\u78c1\u76d8\u914d\u989d\u6a21\u5f0f\u7684\u652f\u6301 <ul> <li> <p>dump: dump\u5de5\u5177\u5907\u4efd\u6587\u4ef6\u7cfb\u7edf\u7684\u8bbe\u7f6e, 0\u8868\u793a\u5ffd\u7565, 1\u8868\u793a\u5907\u4efd</p> </li> <li> <p>Pass: fsck\u5de5\u5177\u68c0\u67e5\u6587\u4ef6\u7cfb\u7edf\u7684\u8bbe\u7f6e, 0\u8868\u793a\u5ffd\u7565,1\u8868\u793a\u83b7\u5f97\u6700\u9ad8\u4f18\u5148\u6743, \u5176\u4ed6\u6240\u6709\u9700\u8981\u88ab\u68c0\u67e5\u7684\u8bbe\u5907\u8bbe\u7f6e\u4e3a2</p> </li> </ul>"},{"location":"linux/U%E7%9B%98%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%88%86%E5%8C%BA%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD/#3_1","title":"3\u3001\u6269\u5c55","text":"<p>\u624b\u52a8\u6302\u8f7d: <code>mount /dev/sda1 /mnt/usb</code></p> <p>\u624b\u52a8\u5378\u8f7d: <code>umount /dev/sda1</code></p>"},{"location":"linux/apt%E5%9B%BD%E5%86%85%E6%BA%90/","title":"Apt\u56fd\u5185\u6e90","text":"<p>\u9488\u5bf9Debian12\u53ca\u4ee5\u4e0a\u7248\u672c\u7684\u5feb\u901f\u4f7f\u7528\u6e05\u534e\u6e90\u7684\u529e\u6cd5</p> <pre><code>sed -i 's@deb.debian.org@mirrors.tuna.tsinghua.edu.cn@g' /etc/apt/sources.list.d/debian.sources\n</code></pre>"},{"location":"linux/%E5%88%AB%E5%90%8D/","title":"Linux\u522b\u540d","text":"<pre><code>alias ll='ls -ahlrt'\nalias agi='sudo apt-get install --no-install-recommends --no-install-suggests'\nalias dpa='docker ps -a --format \"table {{.ID}}\\t{{.Image}}\\t{{.Names}}\\t{{.Status}}\\t{{.Ports}}\"'\nalias dpas='docker ps -a --format \"table {{.ID}}\\t{{.Image}}\\t{{.Names}}\\t{{.Status}}\\t{{.Size}}\\t{{.Ports}}\"'\nalias di='docker images'\nalias drmi='docker rmi $(docker images -f \"dangling=true\" -q)'\n</code></pre>"},{"location":"linux/%E5%AE%89%E8%A3%85mysqlclient%E5%92%8Cpsycopg2%E6%8A%A5%E9%94%99/","title":"\u5b89\u88c5mysqlclient\u548cpsycopg2\u62a5\u9519","text":"<p>\u4f7f\u7528pip\u5b89\u88c5\u4e0a\u8ff0\u4e24\u4e2a\u5305\u9700\u8981\u89e3\u51b3\u4ee5\u4e0b\u7684\u4f9d\u8d56\u95ee\u9898, \u5177\u4f53\u6765\u8bf4\u5c31\u662f:</p> <ul> <li>pkg-config</li> <li>gcc \u6216 build-essential</li> <li>python3-dev</li> <li>libmariadb-dev \u6216 libmariadb-dev-compat \u6216 default-libmysqlclient-dev</li> <li>libpq-dev</li> </ul> <p><code>build-essential</code>\u4e0d\u4ec5\u5305\u62ecGCC\u7f16\u8bd1\u5668, \u8fd8\u5305\u62ec\u5176\u4ed6\u6784\u5efa\u8f6f\u4ef6\u6240\u9700\u7684\u5de5\u5177\u548c\u5e93, \u5982GNU C++\u7f16\u8bd1\u5668(g++)\u3001make\u3001libc-dev\u7b49, \u5b83\u63d0\u4f9b\u4e86\u4e00\u7ec4\u5e7f\u6cdb\u7684\u5de5\u5177\uff0c\u65b9\u4fbf\u5f00\u53d1\u4eba\u5458\u8fdb\u884c\u8f6f\u4ef6\u5f00\u53d1\u548c\u6784\u5efa</p> <p>\u5728\u6253\u5305Docker\u73af\u5883\u65f6\u4e3a\u51cf\u5c11\u4f53\u79ef\u53ef\u53ea\u5b89\u88c5gcc, \u4e0d\u5b89\u88c5build-essential</p> <p>libmariadb-dev\uff1a</p> <p>\u662f\u4e13\u95e8\u4e3aMariaDB\u6570\u636e\u5e93\u63d0\u4f9b\u7684\u5f00\u53d1\u5305, \u5b83\u5305\u542b\u4e86\u7528\u4e8e\u6784\u5efa\u548c\u8fde\u63a5\u4e0eMariaDB\u76f8\u5173\u7684\u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u7684\u5934\u6587\u4ef6\u548c\u5e93, \u4e13\u6ce8\u4e8e\u652f\u6301MariaDB\u7684\u7279\u5b9a\u529f\u80fd\u548c\u7279\u6027, \u5e76\u63d0\u4f9b\u4e86\u4e0eMariaDB\u6570\u636e\u5e93\u670d\u52a1\u5668\u5bc6\u5207\u96c6\u6210\u7684\u5f00\u53d1\u5de5\u5177</p> <p>libmariadb-dev-compat\uff1a</p> <p>\u662f\u4e3a\u4e86\u517c\u5bb9MySQL\u800c\u63d0\u4f9b\u7684\u5305, \u5b83\u63d0\u4f9b\u4e86\u4e0eMySQL\u5f00\u53d1\u5305\u7c7b\u4f3c\u7684\u5934\u6587\u4ef6\u548c\u5e93\uff0c\u4ee5\u4fbf\u5728\u4f7f\u7528MariaDB\u65f6\u80fd\u591f\u7f16\u8bd1\u548c\u8fde\u63a5\u57fa\u4e8eMySQL\u7684\u5e94\u7528\u7a0b\u5e8f, \u8fd9\u4e2a\u8f6f\u4ef6\u5305\u53ef\u4ee5\u786e\u4fdd\u73b0\u6709\u7684MySQL\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u5728\u4f7f\u7528MariaDB\u6570\u636e\u5e93\u65f6\u65e0\u9700\u8fdb\u884c\u5927\u91cf\u4fee\u6539\u800c\u7ee7\u7eed\u5de5\u4f5c</p> <p>\u5373\u5982\u679c\u4f60\u5df2\u7ecf\u6709\u4e00\u4e2a\u57fa\u4e8eMySQL\u7684\u5e94\u7528\u7a0b\u5e8f, \u5e76\u4e14\u60f3\u8981\u5c06\u5176\u8fc1\u79fb\u5230MariaDB\u800c\u4e0d\u9700\u8981\u8fdb\u884c\u5927\u91cf\u4fee\u6539, \u90a3\u4e48\u53ef\u4ee5\u8003\u8651\u5b89\u88c5\u6539\u5305\u4ee5\u4fdd\u6301\u5411\u540e\u517c\u5bb9\u6027</p> <p>\u53ef\u4ee5\u7b80\u5355\u7684\u7406\u89e3\u4e3a\u5728\u529f\u80fd\u4e0a<code>libmariadb-dev-compat</code>\u5305\u542b <code>libmariadb-dev</code>\u540c\u65f6\u4e0eMySQL\u517c\u5bb9</p> <p>\u4f7f\u7528apt\u5b89\u88c5\u8be5\u5305\u7684\u540c\u65f6\u4e5f\u4f1a\u5b89\u88c5<code>libmariadb-dev</code></p> <p>default-libmysqlclient-dev\uff1a\u662f\u7528\u4e8e\u9ed8\u8ba4\u7684MySQL\u6570\u636e\u5e93\u670d\u52a1\u5668(\u901a\u5e38\u662fOracle MySQL)\u7684\u5305, \u5305\u542b\u4e86\u6784\u5efa\u548c\u8fde\u63a5MySQL\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u7684\u5934\u6587\u4ef6\u548c\u5e93, \u5982\u679c\u4f60\u4f7f\u7528\u7684\u662fOracle MySQL\u6570\u636e\u5e93, \u6216\u8005\u5728Debian\u7cfb\u53d1\u884c\u7248\u4e2d\u5b89\u88c5\u4e86\u9ed8\u8ba4\u7684MySQL\u670d\u52a1\u5668(MariaDB)\uff0c\u90a3\u4e48\u53ef\u4ee5\u4f7f\u7528\u8be5\u5305</p> <p>\u4f7f\u7528apt\u5b89\u88c5\u8be5\u5305\u7684\u540c\u65f6\u4e5f\u4f1a\u5b89\u88c5<code>libmariadb-dev-compat</code>\u548c<code>libmariadb-dev</code></p> <p>\u603b\u7ed3\u4e00\u4e0b, \u5728Debian\u7cfb\u53d1\u884c\u7248\u4e0a\uff1a</p> <ul> <li>\u5982\u679c\u4f60\u6b63\u5728\u4f7f\u7528MariaDB, \u5e76\u4e14\u9700\u8981\u5f00\u53d1\u4e0eMariaDB\u76f4\u63a5\u4ea4\u4e92\u7684\u5e94\u7528\u7a0b\u5e8f, \u5219\u53ef\u4ee5\u5b89\u88c5<code>libmariadb-dev</code>\u6216<code>ibmariadb-dev-compat</code>\u6216<code>default-libmysqlclient-dev</code></li> <li>\u5982\u679c\u4f60\u6b63\u5728\u4f7f\u7528MariaDB, \u5e76\u4e14\u60f3\u8981\u7f16\u5199\u4e0eMySQL\u517c\u5bb9\u7684\u5e94\u7528\u7a0b\u5e8f, \u6216\u8fc1\u79fb\u5230MySQL, \u5219\u9700\u8981\u5b89\u88c5<code>ibmariadb-dev-compat</code></li> <li>\u5982\u679c\u4f60\u6b63\u5728\u4f7f\u7528MariaDB, \u5e76\u4e14\u60f3\u8981\u7f16\u5199\u4e0eOracle MySQL\u517c\u5bb9\u7684\u5e94\u7528\u7a0b\u5e8f\u6216\u8fc1\u79fb\u5230Oracle MySQL, \u5219\u9700\u8981\u5b89\u88c5<code>default-libmysqlclient-dev</code></li> </ul> <p>\u7b80\u5355\u8bf4:</p> <p>MariaDB -&gt; libmariadb-dev</p> <p>MySQL -&gt; ibmariadb-dev-compat</p> <p>Oracle MySQL -&gt; default-libmysqlclient-dev</p> <p>\u6216\u8005\u76f4\u63a5\u5b89\u88c5default-libmysqlclient-dev , \u4e0d\u518d\u8003\u8651\u6570\u636e\u5e93\u5230\u5e95\u662fMariaDB\u8fd8\u662fMySQL\u8fd8\u662fOracle MySQL</p>"},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/","title":"\u73a9\u5ba2\u4e91","text":""},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/#_2","title":"\u4e00\u3001\u5237\u673a","text":"<p>\u5237\u673a\u5305: https://github.com/hzyitc/armbian-onecloud/releases</p> <p>\u53c2\u8003\uff1a\u73a9\u5ba2\u4e91-Armbian22.08-\u76f4\u5237\u5305-\u5185\u68385.18-\u5404\u79cd\u5e01\uff0c\u8b6c\u5982\u8fc5\u96f7\u73a9\u5ba2\u4e91 \u73a9\u5ba2\u5e01 \u777f\u667a\u6fc0\u6d3b\u7801\u7b49-\u6069\u5c71\u65e0\u7ebf\u8bba\u575b (right.com.cn)</p> <p>\u5237\u673a\u6210\u529f\u4e4b\u540e\u6309\u7167\u5f15\u5bfc\u8fdb\u5165\u7cfb\u7edf\u5373\u53ef\u3002</p>"},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/#_3","title":"\u4e8c\u3001\u914d\u7f6e","text":""},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/#1ipdns","title":"1\u3001\u914d\u7f6e\u9759\u6001IP\u548cDNS","text":"<p><pre><code>nano /etc/network/interfaces\n\n# \u5c06\u4ee5\u4e0b\u5185\u5bb9\u8ffd\u52a0\u5230\u6587\u4ef6\u6700\u540e\uff1a\nauto eth0\niface eth0 inet static\naddress 192.168.1.254\nnetmask 255.255.255.0\ngateway 192.168.1.1\ndns-nameservers 223.5.5.5 223.6.6.6\n# hwaddress 00:22:6D:50:42:A9\n\n# PS\uff1a\u4ee5\u4e0a\u7684address\u3001netmask\u548cgateway\u6839\u636e\u4f60\u7684\u5b9e\u9645\u60c5\u51b5\u4fee\u6539, hwaddress\u662fmac\u5730\u5740(\u975e\u5fc5\u8981\u4e0d\u6dfb\u52a0)\n</code></pre> </p>"},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/#2","title":"2\u3001\u914d\u7f6e\u8f6f\u4ef6\u6e90\u5e76\u66f4\u65b0","text":"<p>a\u3001\u5c06\u9ed8\u8ba4\u6e90\u4e2d\u7684http\u6539\u6210https</p> <pre><code># \u628ahttp\u6539\u6210https\nnano /etc/apt/sources.list.d/armbian.list\n# \u628ahttp\u6539\u6210https\nnano /etc/apt/sources.list.d/nala.list\n</code></pre> <p>b\u3001\u6dfb\u52a0\u6e05\u534e\u6e90</p> <pre><code>mv /etc/apt/sources.list /etc/apt/sources.list.bak\nnano /etc/apt/sources.list\n\n# \u5c06\u4ee5\u4e0b\u5185\u5bb9\u590d\u5236\u5230sources.list\u4e2d\uff1a\ndeb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free\ndeb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free\n\ndeb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free\n\ndeb https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free\n</code></pre> <p>c\u3001\u66f4\u65b0\u6e90\u548c\u5305</p> <pre><code>apt update &amp;&amp; apt upgrade -y\n</code></pre> <p>d\u3001\u8865\u5168python\u73af\u5883\u548c\u8bbe\u7f6epip\u6e90\uff08\u53ef\u9009\uff09</p> <pre><code>apt install -y python3-pip python3-venv\npip3 config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple\n</code></pre>"},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/#3","title":"3\u3001\u914d\u7f6e\u65f6\u533a","text":"<pre><code>ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\n</code></pre>"},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/#4docker","title":"4\u3001\u5b89\u88c5Docker","text":"<pre><code>curl -fsSL https://get.docker.com -o get-docker.sh \nsh get-docker.sh &amp;&amp; rm get-docker.sh\n\n# \u4ee5\u4e0b\u547d\u4ee4\u662f\u4e00\u4e2a\u6574\u4f53, \u5176\u4e2d:\n# registry-mirrors\u662f\u8bbe\u7f6e\u955c\u50cf\u52a0\u901f\n# bip\u662f\u8bbe\u7f6eDocker\u521b\u5efa\u7684\u7f51\u7edc\u7684\u5730\u5740\u6bb5\n# dns\u662f\u8bbe\u7f6eDocker\u7684DNS\u670d\u52a1\u5668\n# data-root\u662f\u8bbe\u7f6eDocker\u8fd0\u884c\u65f6\u4f7f\u7528\u7684\u6839\u8def\u5f84\uff0c\u9ed8\u8ba4/var/lib/docker\ntee /etc/docker/daemon.json &lt;&lt;-'EOF'\n{\n\"registry-mirrors\": [\"https://t6wp3k6n.mirror.aliyuncs.com\"],\n\"dns\": [\"223.5.5.5\", \"223.6.6.6\"],\n\"bip\": \"192.168.255.1/24\",\n# \"data-root\": \"/path/to/docke-data\"\n}\nEOF\n</code></pre>"},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/#5mariadb","title":"5\u3001\u5b89\u88c5Mariadb","text":"<p>a\u3001\u6570\u636e\u5e93\u5b89\u88c5</p> <pre><code>apt install -y mariadb-server mariadb-client\n</code></pre> <p>b\u3001\u6570\u636e\u5e93\u914d\u7f6e</p> <pre><code># \u6267\u884c\u4e0b\u65b9\u547d\u4ee4\u51fa\u73b0\u4ea4\u4e92\u5f0f\u4f1a\u8bdd\u914d\u7f6emysql\nmysql_secure_installation\n\n# \u767b\u5f55mysql\u7ee7\u7eed\u914d\u7f6e\nmysql\nuse mysql\ngrant all privileges on *.* to 'root'@'%' identified by 'mariadb' with grant option;\nflush privileges;\nexit\n</code></pre> <p>c\u3001\u6570\u636e\u5e93\u6587\u4ef6\u914d\u7f6e</p> <pre><code>nano /etc/mysql/mariadb.conf.d/50-server.cnf\n\n# \u627e\u5230\u8fd9\u4e00\u884c\nbind-address            = 127.0.0.1\n\n# \u6539\u6210\nbind-address            = 0.0.0.0\n</code></pre> <p>d\u3001\u91cd\u542f\u6570\u636e\u5e93</p> <pre><code>service mariadb restart\n</code></pre>"},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/#6zerotier","title":"6\u3001\u5b89\u88c5ZeroTier","text":"<pre><code>curl -s https://install.zerotier.com | bash\n\n# \u5b89\u88c5\u6210\u529f\u540e\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u52a0\u5165\u7f51\u7edc\nzerotier-cli join \"network id\"\n</code></pre>"},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/#7aria2","title":"7\u3001\u5b89\u88c5aria2","text":"<p>a\u3001\u62c9\u53d6\u955c\u50cf</p> <pre><code>docker pull p3terx/aria2-pro\ndocker pull p3terx/ariang\n</code></pre> <p>b\u3001\u521b\u5efa\u6587\u4ef6\u914d\u7f6e\u76ee\u5f55\u548c\u6587\u4ef6\u4e0b\u8f7d\u76ee\u5f55</p> <pre><code>mkdir /etc/aria2\nmkdir -p /mnt/mmcblk0p1/aria2\n</code></pre> <p>c\u3001\u8fd0\u884c\u5bb9\u5668</p> <pre><code># \u6ce8\u610f3\u70b9:\n# 1\u3001RPC_SECRET=onecloud \u662frpc\u8ba4\u8bc1token, \u53ef\u81ea\u884c\u8bbe\u5b9a\n# 2\u3001-v /etc/aria2 \u662f\u6b65\u9aa4b\u4e2d\u521b\u5efa\u7684\u6587\u4ef6\u914d\u7f6e\u76ee\u5f55\n# 3\u3001 -v /mnt/mmcblk0p1/aria2 \u662f\u6b65\u9aa4b\u4e2d\u521b\u5efa\u7684\u6587\u4ef6\u4e0b\u8f7d\u76ee\u5f55\ndocker run -d \\\n    --name aria2-pro \\\n    --restart unless-stopped \\\n    --log-opt max-size=1m \\\n    -e PUID=$UID \\\n    -e PGID=$GID \\\n    -e UMASK_SET=022 \\\n    -e RPC_SECRET=onecloud \\\n    -e RPC_PORT=6800 \\\n    -p 6800:6800 \\\n    -e LISTEN_PORT=6888 \\\n    -p 6888:6888 \\\n    -p 6888:6888/udp \\\n    -v /etc/aria2:/config \\\n    -v /mnt/mmcblk0p1/aria2:/downloads \\\n    p3terx/aria2-pro\n\ndocker run -d \\\n    --name ariang \\\n    --log-opt max-size=1m \\\n    --restart unless-stopped \\\n    -p 6880:6880 \\\n    p3terx/ariang\n</code></pre> <p>d\u3001\u8bbf\u95ee</p> <p>http://ip:6880</p>"},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/#8samba","title":"8\u3001\u5b89\u88c5samba","text":"<p>a\u3001\u5b89\u88c5</p> <pre><code>apt install -y samba\n</code></pre> <p>b\u3001\u914d\u7f6e</p> <pre><code># \u521b\u5efa\u4e00\u4e2a\u5206\u914d\u5230sambashare\u7ec4\u4e14\u4e0d\u53ef\u767b\u5f55shell\u7684\u7528\u6237\nuseradd -s /usr/sbin/nologin -g sambashare samba\n\n# \u8bbe\u7f6e\u5bc6\u7801\nsmbpasswd -a samba\n\n# \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\nnano /etc/samba/smb.conf\n\n# \u5728\u6587\u4ef6\u6700\u540e\u5199\u5165\u914d\u7f6e\n[samba]\n  comment = Files Share\n  path = /mnt/mmcblk0p1/aria2\n  browseable = yes\n  read only = yes\n\n# \u91cd\u542f\u670d\u52a1\nservice smbd restart\n</code></pre>"},{"location":"linux/%E8%A7%A3%E5%8E%8BZIP%E4%B9%B1%E7%A0%81/","title":"Linux\u89e3\u538bZIP\u4e71\u7801","text":"<p>\u95ee\u9898\u539f\u56e0</p> <p>Windows\u4e0b\u538b\u7f29zip\u6587\u4ef6\u4f7f\u7528\u7684\u662fCP936\u7f16\u7801</p> <p>CP936\u7f16\u7801\u5c31\u662fGBK\uff0c\u5f53IBM\u53d1\u660e\u4ee3\u7801\u9875\u65f6\uff0c\u628aGBK\u653e\u5728\u4e86\u7b2c936\u9875\uff0c\u6240\u4ee5GBK\u53c8\u88ab\u79f0\u4e3aCP936\u3002</p> <p>\u89e3\u51b3\u529e\u6cd5</p> <p><code>unzip -O CP936 xxx.zip</code></p>"},{"location":"linux/%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/","title":"Linux\u914d\u7f6eIP\u548cDNS","text":""},{"location":"linux/%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#ip","title":"\u4e00\u3001\u914d\u7f6eIP","text":""},{"location":"linux/%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#debian","title":"Debian","text":""},{"location":"linux/%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#_1","title":"\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>vim /etc/network/interfaces\n</code></pre>"},{"location":"linux/%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#_2","title":"\u8ffd\u52a0\u914d\u7f6e\u5185\u5bb9","text":""},{"location":"linux/%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#ip_1","title":"\u52a8\u6001IP","text":"<pre><code>auto eth1\niface eth1 inet dhcp\n</code></pre>"},{"location":"linux/%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#ip_2","title":"\u9759\u6001IP","text":"<pre><code>auto eth1\niface eth1 inet static\naddress 192.168.1.2\nnetmask 255.255.255.0\ngateway 192.168.1.1\n# dns-nameservers 223.5.5.5 223.6.6.6  # \u6b64\u5904\u53ef\u914d\u7f6eDNS\n# hwaddress 00:22:6D:50:42:A9  # \u6b64\u5904\u53ef\u914d\u7f6eMAC\u5730\u5740\n</code></pre> <p>\u91cd\u542f\u7f51\u7edc\u670d\u52a1</p> <pre><code># \u65b9\u6cd51\n/etc/init.d/networking restart\n# \u65b9\u6cd52\nservice networking restart\n# \u65b9\u6cd53\nsystemctl restart networking\n</code></pre>"},{"location":"linux/%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#dns","title":"\u914d\u7f6eDNS","text":"<p>\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6</p> <pre><code>vim /etc/resolv.conf\n</code></pre> <p>\u4fee\u6539\u914d\u7f6e\u5185\u5bb9</p> <pre><code>nameserver 223.5.5.5\nnameserver 223.6.6.6\n</code></pre>"},{"location":"linux/%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#centos","title":"CentOS","text":""},{"location":"linux/%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#_3","title":"\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>vi /etc/sysconfig/network-scripts/ifcfg-eth0\n</code></pre>"},{"location":"linux/%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#_4","title":"\u4fee\u6539\u914d\u7f6e\u5185\u5bb9","text":""},{"location":"linux/%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#ipdns","title":"\u52a8\u6001IP\u548cDNS","text":"<pre><code>BOOTPROTO=dhcp      # \u8bbe\u7f6e\u4e3adhcp\u5f00\u542fDHCP\u670d\u52a1\uff0c\u8bbe\u7f6e\u4e3astatic\u542f\u7528\u9759\u6001IP\u5730\u5740\nMM_Controlled=no    # network mamager\u7684\u53c2\u6570\uff0c\u5b9e\u65f6\u751f\u6548\uff0c\u4e0d\u9700\u8981\u91cd\u542f\nONBOOT=yes          # \u8bbe\u7f6e\u4e3ayes\uff0c\u5f00\u673a\u81ea\u52a8\u542f\u7528\u7f51\u7edc\u8fde\u63a5\nUSERCTL=yes         # \u662f\u5426\u5141\u8bb8\u975eroot\u7528\u6237\u63a7\u5236\u8be5\u8bbe\u5907      \nDNS1=223.5.5.5\nDNS2=223.6.6.6\n</code></pre>"},{"location":"linux/%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#ipdns_1","title":"\u9759\u6001IP\u548cDNS","text":"<pre><code>ONBOOT=yes\nBOOTPROTO=static\nMM_Controlled=no\nUSERCTL=yes\nIPADDR=192.168.254.1\nNETMASK=255.255.255.0\nGATEWAY=192.168.254.254\nDNS1=114.114.114.114\nDNS2=8.8.8.8\n</code></pre>"},{"location":"linux/%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#_5","title":"\u91cd\u542f\u7f51\u7edc\u670d\u52a1","text":"<pre><code>systemctl restart network\n</code></pre>"},{"location":"linux/%E9%85%8D%E7%BD%AEUV%E4%BD%BF%E7%94%A8%E5%9B%BD%E5%86%85%E6%BA%90/","title":"\u914d\u7f6eUV\u4f7f\u7528\u56fd\u5185\u6e90","text":"<pre><code>echo \"export UV_DEFAULT_INDEX=https://pypi.tuna.tsinghua.edu.cn/simple\" &gt;&gt; .zprofile\n</code></pre>"},{"location":"mac/MacOS%E8%BD%AF%E4%BB%B6/","title":"Mac\u8f6f\u4ef6","text":"<p>\u5939\u5e26\u4e00\u6761\u547d\u4ee4\u53bb\u9664\u8f6f\u4ef6\u66f4\u65b0\u7684\u5c0f\u7ea2\u70b9</p> <p><code>defaults write com.apple.systempreferences AttentionPrefBundleIDs 0</code></p> <p>\u7834\u89e3\u5de5\u5177\uff1a https://github.com/QiuChenly/CoreInject?tab=readme-ov-file</p> <p>Adobe\u4e0b\u8f7d\u5de5\u5177\uff1a https://github.com/X1a0He/Adobe-Downloader</p>"},{"location":"mac/MacOS%E8%BD%AF%E4%BB%B6/#_1","title":"\u5f00\u53d1\u5de5\u5177","text":"<p>ARDM: <code>brew install --cask another-redis-desktop-manager</code></p> <p>CotEditor: <code>brew install --cask coteditor</code></p> <p>DBeaver: <code>brew install --cask dbeaver-community</code></p> <p>DevHub</p> <p>DevToys: <code>brew install --cask devtoys</code></p> <p>Ghostty: <code>brew install --cask ghostty</code></p> <p>Hoppscotch: <code>brew install --cask hoppscotch</code></p> <p>OrbStack: <code>brew install --cask orbstack</code></p> <p>Fish</p> <p>VS Code: <code>brew install --cask visual-studio-code</code></p> <p>Zed: <code>brew install --cask zed</code></p>"},{"location":"mac/MacOS%E8%BD%AF%E4%BB%B6/#_2","title":"\u540e\u53f0\u5de5\u5177","text":"<p>Bob</p> <p>BoringNotch</p> <p>ClashX.Meta</p> <p>Karabiner-Elements: <code>brew install --cask karabiner-elements</code></p> <p>KeyboardHolder: <code>brew install --cask keyboardholder</code></p> <p>Maccy: <code>brew install --cask maccy</code></p> <p>MacZip: <code>brew install --cask maczip</code></p> <p>MonitorControl: <code>brew install --cask monitorcontrol</code></p> <p>Mos: <code>brew install --cask mos</code></p>"},{"location":"mac/MacOS%E8%BD%AF%E4%BB%B6/#_3","title":"\u5b9e\u7528\u5de5\u5177","text":"<p>CrystalFetch: <code>brew install --cask crystalfetch</code></p> <p>IINA: <code>brew install --cask iina</code></p> <p>IINA+</p> <p>iPortForwarder</p> <p>LocalSend: <code>brew install --cask localsend</code></p> <p>Motrix: <code>brew install --cask motrix</code></p> <p>OpenMTP: <code>brew install --cask openmtp</code></p> <p>Parallels Clent: <code>brew install --cask parallels-client</code></p> <p>Pearcleaner: <code>brew install --cask pearcleaner</code></p> <p>Sloth: <code>brew install --cask sloth</code></p> <p>VirtualBuddy: <code>brew install --cask virtualbuddy</code></p> <p>Edge\u6d4f\u89c8\u5668\uff1a <code>brew install --cask microsoft-edge</code></p> <p>MarkDown\uff1a <code>brew install --cask typora</code></p> <p>\u5fae\u4fe1\uff1a <code>brew install --cask wechat</code></p>"},{"location":"mac/MacOS%E8%BD%AF%E4%BB%B6/#_4","title":"\u5176\u4ed6\u5de5\u5177","text":"<p>\u8fdc\u7a0b\u684c\u9762: Microsoft Remote Desktop</p> <p>\u5185\u7f51\u7a7f\u900f: ZeroTier: <code>brew install --cask zerotier-one</code></p> <p>\u67e5\u770b\u5feb\u6377\u952e: KeyClu: <code>brew install --cask keyclu</code></p> <p>\u672c\u6587\u7f16\u8f91: TextMate: <code>brew install --cask textmate</code></p> <p>Mp3Tag\u7f16\u8f91: MusicBrainz Picard: <code>brew install --cask musicbrainz-picard</code></p> <p>\u89c6\u9891\u683c\u5f0f\u8f6c\u6362: HandBrake: <code>brew install --cask handbrake-app</code></p> <p>\u82f1\u8bed\u5355\u8bcd\u5b66\u4e60: Anki</p>"},{"location":"mac/MacOS%E8%BD%AF%E4%BB%B6/#_5","title":"\u8d44\u6e90\u63a8\u8350","text":"<p>Awesome Mac</p>"},{"location":"mac/Mac%E5%AE%89%E8%A3%85Office%E5%B9%B6%E6%BF%80%E6%B4%BB/","title":"Mac\u5b89\u88c5Office\u5e76\u6fc0\u6d3b","text":""},{"location":"mac/Mac%E5%AE%89%E8%A3%85Office%E5%B9%B6%E6%BF%80%E6%B4%BB/#_1","title":"\u53c2\u8003","text":"<p>Office for Mac</p> <p>Microsoft-Office-For-MacOS</p>"},{"location":"mac/Mac%E5%AE%89%E8%A3%85Office%E5%B9%B6%E6%BF%80%E6%B4%BB/#_2","title":"\u79bb\u7ebf\u5b89\u88c5\u5305","text":"<p>\u5bf9\u4e8emac\u6765\u8bb2, Office for Mac(Office 365)\u3001Office LTSC for Mac 2021 \u548c Office 2019 for Mac\u90fd\u662f\u540c\u4e00\u4e2a\u5b89\u88c5\u5305, \u5982\u4f55\u6fc0\u6d3b\u4ea7\u54c1\u51b3\u5b9a\u4e86\u54ea\u4e9b\u529f\u80fd\u53ef\u4f9b\u7528\u6237\u4f7f\u7528</p> <ul> <li>\u5305\u542b Microsoft Teams \u7684\u79bb\u7ebf\u5b89\u88c5\u5305: https://go.microsoft.com/fwlink/p/?linkid=2009112</li> <li>\u4e0d\u5305\u542b Microsoft Teams \u7684\u79bb\u7ebf\u5b89\u88c5\u5305: https://go.microsoft.com/fwlink/p/?linkid=525133</li> </ul> <p>\u9664\u4e86Teams\u5916, Office\u5957\u4ef6\u4e2d\u5305\u542b Word\u3001Excel\u3001PowerPoint\u3001OneNote\u3001Outlook\u548cOneDrive, \u5b89\u88c5\u65f6\u53ef\u81ea\u5df1\u51b3\u5b9a\u5b89\u88c5\u54ea\u4e9b\u5957\u4ef6</p> <p>\u540c\u65f6, \u8fd8\u63d0\u4f9b\u4e86\u5957\u4ef6\u7684\u72ec\u7acb\u5b89\u88c5\u5305: https://docs.microsoft.com/zh-cn/officeupdates/update-history-office-for-mac#most-current-packages-for-office-for-mac</p>"},{"location":"mac/Mac%E5%AE%89%E8%A3%85Office%E5%B9%B6%E6%BF%80%E6%B4%BB/#vol","title":"VOL\u6fc0\u6d3b","text":"<p>Microsoft Office 2021 LTSC Volume License Serializer</p> <p>Microsoft Office 2019 Volume License Serializer</p>"},{"location":"mac/UTM%E5%AE%89%E8%A3%85Windows/","title":"UTM\u5b89\u88c5Windows","text":"<p>\u4e3a\u4ec0\u4e48\u7528UTM\u4e0d\u7528Parallels Desktop?</p> <p>\u4f7f\u7528PD\u603b\u662f\u78b0\u5230Windows\u65f6\u95f4\u53d8\u62102018\u5e74\u5bfc\u81f4Mac\u65f6\u95f4\u4e5f\u53d8\u62102018\u5e74\u7684\u95ee\u9898</p> <p>\u90fd\u662f\u57fa\u4e8eQEMU, \u4f46\u662fUTM\u514d\u8d39, \u4e14\u63d0\u4f9b\u4e24\u79cd\u6a21\u5f0f\u865a\u62df\u5316\u548c\u6a21\u62df, \u5176\u4e2d\u6a21\u62df\u65b9\u5f0f\u4e0d\u53d7CPU\u67b6\u6784\u7684\u9650\u5236</p>"},{"location":"mac/UTM%E5%AE%89%E8%A3%85Windows/#_1","title":"\u4e00\u3001\u4e0b\u8f7d\u8f6f\u4ef6\u548c\u955c\u50cf","text":"<ul> <li> <p>UTM \u662f\u865a\u62df\u673a\u8f6f\u4ef6</p> </li> <li> <p>spice-guest-tools-0.164.3.iso \u63d0\u4f9b\u4e3b\u673a\u548c\u865a\u62df\u673a\u4e4b\u95f4\u590d\u5236\u3001\u7c98\u8d34\u548c\u5171\u4eab\u7b49, \u4ee5\u53ca\u865a\u62df\u673a\u5c4f\u5e55\u81ea\u9002\u5e94\u5206\u8fa8\u7387\u7b49\u529f\u80fd</p> </li> <li> <p>virtio-win-0.1.221.iso \u63d0\u4f9bWindows\u5bf9VirtIO\u78c1\u76d8\u7684\u652f\u6301</p> </li> <li> <p>UUP dump \u7f51\u7ad9\u63d0\u4f9bWindows\u955c\u50cf\u4e0b\u8f7d</p> </li> </ul> <p>\u6ce8\u610f, UTM\u5bf9\u7cfb\u7edf\u7248\u672c\u6709\u8981\u6c42, \u8981\u6c42build number(\u5185\u90e8\u7248\u672c)\u7b49\u4e8e\u6216\u9ad8\u4e8e21390, \u5426\u5219\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u62a5\u9519</p> <p>\u70b9\u51fb\u6b64\u5904 \u53ef\u83b7\u53d6\u6700\u65b0\u7684Window\u7248\u672c\u4fe1\u606f, \u76f4\u63a5\u83b7\u53d6Windows11\u7684\u6700\u65b0\u6b63\u5f0f\u7248\u7684\u5185\u90e8\u7248\u672c\u540e\u53bb UUP dump \u4e2d\u641c\u7d22\u5e76\u4e0b\u8f7d</p> <p>\u8bf4\u660e\u4e00\u4e0b, \u6b63\u5f0f\u7248\u7684Windows 10\u7684\u5185\u90e8\u7248\u672c\u5747\u4f4e\u4e8e21390</p> <p>\u60f3\u8981\u5b89\u88c5Windows 10\u53ea\u80fd\u4f7f\u7528Insider Preview\u4e2d\u7684Beta\u901a\u9053\u6216Dev\u901a\u9053\u7684\u7248\u672c(\u70e6\u4eba\u7684\u66f4\u65b0)</p>"},{"location":"mac/UTM%E5%AE%89%E8%A3%85Windows/#windows11","title":"\u4e8c\u3001\u5b89\u88c5Windows11","text":""},{"location":"mac/UTM%E5%AE%89%E8%A3%85Windows/#1","title":"\u6b65\u9aa41","text":"<p>\u6253\u5f00UTM -&gt; \u65b0\u5efa\u865a\u62df\u673a  -&gt; \u865a\u62df\u5316 -&gt; Windows -&gt; \u53d6\u6d88\u52fe\u9009\"\u5bfc\u5165 VHDX \u78c1\u76d8\u955c\u50cf\" -&gt; \u70b9\u51fb\u4e0b\u65b9\u6309\u94ae\"\u6d4f\u89c8\" -&gt; \u9009\u62e9Windows11 ISO\u955c\u50cf\u6587\u4ef6 -&gt; \u4e0b\u4e00\u6b65 -&gt; \u4e0b\u4e00\u6b65 -&gt; \u4e0b\u4e00\u6b65 -&gt; \u4e0b\u4e00\u6b65 -&gt; \u52fe\u9009\"\u6253\u5f00 VM \u8bbe\u7f6e\" -&gt; \u5b8c\u6210</p> <p>\u4e0a\u8ff04\u4e2a\u4e0b\u4e00\u6b65\u4e4b\u95f4\u76843\u4e2a\u8fc7\u7a0b\u4e2d, \u53ef\u914d\u7f6e\u914d\u7f6e\u5185\u5b58\u548cCPU\u3001\u786c\u76d8\u5927\u5c0f\u548c\u5171\u4eab\u6587\u4ef6\u5939\u529f\u80fd, \u9ed8\u8ba4\u6216\u81ea\u5b9a\u4e49\u5747\u53ef</p>"},{"location":"mac/UTM%E5%AE%89%E8%A3%85Windows/#2","title":"\u6b65\u9aa42","text":"<p>\u627e\u5230\u9a71\u52a8\u5668\u5206\u7c7b\u4e0b\u7684NVMe Deive -&gt; \u5355\u51fb -&gt; \u63a5\u53e3 -&gt; \u9009\u62e9\"VirtIO\" -&gt; \u4fdd\u5b58</p> <p>\u622a\u6b62\u52302022\u5e748\u670823\u65e5, UTM\u7a33\u5b9a\u72483.2.4\u4e0d\u652f\u6301\u6682\u505c\u5bf9\u4e00\u4e2a\u6216\u591a\u4e2a\u9a71\u52a8\u5668\u4f7f\u7528NVMe\u63a5\u53e3\u7684\u865a\u62df\u673a</p> <p>\u5177\u4f53\u60c5\u51b5\u53c2\u89c1 Windows 11 Mac M1 Pro - Pause Error \u00b7 Issue #3918 \u00b7 utmapp/UTM (github.com))</p> <p>\u4e5f\u5c31\u662f\u8bf4\u5982\u679c\u4e0d\u6539\u6210VirtIO, \u90a3\u4e48\u6bcf\u6b21\u7528\u5b8c\u865a\u62df\u673a\u540e\u5173\u95ed\u865a\u62df\u673a\u7cfb\u7edf, \u6bd4\u8f83\u9ebb\u70e6, \u800cVirtIO\u5219\u652f\u6301\u6682\u505c\u529f\u80fd</p>"},{"location":"mac/UTM%E5%AE%89%E8%A3%85Windows/#3","title":"\u6b65\u9aa43","text":"<p>1\u3001\u6839\u636e\u5f15\u5bfc\u4e00\u6b65\u4e00\u6b65\u7684\u5b89\u88c5Windows, \u7136\u540e\u9047\u5230\u95ee\u9898\"\u8fd9\u53f0\u7535\u8111\u65e0\u6cd5\u8fd0\u884c Windows 11\"</p> <p>2\u3001\u6b64\u65f6, \u6309\u4e0bShift+F10, \u5728\u5f39\u51fa\u7684CMD\u7a97\u53e3\u4e2d\u8f93\u5165regedit\u5e76\u56de\u8f66, \u5b9a\u4f4d\u5230HKEY_LOCAL_MACHINE\\SYSTEM\\Setup</p> <p>3\u3001\u5728Setup\u4e0a\u53f3\u952e &gt; \u65b0\u5efa &gt; \u9879 &gt; \u547d\u540d\u4e3a LabConfig</p> <p>4\u3001\u5728LabConfig\u4e0a\u53f3\u952e &gt; \u65b0\u5efa &gt; DWORD (32 \u4f4d)\u503c &gt; \u547d\u540d\u4e3a BypassTPMCheck &gt; \u6253\u51fb\u6253\u5f00\u8be5\u952e\u503c\u5e76\u8f93\u5165 1 &gt; \u70b9\u51fb\u786e\u5b9a</p> <p>5\u3001\u5728LabConfig\u4e0a\u53f3\u952e &gt; \u65b0\u5efa &gt; DWORD (32 \u4f4d)\u503c &gt; \u547d\u540d\u4e3a BypassSecureBootCheck &gt; \u6253\u51fb\u6253\u5f00\u8be5\u952e\u503c\u5e76\u8f93\u5165 1 &gt; \u70b9\u51fb\u786e\u5b9a</p> <p>6\u3001\u5173\u95ed\u6ce8\u518c\u8868 &gt;\u5173\u95edCMD &gt;\u56de\u5230Windows\u5b89\u88c5\u9875\u9762 &gt;\u70b9\u51fb\u5de6\u4e0a\u89d2\u7684\u8fd4\u56de\u7bad\u5934\u7684\u6309\u94ae &gt; \u70b9\u51fb\u6211\u6ca1\u6709\u4ea7\u54c1\u5bc6\u94a5 &gt; \u52fe\u9009\u63a5\u53d7\u6761\u6b3e &gt; \u4e0b\u4e00\u6b65</p> <p>7\u3001\u9009\u62e9\u7b2c\u4e8c\u9879(\u4ee5\"\u81ea\u5b9a\u4e49:\"\u5f00\u5934), \u53d1\u73b0\u6ca1\u6709\u53ef\u4f9bWindows\u5b89\u88c5\u7684\u786c\u76d8</p> <p>8\u3001\u70b9\u51fbUTM\u8f6f\u4ef6\u53f3\u4e0a\u89d2\u5012\u6570\u7b2c\u4e8c\u4e2a\u56fe\u6807, \u66f4\u6362\u6302\u8f7d\u7684\u955c\u50cf\u4e3a\u5148\u524d\u4e0b\u8f7d\u7684virtio-win-0.1.221.iso, \u7136\u540e\u56de\u5230Windows\u5b89\u88c5\u754c\u9762</p> <p>9\u3001\u70b9\u51fb\u5de6\u4e0b\u89d2\u7684\"\u52a0\u8f7d\u9a71\u52a8\u7a0b\u5e8f\" &gt; \u6d4f\u89c8 &gt; CD\u9a71\u52a8\u5668  &gt; \u627e\u5230\u6700\u4e0b\u9762\u7684\"viostor\" &gt; \u627e\u5230\u6700\u4e0b\u9762\u7684\"w11\" &gt; \u70b9\u51fb\"ARM64\" &gt; \u70b9\u51fb\u786e\u5b9a &gt; \u70b9   \u51fb\"\u4e0b\u4e00\u9875\" &gt; \u7b49\u5f85\u9a71\u52a8\u52a0\u8f7d\u5b8c\u6bd5\u4f1a, \u81ea\u52a8\u56de\u5230\u5b89\u88c5\u754c\u9762</p> <p>10\u3001\u70b9\u51fbUTM\u8f6f\u4ef6\u53f3\u4e0a\u89d2\u5012\u6570\u7b2c\u4e8c\u4e2a\u56fe\u6807, \u66f4\u6362\u6302\u8f7d\u7684\u955c\u50cf\u4e3a\u5148\u524d\u4e0b\u8f7d\u7684Window 11 ISO\u5b89\u88c5\u955c\u50cf &gt; \u70b9\u51fb\u5de6\u4e0b\u89d2\u7684\"\u5237\u65b0\" &gt; \u70b9\u51fb\"\u4e0b\u4e00\u9875\"  &gt; \u81f3\u6b64, \u5df2\u7ecf\u5f00\u59cb\u88c5\u5b89Windows 11</p> <p>11\u3001\u5b89\u88c5\u6210\u529f\u540e, \u7ecf\u8fc7\u8bbe\u7f6e\u8fdb\u5165Windows 11\u684c\u9762\u540e, \u70b9\u51fbUTM\u8f6f\u4ef6\u53f3\u4e0a\u89d2\u5012\u6570\u7b2c\u4e8c\u4e2a\u56fe\u6807, \u66f4\u6362\u6302\u8f7d\u7684\u955c\u50cf\u4e3a\u5148\u524d\u4e0b\u8f7d\u7684spice-guest-tools-0.164.3.iso, \u5b89\u88c5</p> <p>12\u3001\u641e\u5b9a!</p>"},{"location":"mac/%E4%BD%BF%E7%94%A8lima%E5%AE%9E%E7%8E%B0docker/","title":"\u4f7f\u7528lima\u5b9e\u73b0docker","text":""},{"location":"mac/%E4%BD%BF%E7%94%A8lima%E5%AE%9E%E7%8E%B0docker/#lima","title":"\u4e0b\u8f7dlima","text":"<p>https://github.com/lima-vm/lima</p>"},{"location":"mac/%E4%BD%BF%E7%94%A8lima%E5%AE%9E%E7%8E%B0docker/#docker","title":"\u542f\u52a8docker\u865a\u62df\u673a","text":"<pre><code>limactl start --name=default --cpus=2 --memory=4 --vm-type=vz --network=vzNAT --mount-type=virtiofs template://docker\n</code></pre> <p>\u5173\u4e8e\u5404\u9879\u53c2\u6570\u8bf4\u660e\u8bf7\u53c2\u8003: </p> <p>https://lima-vm.io/docs/config/vmtype/</p> <p>https://lima-vm.io/docs/config/network/</p>"},{"location":"mac/%E4%BD%BF%E7%94%A8lima%E5%AE%9E%E7%8E%B0docker/#docker_1","title":"\u914d\u7f6edocker\u547d\u4ee4","text":""},{"location":"mac/%E4%BD%BF%E7%94%A8lima%E5%AE%9E%E7%8E%B0docker/#_1","title":"\u4e8c\u8fdb\u5236\u65b9\u5f0f(\u4e0d\u5efa\u8bae)","text":"<p>\u4e0b\u8f7d\u4e8c\u8fdb\u5236\u6587\u4ef6, \u6388\u4e88\u6267\u884c\u6743\u9650\u5e76\u52a0\u5165\u73af\u5883\u53d8\u91cf, \u4e0b\u8f7d\u5730\u5740\u4e3a: </p> <p>https://download.docker.com/mac/static/stable/aarch64/</p> <p>\u6b64\u65f6\u8fd8\u9700\u914d\u7f6edocker\u4e0a\u4e0b\u6587:</p> <pre><code># \u6ce8\u610f\u5c06\u7b2c\u4e00\u6761\u547d\u4ee4\u4e2d\u7684whls\u66ff\u6362\u6210\u4f60\u7684\u7528\u6237\u540d\ndocker context create lima-default --docker \"host=unix:///Users/whls/.lima/default/sock/docker.sock\"\ndocker context use lima-default\n</code></pre>"},{"location":"mac/%E4%BD%BF%E7%94%A8lima%E5%AE%9E%E7%8E%B0docker/#_2","title":"\u522b\u540d\u65b9\u5f0f(\u63a8\u8350)","text":"<p>\u5c06\u4ee5\u4e0b\u547d\u4ee4\u6dfb\u52a0\u73af\u5883\u53d8\u91cf:</p> <pre><code>alias docker=\"lima docker\"\n</code></pre>"},{"location":"mac/%E4%BD%BF%E7%94%A8lima%E5%AE%9E%E7%8E%B0docker/#_3","title":"\u8b66\u544a\u5904\u7406","text":"<pre><code># \u6267\u884c\u547d\u4ee4docker info\u63d0\u793a:\nWARNING: bridge-nf-call-iptables is disabled\nWARNING: bridge-nf-call-ip6tables is disabled\n\n# \u8fdb\u5165\u865a\u62df\u673a\nlima\n\n# \u914d\u7f6eiptables\u548cip6tables\necho \"net.bridge.bridge-nf-call-iptables = 1\" | sudo tee -a /etc/sysctl.conf\necho \"net.bridge.bridge-nf-call-ip6tables = 1\" | sudo tee -a /etc/sysctl.conf\n\n# \u4f7f\u914d\u7f6e\u751f\u6548\nsudo sysctl -p\n\n# \u5982\u679c\u63d0\u793a:\nsysctl: cannot stat /proc/sys/net/bridge/bridge-nf-call-iptables: No such file or directory\nsysctl: cannot stat /proc/sys/net/bridge/bridge-nf-call-ip6tables: No such file or directory\n\n# \u5219\u9700\u8981\u52a0\u8f7d br_netfilter \u6a21\u5757:\nsudo modprobe br_netfilter\n\n# \u9a8c\u8bc1\u662f\u5426\u52a0\u8f7d br_netfilter \u6a21\u5757\u6210\u529f:\nlsmod | grep br_netfilter\n# \u5982\u679c\u8f93\u51fa\u4e2d\u5305\u542b br_netfilter\uff0c\u5219\u8bf4\u660e\u6a21\u5757\u5df2\u6210\u529f\u52a0\u8f7d\n\n# \u914d\u7f6e\u6c38\u4e45\u52a0\u8f7d br_netfilter \u6a21\u5757:\necho \"br_netfilter\" | sudo tee -a /etc/modules\n\n# \u6b64\u65f6\u518d\u6267\u884c\nsudo sysctl -p\n\n# \u6700\u540e, \u9000\u51fa\u865a\u62df\u673a\u5e76\u91cd\u542f\nlimactl stop\nlimactl start\n</code></pre>"},{"location":"mac/%E5%88%86%E6%9E%90brew%E6%97%A0%E7%94%A8%E7%9A%84%E5%8C%85/","title":"\u5206\u6790brew\u65e0\u7528\u7684\u5305","text":"<pre><code>\"\"\"\u5206\u6790\u6307\u5b9a\u5305\u7684\u4f9d\u8d56, \u5f97\u51fa\u53ef\u4ee5\u5220\u9664\u7684\u65e0\u7528\u7684\u5305\"\"\"\n\nfrom os import popen\n\nmy_package = ['mariadb', 'postgresql@14', 'redis', 'python@3.10']\nbrew_list = [i.strip() for i in popen('brew list').readlines()]\ndependencies = []\ndone = []\n\n\ndef demo(packages):\n    for package in packages:\n        if package in done:\n            continue\n        done.append(package)\n        cmd = f'brew info {package}|grep Required:|cut -d : -f 2'\n        ret = popen(cmd).read().strip()\n        if ret:\n            depend_packages = [_.strip() for _ in ret.split(',')]\n\n            for depend_package in depend_packages:\n                if depend_package.strip() not in dependencies:\n                    dependencies.append(depend_package)\n\n            demo(depend_packages)\n\n\ndemo(my_package)\n\n\nbrew_list_set = set(brew_list)\nmy_package.extend(dependencies)\ndependencies_set = set(my_package)\n\nprint('\u8fd9\u4e9b\u5305\u9700\u8981\u4f7f\u7528brew uninstall\u547d\u4ee4\u5220\u9664:')\nprint(brew_list_set - dependencies_set)\n</code></pre>"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/","title":"\u547d\u4ee4\u884c\u914d\u7f6eMac\u4ee3\u7406","text":""},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#_1","title":"\u67e5\u770b\u4ee3\u7406","text":""},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#http","title":"HTTP\u4ee3\u7406","text":"<p>\u8bed\u6cd5:</p> <p><code>networksetup -getwebproxy &lt;networkservice&gt;</code></p> <p>\u793a\u4f8b:</p> <pre><code>networksetup -getwebproxy WI-FI\n</code></pre>"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#https","title":"HTTPS\u4ee3\u7406","text":"<p>\u8bed\u6cd5:</p> <p><code>networksetup -getsecurewebproxy &lt;networkservice&gt;</code></p> <p>\u793a\u4f8b:</p> <pre><code>networksetup -getsecurewebproxy WI-FI\n</code></pre>"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#socks","title":"SOCKS\u4ee3\u7406","text":"<p>\u8bed\u6cd5: <code>networksetup -getsocksfirewallproxy &lt;networkservice&gt;</code></p> <p>\u793a\u4f8b:</p> <pre><code>networksetup -getsocksfirewallproxy WI-FI\n</code></pre>"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#_2","title":"\u67e5\u770b\u6240\u6709\u4ee3\u7406","text":"<pre><code># \u65b9\u6cd51\nscutil --proxy\n# \u65b9\u6cd52\nsystem_profiler SPNetworkDataType|grep Proxy\n</code></pre>"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#_3","title":"\u8bbe\u7f6e\u4ee3\u7406","text":""},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#http_1","title":"HTTP\u4ee3\u7406","text":"<p>\u8bed\u6cd5: <code>networksetup -setwebproxy &lt;networkservice&gt; &lt;domain&gt; &lt;port number&gt; &lt;authenticated&gt; &lt;username&gt; &lt;password&gt;</code></p> <p>\u793a\u4f8b:</p> <pre><code># \u914d\u7f6e \u4ee3\u7406\nnetworksetup -setwebproxy WI-FI 127.0.0.1 8080\n# \u914d\u7f6e \u4ee3\u7406 + \u8ba4\u8bc1\nnetworksetup -setwebproxy WI-FI 127.0.0.1 8080 on username password\n</code></pre>"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#https_1","title":"HTTPS\u4ee3\u7406","text":"<p>\u8bed\u6cd5: <code>networksetup -setsecurewebproxystate &lt;networkservice&gt; &lt;domain&gt; &lt;port number&gt; &lt;authenticated&gt; &lt;username&gt; &lt;password&gt;</code></p> <p>\u793a\u4f8b: </p> <pre><code># \u914d\u7f6e \u4ee3\u7406\nnetworksetup -setsecurewebproxy WI-FI 127.0.0.1 8080\n# \u914d\u7f6e \u4ee3\u7406 + \u8ba4\u8bc1\nnetworksetup -setsecurewebproxy WI-FI 127.0.0.1 8080 on username password\n</code></pre>"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#socks_1","title":"SOCKS\u4ee3\u7406","text":"<p>\u8bed\u6cd5: <code>networksetup -getsocksfirewallproxy &lt;networkservice&gt; &lt;domain&gt; &lt;port number&gt; &lt;authenticated&gt; &lt;username&gt; &lt;password&gt;</code></p> <p>\u793a\u4f8b:</p> <pre><code># \u914d\u7f6e \u4ee3\u7406\nnetworksetup -setsocksfirewallproxy WI-FI 127.0.0.1 1080\n# \u914d\u7f6e \u4ee3\u7406 + \u8ba4\u8bc1 \nnetworksetup -setsocksfirewallproxy WI-FI 127.0.0.1 1080 on username password\n</code></pre>"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#_4","title":"\u542f\u7528|\u5173\u95ed \u4ee3\u7406","text":""},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#http_2","title":"HTTP\u4ee3\u7406","text":"<p>\u8bed\u6cd5: <code>networksetup -setwebproxystate &lt;networkservice&gt; &lt;on off&gt;</code></p> <p>\u793a\u4f8b:</p> <pre><code># \u542f\u7528\u4ee3\u7406\nnetworksetup -setwebproxystate WI-FI on\n# \u5173\u95ed\u4ee3\u7406\nnetworksetup -setwebproxystate WI-FI off\n</code></pre>"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#https_2","title":"HTTPS\u4ee3\u7406","text":"<p>\u8bed\u6cd5: <code>networksetup -setsecurewebproxystate &lt;networkservice&gt; &lt;on off&gt;</code></p> <p>\u793a\u4f8b</p> <pre><code># \u542f\u7528\u4ee3\u7406\nnetworksetup -setsecurewebproxystate WI-FI on\n# \u5173\u95ed\u4ee3\u7406\nnetworksetup -setsecurewebproxystate WI-FI off\n</code></pre>"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#socks_2","title":"SOCKS\u4ee3\u7406","text":"<p>\u8bed\u6cd5: <code>networksetup -setsocksfirewallproxystate &lt;networkservice&gt; &lt;on off&gt;</code></p> <p>\u793a\u4f8b: </p> <pre><code># \u542f\u7528\u4ee3\u7406\nnetworksetup -setsocksfirewallproxystate WI-FI on\n# \u5173\u95ed\u4ee3\u7406\nnetworksetup -setsocksfirewallproxystate WI-FI off\n</code></pre>"},{"location":"mac/%E8%AE%BE%E7%BD%AEMac%E7%9A%84Hostname/","title":"\u8bbe\u7f6eMac\u7684Hostname","text":""},{"location":"mac/%E8%AE%BE%E7%BD%AEMac%E7%9A%84Hostname/#_1","title":"\u540d\u8bcd","text":"<p>Mac\u4e2d\u4e0e\u4e4b\u76f8\u5173\u7684\u67093\u4e2a:</p> <ul> <li>ComputerName</li> <li>LocalHostName</li> <li>HostName</li> </ul>"},{"location":"mac/%E8%AE%BE%E7%BD%AEMac%E7%9A%84Hostname/#_2","title":"\u8bbe\u7f6e","text":"<p>ComputerName\u548cLocalHostName\u53ef\u4ee5\u901a\u8fc7<code>\u7cfb\u7edf\u504f\u597d\u8bbe\u7f6e</code> -&gt; <code>\u5206\u4eab</code>\u8bbe\u7f6e</p> <p>HostName\u53ea\u80fd\u901a\u8fc7\u547d\u4ee4\u8bbe\u7f6e, \u53ef\u8bbe\u7f6e\u4e34\u65f6\u751f\u6548(\u91cd\u542f\u540e\u5931\u6548)\u6216\u6c38\u4e45\u751f\u6548</p> <p>\u4e34\u65f6:</p> <pre><code>hostname MyMBP\n</code></pre> <p>\u6c38\u4e45:</p> <pre><code>scutil --set HostName MyMBP\n</code></pre>"},{"location":"mac/%E8%AE%BE%E7%BD%AEMac%E7%9A%84Hostname/#_3","title":"\u67e5\u770b","text":"<pre><code>$ sudo scutil --get ComputerName\nMyMacBookPro\n$ sudo scutil --get LocalHostName\nMyMBP\n$ sudo scutil --get HostName\nMBP\n</code></pre>"},{"location":"mysql/MySQL%E4%B9%8BExplain/","title":"MySQL\u4e4bExplain","text":""},{"location":"mysql/MySQL%E4%B9%8BExplain/#_1","title":"\u7528\u6cd5","text":"<p>\u57fa\u672c\u7528\u6cd5:</p> <p>explain yoursql;</p> <p>\u4e24\u4e2a\u53d8\u79cd:</p> <p>explain extended yoursql;</p> <p>explain partitions yoursql;</p> <p>\u533a\u522b:</p> <p>explain \u8f93\u51fa\u4e2d\u5305\u542b partitions \u548c filtered \u4e24\u4e2a\u5b57\u6bb5, \u65e9\u671f mysql \u7248\u672c\u7684 explain \u5de5\u5177\u4e0d\u4f1a\u8f93\u51fa\u8fd9\u4e24\u4e2a\u5b57\u6bb5</p> <p>\u4f7f\u7528 explain extended \u4f1a\u5728 explain \u7684\u57fa\u7840\u4e0a\u989d\u5916\u63d0\u4f9b\u4e00\u4e9b\u67e5\u8be2\u4f18\u5316\u4fe1\u606f, \u7136\u540e\u901a\u8fc7 show warnings \u547d\u4ee4\u53ef\u4ee5\u5f97\u5230\u4f18\u5316\u540e\u7684\u67e5\u8be2\u8bed\u53e5, \u4ece\u800c\u770b\u51fa\u4f18\u5316\u5668\u4f18\u5316\u4e86\u54ea\u4e9b, \u5176\u4e2d\u5305\u62ec filtered \u5217, \u662f\u4e00\u4e2a\u534a\u5206\u6bd4\u7684\u503c, rows * filtered / 100 \u53ef\u4ee5\u4f30\u7b97\u51fa\u5c06\u8981\u548c explain \u4e2d\u524d\u4e00\u4e2a\u8868\u8fdb\u884c\u8fde\u63a5\u7684\u884c\u6570(\u524d\u4e00\u4e2a\u8868\u6307 explain \u4e2d\u7684 id \u503c\u6bd4\u5f53\u524d\u8868 id \u503c\u5c0f\u7684\u8868)</p> <p>show warnings \u4f1a\u8f93\u51fa\u4f18\u5316\u8fc7\u540e\u7684\u4f2asql, \u6709\u53ef\u80fd\u80fd\u76f4\u63a5\u6267\u884c, \u4e5f\u6709\u53ef\u80fd\u65e0\u6cd5\u6267\u884c, \u53c2\u8003\u5373\u53ef</p> <p>show warnings \u8f93\u51fa\u663e\u793a extended \u4f1a\u5728\u672a\u6765\u7248\u672c\u4e2d\u79fb\u9664</p> <p>\u4f7f\u7528 explain partitions \u53ef\u663e\u793a partitions \u5217, partitions \u662f\u5206\u533a, \u4f46\u57fa\u672c\u4e0a\u90fd\u662f\u7528\u5206\u5e93\u5206\u8868\u5f88\u5c11\u7528\u5230\u8868\u5206\u533a</p> <p>\u6ce8\u610f:</p> <p>\u81f3\u5c11\u4eceMySQL5.7\u7248\u672c\u4ee5\u4e0a, explain \u5df2\u7ecf\u5305\u542b partitions \u548c filtered \u4e24\u4e2a\u5b57\u6bb5, \u4e0d\u9700\u8981\u7528\u5176\u4ed6\u4e24\u4e2a\u53d8\u79cd</p>"},{"location":"mysql/MySQL%E4%B9%8BExplain/#_2","title":"\u5b57\u6bb5\u89e3\u91ca","text":"<p>\u7ed3\u679c\u793a\u4f8b:</p> <p></p> <p>explain\u8f93\u51fa\u5185\u5bb9\u5982\u4e0b:</p> <ul> <li> <p>id: \u6267\u884c\u4f18\u5148\u7ea7, id \u8d8a\u5927, \u8d8a\u5148\u6267\u884c; \u5982\u679c id \u76f8\u540c, \u5219\u6839\u636e sql \u8bed\u53e5\u4e2d\u7684\u4e66\u5199\u987a\u5e8f\u6267\u884c;</p> </li> <li> <p>select_type: \u67e5\u8be2\u7c7b\u578b, \u5e38\u89c1\u7684\u6709:</p> </li> <li> <p>simple: \u7b80\u5355\u67e5\u8be2, \u4f8b\u5982 select * from a_table;</p> </li> <li>primary: \u590d\u6742\u67e5\u8be2\u6700\u5916\u5c42\u7684 select</li> <li>subquery: \u5305\u542b\u5728 select \u4e2d\u7684\u5b50\u67e5\u8be2, \u4f46\u4e0d\u5728 from \u5b50\u53e5\u4e2d</li> <li> <p>derived: \u5305\u542b\u5728 from \u5b50\u53e5\u4e2d\u7684\u5b50\u67e5\u8be2, MySQL\u4f1a\u5c06\u7ed3\u679c\u5b58\u653e\u5728\u4e00\u4e2a\u4e34\u65f6\u8868\u4e2d, \u4e5f\u79f0\u4e3a\u6d3e\u751f\u8868(derived \u5c31\u662f\u6d3e\u751f\u7684\u610f\u601d)</p> </li> <li> <p>table: \u67e5\u8be2\u7684\u8868, \u4f8b\u5982\u4e0a\u56fe\u793a\u4f8b\u4e2d\u7684 film \u548c actor, \u5f53 from \u540e\u9762\u6709\u5b50\u67e5\u8be2\u65f6, \u5176\u683c\u5f0f\u4e3a<code>deveriedN</code>, \u5176\u4e2d\u7684N\u8868\u793aid, \u8868\u793a\u5f53\u524d\u7684\u67e5\u8be2\u4f9d\u8d56 id=N \u7684\u67e5\u8be2</p> </li> <li> <p>partiion: \u8868\u5206\u533a, \u57fa\u672c\u7528\u4e0d\u5230</p> </li> <li> <p>type: </p> </li> <li> <p>\u8868\u793a\u5173\u8054\u7c7b\u578b\u6216\u8bbf\u95ee\u7c7b\u578b, MySQL\u7528\u4e8e\u51b3\u5b9a\u5982\u4f55\u67e5\u8be2\u8868\u4e2d\u7684\u884c\u3001\u67e5\u8be2\u6570\u636e\u8bb0\u5f55\u7684\u6253\u5f00\u8303\u56f4,</p> </li> <li>\u4f18\u5148\u7ea7\u662f: system &gt; const &gt; eq_ref &gt; ref &gt; range &gt; index &gt; ALL, \u5373\u8868\u793a\u4e86\u5927\u6982\u626b\u63cf\u4e86\u591a\u5c11\u884c, ALL\u8868\u793a\u5168\u8868\u626b\u63cf(\u6700\u6162)</li> <li>sql \u4f18\u5316\u8981\u4fdd\u8bc1\u67e5\u8be2\u8fbe\u5230 range \u7ea7\u522b, \u6700\u597d\u662f ref \u4ee5\u4e0a</li> <li>\u67d0\u4e9b\u60c5\u51b5\u662f Null, \u56e0\u4e3a MySQL\u5728\u6709\u4e9b\u60c5\u51b5\u662f\u4e0d\u7528\u67e5\u8868\u7684(\u5927\u90e8\u5206\u662f\u4f7f\u7528\u5185\u7f6e\u51fd\u6570\u7684\u65f6\u5019), \u4f8b\u5982 <code>explain select min(id) from a_table</code>, \u76f4\u63a5\u53d6B+\u6811\u7684\u7b2c\u4e00\u4e2a\u8282\u70b9, \u5c31\u662f\u6700\u5c0fID</li> <li>system \u662fconst\u7684\u7279\u4f8b, \u8868\u793a\u67e5\u8be2\u7684\u8868\u672c\u8eab\u53ea\u6709\u4e00\u884c\u8bb0\u5f55</li> <li>const \u8868\u793a where \u540e\u9762\u7684\u6761\u4ef6\u662f\u4e3b\u952e(primary key)\u6216\u8005\u552f\u4e00\u7d22\u5f15(unique key)</li> <li>eq_ref \u8868\u793a\u5173\u8054\u67e5\u8be2\u4e2d (\u4f8b\u5982<code>explain select * from table1 left join tabl2 on table2.pid = table1.id</code>, \u9700\u8981\u6ce8\u610f\u7684\u662f, explain \u8f93\u51fa\u7684\u4e24\u5f20\u8868\u7684 id \u90fd\u662f1, \u5373\u4f7f\u7528\u5173\u8054\u67e5\u8be2\u7684\u4e24\u5f20\u8868\u7684\u4f18\u5148\u7ea7\u662f\u4e00\u6837\u7684) on \u6761\u4ef6 table1.id \u662f\u4e3b\u952e, \u5373 primary key \u6216 unique key\u7d22\u5f15\u88ab\u8fde\u63a5\u4f7f\u7528, \u6b64\u65f6\u7684 type \u5c31\u662feq_ref</li> <li>ref \u8868\u793a\u4f7f\u7528\u975e\u552f\u4e00\u7d22\u5f15\u6216\u552f\u4e00\u7d22\u5f15\u7684\u90e8\u5206\u524d\u7f00(\u591a\u5b57\u6bb5\u8054\u5408\u7d22\u5f15\u7684\u90e8\u5206\u524d\u7f00)\u7684\u67e5\u8be2, \u4f8b\u5982<code>select * from table1 where name='xxx'</code>, \u5176\u4e2dname \u5b57\u6bb5\u5141\u8bb8\u91cd\u590d\u4e14\u5efa\u7acb\u4e86\u7d22\u5f15, \u6b64\u65f6\u7684 type \u5c31\u662f ref</li> <li>range \u8868\u793a\u8303\u56f4\u626b\u63cf, \u901a\u5e38\u51fa\u73b0\u5728 in()\u3001brtween\u3001&lt;\u3001&gt;\u3001&gt;= \u7b49\u64cd\u4f5c\u4e2d, \u4f8b\u5982<code>select * from a_table where id &gt; 1;</code></li> <li>index \u6bd4\u8f83\u7279\u6b8a, \u5148\u770b\u793a\u4f8b, \u4f8b\u5982 table1 \u5305\u542b\u4e24\u4e2a\u5b57\u6bb5 id\u3001name \u548c age \u4e14 name \u5efa\u7acb\u4e86\u7d22\u5f15, \u90a3\u4e48\u6267\u884c<code>select name from table1</code> \u5c31\u4f7f\u7528\u975e\u805a\u96c6\u7d22\u5f15(nam\u7684\u7d22\u5f15), \u6b64\u65f6\u5c31\u662f type \u5c31\u662f index, \u539f\u56e0\u89e3\u91ca: \u805a\u96c6\u7d22\u5f15\u4fdd\u5b58\u7d22\u5f15\u548c\u6240\u6709\u5b57\u6bb5\u7684\u503c, \u5360\u7528\u7a7a\u95f4\u5927, \u975e\u805a\u96c6\u7d22\u5f15\u4fdd\u5b58\u7d22\u5f15\u7684\u5b57\u6bb5\u548c\u4e3b\u952e, \u5360\u7528\u7a7a\u95f4\u5c0f, \u5bf9\u4e8e\u672c\u6848\u4f8b\u4e2d\u7684table1, \u4f7f\u7528\u975e\u805a\u96c6\u7d22\u5f15(name)\u626b\u63cf\u5c31\u80fd\u62ff\u5230\u6240\u9700\u6570\u636e(\u626b\u63cf\u7a7a\u95f4\u5c0f\u4e14\u4e0d\u9700\u8981\u56de\u8868), \u6240\u4ee5MySQL\u4f18\u5148\u4f7f\u7528\u975e\u805a\u96c6\u7d22\u5f15</li> <li>all \u5373\u5168\u8868\u626b\u63cf, \u626b\u63cf\u805a\u96c6\u7d22\u5f15(\u6bd4\u5982\u4e3b\u952e, \u793a\u4f8b: <code>select * from a_table;</code>)\u7684\u6240\u6709\u53f6\u5b50\u8282\u70b9, \u6bd4\u8f83\u6162, \u8fd9\u79cd\u60c5\u51b5\u9700\u8981\u4f18\u5316</li> </ul> <p>type \u662f index \u6216\u8005 all \u7684\u90fd\u9700\u8981\u4f18\u5316</p> <ul> <li> <p>possible_keys: \u5b58\u653e\u7d22\u5f15\u540d\u79f0, \u8868\u793a\u67e5\u8be2\u65f6\u53ef\u80fd\u7528\u5230\u7684\u7d22\u5f15, \u6709\u65f6\u5019\u51fa\u73b0\u6b64\u5217\u6709\u503c\u800c key \u663e\u793a Null \u7684\u60c5\u51b5, \u5373\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15, \u53ef\u80fd\u662f\u56e0\u4e3a\u8868\u4e2d\u6570\u636e\u4e0d\u591a, MySQL\u8ba4\u4e3a\u7d22\u5f15\u7528\u5904\u4e0d\u5927\u6240\u4ee5\u76f4\u63a5\u5168\u8868\u626b\u63cf</p> </li> <li> <p>key: \u5b58\u653e\u7d22\u5f15\u540d\u79f0, \u8868\u793a\u67e5\u8be2\u65f6\u771f\u6b63\u7528\u5230\u7684\u7d22\u5f15</p> </li> <li> <p>key_len: \u663e\u793a MySQL \u5728\u7d22\u5f15\u91cc\u4f7f\u7528\u7684\u5b57\u8282, \u901a\u8fc7\u6b64\u503c\u53ef\u7b97\u51fa\u5177\u4f53\u4f7f\u7528\u4e86\u7d22\u5f15\u7684\u54ea\u4e9b\u5217, \u4f8b\u5982\u8868 table1 \u4e2d\u6709 age \u548c score \u4e24\u4e2a\u5b57\u6bb5\u4e14\u7c7b\u578b\u662f int(4\u4e2a\u5b57\u8282), \u5e76\u521b\u5efa\u4e86\u8054\u5408\u7d22\u5f15, \u90a3\u4e48 key_len \u7b49\u4e8e4\u8868\u793a\u4f7f\u7528\u4e86 age \u7d22\u5f15\u5c31\u67e5\u5230\u4e86\u7ed3\u679c, \u4f8b\u5982 <code>select * from table1 where age=20</code> \u7684 key_lan \u662f4, <code>select * from table1 where age=20 and score=100</code> \u7684 key_lan \u662f8; key_lan\u8ba1\u7b97\u89c4\u5219\u5982\u4e0b:</p> </li> </ul> <ul> <li>char(n): n\u5b57\u8282\u957f\u5ea6</li> <li>varchar(n): \u5bf9\u4e8e utf-8 \u7f16\u7801\u6765\u8bf4\u662f\u957f\u5ea6\u662f 3n+2, \u5176\u4e2d\u52a0\u76842\u5b57\u8282\u7528\u6765\u5b58\u50a8\u5b57\u7b26\u4e32\u5b9e\u9645\u957f\u5ea6</li> <li>tinyint: 1\u5b57\u8282</li> <li>smallint: 2\u5b57\u8282</li> <li>int: 4\u5b57\u8282</li> <li>bigint: 8\u5b57\u8282</li> <li>date: 3\u5b57\u8282</li> <li>timestamp: 4\u5b57\u8282</li> <li>datetime: 8\u5b57\u8282</li> <li>\u5982\u679c\u5b57\u6bb5\u5141\u8bb8\u4e3aNull, \u8fd8\u9700\u89811\u4e2a\u5b57\u8282\u8bb0\u5f55\u662f\u5426\u4e3aNull</li> </ul> <ul> <li> <p>ref: \u663e\u793a\u5728 key \u5217\u8bb0\u5f55\u7684\u7d22\u5f15\u4e2d\u5728\u626b\u63cf\u8868\u662f\u7528\u5230\u7684\u5217(\u5b57\u6bb5\u540d)\u6216\u5e38\u91cf, \u5e38\u89c1\u7684\u6709 const, \u4f8b\u5982 <code>select name from a_table where id = 1</code>, \u6b64\u65f6\u56e0\u4e3a where id=1 \u7684\u7f18\u6545, \u5c31\u662f\u5e38\u91cf const, \u5982\u679c\u662f\u8fde\u8868\u67e5\u8be2\u5c31\u80fd\u662f on \u6761\u4ef6\u540e\u9762\u7684\u5b57\u6bb5</p> </li> <li> <p>rows: \u4e00\u4e2a\u9884\u4f30\u503c, MySQL\u4f30\u8ba1\u8981\u626b\u63cf\u5e76\u68c0\u6d4b\u7684\u884c\u6570, \u6ce8\u610f\u8fd9\u4e2a\u4e0d\u662f\u7ed3\u679c\u96c6\u91cc\u7684\u884c\u6570</p> </li> <li> <p>filtered: \u662f\u4e00\u4e2a\u534a\u5206\u6bd4\u7684\u503c, rows * filtered / 100 \u53ef\u4ee5\u4f30\u7b97\u51fa\u5c06\u8981\u548c explain \u4e2d\u524d\u4e00\u4e2a\u8868\u8fdb\u884c\u8fde\u63a5\u7684\u884c\u6570(\u524d\u4e00\u4e2a\u8868\u6307 explain \u4e2d\u7684 id \u503c\u6bd4\u5f53\u524d\u8868 id \u503c\u5c0f\u7684\u8868)</p> </li> <li> <p>Extra: \u5c55\u793a\u989d\u5916\u4fe1\u606f, \u6709\u5f88\u591a, \u5e38\u89c1\u7684\u4e3b\u8981\u503c\u5982\u4e0b:</p> </li> </ul> <ul> <li>Using index: \u4f7f\u7528\u4e86\u8986\u76d6\u7d22\u5f15, \u6ce8\u610f\u8986\u76d6\u7d22\u5f15\u4e0d\u662f\u7d22\u5f15, \u662f\u4e00\u79cd\u67e5\u8be2\u65b9\u5f0f, \u8868\u793a\u67e5\u8be2\u7684\u5b57\u6bb5\u90fd\u88ab\u8054\u5408\u7d22\u5f15\u8986\u76d6\u4e86</li> </ul> <p>\u5176\u5b9a\u4e49\u662f MySQL \u6267\u884c\u8ba1\u5212 explain \u7ed3\u679c\u4e2d key \u4e2d\u4f7f\u7528\u7d22\u5f15\u5305\u542b\u4e86\u4f60\u8981\u67e5\u8be2\u7684\u6240\u6709\u5b57\u6bb5, \u4f8b\u5982 select \u540e\u9762\u67e5\u8be2\u7684\u5b57\u6bb5\u90fd\u53ef\u4ee5\u4ece\u8fd9\u4e2a\u7d22\u5f15\u7684\u6811\u4e2d\u83b7\u53d6, \u4e00\u822c\u6765\u8bb2\u8fd9\u5c31\u662f\u8986\u76d6\u7d22\u5f15;</p> <p>\u8986\u76d6\u7d22\u5f15\u4e00\u822c\u9488\u5bf9\u8f85\u52a9\u7d22\u5f15(\u975e\u805a\u96c6\u7d22\u5f15), \u6574\u4e2a\u67e5\u8be2\u7ed3\u679c\u53ea\u901a\u8fc7\u8f85\u52a9\u7d22\u5f15\u5c31\u80fd\u62ff\u5230\u7ed3\u679c, \u4e0d\u9700\u8981\u56de\u8868\u518d\u67e5</p> <ul> <li> <p>Using where: \u4f7f\u7528 where \u8bed\u53e5\u5904\u7406\u7ed3\u679c\u5e76\u4e14\u67e5\u8be2\u7684\u5217\u672a\u88ab\u7d22\u5f15\u8986\u76d6, \u7b80\u5355\u8bf4\u5c31\u662f where \u6761\u4ef6\u540e\u9762\u7684\u5b57\u6bb5\u6ca1\u6709\u7d22\u5f15, \u8fd9\u79cd\u60c5\u51b5\u4e0b Extra \u5c31\u53ef\u80fd\u662f Using where</p> </li> <li> <p>Using index condition: \u67e5\u8be2\u7684\u5217\u4e0d\u5b8c\u5168\u88ab\u7d22\u5f15\u8986\u76d6, where \u6761\u4ef6\u4e2d\u662f\u4e00\u4e2a\u524d\u5bfc\u5217\u7684\u8303\u56f4, \u4f8b\u5982 name \u548c age \u6709\u7d22\u5f15, \u7136\u540e where \u6761\u4ef6\u662f age &gt; 20, \u8fd9\u79cd\u60c5\u51b5\u4e0b Extra \u5c31\u53ef\u80fd\u662f Using index condition</p> </li> <li> <p>Using temporary: MySQL \u9700\u8981\u521b\u5efa\u4e00\u5f20\u4e34\u65f6\u8868\u6765\u5904\u7406\u67e5\u8be2, \u6bd4\u5982 <code>select distinct name</code>,  \u8fd9\u4e2d\u60c5\u51b5\u9700\u8981\u521b\u5efa\u4e00\u5f20\u4e34\u65f6\u8868, \u5728\u4e34\u65f6\u8868\u9010\u884c\u626b\u63cf\u5e76\u53bb\u91cd, \u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\u4e00\u822c\u9700\u8981\u4f18\u5316, \u6bd4\u5982\u521b\u5efa\u7d22\u5f15,  \u56e0\u4e3a\u7d22\u5f15\u5c31\u6392\u597d\u5e8f\u7684, \u5728\u626b\u63cf\u7684\u8fc7\u7a0b\u4e2d\u5c31\u78b0\u5230\u91cd\u590d\u7684\u5c31\u4e22\u5f03, \u6240\u4ee5\u4e0d\u9700\u8981\u4e34\u65f6\u8868</p> </li> <li> <p>Using filesort: \u4f7f\u7528 order by \u8bed\u53e5\u65f6\u53d1\u751f, \u4f7f\u7528\u5916\u90e8\u6392\u5e8f\u800c\u4e0d\u662f\u7d22\u5f15\u6392\u5e8f, \u6570\u636e\u8f83\u5c0f\u65f6\u4ece\u5185\u5b58\u6392\u5e8f, \u5426\u5219\u5148\u653e\u5230\u78c1\u76d8\u518d\u6392\u5e8f, \u8fd9\u79cd\u60c5\u51b5\u6548\u7387\u4e5f\u5f88\u4f4e, \u89e3\u51b3\u529e\u6cd5\u4e5f\u662f\u5efa\u7acb\u7d22\u5f15\u6216\u8054\u5408\u7d22\u5f15</p> </li> </ul> <p>\u6709\u4e9b\u60c5\u51b5\u5916(\u4f8b\u5982\u8bed\u53e5\u4e2d\u4f7f\u7528\u4e86order by), \u901a\u8fc7key\u6216key_lan\u770b, \u53ea\u4f7f\u7528\u4e86\u8054\u5408\u7d22\u5f15\u4e2d\u7684\u90e8\u5206\u5b57\u6bb5, \u4f46extra\u4e2d\u663e\u793a\u7684\u662f Using index, \u8868\u793a\u5176\u4ed6\u5176\u4ed6\u4e5f\u8d70\u4e86\u7d22\u5f15</p> <p>\u4f8b\u5982, name\u3001age\u548cgender\u662f\u8054\u5408\u7d22\u5f15, \u8bed\u53e5\u4e3a <code>select * from tale1 wher name=1 and gender=1 order by age</code></p> <p>\u901a\u8fc7key_lan\u53ef\u4ee5\u770b\u5230\u4f7f\u7528\u4e86\u5b57\u6bb5name\u7684\u7d22\u5f15, \u4f46\u662fextra\u4e2d\u663e\u793a\u7684\u662f Using index, \u8868\u793a\u6392\u5e8f\u8fc7\u7a0b\u4e2d\u7528\u5230\u4e86age\u5b57\u6bb5\u7684\u7d22\u5f15</p> <p>PS: select * from tale1 wher name=1 order by gender \u5c31\u4e0d\u4f1a\u8d70\u7d22\u5f15, \u56e0\u4e3a\u8df3\u8fc7\u4e86age, \u4e0d\u7b26\u5408\u6700\u5de6\u524d\u7f00\u539f\u5219</p> <p>\u540c\u7406 order by age, gender \u4f1a\u8d70\u7d22\u5f15, order by gender, age \u4e0d\u4f1a\u8d70\u7d22\u5f15</p> <p>\u6ce8\u610f wher name=1 and age =18 order by gender, age \u5c31\u4f1a\u8d70\u7d22\u5f15, \u8054\u60f3B+\u6811, \u7ecf\u8fc7 name=1 and age =18 \u7d22\u5f15\u540e\u6570\u636e\u6709\u5e8f(\u6392\u5e8f\u91cc\u9762\u7684age\u5176\u5b9e\u6ca1\u7528\u4e86), \u6b64\u65f6\u6392\u5e8f\u53ef\u4ee5\u8d70\u7d22\u5f15</p> <p>\u6269\u5c55: order by \u5b57\u6bb5 desc, 8.0\u4ee5\u524d\u7248\u672c, \u964d\u5e8f\u662f\u4e0d\u4f1a\u8d70\u7d22\u5f15\u7684, 8.0\u4ee5\u540e\u7248\u672c\u4f1a\u4f7f\u7528\u7d22\u5f15</p> <p>\u6ce8\u610f, \u4e0d\u540c\u7248\u672c\u7684 MySQL \u7684 Extra \u7684\u5c55\u793a\u60c5\u51b5\u53ef\u80fd\u662f\u4e0d\u540c\u7684, \u505a\u53c2\u8003\u5c31\u884c </p>"},{"location":"mysql/MySQL%E4%B9%8BExplain%E8%AF%A6%E8%A7%A3/","title":"MySQL\u4e4bExplain\u8be6\u89e3","text":""},{"location":"mysql/MySQL%E4%B9%8BExplain%E8%AF%A6%E8%A7%A3/#_1","title":"\u521b\u5efa\u8868","text":"<pre><code>CREATE TABLE `table1` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `name` varchar(32) NOT NULL,\n  `age` int(11) NOT NULL,\n  `gender` bit(1) DEFAULT b'1',\n  `birthday` datetime DEFAULT NULL,\n  `location` varchar(64) DEFAULT NULL,\n  PRIMARY KEY (`id`),\n  KEY `idx_name_age_gender` (`name`,`age`,`gender`) USING BTREE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n</code></pre>"},{"location":"mysql/MySQL%E4%B9%8BExplain%E8%AF%A6%E8%A7%A3/#_2","title":"\u63d2\u5165\u6570\u636e","text":"<pre><code>INSERT INTO db1.table1(name, age, gender, birthday, location) VALUES\n('aa', 20, b'1', '2001-1-1', 'beijing'),\n('ab', 21, b'1', '2001-1-2', 'beijing'),\n('ac', 22, b'1', '2001-1-3', 'beijing'),\n('aa', 10, b'0', '2011-1-1', 'beijing'),\n('ba', 30, b'1', '1991-1-1', 'tianjin'),\n('ba', 30, b'1', '1991-12-12', 'shanghai'),\n('ba', 40, b'0', '1981-6-6', 'chongqing'),\n('ca', 20, b'1', '2001-1-1', 'shandong'),\n('cb', 20, b'0', '2021-1-1', 'henan'),\n('cd', 20, b'1', '2001-1-1', 'shanxi'),\n('ce', 20, b'1', '2001-1-1', 'hebei'),\n('de', 20, b'0', '1981-1-1', 'guangdong'),\n('db', 20, b'0', '2001-1-1', 'taiwan');\n</code></pre>"},{"location":"mysql/MySQL%E4%B9%8BExplain%E8%AF%A6%E8%A7%A3/#_3","title":"\u6d4b\u8bd5","text":"<p>\u6d4b\u8bd51 -- \u5168\u503c\u5339\u914d</p> <pre><code>explain select * from table1 where name='x';\n</code></pre> id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ref idx_name_age_gender idx_name_age_gender 130 const 1 Using index condition <p>name\u662fvarchar, \u957f\u5ea632, 4*32+2=130, \u4f7f\u7528\u4e86\u7d22\u5f15 idx_name_age_gender \u4e2d\u7684 name \u5b57\u6bb5</p> <pre><code>explain select * from table1 where name='x' and age=18;\n</code></pre> id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ref idx_name_age_gender idx_name_age_gender 134 const,const 1 Using index condition <p>\u540c\u4e0a, \u540c\u65f6 int \u662f 4 \u4e2a\u5b57\u8282, \u6240\u4ee5130+4=134, \u4f7f\u7528\u4e86\u7d22\u5f15 idx_name_age_gender \u4e2d\u7684 name \u548c age \u5b57\u6bb5</p> <pre><code>explain select * from table1 where name='x' and age=18 and gender=b'0';\n</code></pre> id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ref idx_name_age_gender idx_name_age_gender 136 const,const,const 1 Using index condition <p>\u540c\u4e0a, bit \u662f 2 \u4e2a\u5b57\u8282,  \u6240\u4ee5 134+2=136, \u4f7f\u7528\u4e86\u7d22\u5f15 idx_name_age_gender \u4e2d\u7684 name\u3001 age \u548c gender \u5b57\u6bb5</p> <p>**\u6ce8\u610f: **</p> <p>1\u3001\u4e0d\u540c\u7248\u672c\u7684MySQL\u8ba1\u7b97key_lan\u7684\u516c\u5f0f\u53ef\u80fd\u4e0d\u4e00\u6837, \u4e0d\u540c\u7f16\u7801\u7684\u6781\u7aef\u516c\u5f0f\u4e5f\u53ef\u80fd\u4e0d\u4e00\u6837, \u672c\u4f8b\u4e2d\u7528\u7684\u662f\u7528\u7684\u7f16\u7801\u662futf8mb4(4\u4e2a\u5b57\u8282), \u6240\u4ee5\u662f\u8ba1\u7b97\u516c\u5f0f\u662f 4n*2, \u5982\u679c\u7528utf8\u7f16\u7801\u5c31\u662f3n+2</p> <p>2\u3001\u4e0a\u97623\u4e2a\u8f93\u51fa\u4e2d rows \u90fd\u662f1, \u662f\u56e0\u4e3a\u5f53\u524d\u8868\u4e2d\u6570\u636e\u8f83\u5c11, \u5f53\u6570\u636e\u91cf\u5f88\u5927\u65f6, \u4e0a\u65b9\u4e09\u4e2a\u8f93\u51fa\u4e2d\u7684 rows \u4f1a\u4f9d\u6b21\u9012\u51cf, \u5373\u4f7f\u7528\u8054\u5408\u7d22\u5f15\u65f6\u5c3d\u91cf\u5168\u503c(\u5b57\u6bb5)\u5339\u914d, \u8fd9\u6837\u6548\u7387\u9ad8</p> <p>\u6d4b\u8bd52 -- \u5141\u8bb8\u4e3a\u7a7a</p> <pre><code>ALTER TABLE db1.table1 MODIFY COLUMN age int(11) NULL;\nexplain select * from table1 where name='x' and age=18 and gender=b'0';\nALTER TABLE db1.table1 MODIFY COLUMN age int(11) NOT NULL;\n</code></pre> id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ref idx_name_age_gender idx_name_age_gender 137 const,const,const 1 Using index condition <p>\u5f53\u8bbe\u7f6e age \u5141\u8bb8\u4e3a\u7a7a\u65f6, key_lan \u53d8\u6210 137, \u591a\u51fa\u6765\u7684\u4e00\u4e2a\u5b57\u8282\u5c31\u662f\u7528\u6765\u8bb0\u5f55 age \u662f\u5426\u4e3a\u7a7a\u7684</p> <p>\u6d4b\u8bd53 -- \u5b57\u7b26\u4e32\u4e0d\u52a0\u5f15\u53f7</p> <pre><code>explain select * from table1 where name=0;\n</code></pre> id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ALL idx_name_age_gender 13 Using where <p>name \u672c\u8eab\u7c7b\u578b\u662f varchar, where \u6761\u4ef6\u4e2d\u4f7f\u7528\u65f6\u4e0d\u6dfb\u52a0\u5f15\u53f7, \u5c31\u4e0d\u4f1a\u8d70\u7d22\u5f15</p> <p>\u6d4b\u8bd54 -- \u987a\u5e8f\u4e0d\u4e00\u81f4</p> <pre><code>explain select * from table1 where age='xx' and name='x';\n</code></pre> id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ref idx_name_age_gender idx_name_age_gender 134 const,const 1 Using index condition <pre><code>explain select * from table1 where age='xx' and name='x' and gender=b'0';\nexplain select * from table1 where gender=b'0' and age='xx' and name='x';\n</code></pre> id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ref idx_name_age_gender idx_name_age_gender 136 const,const,const 1 Using index condition <p>MySQL\u5185\u90e8\u4f1a\u4f18\u5316where\u6761\u4ef6\u540e\u9762\u7684\u8bed\u53e5, \u4f7f\u5176\u7b26\u5408\u6700\u5de6\u524d\u7f00\u539f\u5219, \u4ece\u800c\u53ef\u4ee5\u4f7f\u7528\u7d22\u5f15</p> <p>\u6d4b\u8bd55 -- \u8df3\u8fc7\u7d22\u5f15\u5b57\u6bb5</p> <pre><code>explain select * from table1 where name='xx' and gender=b'0';\n</code></pre> id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ref idx_name_age_gender idx_name_age_gender 130 const 1 Using index condition <p>\u4f7f\u7528 name \u540e\u8df3\u8fc7\u4e86 age \u76f4\u63a5\u4f7f\u7528 gender, \u672a\u88ab\u6700\u5de6\u524d\u7f00\u539f\u5219, \u6240\u4ee5 key_len=130, \u5373\u53ea\u4f7f\u7528\u4e86\u7d22\u5f15\u4e2d\u7684 name \u5b57\u6bb5</p> <pre><code>explain select * from table1 where age=18 and gender=b'0';\n</code></pre> id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ALL 13 Using where <p>\u7531\u4e8e\u8df3\u8fc7\u4e86 name, \u6240\u4ee5\u5b8c\u5168\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15</p> <p>\u6d4b\u8bd55 -- \u5bf9\u7d22\u5f15\u505a\u5176\u4ed6\u64cd\u4f5c</p> <pre><code>explain select * from table1 where left(name, 4)='xx' ;\n</code></pre> id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ALL 13 Using where <p>\u7531\u4e8e\u5bf9\u7d22\u5f15\u4f7f\u7528\u4e86\u51fd\u6570, \u6240\u6709\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15</p> <pre><code>CREATE INDEX idx_birthday USING BTREE ON table1 (birthday);\nexplain select * from table1 where date(birthday)='2020-01-01';\nexplain select * from table1 where birthday&gt;='2020-01-01 00:00:00' and birthday&lt;='2020-01-01 23:59:59';\nALTER TABLE db1.table1 DROP INDEX idx_birthday;\n</code></pre> id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ALL 13 Using where id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 range idx_birthday idx_birthday 6 1 Using index condition <p>\u7531\u4e8e\u5bf9\u7d22\u5f15\u4f7f\u7528\u4e86\u51fd\u6570, \u6240\u6709\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15; \u4f46\u8f6c\u6362\u6210\u6bd4\u5927\u5c0f, \u5c31\u4f7f\u7528\u4e86\u7d22\u5f15, \u8fd9\u5c31\u662f\u7d22\u5f15\u4f18\u5316</p> <p>\u5bf9\u7d22\u5f15\u8fdb\u884c\u8ba1\u7b97\u3001\u51fd\u6570\u3001\u624b\u52a8\u6216\u81ea\u52a8\u7684\u7c7b\u578b\u8f6c\u6362\u90fd\u53ef\u80fd\u5bfc\u81f4\u65e0\u6cd5\u4f7f\u7528\u7d22\u5f15</p> <p>\u6d4b\u8bd55 -- !=\u3001&lt;&gt;\u3001in\u3001not\u3001is null\u3001is not null \u6761\u4ef6</p> <pre><code>explain select * from table1 where name != 'aa';\nexplain select * from table1 where name &lt;&gt; 'aa';\nexplain select * from table1 where name not in ('aa', 'ab');\n</code></pre> id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ALL idx_name_age_gender 13 Using where <pre><code>explain select * from table1 where birthday  is null;\nexplain select * from table1 where birthday is not null;\n</code></pre> id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ALL 13 Using where <ul> <li>\u4e00\u822c\u60c5\u51b5\u4e0b\u8fd9\u4e9b\u90fd\u8d70\u4e0d\u4e86\u7d22\u5f15</li> <li>\u6709\u65f6\u5019\u4e0d\u7b49\u4e8e\u4e5f\u80fd\u8d70\u7d22\u5f15</li> <li>in\u3001or \u6709\u65f6\u5019\u4f1a\u8d70\u7d22\u5f15, \u6709\u65f6\u5019\u4e0d\u4f1a\u8d70\u7d22\u5f15, MySQL\u5185\u90e8\u4f18\u5316\u5668\u4f1a\u6839\u636e\u68c0\u7d22\u6bd4\u4f8b\u3001\u8868\u5927\u5c0f\u7b49\u56e0\u7d20\u5224\u65ad\u662f\u5426\u4f7f\u7528\u7d22\u5f15</li> </ul> <p>\u5176\u4ed6:</p> <ul> <li> <p>\u4f7f\u7528 like \u901a\u914d\u7b26, \u53ea\u8981\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e0d\u662f\u901a\u914d\u7b26\u5c31\u80fd\u8d70\u7d22\u5f15, \u4f8b\u5982:</p> </li> <li> <p>'a%', \u53ef\u4ee5\u4f7f\u7528\u7d22\u5f15</p> </li> <li>'%a', \u65e0\u6cd5\u4f7f\u7528\u6240\u6709</li> <li>'%a%', \u65e0\u6cd5\u4f7f\u7528\u6240\u6709</li> <li>'a%b', \u53ef\u4ee5\u4f7f\u7528\u7d22\u5f15</li> </ul> <ul> <li> <p>\u65e0\u8bba\u8868\u91cc\u6709\u591a\u5c11\u6761\u6570\u636e, like \u2018a%\u2019 \u90fd\u4f1a\u8d70\u6240\u6709, in \u6216\u8005 or \u5728\u8868\u5927\u7684\u65f6\u5019\u8d70\u7d22\u5f15, \u8868\u5c0f\u7684\u65f6\u5019\u4e0d\u8d70\u7d22\u5f15</p> </li> <li> <p>name &gt; 'a' and age &gt; 20 \u4e0d\u4f1a\u8d70\u7d22\u5f15 (\u4e2a\u4eba\u731c\u6d4b\u4f7f\u7528 &gt; \u5bfc\u81f4\u7ed3\u679c\u96c6\u8303\u56f4\u6bd4\u8f83\u5927, \u6240\u4ee5\u9ed8\u8ba4\u4e0d\u4f7f\u7528\u7d22\u5f15)</p> </li> <li>name like 'a%' and age &gt; 20 \u5c31\u4f1a\u8d70\u7d22\u5f15</li> <li>\u4e4b\u6240\u4ee5\u8fd9\u6837, \u662f\u56e0\u4e3a\u4eceMySQL5.6\u7248\u672c\u5f00\u59cb\u5f15\u5165\u4e86\u7d22\u5f15\u4e0b\u63a8\u539f\u5219(\u9002\u7528\u4e8elike\u67e5\u8be2): \u5728\u904d\u5386\u7d22\u5f15\u7684\u8fc7\u7a0b\u4e2d\u4f18\u5148\u5224\u65ad\u7d22\u5f15\u5305\u542b\u7684\u5b57\u6bb5, \u8fc7\u6ee4\u6389\u4e0d\u7b26\u5408\u8981\u6c42\u7684\u8bb0\u5f55\u540e\u518d\u56de\u8868, \u53ef\u51cf\u5c11\u56de\u8868\u6b21\u6570, \u63d0\u9ad8\u67e5\u8be2\u6548\u7387</li> <li>\u7b80\u5355\u8bf4\u5c31\u662f like \u5b8c\u4e4b\u540e\u7ee7\u7eed\u5339\u914d age \u4f7f\u8303\u56f4\u7f29\u5c0f, \u800c\u8054\u5408\u7d22\u5f15\u4e2d\u7b2c\u4e00\u4e2a\u5b57\u6bb5\u4f7f\u7528 &gt; \u4e0d\u4e00\u5b9a\u4f1a\u4f7f\u7528\u7d22\u5f15(\u4f30\u8ba1\u548c\u7ed3\u679c\u96c6\u5927\u5c0f\u6709\u5173, like\u76f8\u5bf9\u6765\u8bf4\u6bd4\u8f83\u5c0f), \u4e5f\u4e0d\u4f1a\u4f7f\u7528\u7d22\u5f15\u4e0b\u63a8</li> <li>\u7d22\u5f15\u4e0b\u63a8\u4f1a\u51cf\u5c11\u56de\u8868\u6b21\u6570, \u4ec5\u9650\u4e8e\u4f7f\u7528innodb\u7684\u4e8c\u7ea7\u7d22\u5f15, \u56e0\u4e3a\u4e3b\u952e\u7d22\u5f15\u662f\u805a\u7c07\u7d22\u5f15, \u53f6\u5b50\u8282\u70b9\u5305\u542b\u6240\u6709\u6570\u636e, \u7d22\u5f15\u4e0b\u63a8\u4e0d\u4f1a\u8d77\u5230\u51cf\u5c11\u67e5\u8be2\u5168\u884c\u6570\u636e\u7684\u6548\u679c</li> </ul> <ul> <li> <p>\u5bf9\u7d22\u5f15\u4f7f\u7528\u8303\u56f4\u6761\u4ef6\u662f, \u6839\u636e\u6761\u4ef6\u7684\u5927\u5c0f, \u53ef\u80fd\u4f1a\u6709\u4e0d\u540c\u7684\u7ed3\u679c, \u4f8b\u5982:</p> </li> <li> <p>where 100 &lt; speed &lt; 100000000 \u5c31\u6709\u53ef\u80fd\u4e0d\u8d70\u7d22\u5f15</p> </li> <li>where 100 &lt; speed &lt; 200 \u5c31\u6709\u53ef\u80fd\u8d70\u7d22\u5f15</li> </ul> <p>\u8fd9\u79cd\u60c5\u51b5\u5c31\u597d\u6bd4, \u8868\u4e2d\u7684\u6570\u636e\u91cf\u5c11, \u5982\u679c\u4f7f\u7528\u975e\u4e3b\u952e\u7d22\u5f15, \u8fd8\u8981\u56de\u8868, \u4e0d\u5982\u76f4\u63a5\u5168\u8868\u626b\u63cf\u6765\u7684\u5feb</p>"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/","title":"MySQL\u4e4b\u4f18\u5316","text":""},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#_1","title":"\u6392\u5e8f\u4f18\u5316\u603b\u7ed3","text":"<ul> <li> <p>MySQL\u652f\u6301filesort\u548cindex\u4e24\u79cd\u6392\u5e8f\u65b9\u5f0f, Using index\u76f4\u63a5\u626b\u63cf\u7d22\u5f15\u672c\u8eab\u5b8c\u6210\u6392\u5e8f, \u6548\u7387\u9ad8, Using filesort\u662f\u6587\u4ef6\u6392\u5e8f, \u6548\u7387\u6162</p> </li> <li> <p>order by\u6ee1\u8db3\u4f7f\u7528 Using index \u7684\u6761\u4ef6:</p> <ul> <li>\u7b26\u5408\u7d22\u5f15\u6700\u5de6\u524d\u7f00\u539f\u5219</li> <li>where\u8bed\u53e5\u540e\u9762\u6761\u4ef6\u548corder by\u8bed\u53e5\u540e\u9762\u6761\u4ef6\u548c\u5728\u4e00\u8d77\u7b26\u5408\u6700\u5de6\u524d\u7f00\u539f\u5219</li> </ul> </li> <li> <p>\u5c3d\u91cf\u4f7f\u7528\u7d22\u5f15\u6392\u5e8f, \u5373\u7b26\u5408\u5efa\u7acb\u7d22\u5f15\u65f6\u7684\u6700\u5de6\u524d\u7f00\u539f\u5219</p> </li> <li> <p>order by \u7684\u6761\u4ef6\u4e0d\u5728\u7d22\u5f15\u5217\u4e0a, \u4f1a\u4f7f\u7528filesort\u6392\u5e8f, \u7d22\u5f15\u5c3d\u91cf\u4f7f\u7528\u8986\u76d6\u7d22\u5f15\u7684\u5217\u6392\u5e8f</p> </li> <li> <p>group by \u4e0e order by \u975e\u5e38\u7c7b\u4f3c, \u5b9e\u8d28\u662f\u5148\u6392\u5e8f\u540e\u5206\u7ec4, \u6309\u7167\u7d22\u5f15\u6700\u5de6\u524d\u7f00\u539f\u5219, \u5982\u679c group by \u7684\u7ed3\u679c\u4e0d\u9700\u8981\u6392\u5e8f, \u5219\u6dfb\u52a0 order by null \u7981\u6b62\u6392\u5e8f, \u4e5f\u80fd\u63d0\u9ad8\u67e5\u8be2\u6548\u7387</p> </li> <li> <p>where \u6761\u4ef6\u9ad8\u4e8e having, \u5c3d\u91cf\u5728 where \u4e2d\u9650\u5b9a\u6761\u4ef6\u800c\u975e\u5728 having \u4e2d</p> </li> </ul> <p>\u6269\u5c551: </p> <p>Using index \u662f\u626b\u63cf\u4e8c\u7ea7\u7d22\u5f15\u6216\u8054\u5408\u7d22\u5f15, \u4e5f\u5c31\u662f\u975e\u805a\u7c07\u7d22\u5f15</p> <p>Using filesort \u662f\u626b\u63cf\u4e3b\u952e\u7d22\u5f15, \u4e5f\u5c31\u662f\u805a\u7c07\u7d22\u5f15</p> <p>\u56e0\u4e3a\u805a\u7c07\u7d22\u5f15\u7d22\u5f15\u5305\u542b\u6240\u6709\u6570\u636e, \u6240\u4ee5\u4ece\u78c1\u76d8\u8bfb\u53d6ibd\u6587\u4ef6\u65f6\u52a0\u8f7d\u7684\u6570\u636e\u5927, \u6548\u7387\u4e0d\u5982\u975e\u805a\u7c07\u7d22\u5f15, \u4e5f\u5c31\u662f\u8bf4Using index \u6bd4 Using filesort \u7684\u6548\u7387\u9ad8</p> <p>\u6269\u5c552:</p> <p>\u6392\u5e8f\u5206\u4e3a\u5355\u8def\u6392\u5e8f\u548c\u53cc\u8def\u6392\u5e8f</p> <p>\u5355\u8def\u6392\u5e8f\u5c31\u662f\u76f4\u63a5\u628aselect\u51fa\u6765\u7684\u7ed3\u679c\u96c6load\u5230\u5185\u5b58\u4e2d, \u7136\u540e\u6392\u5e8f, \u6392\u5e8f\u4e4b\u540e\u7684\u7ed3\u679c\u5c31\u662f\u6700\u7ec8\u7ed3\u679c</p> <p>\u53cc\u8def\u6392\u5e8f\u4ec5\u4ec5\u662f\u5c06 id \u548c\u6392\u5e8f\u7684\u5b57\u6bb5load\u5230\u5185\u5b58\u4e2d(\u5360\u7528\u7a7a\u95f4\u5c0f), \u7136\u540e\u6392\u5e8f, \u6392\u5e8f\u5b8c\u6210\u540e\u6839\u636e id \u518d\u6b21\u56de\u8868\u62ff\u5230\u6700\u7ec8\u7684\u7ed3\u679c</p> <p>\u4e24\u8005\u4f18\u70b9\u7c7b\u4f3c\u65f6\u95f4\u6362\u7a7a\u95f4, \u7a7a\u95f4\u6362\u65f6\u95f4\u7684\u610f\u601d</p> <p>MySQL\u901a\u8fc7\u7cfb\u7edf\u7cfb\u7edf\u53d8\u91cf max_length_for_short_data(\u9ed8\u8ba41048576\u5b57\u8282, 1M)\u7684\u5927\u5c0f\u786e\u5b9a\u4f7f\u7528\u54ea\u79cd\u6392\u5e8f\u65b9\u5f0f\u00b7</p> <p>\u6240\u6709\u5b57\u6bb5\u603b\u957f\u5ea6\u5c0f\u4e8e max_length_for_short_data \u5c31\u4f7f\u7528\u5355\u8def\u6392\u5e8f, \u5426\u5219\u4f7f\u7528\u53cc\u8def\u6392\u5e8f, \u6bd4\u5982\u8868\u91cc\u5b57\u6bb5\u6bd4\u8f83\u591a, \u52a0\u8d77\u6765\u8d85\u8fc71024\u5b57\u8282, \u5c31\u4f7f\u7528\u53cc\u8def\u6392\u5e8f</p> <p>\u6269\u5c553:</p> <p>MySQL\u4f1a\u81ea\u52a8\u5206\u914d\u4e00\u5757\u5185\u5b58\u7a7a\u95f4(sort_buffer), \u5982\u679c\u6392\u5e8f\u6570\u636e\u91cf\u8f83\u5c0f, \u4f1a\u5728\u5185\u5b58\u4e2d\u4e5f\u5c31\u662fsort_buffer\u4e2d\u5b8c\u6210, \u5426\u5219\u4f1a\u5728\u78c1\u76d8\u4e2d\u751f\u6210\u4e34\u65f6\u6587\u4ef6, \u5728\u8bfb\u5230\u5185\u5b58\u4e2d\u8fdb\u884c\u6392\u5e8f, \u4e5f\u5c31\u662f\u8bf4\u6392\u5e8f\u6570\u636e\u8f83\u5927\u65f6, \u67e5\u8be2\u6548\u7387\u964d\u4f4e\u67e5\u8be2\u65f6\u95f4\u589e\u957f</p> <p>\u5c3d\u91cf\u4f7f\u7528limit\u9650\u5236\u7ed3\u679c\u96c6\u5927\u5c0f, \u8fd9\u6837\u6392\u5e8f\u6548\u7387\u4e5f\u4f1a\u9ad8</p>"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#_2","title":"\u7d22\u5f15\u8bbe\u8ba1\u539f\u5219","text":"<ul> <li>\u5efa\u8868\u4e4b\u521d\u4e0d\u5efa\u7d22\u5f15, \u540e\u7eed\u6839\u636e\u5b9e\u9645\u4e1a\u52a1, \u628a\u6d89\u53ca\u5230\u76f8\u5173\u8868\u7684\u76f8\u5173sql\u62ff\u51fa\u6765\u5206\u6790, \u518d\u6839\u636e\u5206\u6790\u7ed3\u679c\u5efa\u7acb\u7d22\u5f15, \u6bd4\u5982\u5efa\u7acb\u8054\u5408\u7d22\u5f15\u65f6\u5c3d\u91cf\u8986\u76d6\u4ee3\u7801\u4e2d\u5e38\u7528\u7684\u8986\u76d6\u6761\u4ef6(where\u540e\u9762\u7684\u6761\u4ef6), \u9488\u5bf9\u4e0d\u540c\u7684\u60c5\u51b5\u8fd8\u53ef\u5efa\u7acb\u4e00\u4e2a\u6216\u591a\u4e2a\u8054\u5408\u7d22\u5f15</li> <li>\u5bf9\u4e8e\u5dee\u5f02\u8f83\u5c0f\u7684\u5b57\u6bb5(\u5373\u5c0f\u57fa\u6570\u5b57\u6bb5), \u4e0d\u8981\u5efa\u7acb\u7d22\u5f15, \u610f\u4e49\u4e0d\u5927, \u6bd4\u5982gender, \u4e0d\u662f0\u5c31\u662f1, \u65e0\u6cd5\u4f53\u73b0\u4e8c\u5206\u67e5\u627e\u7684\u4f18\u52bf, \u6240\u4ee5\u901a\u8fc7distinct\u67e5\u770b\u5b57\u6bb5\u7684\u503c\u5360\u7528\u603b\u6761\u6570\u7684\u6bd4\u4f8b, \u9ad8\u7684\u5efa\u8bae\u5efa\u7acb\u7d22\u5f15, \u4f4e\u7684\u4e0d\u5efa\u8bae</li> <li>\u5c3d\u91cf\u5bf9\u5360\u7528\u7a7a\u95f4\u8f83\u5c0f\u5b57\u6bb5\u7c7b\u578b\u8bbe\u7f6e\u7d22\u5f15, \u4f8b\u5982 tinyint, \u56e0\u4e3a\u5360\u7528\u78c1\u76d8\u7a7a\u95f4\u5c0f, \u67e5\u8d77\u6765\u6548\u7387\u9ad8</li> <li>\u5bf9\u4e8e\u5360\u7528\u7a7a\u95f4\u8f83\u5927\u7684\u5b57\u6bb5, \u4f8b\u5982vachar(255), \u4f7f\u7528\u524d\u51e0\u4e2a\u5b57\u6bb5\u5efa\u7acb\u7d22\u5f15, \u7c7b\u4f3c key index(name(20), age, birthday), \u4f46\u8fd9\u6837\u505a\u7684\u7f3a\u70b9\u662f order by \u548c group by \u8be5\u5b57\u6bb5\u65f6\u65e0\u6cd5\u4f7f\u7528\u7d22\u5f15</li> <li>where\u548corder by\u51b2\u7a81\u65f6, \u4f18\u5148\u9488\u5bf9where\u6761\u4ef6\u7684\u5b57\u6bb5\u5efa\u7acb\u7d22\u5f15(\u6bd4\u5982key index(name(20), \u5426\u5219\u5c31\u662f(key index(name))</li> <li>\u5bf9\u4e8e\u6162sql\u9488\u5bf9\u6027\u4f18\u5316(\u9ed8\u8ba4\u5b9a\u4e49\u67e5\u8be2\u65f6\u95f4\u8d85\u8fc710s\u7684\u662f\u6162sql, MySQL\u4f1a\u8bb0\u5f55\u8fd9\u4e9bsql\u5230\u4e00\u4e2a\u7279\u5b9a\u7684\u6587\u4ef6\u4e2d), \u6ce8\u610f, \u9ed8\u8ba4\u6ca1\u6709\u5f00\u542f\u8fd9\u9879\u529f\u80fd, \u56e0\u4e3a\u4f1a\u5f71\u54cd\u6027\u80fd, \u5982\u679c\u662f\u4e3b\u4ece\u8bbe\u8ba1, \u53ef\u4ee5\u5728\u5907\u5e93\u5f00\u542f</li> <li>\u5bf9\u4e8e\u5927\u6982\u7387\u4f7f\u7528\u8303\u56f4\u4f5c\u4e3a\u6761\u4ef6\u7684\u5b57\u6bb5, \u5efa\u7acb\u8054\u5408\u7d22\u5f15\u65f6\u8981\u653e\u5230\u6700\u540e, \u4f8b\u5982age, \u90a3\u4e48\u5c31\u5e94\u8be5 key (name, gender, age), \u56e0\u4e3awhere\u6761\u4ef6\u540e\u5b57\u6bb5\u4f7f\u7528 &gt; \u7b49\u8303\u56f4\u6761\u4ef6\u540e,  and \u540e\u9762\u7684\u5b57\u6bb5\u4fbf\u65e0\u6cd5\u4f7f\u7528\u7d22\u5f15\u4e86</li> </ul> <p>\u6838\u5fc3\u601d\u8def\u5c31\u662f\u5c3d\u91cf\u5229\u7528\u4e00\u4e24\u4e2a\u590d\u6742\u7684\u591a\u5b57\u6bb5\u8054\u5408\u7d22\u5f15, \u8986\u76d680%\u7684\u4e1a\u52a1\u573a\u666f, \u7136\u540e\u4f7f\u7528\u4e00\u4e24\u4e2a\u8f85\u52a9\u7d22\u5f15(\u8054\u5408\u7d22\u5f15\u6216\u5355\u5b57\u6bb5\u7d22\u5f15)\u89e3\u51b3\u5269\u4e0b\u7684\u4e1a\u52a1\u573a\u666f, \u4fdd\u8bc1\u5927\u6570\u91cf\u7ea7\u522b\u7684\u67e5\u8be2\u90fd\u80fd\u4f7f\u7528\u7d22\u5f15, \u8fd9\u6837\u65e2\u53ef\u4fdd\u8bc1\u67e5\u8be2\u901f\u5ea6\u548c\u6027\u80fd\u4e0d\u4f4e</p>"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#limit","title":"Limit\u4f18\u5316","text":""},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#1","title":"\u793a\u4f8b1:","text":"<pre><code>select * from a_table limit 10000, 10;\n</code></pre> <p>\u5b9e\u9645\u4e0aMySQL\u67e5\u8be2\u4e8610010\u6761\u6570\u636e, \u7136\u540e\u820d\u5f03\u524d10000\u6761, \u53ea\u5c55\u793a\u6700\u540e10\u6761, \u6548\u7387\u4f4e\u4e0b</p> <p>\u4f18\u5316:</p> <pre><code>select * from a_table where id &gt; 10000 limit 10;\n</code></pre> <p>\u4f7f\u7528\u524d\u63d0, \u81ea\u589e\u4e14\u8fde\u7eed\u7684\u4e3b\u952e\u6392\u5e8f\u5206\u9875\u67e5\u8be2</p> <p>\u5047\u8bbe\u4e2d\u95f4\u5220\u9664\u4e86\u67d0\u4e9b\u6570\u636e, \u4e0a\u8ff0\u4e24\u6761\u8bed\u53e5\u67e5\u8be2\u7684\u7ed3\u679c\u4f1a\u4e0d\u4e00\u6837, \u539f\u56e0\u5c31\u662f limit \u672c\u8d28\u4f9d\u7136\u662f\u4ece\u7b2c\u4e00\u6761\u6570\u636e\u5f00\u59cb\u67e5\u8be2\u8ba1\u7b97</p>"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#2","title":"\u793a\u4f8b2:","text":"<pre><code>select * from a_tble order by name limit 10000, 10;\n</code></pre> <p>\u5047\u8bbe a_table \u8868\u4e2d\u6709\u8054\u5408\u7d22\u5f15(name, age, job), \u7406\u8bba\u4e0a<code>order by name</code>\u4f1a\u8d70\u7d22\u5f15, \u4f46\u5b9e\u9645\u4e0a\u4e0d\u4f1a, \u539f\u56e0\u5c31\u662f\u524d\u9762\u591a\u6b21\u63d0\u5230\u7684, MySQL \u8ba4\u4e3a\u6570\u636e\u91cf\u8f83\u5927, \u4f7f\u7528\u8054\u5408\u7d22\u5f15\u626b\u63cf\u6570\u636e\u540e\u8fd8\u9700\u8981\u56de\u8868, \u4e0d\u5982\u76f4\u63a5\u5168\u8868\u626b\u63cf</p> <p>\u4f7f\u7528 Explain \u53ef\u4ee5\u770b\u5230 type \u662f ALL, key \u4e3a\u7a7a, extra \u662f Using filesort, \u8bc1\u660e\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15</p> <p>\u4f18\u5316:</p> <pre><code>select * from a_table as a inner join (select id from a_table order by name limit 10000, 10) as b on a.id = b.id;\n</code></pre> <p>\u89e3\u91ca:</p> <p>\u56e0\u4e3a, <code>select id from a_table order by name limit 10000, 10</code> \u4e0d\u4f7f\u7528<code>select *</code>\u800c\u662f<code>select id</code>, \u5373\u4f7f\u7528\u4e86\u8986\u76d6\u7d22\u5f15, \u6b64\u65f6<code>order by name</code>\u8d70\u4e86\u7d22\u5f15, \u4f7f\u7528 explain \u53ef\u4ee5\u770b\u5230 type \u662f index, extra \u662f Using index, \u800c\u4e14\u6700\u7ec8\u751f\u6210\u7684\u8fd9\u5f20\u4e34\u65f6\u8868\u53ea\u670910\u6761\u6570\u636e</p> <p>\u800c\u4e14,  <code>inner join</code>\u7684\u6761\u4ef6\u662f<code>on a.id = b.id</code>\u662f\u4e3b\u952e\u5173\u8054, \u5176 type \u662f eq_rf,  key \u662f PRIMARY, \u6240\u4ee5\u548c\u4e0a\u9762\u7684\u4e34\u65f6\u8868\u8054\u8868\u67e5\u8be2\u7684\u6700\u7ec8\u6548\u7387\u5f88\u9ad8</p>"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#join","title":"Join\u4f18\u5316","text":"<p>\u5148\u8bf4\u4e24\u4e2a\u7b97\u6cd5</p>"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#_3","title":"\u5d4c\u5957\u5faa\u73af\u8fde\u63a5\u7b97\u6cd5","text":"<p>\u5373 Nested-Loop Join(NLJ) \u7b97\u6cd5</p> <p>\u524d\u63d0:</p> <p>\u4e24\u5f20\u8868 a \u548c b, \u6570\u636e\u7ed3\u6784\u4e00\u6a21\u4e00\u6837, \u5176\u4e2d name \u5b57\u6bb5\u5efa\u7acb\u7d22\u5f15, a\u8868\u4e00\u4e07\u6761\u6570\u636e, b\u8868100\u6761\u6570\u636e</p> <p>\u8bed\u53e5:</p> <pre><code>select * from a inner join b on a.name = b.name;\n</code></pre> <p>\u6267\u884c:</p> <ul> <li>1\u3001\u5168\u8868\u626b\u63cf b \u8868, \u62ff\u5230\u4e00\u6761\u8bb0\u5f55</li> <li>2\u3001\u62ff\u5230 1 \u4e2d\u7684\u7ed3\u679c, \u901a\u8fc7 name \u7d22\u5f15\u53bb a \u8868\u4e2d\u5b9a\u4f4d</li> <li>3\u3001\u91cd\u590d\u6b65\u9aa4 1 \u548c 2, \u62ff\u5230\u6700\u7ec8\u7ed3\u679c</li> </ul> <p>\u671f\u95f4, b \u8868\u626b\u63cf100\u6b21, \u7531\u4e8e\u4f7f\u7528\u4e86\u6761\u4ef6<code>on a.name = b.name</code>\u4f7f\u7528\u4e86\u7d22\u5f15, \u4e5f\u53ea\u626b\u63cf\u4e86100\u6b21</p> <p>\u7b97\u6cd5\u89e3\u91ca:</p> <ul> <li>MySQL\u7684\u4f18\u5316\u5668\u4e00\u822c\u4f1a\u9009\u62e9\u5c0f\u8868\u505a\u9a71\u52a8\u8868, \u5927\u8868\u505a\u88ab\u9a71\u52a8\u8868, \u5373 a \u662f\u88ab\u9a71\u52a8\u8868, b \u662f\u9a71\u52a8\u8868, \u6267\u884c\u8fc7\u7a0b\u4e2d\u5148\u6267\u884c\u9a71\u52a8\u8868</li> <li>\u5bf9\u4e8e left join, \u5de6\u8868\u662f\u9a71\u52a8\u8868, \u53f3\u8868\u662f\u88ab\u9a71\u52a8\u8868</li> <li>\u5bf9\u4e8e right join, \u6b63\u597d\u548c left join \u76f8\u53cd</li> <li>\u5c0f\u8868\u7684\u5b9a\u4e49\u662f\u7ecf\u8fc7\u6ee4\u6761\u4ef6\u7b5b\u9009\u540e\u6570\u636e\u91cf\u5c0f\u7684\u8868\u662f\u5c0f\u8868, \u4e0d\u662f\u5355\u7eaf\u7684\u6307\u6574\u4e2a\u8868\u6570\u636e\u91cf\u5c0f, \u5982\u679c\u6ca1\u6709\u8fc7\u6ee4\u6761\u4ef6\u90a3\u5c31\u6307\u6574\u4e2a\u8868</li> </ul> <p>\u4f7f\u7528 explain \u6ca1\u6709\u5728\u7ed3\u679c\u7684 extra \u4e2d\u770b\u5230 Using join buffer, \u5219\u8868\u793a\u5f53\u524d jon \u8bed\u53e5\u4f7f\u7528\u4e86 NLJ \u7b97\u6cd5</p> <p>\u5982\u679c\u88ab\u9a71\u52a8\u8868\u5173\u8054\u7684\u5b57\u6bb5\u6ca1\u6709\u7d22\u5f15, NLJ \u7b97\u6cd5\u6548\u7387\u4f4e\u4e0b, MySQL\u4f1a\u9009\u62e9 BNL \u7b97\u6cd5</p>"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#_4","title":"\u57fa\u4e8e\u5757\u7684\u5d4c\u5957\u5faa\u73af\u94fe\u63a5\u7b97\u6cd5","text":"<p>\u5373 Block Nested-Loop Join(BNL) \u7b97\u6cd5</p> <p>\u8bed\u53e5:</p> <pre><code>select * from a inner join b on a.age = b.age;\n</code></pre> <p>\u7531\u4e8e age \u5b57\u6bb5\u6ca1\u6709\u7d22\u5f15, \u6240\u4ee5\u4e0d\u4f1a\u4f7f\u7528 NLJ \u7b97\u6cd5, \u800c\u662f BNL\u7b97\u6cd5</p> <p>\u6267\u884c:</p> <ul> <li>\u8868\u5c0f\u8868 b, \u5373\u9a71\u52a8\u8868\u7684\u6570\u636e\u653e\u5230 join_buffer \u4e2d</li> <li>\u628a\u5927\u8868 a, \u5373\u88ab\u9a71\u52a8\u8868\u4e2d\u7684\u6bcf\u4e00\u884c, \u5355\u72ec\u53d6\u51fa\u6765\u548c join_buffer \u4e2d\u7684\u6570\u636e\u6bd4\u5bf9</li> <li>\u8fd4\u56de\u6ee1\u8db3 join \u6761\u4ef6\u7684\u6570\u636e</li> </ul> <p>\u671f\u95f4, \u4e24\u5f20\u8868\u90fd\u662f\u5168\u8868\u626b\u63cf, \u5171\u626b\u63cf 10000 + 100 = 10100 \u6b21, \u540c\u65f6 \u7531\u4e8e join_buffer \u8868\u4e2d\u7684\u6570\u636e\u5728\u5185\u5b58\u4e2d\u4e14\u662f\u65e0\u5e8f\u7684, \u4ece\u8868 a \u4e2d\u53d6\u51fa\u6765\u7684\u6570\u636e\u6700\u591a\u8981\u5728\u8868 b \u4e2d\u5224\u65ad 100 \u6b21, \u6700\u540e\u5185\u5b58\u4e2d\u5224\u65ad\u7684\u6570\u91cf\u7ea7\u662f 10000 * 100 , \u5373\u767e\u4e07\u7ea7</p> <p>PS: join_buffer \u6570\u636e\u5728\u5185\u5b58\u4e2d, \u5185\u5b58\u7a7a\u95f4\u5927\u5c0f\u7531\u53c2\u6570 join_buffer_size \u51b3\u5b9a, \u9ed8\u8ba4\u503c\u597d\u50cf\u662f256K, \u5982\u679c\u6b64\u503c\u8f83\u5c0f\u653e\u4e0d\u4e0b b \u8868\u6570\u636e, \u5219\u4f1a\u5206\u6bb5\u653e, \u5373\u5148\u628a b \u8868\u7684\u4e00\u90e8\u5206\u6570\u636e\u653e\u5230 join_buffer \u5224\u65ad, \u5b8c\u6210\u4e4b\u540e\u518d\u653e\u4e00\u90e8\u5206\u6570\u636e, \u76f4\u5230\u653e\u5b8c, \u65e0\u5f62\u4e2d\u589e\u52a0\u4e86\u8ba1\u7b97\u65f6\u95f4</p> <p>\u6211\u731c BNL \u7b97\u6cd5\u7684\u4e2d\u7684 B, \u5373 block \u5c31\u662f\u6307\u5185\u5b58\u4e2d\u8fd9\u4e00\u5757\u5757\u7684 join_buffer</p> <p>\u73b0\u5728\u8bf4\u8bf4\u4e3a\u5565\u8bf4 \u8fd9\u79cd\u60c5\u51b5(\u5373 on \u7684\u6761\u4ef6\u7684\u5b57\u6bb5\u6ca1\u6709\u7d22\u5f15)\u4e0b, NLJ\u6548\u7387\u4f4e, BNL\u6548\u7387\u9ad8, \u56e0\u4e3aNLJ\u662f\u626b\u63cf\u7d22\u5f15, \u6240\u7d22\u5f15\u6587\u4ef6\u5728\u78c1\u76d8\u4e0a, NLJ\u662f\u78c1\u76d8\u626b\u63cf, \u800cBNL\u51fa\u5185\u5b58</p> <p>\u6240\u4ee5, \u6709\u7d22\u5f15\u7684\u60c5\u51b5\u4e0b\u4e00\u822c\u7528NLJ(\u6548\u7387\u9ad8), \u6ca1\u7d22\u5f15\u7684\u60c5\u51b5\u4e0b\u4e00\u822c\u5206BNL(\u6548\u7387\u9ad8)</p>"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#_5","title":"\u4f18\u5316","text":"<p>\u901a\u8fc7\u5bf9NLJ\u548cBNL\u7684\u4e86\u89e3, \u603b\u7ed3\u4eae\u70b9\u4f18\u5316\u539f\u5219:</p> <ul> <li>\u5173\u8054\u5b57\u6bb5\u52a0\u7d22\u5f15</li> <li>\u5c0f\u8868\u9a71\u52a8\u5927\u8868</li> </ul> <p>\u6269\u5c55:</p> <p>\u7f16\u5199inner join\u8bed\u53e5\u65f6, \u5982\u679c\u660e\u786e\u77e5\u9053\u54ea\u4e2a\u8868\u5c0f, \u53ef\u4f7f\u7528<code>straight_join</code>\u8bed\u6cd5\u6307\u5b9a\u524d\u9762\u7684\u8868\u4f5c\u4e3a\u9a71\u52a8\u8868, \u7701\u53bbMySQL\u4f18\u5316\u5668\u5224\u65ad\u7684\u8fc7\u7a0b, \u4e5f\u53ef\u63d0\u9ad8\u6548\u7387, \u5176\u8bed\u6cd5\u683c\u5f0f\u4e3a:</p> <p><code>\u5c0f\u8868 straight_join \u5927\u8868</code>, \u4f8b\u5982:</p> <pre><code>select * from b straight_join a on b.name = a.name;\n</code></pre> <p>\u6ce8\u610f: straight_join \u53ea\u9002\u7528\u4e8e inner join(\u56e0\u4e3a left join \u548c right join \u5df2\u7ecf\u6307\u5b9a\u4e86\u9a71\u52a8\u8868\u548c\u88ab\u9a71\u52a8\u8868, \u5373\u6267\u884c\u987a\u5e8f)</p>"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#inexists","title":"IN\u548cEXISTS\u4f18\u5316","text":"<p>\u539f\u5219: \u5c0f\u8868\u9a71\u52a8\u5927\u8868, \u5c0f\u8868\u7684\u5b9a\u4e49\u540cjoin</p> <p>1\u3001\u5f53A\u8868\u6570\u636e\u96c6\u5927\u4e8eB\u6570\u636e\u96c6\u65f6, IN \u4f18\u4e8eEXISTS, \u4f8b\u5982:</p> <p>a \u8868 100 \u4e07, b \u8868 100, \u4f18\u5148\u4f7f\u7528 in:</p> <pre><code>select * from a where id in (select id from b);\n</code></pre> <p>\u89e3\u91ca:</p> <p>in \u7684\u8bed\u6cd5\u89c4\u5219\u662f\u5148\u6267\u884c in \u540e\u9762\u7684\u5b50\u67e5\u8be2, \u518d\u6267\u884c in \u524d\u9762\u7684\u8bed\u53e5, \u5373\u5148\u6267\u884c b \u540e\u6267\u884c a, \u7136\u540e\u904d\u5386 b \u627e\u5230\u6700\u7ec8\u7684\u7ed3\u679c\u96c6, \u6240\u4ee5\u5148\u6267\u884c\u7684 b \u662f\u9a71\u52a8\u8868, \u6ee1\u8db3\u5c0f\u8868\u9a71\u52a8\u5927\u8868</p> <p>2\u3001\u5f53A\u8868\u6570\u636e\u96c6\u5c0f\u4e8eB\u8868\u6570\u636e\u96c6\u65f6, EXISTS\u4f18\u4e8eIN, \u4f8b\u5982:</p> <p>a \u8868 100, b \u8868100 \u4e07, \u4f18\u5148\u4f7f\u7528 exists:</p> <pre><code>select * from a where exists (select 1 from b where b.id = a.id);\n</code></pre> <p>\u89e3\u91ca:</p> <p>exists \u7684\u8bed\u6cd5\u89c4\u5219\u662f\u5148\u6267\u884c exists \u524d\u9762\u7684\u8bed\u53e5, \u518d\u6267\u884c\u540e\u9762\u7684\u5b50\u67e5\u8be2, \u5373\u5148\u6267\u884c a \u540e\u6267\u884c b, \u7136\u540e\u5c06 a \u653e\u5230 b \u4e2d\u9a8c\u8bc1\u6761\u4ef6, \u6240\u4ee5\u5148\u6267\u884c\u7684 a \u662f\u9a71\u52a8\u8868, \u6ee1\u8db3\u5c0f\u8868\u9a71\u52a8\u5927\u8868</p> <p>\u6ce8\u610f:</p> <ul> <li>exists(subquery) \u53ea\u8fd4\u56de True \u6216 False, \u56e0\u6b64\u5b57\u67e5\u8be2\u4e2d\u7684 select * \u53ef\u4ee5\u7528 select 1\u4ee3\u66ff, \u5b98\u65b9\u6587\u6863\u663e\u793aexists(subquery) \u4f1a\u5ffd\u7565 select *, \u56e0\u6b64\u6ca1\u533a\u522b</li> <li>\u5982\u679c where \u6761\u4ef6\u7528\u7684\u4e0d\u662f\u4e3b\u952e\u5b57\u6bb5, \u5219\u8be5\u5b57\u6bb5\u5e94\u5efa\u7acb\u7d22\u5f15\u63d0\u9ad8\u67e5\u8be2\u901f\u5ea6</li> <li>exists \u5f80\u5f80\u53ef\u4ee5\u7528 join \u6765\u4ee3\u66ff, \u4f55\u79cd\u65b9\u5f0f\u6700\u4f18\u9700\u5177\u4f53\u95ee\u9898\u5177\u4f53\u5206\u6790, \u4f46\u662f\u4e00\u822c\u60c5\u51b5\u4e0b\u5c3d\u91cf\u662f\u7528 join \u5c11\u7528 exists</li> </ul>"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#count","title":"COUNT\u4f18\u5316","text":"<p>\u5148\u8bf4\u4e00\u4e0b\u5404\u79cdcount\u7684\u6548\u7387</p> <p>\u5b57\u6bb5\u6709\u7d22\u5f15</p> <p>count(*) \u2248 count(1) &gt; count(\u5b57\u6bb5) &gt; count(\u4e3b\u952e)</p> <p>\u5b57\u6bb5\u6ca1\u6709\u7d22\u5f15</p> <p>count(*) \u2248 count(1) &gt; count(\u4e3b\u952e) &gt; count(\u5b57\u6bb5)</p> <p>\u6ce8\u610f: \u9488\u5bf9MySQL5.6\u30015.7\u7248\u672c\u53ca\u4ee5\u540e</p> <p>\u89e3\u91ca:</p> <ul> <li> <p>MySQL\u5bf9count(*)\u505a\u4e86\u4f18\u5316, \u4e0d\u53d6\u5b57\u6bb5\u503c, \u6309\u884c\u7d2f\u52a0, \u6548\u7387\u6700\u9ad8</p> </li> <li> <p>count(1), \u4e0d\u53d6\u5b57\u6bb5\u503c, \u4f7f\u7528\u5e38\u91cf1\u505a\u7edf\u8ba1(\u8ba1\u7b971\u7684\u6570\u91cf), \u6548\u7387\u5f88\u9ad8</p> </li> <li> <p>count(\u5b57\u6bb5), \u56e0\u4e3a\u8981\u53d6\u503c(\u8ba1\u7b97\u5b57\u6bb5\u7684\u6570\u91cf), \u6240\u4ee5\u6bd4count(1)\u6548\u7387\u7565\u4f4e</p> </li> <li> <p>\u5b9e\u9645\u4e0aMySQL\u5bf9count(\u4e3b\u952e)\u4e5f\u505a\u4e86\u4f18\u5316, \u5f53\u5b58\u5728\u4e8c\u7ea7\u7d22\u5f15\u65f6, \u4f18\u5148\u4f7f\u7528\u4e8c\u7ea7\u7d22\u5f15, \u5426\u5219\u5c31\u662f\u4e3b\u952e\u7d22\u5f15</p> </li> </ul> <p>\u56e0\u4e3a\u4e3b\u952e\u7d22\u5f15\u662f\u805a\u7c07\u7d22\u5f15, \u50a8\u5b58\u7684\u6570\u636e\u91cf\u5927, \u76f8\u5bf9\u50a8\u5b58\u90e8\u5206\u6570\u636e\u7684\u4e8c\u7ea7\u7d22\u5f15\u6765\u8bb2, \u626b\u63cf\u6548\u7387\u4f4e\u4e00\u4e9b</p> <p>\u8fd9\u4e5f\u5c31\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u5f53\u5b57\u6bb5\u5b58\u5728\u7d22\u5f15\u65f6 count(\u5b57\u6bb5) &gt; count(\u4e3b\u952e) </p> <p>\u6269\u5c55: count()\u662fSQL92\u5b9a\u4e49\u7684\u6807\u51c6\u7edf\u8ba1\u884c\u6570\u7684\u8bed\u6cd5, \u8ddf\u6570\u636e\u5e93\u65e0\u5173, \u8ddfNUll\u548cNot Null\u65e0\u5173, \u5c31\u662f\u8bf4<code>count(*)</code>\u4f1a\u7edf\u8ba1\u503c\u4e3aNull\u7684\u884c, <code>count(\u5b57\u6bb5)</code>\u4e0d\u4f1a\u7edf\u8ba1Null\u503c\u7684\u884c*</p> <p>\u4f46\u662f, \u5982\u679c\u8868\u7684\u6570\u636e\u91cf\u5f88\u5927, count\u4f9d\u7136\u4f1a\u5f88\u6162</p> <p>\u4e00\u4e9b\u4e0d\u592a\u9760\u8c31\u6216\u65b9\u4fbf\u7684\u4f18\u5316\u65b9\u5f0f:</p> <ul> <li>\u5bf9\u4e8e myisam \u5f15\u64ce, \u81ea\u52a8\u6709\u4e00\u5f20\u8868\u81ea\u52a8\u7ef4\u62a4\u6570\u91cf, \u76f4\u63a5 select count(*) \u5c31\u884c</li> <li>\u5bf9\u4e8e innodb \u5f15\u64ce, \u7531\u4e8eMVCC\u673a\u5236, \u6ca1\u6709\u7ef4\u62a4\u6570\u91cf\u8868, \u53ea\u80fd\u786c\u67e5</li> <li>\u5982\u679c\u5bf9\u603b\u6570\u7684\u7cbe\u5ea6\u8981\u6c42\u4e0d\u9ad8, \u53ea\u9700\u8981\u4e00\u4e2a\u5927\u7ea6\u503c, \u53ef\u4ee5\u4f7f\u7528 <code>show table status like 'a_table'</code>\u7684\u65b9\u5f0f\u67e5\u8be2, \u8fd9\u4e2a\u6027\u80fd\u5f88\u9ad8</li> <li>\u4eba\u5de5\u5c06\u603b\u6570\u7ef4\u62a4\u5230redis\u4e2d, \u6bcf\u6b21\u5bf9\u6570\u636e\u5e93\u8fdb\u884c\u63d2\u5165\u6216\u5220\u9664\u64cd\u4f5c\u65f6\u5bf9\u5e94\u7684\u5728redis\u4e2d\u505aincr\u548cdecr\u547d\u4ee4\u7684\u64cd\u4f5c, \u7f3a\u70b9\u662f\u5f88\u96be\u4fdd\u8bc1\u4e00\u6267\u884c, \u7ed3\u679c\u53ef\u80fd\u6709\u51fa\u5165</li> <li>\u63d2\u5165\u6216\u5220\u9664\u6570\u636e\u7684\u540c\u65f6\u7ef4\u62a4\u8ba1\u6570\u8868, \u4e14\u5728\u540c\u4e00\u4e2a\u4e8b\u52a1\u91cc\u64cd\u4f5c</li> </ul> <p>\u5982\u679c\u4e1a\u52a1\u573a\u666f\u4e2d count \u7684\u6b21\u6570\u6bd4\u8f83\u591a, \u4e14\u8868\u7684\u6570\u636e\u91cf\u5f88\u5927, \u53c8\u6709\u51c6\u786e\u7387\u7684\u8981\u6c42, \u5efa\u8bae\u4f7f\u7528\u6700\u540e\u4e00\u4e2a\u65b9\u5f0f\u7ef4\u62a4\u6570\u91cf</p>"},{"location":"mysql/MySQL%E4%BA%8B%E5%8A%A1%E5%8F%8A%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E%E9%94%81%E6%9C%BA%E5%88%B6/","title":"MySQL\u4e8b\u52a1\u53ca\u9694\u79bb\u7ea7\u522b\u4e0e\u9501\u673a\u5236","text":""},{"location":"mysql/MySQL%E4%BA%8B%E5%8A%A1%E5%8F%8A%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E%E9%94%81%E6%9C%BA%E5%88%B6/#acid","title":"\u4e8b\u52a1ACID\u5c5e\u6027","text":"<ul> <li>\u539f\u5b50\u6027(Atomicity)</li> </ul> <p>\u4e8b\u52a1\u662f\u4e00\u4e2a\u539f\u5b50\u64cd\u4f5c\u5355\u5143, \u8981\u7b26\u5408\u4e0d\u53ef\u5206\u5272\u539f\u5219, \u5373\u6240\u6709\u64cd\u4f5c(CURD)\u8981\u4e48\u5168\u90e8\u6210\u529f\u8981\u4e48\u5168\u90e8\u5931\u8d25</p> <ul> <li>\u4e00\u81f4\u6027(Consistent)</li> </ul> <p>\u4e8b\u52a1\u4ece\u5f00\u59cb\u5230\u7ed3\u675f, \u6570\u636e\u5fc5\u987b\u4fdd\u6301\u4e00\u81f4\u6027, \u5373\u6240\u6709\u64cd\u4f5c\u90fd\u5fc5\u987b\u5e94\u7528\u4e8e\u6570\u636e, \u4ee5\u4fdd\u6301\u6570\u636e\u7684\u5b8c\u6574\u6027</p> <ul> <li>\u9694\u79bb\u6027(Isolation)</li> </ul> <p>\u6bcf\u4e2a\u4e8b\u52a1\u4e92\u76f8\u9694\u79bb, \u6bcf\u4e2a\u4e8b\u52a1\u5185\u90e8\u7684\u6570\u636e\u4e92\u4e0d\u5f71\u54cd, \u5177\u4f53\u662f\u5426\u53d7\u5f71\u54cd\u4ee5\u53ca\u53d7\u5f71\u54cd\u8303\u56f4\u53ef\u901a\u8fc7\u9694\u79bb\u7ea7\u522b\u8c03\u6574</p> <ul> <li>\u6301\u4e45\u6027(Durable)</li> </ul> <p>\u4e8b\u52a1\u5b8c\u6210\u540e, \u5e94\u7528\u4e8e\u6570\u636e\u7684\u4fee\u6539\u662f\u6c38\u4e45\u6027\u4e0d\u53ef\u4e22\u5931\u7684</p>"},{"location":"mysql/MySQL%E4%BA%8B%E5%8A%A1%E5%8F%8A%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E%E9%94%81%E6%9C%BA%E5%88%B6/#_1","title":"\u5e76\u53d1\u95ee\u9898","text":"<ul> <li>\u810f\u5199, \u4e5f\u53eb\u66f4\u65b0\u4e22\u5931(Lost Update)</li> </ul> <p>\u591a\u4e2a\u4e8b\u52a1\u5bf9\u540c\u4e00\u4e2a\u6570\u636e\u64cd\u4f5c, \u5373\u6700\u540e\u7684\u66f4\u65b0\u8986\u76d6\u4e86\u5176\u4ed6\u4e8b\u52a1\u7684\u66f4\u65b0</p> <ul> <li>\u810f\u8bfb(Dirty Reads)</li> </ul> <p>\u4e00\u4e2a\u4e8b\u52a1\u5bf9\u6570\u636e\u8fdb\u884c\u4e86\u64cd\u4f5c, \u4f46\u5c1a\u672a\u63d0\u4ea4, \u6b64\u65f6\u8be5\u6570\u636e\u5904\u4e8e\u4e0d\u4e00\u81f4\u72b6\u6001, \u5982\u679c\u4e0d\u52a0\u63a7\u5236\u4efb\u7531\u5176\u4ed6\u4e8b\u52a1\u8bfb\u53d6\u8be5\u6570\u636e, \u8fd9\u79cd\u73b0\u8c61\u5c31\u662f\u810f\u8bfb</p> <ul> <li>\u4e0d\u53ef\u91cd\u8bfb(Non- Repeatable Reads)</li> </ul> <p>\u4e8b\u52a1\u5f00\u59cb\u540e, \u91cd\u590d\u8bfb\u53d6\u67d0\u4e2a\u6570\u636e, \u53d1\u73b0\u7ed3\u679c\u53d1\u751f\u53d8\u5316, \u5373\u4e8b\u52a1\u5185\u90e8\u7684\u76f8\u540c\u67e5\u8be2\u8bed\u53e5\u5728\u4e0d\u540c\u65f6\u523b\u8bfb\u53d6\u7684\u6570\u636e\u7ed3\u679c\u4e0d\u4e00\u6837, \u4e0d\u7b26\u5408\u9694\u79bb\u6027, \u8fd9\u79cd\u73b0\u8c61\u5c31\u662f\u4e0d\u53ef\u91cd\u590d\u8bfb</p> <ul> <li>\u5e7b\u8bfb(Phantom Reads)</li> </ul> <p>\u4e00\u4e2a\u4e8b\u52a1\u6309\u7167\u76f8\u540c\u7684\u6761\u4ef6\u91cd\u65b0\u8bfb\u53d6\u4e4b\u524d\u68c0\u7d22\u8fc7\u7684\u6570\u636e, \u53d1\u73b0\u4e86\u5176\u4ed6\u4e8b\u52a1\u63d2\u5165\u4e86\u6ee1\u8db3\u5176\u67e5\u8be2\u6761\u4ef6\u7684\u65b0\u6570\u636e, \u5373\u67d0\u4e8b\u52a1\u8bfb\u53d6\u5230\u4e86\u5176\u4ed6\u4e8b\u52a1\u63d0\u4ea4\u7684\u65b0\u589e\u6570\u636e, \u4e0d\u7b26\u5408\u9694\u79bb\u6027, \u8fd9\u79cd\u73b0\u8c61\u53eb\u505a\u5e7b\u8bfb</p>"},{"location":"mysql/MySQL%E4%BA%8B%E5%8A%A1%E5%8F%8A%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E%E9%94%81%E6%9C%BA%E5%88%B6/#_2","title":"\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b","text":"<p>\u4e0d\u540c\u7684\u9694\u79bb\u7ea7\u522b\u53ef\u89e3\u51b3\u4e0d\u540c\u7684\u5e76\u53d1\u95ee\u9898, \u5982\u4e0b\u8868</p> \u9694\u79bb\u7ea7\u522b \u810f\u8bfb \u4e0d\u53ef\u91cd\u590d\u8bfb \u5e7b\u8bfb \u8bfb\u672a\u63d0\u4ea4(Read uncommitted) \u662f \u662f \u662f \u8bfb\u5df2\u63d0\u4ea4(Read committed) \u5426 \u662f \u662f \u53ef\u91cd\u590d\u8bfb(Repeatable read) \u5426 \u5426 \u662f \u53ef\u4e32\u884c\u5316(Serializable) \u5426 \u5426 \u5426 <p>\u56e0\u4e3a\u4e8b\u52a1\u9694\u79bb\u662f\u5b9e\u8d28\u4e0a\u5c31\u662f\u4f7f\u4e8b\u52a1\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u201c\u4e32\u884c\u201d\u800c\u975e\u201c\u5e76\u53d1\u201d, \u6240\u4ee5\u6570\u636e\u5e93\u7684\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b\u8d8a\u4e25\u683c, \u5e76\u53d1\u526f\u4f5c\u7528\u8d8a\u5c0f, \u4ee3\u4ef7\u8d8a\u5927</p> <p>\u67e5\u770b\u5f53\u524d\u7684\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b: <code>show variables like 'tx_isolation';</code></p> <p>\u8bbe\u7f6e\u5f53\u524d\u7684\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b: <code>set tx_isolation='repeatable-read';</code></p> <p>\u8bfb\u672a\u63d0\u4ea4\u662f<code>read-uncommitted</code>, \u8bfb\u5df2\u63d0\u4ea4\u662f<code>read-commited</code>, \u53ef\u4e32\u884c\u5316\u662f<code>serializable</code></p> <p>\u4e0d\u540c\u7684session\u53ef\u4ee5\u8bbe\u7f6e\u4e0d\u540c\u7684\u9694\u79bb\u7ea7\u522b</p> <p>MySQL\u9ed8\u8ba4\u7684\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b\u662f\u53ef\u91cd\u590d\u8bfb</p> <p>\u810f\u8bfb\u89e3\u91ca: </p> <p>\u4ee5\u810f\u8bfb\u4e3a\u4f8b, \u5728\u4e24\u4e2asession\u4e2d\u5747\u8bbe\u7f6e\u9694\u79bb\u7ea7\u522b\u662f\u8bfb\u672a\u63d0\u4ea4, \u5f53session1\u4e2dupdate\u67d0\u4e2a\u6570\u636e, \u4f46\u6ca1\u6709\u63d0\u4ea4\u65f6, session2\u4e2d\u53ef\u4ee5\u770b\u5230session1\u4e2d\u4fee\u6539\u540e\u7684\u6570\u636e; \u6b64\u65f6\u8fd9\u4e2a\u5c31\u662f\u810f\u6570\u636e, \u5982\u679csession2\u4ee5\u8fd9\u4e2a\u810f\u6570\u636e\u4e3a\u57fa\u51c6, \u518d\u6b21\u4fee\u6539\u63d0\u4ea4, \u4f46\u662fsession1\u56de\u6eda\u4e86, \u90a3\u4e48session2\u6700\u7ec8\u63d0\u4ea4\u7684\u6570\u636e\u662f\u4e0d\u5bf9\u7684</p> <p>\u5982\u679c\u9694\u79bb\u7ea7\u522b\u662f\u8bfb\u5df2\u63d0\u4ea4, \u90a3\u4e48session2\u4e2d\u65e0\u6cd5\u770b\u5230session1\u4e2d\u4fee\u6539\u540e\u7684\u6570\u636e</p> <p>\u5982\u679c\u9694\u79bb\u7ea7\u522b\u662f\u53ef\u91cd\u590d\u8bfb, session1\u8bfb\u51fa\u6765\u6570\u636e\u540e, session2\u4fee\u6539\u6570\u636e(\u5047\u8bbe\u4fee\u6539\u4e86\u5b57\u6bb5number\u7684\u503c)\u5e76\u63d0\u4ea4, \u6b64\u65f6session1\u91cd\u590d\u8bfb\u53d6, \u8bfb\u5230\u4f9d\u65e7\u662fsession2\u4fee\u6539(cud\u64cd\u4f5c)\u524d\u7684\u6570\u636e(MVCC\u673a\u5236), \u4f46session1\u4fee\u6539\u6570\u636e, \u4f8b\u5982<code>update a_table set number=number-1 where id=1;</code>\u662f\u6b63\u786e\u7684, \u5173\u952e\u5c31\u5728\u4e8e<code>number=number-1</code>, number-1\u4e2d\u7684number\u4f1a\u8c03\u7528session2\u4e2d\u4fee\u6539\u540e\u7684\u6700\u7ec8\u6570\u636e, \u5177\u4f53\u770b\u4e0b\u9762\u7684\u89e3\u91ca</p> <p>\u4e0d\u53ef\u91cd\u590d\u8bfb\u89e3\u91ca:</p> <p>\u5173\u4e8e \u9694\u79bb\u7ea7\u522b \u8bbe\u7f6e\u6210 \u53ef\u91cd\u590d\u8bfb, \u4e0d\u53ef\u91cd\u590d\u8bfb \u662f \u5426, \u6bd4\u8f83\u7ed5, \u610f\u601d\u5c31\u662f\u73b0\u5728\u53ef\u4ee5\u91cd\u590d\u8bfb\u4e14\u91cd\u590d\u8bfb\u53d6\u7684\u6570\u636e\u4fdd\u6301\u4e0d\u53d8, \u5177\u4f53\u770b\u4e0b\u9762\u7684\u8bf4\u660e:</p> <p>\u6b64\u65f6session1\u4e2d\u5bf9\u8be5\u6570\u636e\u64cd\u4f5c, \u5e76\u4e0d\u4f1a\u4ee5\u4f60\u770b\u5230(session1\u8bfb\u51fa\u6765)\u7684\u6570\u636e\u4e3a\u57fa\u51c6, \u800c\u662f\u4ee5session2\u63d0\u4ea4\u7684\u6570\u636e\u4e3a\u57fa\u51c6, \u6700\u7ec8\u7ed3\u679c\u53ef\u4ee5\u770b\u5230\u7684\u53ef\u80fd\u4e0d\u592a\u4e00\u6837, \u8fd9\u5374\u662f\u6b63\u786e\u7684</p> <p>\u5e7b\u8bfb\u89e3\u91ca:</p> <p>\u4f9d\u65e7\u662f\u4e24\u4e2asession, \u4f7f\u7528\u9ed8\u8ba4\u7684\u53ef\u91cd\u590d\u8bfb\u9694\u79bb\u7ea7\u522b, \u6309\u7167\u4ee5\u4e0b\u8fc7\u7a0b\u64cd\u4f5c</p> <ul> <li>session1\u4e2d\u5f00\u542f\u4e8b\u52a1</li> <li>session1\u4e2dselect\u67e5\u52301\u6761\u6570\u636e</li> <li>session2\u4e2d\u5f00\u542f\u4e8b\u52a1\u540einsert\u4e00\u6761\u6570\u636e\u5e76\u63d0\u4ea4</li> <li>session1\u4e2dselect\u4f9d\u65e7\u662f1\u6761\u6570\u636e(\u8bfb\u53d6\u5386\u53f2\u7248\u672c)</li> <li>session1\u4e2dupdate id=2\u7684\u6570\u636e\u663e\u793a\u6210\u529f(\u8bfb\u53d6\u771f\u6b63\u7684\u7248\u672c, \u5df2\u7ecf\u6709\u7b2c2\u6761\u6570\u636e\u4e86)</li> <li>session1\u4e2d\u518d\u6b21select\u5c31\u67e5\u5230\u4e862\u6761\u6570\u636e</li> <li>\u8bc1\u660e\u4ecd\u672a\u89e3\u51b3\u5e7b\u8bfb\u95ee\u9898</li> </ul> <p>\u60f3\u89e3\u51b3\u8fd9\u4e9b\u5e76\u53d1\u7684\u526f\u4f5c\u7528, \u628a\u9694\u79bb\u7ea7\u522b\u8bbe\u7f6e\u6210\u53ef\u4e32\u884c\u5316, \u5728\u6b64\u7ea7\u522b\u4e0b, select\u64cd\u4f5c\u4e5f\u4f1a\u52a0\u9501,  \u5c31\u89e3\u51b3\u4e86\u5e7b\u8bfb, \u4f46\u8fd9\u4e5f\u5bfc\u81f4\u4e86\u6027\u80fd\u4f4e, \u57fa\u672c\u4e0d\u7528</p> <p>\u6ce8\u610f, \u53ef\u4e32\u884c\u5316\u53ef\u80fd\u52a0\u8868\u9501\u4e5f\u53ef\u80fd\u52a0\u884c\u9501, \u5177\u4f53\u4ec0\u4e48\u9501\u53d6\u51b3\u4e8e\u4f60\u7684sql\u8bed\u53e5, \u4f8b\u5982 <code>select * from a_table;</code> \u662f\u8868\u9501, <code>select * from a_table where id=1;</code> \u662f\u884c\u9501</p>"},{"location":"mysql/MySQL%E4%BA%8B%E5%8A%A1%E5%8F%8A%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E%E9%94%81%E6%9C%BA%E5%88%B6/#_3","title":"\u9501\u5206\u7c7b","text":"<ul> <li>\u4ece\u6027\u80fd\u5c42\u9762\u4e0a\u5206\u4e3a\u4e50\u89c2\u9501\u548c\u60b2\u89c2\u9501</li> <li>\u4ece\u6570\u636e\u5c42\u9762\u4e0a\u5206\u4e3a\u8bfb\u9501\u548c\u5199\u9501(\u5747\u5c5e\u4e8e\u60b2\u89c2\u9501)</li> <li>\u8bfb\u9501, \u4e5f\u53eb\u5171\u4eab\u9501\u6216\u8005S\u9501(Shared), \u9488\u5bf9\u540c\u4e00\u4e2a\u6570\u636e\u53ef\u540c\u65f6\u8fdb\u884c\u8bfb\u64cd\u4f5c, \u4e0d\u4f1a\u4e92\u76f8\u5f71\u54cd</li> <li>\u5199\u9501, \u4e5f\u53eb\u6392\u5b83\u9501\u6216\u8005X\u9501(eXclusive), \u5f53\u524d\u4e8b\u52a1\u9488\u5bf9\u67d0\u6570\u636e\u7684\u5199\u64cd\u4f5c\u5b8c\u6210\u4e4b\u524d, \u5176\u4ed6\u4e8b\u52a1\u65e0\u6cd5\u5bf9\u8be5\u6570\u636e\u8bfb\u6216\u8005\u5199</li> <li>\u52a0\u8bfb\u9501\u65f6, \u4efb\u4f55session\u90fd\u53ef\u8bfb\u8be5\u8868, \u5f53\u524dsession\u63d2\u5165\u6216\u66f4\u65b0\u88ab\u9501\u7684\u8868\u4f1a\u62a5\u9519, \u5176\u4ed6session\u7684\u63d2\u5165\u6216\u66f4\u65b0\u64cd\u4f5c\u5219\u4f1a\u7b49\u5f85</li> <li>\u52a0\u5199\u9501\u65f6, \u5f53\u524dsession\u53ef\u5bf9\u8be5\u8868\u8fdb\u884c\u589e\u5220\u6539\u67e5\u64cd\u4f5c, \u5176\u4ed6session\u5bf9\u8be5\u8868\u7684\u4efb\u4f55\u64cd\u4f5c\u90fd\u88ab\u963b\u585e</li> <li>\u603b\u7ed3\u6765\u8bf4, \u8bfb\u9501\u4f1a\u963b\u585e\u5199\u4f46\u4e0d\u4f1a\u963b\u585e\u8bfb, \u5199\u9501\u4f1a\u963b\u585e\u8bfb\u548c\u5199</li> <li>\u4ece\u9897\u7c92\u5ea6\u5c42\u9762\u4e0a\u5206\u4e3a\u8868\u9501\u548c\u884c\u9501</li> <li>\u8868\u9501, \u7ed9\u6574\u5f20\u8868\u52a0\u8bfb\u9501\u6216\u5199\u9501</li> <li>\u884c\u9501, \u7ed9\u67d0\u5f20\u8868\u7684\u67d0\u4e00\u5f20\u884c\u52a0\u8bfb\u9501\u6216\u5199\u9501</li> </ul> <p>\u4e50\u89c2\u9501\u4ece\u672c\u8d28\u4e0a\u8bb2\u4e0d\u662f\u9501, \u9ed8\u8ba4\u64cd\u4f5c\u4e0d\u4f1a\u6709\u51b2\u7a81\uff0c\u5728update\u7684\u65f6\u5019\u518d\u53bb\u68c0\u67e5\u51b2\u7a81, \u4f8b\u5982:</p> <pre><code>begin;\nselect number from product where id=1; //number\u7b49\u4e8e100\nupdate product set number = 150 where id=1 and number = 100;\ncommit;\n</code></pre> <p>\u5373, \u66f4\u65b0\u65f6\u6bd4\u5bf9\u539f\u5148\u7684\u6570\u636e(\u5224\u65adnumber=100), \u82e5\u6ca1\u6709\u53d1\u751f\u53d8\u5316(\u8868\u793a\u672a\u6536\u5230\u5176\u4ed6\u4e8b\u52a1\u5f71\u54cd), \u5373\u53ef\u8fdb\u884c\u64cd\u4f5c</p> <p>\u8868\u9501\u7684\u5f00\u9500\u5c0f\u52a0\u9501\u5feb, \u4e0d\u4f1a\u51fa\u73b0\u6b7b\u9501, \u9501\u5b9a\u9897\u7c92\u5ea6\u5927, \u53d1\u751f\u9501\u51b2\u7a81\u6982\u7387\u9ad8, \u5e76\u53d1\u7a0b\u5ea6\u4f4e, \u4e00\u822c\u7684\u7528\u9014\u662f, \u8fc1\u79fb\u6570\u636e\u5e93\u65f6, \u5bf9\u6240\u6709\u8868\u589e\u52a0\u4e00\u4e2a\u8bfb\u9501, \u9632\u6b62\u65b0\u6570\u636e\u5199\u5165, \u7136\u540e\u5b89\u5fc3\u8fc1\u79fb</p> <p>\u76f8\u5bf9\u4e8e\u8868\u9501, \u884c\u9501\u7684\u5f00\u9500\u5927\u52a0\u9501\u6162, \u53ef\u80fd\u4f1a\u51fa\u73b0\u6b7b\u9501, \u9501\u5b9a\u9897\u7c92\u5ea6\u5c0f, \u51fa\u73b0\u51b2\u7a81\u6982\u7387\u4f4e, \u5e76\u53d1\u7a0b\u5ea6\u9ad8</p> <p>\u539f\u56e0\u5c31\u662f\u8868\u9501\u53ea\u9700\u627e\u5230\u8fd9\u5f20\u8868, \u884c\u9501\u8fd8\u9700\u8981\u627e\u5230\u884c, \u6240\u4ee5\u5f00\u9500\u5927\u52a0\u9501\u6162, \u4e14\u8868\u9501\u662f\u9501\u6574\u5f20\u8868, \u6240\u4ee5\u4e0d\u4f1a\u53d1\u751f\u6b7b\u9501</p> <p>\u5173\u4e8e\u4e0d\u540c\u7684\u5f15\u64ce\u7684\u9501\u7684\u603b\u7ed3:</p> <ul> <li>MyISAM\u6267\u884cselect\u524d\u4f1a\u81ea\u52a8\u7ed9\u6d89\u53ca\u7684\u8868\u52a0\u8bfb\u9501</li> <li>MySIAM\u6267\u884cinsert\u3001update\u548cdelete\u65f6\u4f1a\u81ea\u52a8\u7ed9\u6d89\u53ca\u7684\u8868\u52a0\u5199\u9501</li> <li>InnoDB\u6267\u884cselect\u65f6, \u4e00\u822c\u60c5\u51b5\u4e0b, \u56e0\u4e3a\u6709mvcc\u673a\u5236(\u53ea\u9488\u5bf9\u8bfb\u5df2\u63d0\u4ea4\u548c\u53ef\u91cd\u590d\u8bfb\u8fd9\u4e24\u4e2a\u9694\u79bb\u7ea7\u522b\u8d77\u4f5c\u7528)\u4e0d\u4f1a\u52a0\u9501</li> <li>InnoDB\u6267\u884cinsert\u3001update\u548cdelete\u65f6\u4f1a\u81ea\u52a8\u7ed9\u6d89\u53ca\u7684\u8868\u7684\u884c\u52a0\u5199\u9501</li> </ul>"},{"location":"mysql/MySQL%E4%BA%8B%E5%8A%A1%E5%8F%8A%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E%E9%94%81%E6%9C%BA%E5%88%B6/#_4","title":"\u9501\u7684\u6269\u5c55","text":"<p>\u4e0a\u9762\u63d0\u5230\u8bbe\u7f6e\u9694\u79bb\u7ea7\u522b\u4e3a\u53ef\u4e32\u884c\u5316\u53ef\u89e3\u51b3\u5e7b\u8bfb\u95ee\u9898, \u4f46\u6b64\u9694\u79bb\u7ea7\u522b\u5bfc\u81f4\u6027\u80fd\u4f4e\u4e0b,</p> <p>\u9664\u6b64\u4e4b\u5916, \u5c06\u9694\u79bb\u7ea7\u522b\u8bbe\u7f6e\u4e3a\u53ef\u91cd\u590d\u8bfb\u65f6\u4f7f\u7528\u95f4\u9699\u9501(Gap Lock, \u9ed8\u8ba4\u542f\u7528\u65e0\u9700\u4efb\u4f55\u8bed\u6cd5)\u4e5f\u53ef\u89e3\u51b3\u67d0\u4e9b\u60c5\u51b5\u4e0b\u7684\u5e7b\u8bfb\u95ee\u9898</p> <p>\u4e3a\u5565rr\u9694\u79bb\u7ea7\u522b\u6709\u95f4\u9699\u9501, rc\u548cru\u7ea7\u522b\u6ca1\u6709\u95f4\u9699\u9501?</p> <p>\u56e0\u4e3arr\u7ea7\u522b\u662f\u53ef\u91cd\u590d\u8bfb, \u53ef\u91cd\u590d\u8bfb\u662f\u4ec0\u4e48\u610f\u601d? \u5c31\u662f\u76f8\u540c\u7684sql\u91cd\u590d\u8bfb\u53d6\u4fdd\u8bc1\u6570\u636e\u4e0d\u53d8, \u4f8b\u5982 where id &lt; 10, \u95f4\u9699\u9501\u5c31\u4fdd\u8bc1\u4e0d\u4f1a\u53d1\u751f\u63d2\u5165\u3001\u4fee\u6539\u6216\u5220\u9664\u6570\u636e\u7684\u64cd\u4f5c, \u4fdd\u8bc1\u4e86\u76f8\u540c\u7684sql\u91cd\u590d\u8bfb\u53d6\u6570\u636e\u4e0d\u53d8</p> <p>rc\u548cru\u7ea7\u522b\u672c\u8eab\u5c31\u662f\u4e0d\u53ef\u91cd\u590d\u8bfb\u7684, \u4e5f\u5c31\u662f\u8bf4\u76f8\u540c\u7684sql\u91cd\u590d\u8bfb\u53d6\u7684\u7ed3\u679c\u53ef\u80fd\u4e0d\u4e00\u6837, \u53cd\u6b63\u6570\u636e\u662f\u4f1a\u53d8\u7684, \u968f\u4fbf\u63d2\u5165\u3001\u4fee\u6539\u6216\u5220\u9664, \u6240\u4ee5\u4e0d\u9700\u8981\u95f4\u9699\u9501</p> <p>\u95f4\u9699\u9501\u662f\u9501\u4f4f\u4e24\u4e2a\u503c\u4e4b\u95f4\u7684\u7a7a\u95f4, \u4f8b\u5982\u8868\u4e2d\u67095\u6761\u6570\u636e, id\u5206\u522b\u662f1\u30012\u30013\u300110\u3001100</p> <p>\u90a3\u4e48\u95f4\u9699\u5c31\u662f(3,10), (10,100), (100, \u6b63\u65e0\u7a77)</p> <p>\u6bd4\u5982session1\u4e2d\u6267\u884cupdate\u64cd\u4f5c\u7684\u6761\u4ef6\u662f where id &gt; 5 and id &lt; 50 \u65f6, \u5176\u4ed6session\u65e0\u6cd5\u5728\u8fd9\u4e2a\u8303\u56f4\u6240\u5305\u542b\u7684\u6240\u6709\u884c\u8bb0\u5f55(5~50)\u4ee5\u53ca\u8bb0\u5f55\u6240\u5728\u7684\u95f4\u9699((3, 10)\u548c(10, 100))\u91cc\u63d2\u5165\u6216\u4fee\u6539\u4efb\u4f55\u6570\u636e</p> <p>\u5373\u6b64\u65f6session2\u4e2dinsert id=4 \u6216\u8005 id=30 \u6216\u8005 id=90 \u90fd\u4f1a\u5904\u4e8e\u963b\u585e </p> <p>\u540c\u65f6, \u4e0a\u9762\u5728session2\u4e2d\u63d2\u5165100\u4e5f\u4f1a\u963b\u585e, \u6240\u4ee5\u5b9e\u9645\u4e0a\u963b\u585e\u7684\u4e0d\u662f(3,10)\u548c(10,100), \u800c\u662f(3,10]\u548c(10,100], \u90a3\u4e48\u5b9e\u9645\u52a0\u9501\u7684\u533a\u95f4\u5c31\u662f(3,100], \u8fd9\u4e2a\u4e5f\u53eb\u4e34\u952e\u9501(Next-key Locks)</p> <p>\u9501\u4e3b\u8981\u662f\u52a0\u5728\u7d22\u5f15\u4e0a, \u5982\u679c\u5bf9\u975e\u7d22\u5f15\u5b57\u6bb5\u66f4\u65b0, \u884c\u9501\u53ef\u80fd\u4f1a\u5347\u7ea7\u4e3a\u8868\u9501</p> <p>\u8bc1\u660e\u7d22\u5f15\u5f88\u91cd\u8981!!!</p>"},{"location":"mysql/MySQL%E4%BA%8B%E5%8A%A1%E5%8F%8A%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E%E9%94%81%E6%9C%BA%E5%88%B6/#_5","title":"\u9501\u7684\u5206\u6790","text":"<p>\u9501\u8868</p> <pre><code>// \u5bf9\u8868 table1 \u52a0\u8bfb\u9501\nlock table table1 read;\n// \u5bf9\u8868 table2 \u52a0\u5199\u9501\nlock table table2 write;\n</code></pre> <p>\u67e5\u770b\u4e0a\u9501\u7684\u8868</p> <pre><code>show open tables; // in_use \u4e3a 1 \u8868\u793a\u8be5\u8868\u88ab\u4e0a\u9501\n</code></pre> <p>\u89e3\u9501\u8868</p> <pre><code>unlock tables;\n</code></pre> <p>\u884c\u9501\u5206\u6790</p> <pre><code>show status like 'innodb_row_lock%';\n</code></pre> <p>Innodb_row_lock_current_watis: \u5f53\u524d\u6b63\u5728\u7b49\u5f85\u9501\u5b9a\u7684\u6570\u91cf</p> <p>Innodb_row_lock_time: \u4ece\u7cfb\u7edf\u542f\u52a8\u5230\u73b0\u5728\u9501\u5b9a\u7684\u603b\u65f6\u957f</p> <p>Innodb_row_lock_time_avg: \u6bcf\u6b21\u7b49\u5f85\u6240\u82b1\u5e73\u5747\u65f6\u95f4</p> <p>Innodb_row_lock_time_max: \u4ece\u7cfb\u7edf\u542f\u52a8\u5230\u73b0\u5728\u7b49\u5f85\u6700\u957f\u7684\u4e00\u6b21\u6240\u82b1\u65f6\u95f4</p> <p>Innodb_row_lock_watis: \u7cfb\u7edf\u4ece\u542f\u52a8\u5230\u73b0\u5728\u603b\u5171\u7b49\u5f85\u7684\u6b21\u6570</p> <p>\u5f53\u7b49\u5f85\u6b64\u65f6\u5f88\u9ad8, \u4e14\u6bcf\u6b21\u7b49\u5f85\u65f6\u95f4\u4e0d\u77ed, \u9700\u8981\u5206\u6790, \u901a\u8fc7\u4ee5\u4e0b\u8bed\u53e5\u5206\u6790:</p> <pre><code>-- \u67e5\u770b\u6240\u6709\u4e8b\u52a1\nselect * from information_schema.innodb_trx;\n-- \u67e5\u770b\u6d89\u53ca\u5230\u9501\u7684\u4e8b\u52a1\nselect * from information_shcema.innodb_locks;\n-- \u67e5\u770b\u7b49\u5f85\u9501\u7684\u4e8b\u52a1\nselect * from information_shcema.innodb_lock_waits;\n-- \u91ca\u653e\u9501, trx_mysql_thread_id\u4eceinnodb_trx\u8868\u4e2d\u5f97\u5230\nkill trx_mysql_thread_id\n-- \u67e5\u770b\u6b7b\u9501\u65e5\u5fd7\nshow engine innodb status\\G;\n</code></pre>"},{"location":"mysql/MySQL%E4%BA%8B%E5%8A%A1%E5%8F%8A%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E%E9%94%81%E6%9C%BA%E5%88%B6/#_6","title":"\u9501\u7684\u4f18\u5316","text":"<ul> <li>\u5c3d\u53ef\u80fd\u4f7f\u7528\u4f4e\u7ea7\u522b\u4e8b\u52a1\u9694\u79bb</li> <li>\u5c3d\u91cf\u7528\u8fc7\u7d22\u5f15\u68c0\u7d22\u6570\u636e, \u907f\u514d\u65e0\u7d22\u5f15\u884c\u5347\u7ea7\u4e3a\u8868\u9501</li> <li>\u5408\u7406\u8bbe\u8ba1\u7d22\u5f15, \u5c3d\u91cf\u7f29\u5c0f\u9501\u7684\u8303\u56f4, \u5373\u51cf\u5c11\u68c0\u7d22\u6761\u4ef6\u8303\u56f4, \u907f\u514d\u95f4\u9699\u9501</li> <li>\u5c3d\u91cf\u63a7\u5236\u4e8b\u52a1\u5927\u5c0f, \u51cf\u5c11\u9501\u5b9a\u8d44\u6e90\u91cf\u548c\u65f6\u95f4\u957f\u5ea6</li> <li>\u5c3d\u91cf\u5c06\u6d89\u53ca\u4e8b\u52a1\u52a0\u9501\u7684sql\u653e\u5230\u6700\u540e\u6267\u884c</li> </ul>"},{"location":"mysql/MySQL%E4%BA%8B%E5%8A%A1%E5%8F%8A%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E%E9%94%81%E6%9C%BA%E5%88%B6/#mvcc","title":"MVCC","text":"<p>MVCC(multi-version concurrency control, \u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236)\u673a\u5236, \u4ec5\u5bf9\u8bfb\u5df2\u63d0\u4ea4\u548c\u53ef\u91cd\u590d\u8bfb\u4e24\u4e2a\u9694\u79bb\u7ea7\u522b\u6709\u6548, \u6709\u4ee5\u4e0b\u7279\u6027:</p> <ul> <li>\u53ea\u9488\u5bf9innodb\u5f15\u64ce\u7684\u6570\u636e\u5e93\u6709\u6548</li> <li>\u6bcf\u4e2a\u6570\u636e\u5e93\u53ea\u6709\u4e00\u4e2a\u7248\u672c\u94fe(\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e32\u884c\u8d77\u6765\u7684\u8868\u4e2d\u7684\u6bcf\u4e00\u884c\u7684\u6570\u636e), \u901a\u8fc7undo\u65e5\u5fd7\u5b9e\u73b0</li> <li>\u6bcf\u6761\u94fe\u4e2d\u5305\u542b\u4e00\u4e2a\u4e8b\u52a1ID\u7684\u5b57\u6bb5(\u6bcf\u4e00\u884c\u7684\u6570\u636e+\u4e8b\u52a1ID\u5b57\u6bb5)</li> <li>\u4e8b\u52a1\u5f00\u542f(begin)\u65f6\u4e0d\u4f1a\u751f\u6210\u4e8b\u52a1ID, \u5f53\u6267\u884cCRUD\u4efb\u4e00sql\u65f6\u624d\u751f\u6210\u771f\u6b63\u7684\u4e8b\u52a1ID</li> <li>\u751f\u6210\u4e8b\u52a1ID\u7684\u540c\u65f6\u4f1a\u751f\u6210\u6bcf\u4e2a\u4e8b\u52a1\u81ea\u5df1\u72ec\u6709\u7684\u4e00\u81f4\u6027\u89c6\u56feread-view</li> <li>\u8bfb\u5df2\u63d0\u4ea4\u9694\u79bb\u7ea7\u522b\u4e0b\u7684read-view\u5728\u6bcf\u6b21\u6267\u884csql\u65f6\u90fd\u4f1a\u91cd\u65b0\u751f\u6210, \u800c\u53ef\u91cd\u590d\u8bfb\u9694\u79bb\u7ea7\u522b\u5728commit\u4e4b\u524d\u4e0d\u4f1a\u91cd\u65b0\u751f\u6210(\u4fdd\u8bc1\u4e86\u53ef\u91cd\u590d\u8bfb)</li> <li>select\u8bed\u53e5\u68c0\u7d22\u7684\u6570\u636e\u5e93\u6765\u6e90\u4e8eread-view, \u662f\u901a\u8fc7\u6bd4\u5bf9\u5f53\u524d\u4e8b\u52a1ID\u4e0e\u7248\u672c\u94fe\u4e2d\u7684ID\u53ca\u4e00\u7cfb\u5217\u89c4\u5219\u83b7\u53d6</li> </ul>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/","title":"MySQL\u5e38\u7528\u8bed\u53e5\u548c\u547d\u4ee4","text":""},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#ddl","title":"DDL\u76f8\u5173\u57fa\u7840\u8bed\u53e5","text":"<p>DDL \u5373\u6570\u636e\u5e93\u5b9a\u4e49\u8bed\u8a00(data definition language)</p>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_1","title":"\u663e\u793a\u6570\u636e\u5e93","text":"<pre><code>show databases;\n</code></pre>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_2","title":"\u521b\u5efa\u6570\u636e\u5e93","text":"<pre><code>create database `db` character set 'utf8mb4' collate 'utf8mb4_general_ci';\n</code></pre>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_3","title":"\u5220\u9664\u6570\u636e\u5e93","text":"<pre><code>drop database `db`;\n</code></pre>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_4","title":"\u5207\u6362\u6570\u636e\u5e93","text":"<pre><code>use `db`;\n</code></pre>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_5","title":"\u67e5\u770b\u5f53\u524d\u9009\u62e9\u7684\u6570\u636e\u5e93","text":"<pre><code>select database();\n</code></pre>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#dml","title":"DML\u76f8\u5173\u57fa\u7840\u8bed\u53e5","text":"<p>DML \u5373\u6570\u636e\u64cd\u7eb5\u8bed\u8a00(data manipulation language)</p>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_6","title":"\u67e5\u770b\u8868","text":"<pre><code>show tables;\n</code></pre>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_7","title":"\u521b\u5efa\u8868","text":"<p>\u8bed\u6cd5:  <code>create table \u8868\u540d(\u5b57\u6bb5\u3001\u7c7b\u578b\u3001\u7ea6\u675f);</code> , \u4f8b\u5982:</p> <pre><code>create table students(\n        id int auto_increment primary key not null,\n        name varchar(10) not null,\n        sex bit default 1,\n        birthday datetime);\n</code></pre> <p>\u6269\u5c55:</p> <p>\u67e5\u770b\u8868\u7684\u521b\u5efa\u8bed\u53e5 - <code>show create table \u8868\u540d</code>;</p> <p>\u67e5\u770b\u8868\u7ed3\u6784\uff1a<code>desc \u8868\u540d;</code></p>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_8","title":"\u4fee\u6539\u5b57\u6bb5","text":"<p>\u8bed\u6cd5:  <code>alter table \u8868\u540d add|change|drop \u5217\u540d \u7c7b\u578b;</code> , \u4f8b\u5982\uff1a</p> <pre><code>-- \u65b0\u589e\u5b57\u6bb5is_delete, bit\u7c7b\u578b, \u9ed8\u8ba40\nalter table students add is_delete bit default 0;\n\n-- \u4fee\u6539\u5b57\u6bb5\nalter table students change is_delete delete_flag smallint default 0;\n\n-- \u5220\u9664\u5b57\u6bb5\nalter table students drop delete_flag;\n</code></pre>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_9","title":"\u4fee\u6539\u8868\u540d","text":"<p>\u8bed\u6cd5: <code>rename table \u539f\u8868\u540d to \u65b0\u8868\u540d;</code> , \u4f8b\u5982:</p> <pre><code>rename table students to person;\n</code></pre>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_10","title":"\u5220\u9664\u8868","text":"<p>\u8bed\u6cd5: <code>drop talbe \u8868\u540d1,\u8868\u540d2,\u8868\u540d3;</code> , \u4f8b\u5982:</p> <pre><code>drop table person;\n</code></pre>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_11","title":"\u67e5\u8be2\u6570\u636e","text":"<p>\u8bed\u6cd5: <code>select * from \u8868\u540d where \u6761\u4ef6;</code>\u6216<code>select \u52171,\u52172,...\u5217n from \u8868\u540d where \u6761\u4ef6</code> , where\u6761\u4ef6\u53ef\u7701\u7565, \u4f8b\u5982:</p> <pre><code>select * from students;\nselect name from students;\nselect * from students where birthday&lt;'2000-01-01';\n</code></pre>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_12","title":"\u63d2\u5165\u6570\u636e","text":""},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_13","title":"\u5168\u90e8\u5217\u63d2\u5165","text":"<p>\u8bed\u6cd5: <code>insert into \u8868\u540d values(\u52171, \u52172, ... \u5217n);</code> , \u4f8b\u5982:</p> <pre><code>/*\n0 \u4ee3\u6307\u4e3b\u952e, \u4e3b\u952e\u81ea\u589e, \u6b64\u5904\u75280, \u7cfb\u7edf\u81ea\u52a8\u5206\u914d\u4e3b\u952e\n\u5982\u679c\u8f93\u5165\u7684\u4e0d\u662f0, \u5219\u63d2\u5165, \u4f46\u4e4b\u540e\u4e3b\u952e\u4ee5\u6b64\u63d2\u5165\u7684\u503c\u4e3a\u57fa\u6570\u9012\u589e(\u4e0d\u5efa\u8bae\u624b\u52a8\u6307\u5b9a, \u53ef\u80fd\u4f1a\u51fa\u73b0\u8df3\u53f7)\nvalues \u4e5f\u53ef\u4ee5\u5199\u6210 value, \u540c\u65f6\u62ec\u53f7\u5185\u7684\u6570\u636e\u8981\u548c\u5b57\u6bb5\u4e00\u4e00\u5bf9\u5e94\n*/\ninsert into students values(0, '\u5f20\u4e09', 1, '2001-01-01');\n</code></pre>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_14","title":"\u90e8\u5206\u5217\u63d2\u5165","text":"<pre><code>insert into students(name, birthday) values('\u674e\u56db', '2001-01-01 01:02:03.456789');\n</code></pre>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_15","title":"\u591a\u8bb0\u5f55\u63d2\u5165","text":"<pre><code>-- \u7528\u9017\u53f7\u9694\u5f00\u591a\u6761\u8bb0\u5f55\u5373\u53ef\ninsert into students value(0, '\u738b\u671d', 1, '2001-01-01'),(0, '\u9a6c\u6c49', 1, '2001-01-01');\n</code></pre>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_16","title":"\u4fee\u6539\u6570\u636e","text":"<p>\u8bed\u6cd5: <code>update \u8868\u540d set \u52171=\u503c1,\u52172=\u503c2... where \u6761\u4ef6;</code> , where\u6761\u4ef6\u53ef\u7701\u7565, \u4f8b\u5982:</p> <pre><code>update students set name='\u738b\u4e94' where name='\u5f20\u4e09';\nupdate students set name='\u8d75\u516d', sex=0 where name='\u738b\u4e94';\nupdate students set birthday='2022-01-01' where birthday&gt;'2022-12-31';\n</code></pre>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_17","title":"\u5220\u9664\u6570\u636e","text":"<p>\u8bed\u6cd5: <code>delete from \u8868\u540d where \u6761\u4ef6;</code> , where\u6761\u4ef6\u53ef\u7701\u7565, \u4f8b\u5982:</p> <pre><code>delete from students where name='\u674e\u56db';\ndelete from students;\n</code></pre>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#dcl","title":"DCL\u76f8\u5173\u57fa\u7840\u8bed\u53e5","text":"<p>DCL \u5373\u6570\u636e\u5e93\u63a7\u5236\u8bed\u8a00(Data Control Language)</p>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_18","title":"\u6761\u4ef6\u8bed\u53e5\u548c\u5176\u4ed6\u5e38\u89c1\u8bed\u53e5","text":"<pre><code>-- \u8303\u56f4\nselect * from students where age&gt;=20;\ndelete from students where '2000-01-01'&lt;birthday&lt;='2000-12-31';\nselect * from students where sex in (0,1,2);\nselect * from students where id between 3 and 5;\n\n-- \u4e0e\u6216\u975e\n-- \u6ce8\u610f != \u7684\u53e6\u4e00\u79cd\u5199\u6cd5\u662f &lt;&gt;\nselect * from students where name='\u738b\u671d' and age!=20 or sex not in (1,2,3);\n\n-- \u4f18\u5148\u7ea7\n-- \u901a\u8fc7\u62ec\u53f7\u6539\u53d8and or \u7684\u4f18\u5148\u7ea7\nselect * from students where name='\u738b\u671d' and (age!=20 or sex not in (1,2,3));\n\n-- \u7a7a\u5224\u65ad\nselect * from students where birthday is null;\nselect * from students where sex is not null;\n\n-- \u6a21\u7cca\u67e5\u8be2\n-- % \u8868\u793a0\u4e2a\u6216\u591a\u4e2a\u4efb\u610f\u5b57\u7b26, _ \u8868\u793a\u4e00\u4e2a\u4efb\u610f\u5b57\u7b26\nselect * from students where name like '%\u4e09';\nselect * from students where name like '_\u4e09';\nselect * from students where name like '_\u4e09%'\n\n-- \u5206\u7ec4\u4e0e\u805a\u5408\nselect count(*) from students; -- \u7edf\u8ba1\u6709\u591a\u5c11\u884c\nselect max(age) from students group by sex;  -- \u67e5\u8be2\u7537\u5973\u4e2d\u6700\u5927\u7684\u5e74\u9f84\nselect min(age) from students group by sex;  -- \u67e5\u8be2\u7537\u5973\u4e2d\u6700\u5c0f\u7684\u5e74\u9f84\nselect avg(id) from students;  -- \u67e5\u8be2id\u7684\u5e73\u5747\u6570\nselect sum(id) from students;  -- \u67e5\u8be2id\u7684\u603b\u548c\n\n-- as \u522b\u540d\nselect sex as gender from students;\n\n-- having\n-- having \u7528\u4e8ewhere\u6761\u4ef6\u540e, \u7528\u4e8e\u8fdb\u4e00\u6b65\u8fc7\u6ee4\u7b5b\u9009\nselect * from students where birthday&gt;='2001-1-2' having name='b';\nselect * from students where birthday&gt;='2001-1-2' and name='b';  -- \u7ed3\u679c\u540c\u4e0a\n\n-- \u6392\u5e8f\nselect * from students order by id;  -- \u5347\u5e8f\nselect * from students order by id asc;  -- \u5347\u5e8f\nselect * from students order by id desc;  -- \u964d\u5e8f\nselect * from students order by sex,id desc;  -- \u5148\u6309sex\u964d\u5e8f, \u5728\u6b64\u57fa\u7840\u4e0a\u518d\u6309id\u964d\u5e8f\n\n-- \u5206\u9875\nselect * from students limit 1\uff0c3;  # \u663e\u793a\u7b2c2\u6761\u5230\u7b2c3\u6761\u6570\u636e(\u7d22\u5f15\u4ece0\u5f00\u59cb)\n-- \u6bcf\u9875\u663e\u793a m \u6761\u6570\u636e\uff0c\u5f53\u524d\u663e\u793a\u7b2c n \u9875\u3002\nselect * from students limit(n-1)*m, m;\n\n-- \u53bb\u91cd\nselect distinct name from students;\n</code></pre>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_19","title":"\u5916\u952e\u7ea6\u675f","text":"<p>\u521b\u5efa\u8bed\u6cd5: <code>lter table \u4ece\u8868 add constraint \u5916\u952e\u540d\u79f0 foreign key (\u88ab\u7ea6\u675f\u5b57\u6bb5) references \u4e3b\u8868(\u7ea6\u675f\u5b57\u6bb5);</code></p> <pre><code>alter table scores add constraint fk_sut_sco foreign key(stuid) references students(id);\nalter table scores add constraint fk_sut_sub foreign key(stuid) references students(id);\n</code></pre> <p>\u521b\u5efa\u8868\u65f6\u540c\u65f6\u6dfb\u52a0\u5916\u952e\u7ea6\u675f\u7684\u8bed\u6cd5\u793a\u4f8b:</p> <p>create table scores(id int auto_increment primary key not null,              stuid int,              subid int,              scores decimal(5,2),              foreign key(stuid) references students(id),              foreign key(subid) references subjects(id)             );</p> <p>\u5220\u9664\u8bed\u6cd5: <code>alter table \u8868\u540d drop foreign key \u5916\u952e\u7ea6\u675f\u540d;</code></p> <pre><code>alter table scores drop foreign key fk_sut_sub;\n</code></pre> <p>\u6269\u5c55, \u5916\u952e\u5f02\u5e38:</p> <ul> <li>restrict(\u9650\u5236)\uff1a\u9ed8\u8ba4\u503c\uff0c\u5373\u9ed8\u8ba4\u65b9\u5f0f\uff0c\u629b\u51fa\u5f02\u5e38</li> <li>cascade(\u7ea7\u8054)\uff1a\u5982\u679c\u4e3b\u8868\u7684\u8bb0\u5f55\u5220\u9664\uff0c\u5219\u4ece\u8868\u4e2d\u76f8\u5173\u8054\u7684\u8bb0\u5f55\u90fd\u5c06\u88ab\u5220\u9664</li> <li>set null\uff1a\u5c06\u5916\u952e\u8bbe\u7f6e\u4e3a\u7a7a</li> <li>no action\uff1a\u4ec0\u4e48\u90fd\u4e0d\u505a</li> </ul> <p>restric\u65b9\u5f0f\u629b\u51fa\u5f02\u5e38, \u4e0d\u53cb\u597d; cascade\u65b9\u5f0f\u7269\u7406\u5220\u9664\u6570\u636e, \u4ea7\u751f\u8fde\u9501\u53cd\u5e94; \u540e\u4e24\u4e2d\u65b9\u5f0f\u4ea7\u751f\u5197\u4f59\u6570\u636e; \u5efa\u8bae\u4f7f\u7528\u903b\u8f91\u5220\u9664, \u6bd5\u7adf\u6570\u636e\u65e0\u4ef7;</p>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_20","title":"\u5173\u8054\u67e5\u8be2","text":"<p>\u4f8b\u5982: </p> <p>\u5b66\u751f\u4fe1\u606f\u5b58\u5728\u8868 students\uff0c\u79d1\u76ee\u4fe1\u606f\u5b58\u5728\u8868 subjects\uff0c\u5206\u6570\u4fe1\u606f\u5b58\u5728 scores</p> <p>scores \u8868\u5b58\u5728\u4e24\u4e2a\u5916\u952e fk_sut_sco \u548c fk_sut_sub , \u5206\u522b\u5173\u8054\u8868 students \u548c\u8868 subjects</p> <p>\u8bed\u6cd5: <code>select * from \u8868 inner join \u8868 on \u5173\u7cfb;</code></p> <pre><code>select students.name,subjects.title,scores.scores\n    from scores\n    inner join students on scores.stuid=students.id\n    inner join subjects on scores.subid=subjects.id;\n\n-- \u8fd9\u79cd\u5199\u6cd5\u4e5f\u662f\u53ef\u4ee5\u7684\uff0c\u867d\u7136\u8868students\u548c\u8868subjects\u6ca1\u6709\u76f4\u63a5\u5173\u7cfb\uff0c\u4f46\u662f\u901a\u8fc7scores\u8868\u4e5f\u53ef\u4ee5\u5173\u8054\nselect students.name,subjects.title,scores.scores\n        from students\n        inner join scores on students.id=scores.stuid\n        inner join subjects on subjects.id=scores.subid;\n</code></pre> <p>\u9664\u4e86 inner join \u8fd8\u6709 left join \u548c right join, \u533a\u522b\u662f:</p> <ul> <li>\u8868A inner join \u8868B \u4f1a\u663e\u793a\u51fa\u4e24\u5f20\u8868\u5171\u6709\u7684\u6570\u636e</li> <li>\u8868A left join \u8868B \u9664\u4e86\u4f1a\u663e\u793a\u4e24\u5f20\u8868\u5171\u6709\u7684\u6570\u636e\u5916\u8fd8\u4f1a\u663e\u793a\u8868A\u72ec\u6709\u7684\u6570\u636e, \u672a\u5bf9\u5e94\u7684\u6570\u636e\u4f7f\u7528null\u586b\u5145</li> <li>\u8868A righ join \u8868B \u9664\u4e86\u4f1a\u663e\u793a\u4e24\u5f20\u8868\u5171\u6709\u7684\u6570\u636e\u5916\u8fd8\u4f1a\u663e\u793a\u8868B\u72ec\u6709\u7684\u6570\u636e\uff0c\u672a\u5bf9\u5e94\u7684\u6570\u636e\u4f7f\u7528null\u586b\u5145</li> </ul> <p>\u7701\u7565\u4e86 inner join ... on ... \u7684\u5173\u8054\u67e5\u8be2\u7684\u5199\u6cd5:</p> <pre><code>select name,title,score from students,subjects,scores where scores.stuid=students.id and scores.subid=subjects.id;\n</code></pre> <p>\u8fd9\u79cd\u5199\u6cd5\u7701\u7565\u4e86 inner join ... on ..., \u76f4\u63a5\u5728from\u540e\u7528\u9017\u53f7\u9694\u5f00\u8868\u660e, where\u540e\u9762\u7684\u6761\u4ef6\u5199\u4e0a\u5404\u4e2a\u8868\u7684\u5173\u7cfb, where \u540e\u9762\u7684\u5173\u7cfb\u4e00\u5b9a\u8981\u5199\u4e0a\u4e14\u4e0a\u5199\u5bf9, \u5426\u5219\u67e5\u51fa\u6765\u7684\u6570\u636e\u53ef\u80fd\u662f\u9519\u8bef\u7684</p>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_21","title":"\u89c6\u56fe","text":"<p>\u4e3e\u4f8b, \u6bcf\u6b21\u67e5\u8be2\u5b66\u751f\u7684 ID\u3001\u59d3\u540d\u3001\u79d1\u76ee\u3001\u6210\u7ee9, \u90fd\u9700\u8981\u505a\u5173\u8054\u67e5\u8be2, \u975e\u5e38\u9ebb\u70e6, \u6240\u4ee5\u53ef\u4ee5\u5c06\u8fd9\u53e5\u4ee3\u7801\u5c01\u88c5\u8d77\u6765, \u505a\u6210\u89c6\u56fe \u8bed\u6cd5: <code>create view \u89c6\u56fe\u540d\u79f0 as \u67e5\u8be2\u8bed\u53e5;</code></p> <pre><code>-- \u521b\u5efa\u89c6\u56fe\ncreate view v_cfs as select students.id,name,title,score from scores inner join students on stuid=students.id inner join subjects on subid=subjects.id;\n\n-- \u7528\u6cd5\nselect * from v_cfs;\n</code></pre> <p>\u4fee\u6539\u89c6\u56fe\u7684\u8bed\u6cd5: <code>alter view \u89c6\u56fe\u540d\u79f0 as \u4fee\u6539\u540e\u7684\u67e5\u8be2\u8bed\u53e5;</code></p> <p>\u5220\u9664\u89c6\u56fe\u7684\u8bed\u6cd5: <code>drop view \u89c6\u56fe\u540d\u79f0; \u4f8b\u5982 drop view v_cfs;</code> </p> <p>\u91cd\u547d\u540d\u89c6\u56fe\u7684\u8bed\u6cd5: <code>rename table \u89c6\u56fe\u540d\u79f0 to \u65b0\u89c6\u56fe\u540d\u79f0;</code></p>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_22","title":"\u4e8b\u52a1","text":"<p>\u56db\u5927\u7279\u6027: \u539f\u5b50\u6027\u3001\u4e00\u81f4\u6027\u3001\u9694\u79bb\u6027\u3001\u6301\u4e45\u6027</p> <p>\u4e8b\u52a1\u8bed\u6cd5:</p> <pre><code>begin;     -- \u5f00\u59cb\u4e8b\u52a1\nyour sql;  -- \u7f16\u5199sql\ncommit;    -- \u63d0\u4ea4\u4e8b\u52a1, \u82e5\u8981\u653e\u5f03\u5219\u4f7f\u7528 rollback; \n</code></pre>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_23","title":"\u7d22\u5f15","text":"<p>\u5b9a\u4e49:</p> <ul> <li>\u5355\u5217\u7d22\u5f15: \u4e00\u4e2a\u7d22\u5f15\u53ea\u5305\u542b\u5355\u4e2a\u5217, \u4e00\u4e2a\u8868\u53ef\u4ee5\u6709\u591a\u4e2a\u5355\u5217\u7d22\u5f15, \u4f46\u8fd9\u4e0d\u662f\u7ec4(\u8054)\u5408\u7d22\u5f15</li> <li>\u7ec4\u5408\u7d22\u5f15: \u53c8\u53eb\u8054\u5408\u7d22\u5f15, \u5373\u4e00\u4e2a\u7d22\u5f15\u5305\u542b\u591a\u4e2a\u5217</li> </ul> <p>\u5efa\u7acb: <code>create index \u7d22\u5f15\u540d on \u8868\u540d(\u5217\u540d1(\u957f\u5ea6),\u5217\u540d2(\u957f\u5ea6),...);</code></p> <p>\u5982\u679c\u5217\u7684\u6570\u636e\u7c7b\u578b\u662f\u6574\u578b\u53ef\u4ee5\u4e0d\u5199\u957f\u5ea6\uff0c\u5982\u679c\u662f\u5b57\u7b26\u4e32\u5c31\u5c31\u5199\u5b57\u7b26\u4e32\u7684\u957f\u5ea6</p> <p>\u67e5\u770b: <code>show index from \u8868\u540d;</code></p> <p>\u5220\u9664: <code>drop index \u7d22\u5f15\u540d on \u8868\u540d;</code></p> <p>\u597d\u5904: \u63d0\u9ad8\u67e5\u8be2\u6548\u7387</p> <p>\u574f\u5904: </p> <ul> <li>\u964d\u4f4e\u8868\u7684\u66f4\u65b0\u901f\u5ea6\uff0c\u56e0\u4e3a\u5f53insert\u3001update\u548cdelete\u7684\u65f6\u5019\uff0cmysql\u4e0d\u4ec5\u8981\u66f4\u65b0\u8868\u7684\u5185\u5bb9\u8fd8\u8981\u66f4\u65b0\u7d22\u5f15\u7684\u5185\u5bb9</li> <li>\u5efa\u7acb\u7d22\u5f15\u4f1a\u5360\u7528\u78c1\u76d8\u7a7a\u95f4\u7684\u7d22\u5f15\u6587\u4ef6</li> </ul> <p>\u7d22\u5f15\u4f7f\u7528\u793a\u4f8b:     1. set profiling=1;  # \u5f00\u542f\u8fd0\u884c\u65f6\u95f4\u76d1\u6d4b     2. select * from areas where atitle='\u5e7f\u5dde\u5e02';  # \u6ca1\u6709\u5efa\u7acb\u7d22\u5f15\u7684\u65f6\u5019\u67e5\u8be2     3. show profiles;  # \u663e\u793a\u65f6\u95f4\u662f0.00355700\u79d2     4. create index atitleindex on areas(atitle(20));  # \u5efa\u7acb\u7d22\u5f15     5. select * from areas where atitle='\u5e7f\u5dde\u5e02';  # \u5efa\u7acb\u7d22\u5f15\u540e\u518d\u6b21\u67e5\u8be2     6. show profiles;  # \u663e\u793a\u65f6\u95f4\u662f0.00069875\u79d2, \u5bf9\u6bd4\u53d1\u73b0\u5efa\u7acb\u7d22\u5f15\u540e\u67e5\u8be2\u901f\u5ea6\u63d0\u5347     7. drop index atitleindex on areas;  # \u5220\u9664\u7d22\u5f15</p>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_24","title":"\u6269\u5c55\u8bed\u53e5","text":"<p>\u67e5\u770b\u65f6\u533a</p> <pre><code>show variables like '%time_zone%';\n</code></pre> <p>\u67e5\u770b\u65f6\u95f4</p> <pre><code>select now();\n</code></pre> <p>\u67e5\u770b\u4e8b\u4ef6</p> <pre><code>show events;\n</code></pre> <p>\u5220\u9664\u4e8b\u4ef6</p> <pre><code>drop event event_name;\n</code></pre> <p>\u67e5\u770b\u89e6\u53d1\u5668</p> <pre><code>show triggers;\n</code></pre> <p>\u5220\u9664\u89e6\u53d1\u5668</p> <pre><code>drop trigger trigger_name;\n</code></pre> <p>\u67e5\u770b\u5b58\u50a8\u8fc7\u7a0b</p> <pre><code>show procedure status;\n</code></pre> <p>\u67e5\u770b\u5b58\u50a8\u8fc7\u7a0b\u5185\u5bb9</p> <pre><code>show create procedure procedure_name;\n</code></pre> <p>\u5220\u9664\u5b58\u50a8\u8fc7\u7a0b</p> <pre><code>drop procedure procedure_name;\n</code></pre> <p>\u5c55\u793a\u51fd\u6570</p> <pre><code>show function status;\n</code></pre> <p>\u5c55\u793a\u5f53\u524d\u8fde\u63a5\u7528\u6237</p> <pre><code>show processlist;\n</code></pre> <p>\u8e22\u6389\u5ba2\u6237\u7aef\u547d\u4ee4: kill id;</p> <p>\u5c55\u793a\u957f\u8fde\u63a5\u6700\u957f\u65f6\u95f4</p> <pre><code>show global variables like \"wait_timeout\";\n</code></pre> <p>\u5c55\u793a\u662f\u5426\u5f00\u542fbinlog</p> <pre><code>show variables like 'log_bin';\n</code></pre> <p>binlog \u8bb0\u5f55\u4e86 DDL \u548c DML \u8bed\u53e5(\u9664\u4e86\u6570\u636e\u67e5\u8be2\u8bed\u53e5select), \u4ee5\u4e8b\u4ef6\u5f62\u5f0f\u8bb0\u5f55</p> <p>\u53ef\u4ee5\u6062\u590d delete \u548c truncate \u5220\u9664\u7684\u4fe1\u606f</p> <p>binlog \u67093\u79cd\u8bb0\u5f55\u65b9\u5f0f: statement\u3001row\u3001mixed, statement\u8bb0\u5f55\u6267\u884c\u7684sql, row\u8bb0\u5f55\u6267\u884csql\u540e\u7684\u7ed3\u679c, mixed\u662f\u524d\u4e24\u8005\u6df7\u5408</p> <p>statement\u901f\u5ea6\u5feb\u5360\u7528\u78c1\u76d8\u7a7a\u95f4\u5c0f, \u4f46\u5728\u4e3b\u4ece\u6a21\u5f0f\u7684\u60c5\u51b5\u4e0b\u53ef\u80fd\u4f1a\u51fa\u73b0\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u95ee\u9898, row\u6b63\u597d\u76f8\u53cd, \u4e00\u822c\u5efa\u8bae\u4f7f\u7528row\u6a21\u5f0f</p>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#sql","title":"SQL\u547d\u4ee4","text":""},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_25","title":"\u5907\u4efd\u6570\u636e\u5e93","text":"<p>\u8bed\u6cd5: <code>mysqldump -u \u7528\u6237\u540d -p \u6570\u636e\u5e93\u540d &gt; ~/\u8def\u5f84/\u5907\u4efd\u6587\u4ef6.sql</code> , \u4f8b\u5982:</p> <pre><code>mysqldump -u root -p students &gt; ~/students_bak.sql\n</code></pre> <p>PS: \u6dfb\u52a0<code>--skip-extended-insert</code>\u53ef\u4f7f\u5bfc\u51fa\u6570\u636e\u4e2d\u7684\u6bcf\u4e2aINSERT\u8bed\u53e5\u90fd\u4f1a\u72ec\u5360\u4e00\u884c, \u65b9\u4fbf\u67e5\u9605</p>"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_26","title":"\u8fd8\u539f\u6570\u636e\u5e93","text":"<p>\u8bed\u6cd5: <code>mysql -u \u7528\u6237\u540d -p \u6570\u636e\u5e93\u540d &lt; ~/\u8def\u5f84/\u5907\u4efd\u6587\u4ef6.sql;</code> , \u4f8b\u5982:</p> <pre><code>mysql -u root -p students &lt; ~/students_bak.sql\n</code></pre>"},{"location":"mysql/MySQL%E6%97%B6%E5%8C%BA/","title":"Mysql\u65f6\u533a","text":"<p>\u67e5\u770b\u65f6\u533a\uff1a <code>show variables like '%time_zone%';</code></p> <p>\u7ed3\u679c\u663e\u793a\u4e3a\uff1a</p> Variable_name Value system_time_zone UTC time_zone SYSTEM <p>\u542b\u4e49\u89e3\u91ca\uff1a</p> <p>system_time_zone: \u7cfb\u7edf\u65f6\u533a\u3002\u5f53\u670d\u52a1\u5668\u542f\u52a8\u65f6\uff0c\u5b83\u8bd5\u56fe\u81ea\u52a8\u786e\u5b9a\u4e3b\u673a\u7684\u65f6\u533a\uff0c\u5e76\u4f7f\u7528\u5b83\u6765\u8bbe\u7f6esystem_time_zone\u7cfb\u7edf\u53d8\u91cf\u3002\u6b64\u540e\uff0c\u8be5\u503c\u4e0d\u4f1a\u6539\u53d8</p> <p>time_zone: \u5f53\u524d\u7684\u65f6\u533a\uff0c\u8fd9\u4e2a\u53d8\u91cf\u7528\u6765\u4e3a\u6bcf\u4e2a\u8fde\u63a5\u7684\u5ba2\u6237\u7aef\u521d\u59cb\u5316\u65f6\u533a\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b83\u7684\u521d\u59cb\u503c\u662f'SYSTEM'\uff08\u8fd9\u610f\u5473\u7740\uff0c\"\u4f7f\u7528system_time_zone\u7684\u503c\"\uff09</p> <p>\u4fee\u6539\u65f6\u533a\uff1a</p> <p>\u4e00\u5171\u6709\u4e09\u79cd\u65b9\u5f0f\u8bbe\u7f6e\u65f6\u533a\uff1a</p> <p>1\u3001\u8fd0\u884c\u671f\u95f4</p> <p><code>set global time_zone='+8:00';</code></p> <p>\u6216\u8005</p> <p><code>set global time_zone='Asia/Shanghai';</code></p> <p>1\u3001\u6ce8\u610f\u4fee\u6539\u65f6\u533a\u540e\uff0c\u9700\u8981\u65ad\u5f00\u4e0e\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u518d\u91cd\u65b0\u8fde\u63a5\uff0c\u5426\u5219\u6b64\u65f6\u67e5\u770b\u65f6\u533a\u53d1\u73b0\u6ca1\u53d8\uff0c\u4f46\u5b9e\u9645\u4e0a\u8bbe\u7f6e\u6210\u529f\uff01</p> <p>2\u3001\u4e34\u65f6\u4fee\u6539\u547d\u4ee4\u662f `set time_zone='Asia/Shanghai;'\uff0c\u9000\u51famysql\u91cd\u65b0\u8fdb\u53bb\u4f1a\u53d1\u73b0\u5931\u6548</p> <p>2\u3001\u542f\u52a8\u547d\u4ee4</p> <p><code>--default-time-zone=timezone</code></p> <p>3\u3001\u914d\u7f6e\u6587\u4ef6</p> <p><code>default-time-zone=timezone</code></p>"},{"location":"mysql/MySQL%E7%B4%A2%E5%BC%95/","title":"MySQL\u7d22\u5f15","text":""},{"location":"mysql/MySQL%E7%B4%A2%E5%BC%95/#_1","title":"\u7d22\u5f15","text":"<p>\u7d22\u5f15\u662f\u5e2e\u52a9Mysql\u9ad8\u6548\u83b7\u53d6\u6570\u636e\u7684\u6392\u597d\u5e8f\u7684\u6570\u636e\u7ed3\u6784</p> <p>\u4f18\u70b9\u662f\u63d0\u9ad8\u6570\u636e\u68c0\u7d22\u6548\u7387, \u964d\u4f4e\u6570\u636e\u5e93IO\u6210\u672c</p> <p>\u7f3a\u70b9\u662f\u4f1a\u5360\u7528\u78c1\u76d8\u7a7a\u95f4, \u5e76\u4e14\u5728\u63d2\u5165\u6216\u4fee\u6539\u6570\u636e\u7684\u540c\u65f6\u4e5f\u8981\u7ef4\u62a4\u7d22\u5f15, \u5373\u964d\u4f4e\u4e86\u6548\u7387</p> <p>\u7d22\u5f15\u5206\u4e3a\u5355\u503c\u7d22\u5f15\u3001\u590d\u5408\u7d22\u5f15\u548c\u552f\u4e00\u7d22\u5f15</p> <ul> <li>\u5355\u503c\u7d22\u5f15, \u5373\u8be5\u7d22\u5f15\u4ec5\u5305\u542b\u4e00\u4e2a\u5b57\u6bb5</li> <li>\u590d\u5408\u7d22\u5f15, \u5373\u8be5\u7d22\u5f15\u5305\u542b\u591a\u4e2a\u5b57\u6bb5</li> <li>\u552f\u4e00\u7d22\u5f15, \u5373\u8be5\u7d22\u5f15\u4e0d\u5141\u8bb8\u91cd\u590d, \u5355\u5141\u8bb8\u4e3a\u7a7a, \u552f\u4e00\u7d22\u5f15\u6709\u5355\u4e2a\u5b57\u6bb5\u6216\u591a\u4e2a\u5b57\u6bb5\u7ec4\u6210</li> </ul> <p>\u8fd8\u6709\u4e00\u4e2a\u8986\u76d6\u7d22\u5f15, \u5176\u5b9e\u5c31\u662f\u590d\u5408\u7d22\u5f15\u7684\u4e00\u4e2a\u4e2d\u7528\u6cd5, \u4f8b\u5982select column1, column2, ...</p> <p>\u67e5\u8be2\u7684\u5b57\u6bb5column\u90fd\u88ab\u590d\u5408\u7d22\u5f15\u8986\u76d6</p>"},{"location":"mysql/MySQL%E7%B4%A2%E5%BC%95/#_2","title":"\u6570\u636e\u7ed3\u6784","text":""},{"location":"mysql/MySQL%E7%B4%A2%E5%BC%95/#_3","title":"\u4e8c\u53c9\u6811","text":"<p>\u662f\u4e00\u79cd\u6811\u72b6\u7ed3\u6784, \u5176\u4e2d\u6bcf\u4e2a\u8282\u70b9\u6700\u591a\u6709\u4e24\u4e2a\u5b50\u8282\u70b9, \u5206\u522b\u79f0\u4e3a\u5de6\u5b50\u8282\u70b9\u548c\u53f3\u5b50\u8282\u70b9</p>"},{"location":"mysql/MySQL%E7%B4%A2%E5%BC%95/#_4","title":"\u4e8c\u53c9\u641c\u7d22\u6811","text":"<p>\u662f\u4e8c\u53c9\u6811\u7684\u4e00\u79cd\u7279\u6b8a\u60c5\u51b5, \u7b80\u5355\u8bf4\u5c31\u662f\u5de6\u5b50\u8282\u70b9\u7684\u503c\u6bd4\u7236\u8282\u70b9\u7684\u503c\u5c0f, \u53f3\u5b50\u8282\u70b9\u7684\u503c\u6bd4\u7236\u8282\u70b9\u7684\u503c\u5927</p> <p>\u53c2\u8003: Binary Search Trees</p>"},{"location":"mysql/MySQL%E7%B4%A2%E5%BC%95/#_5","title":"\u5e73\u8861\u4e8c\u53c9\u6811","text":"<p>\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u4e8c\u53c9\u6811, \u6ee1\u8db3\u5982\u4e0b\u4e24\u4e2a\u6761\u4ef6:</p> <ul> <li>\u5de6\u5b50\u6811\u548c\u53f3\u5b50\u6811\u90fd\u662f\u5e73\u8861\u4e8c\u53c9\u6811</li> <li>\u5de6\u5b50\u6811\u548c\u53f3\u5b50\u6811\u7684\u9ad8\u5ea6\u5dee\u7684\u7edd\u5bf9\u503c\u4e0d\u8d85\u8fc71</li> </ul> <p>\u5e38\u89c1\u7684\u662fAVL\u6811\u548c\u7ea2\u9ed1\u6811, \u53c2\u8003: AVL Trees (Balanced binary search trees)\u3001[Red-Black Trees]</p>"},{"location":"mysql/MySQL%E7%B4%A2%E5%BC%95/#btreebbplustreeb","title":"BTree(B\u6811)\u548cBPlusTree(B+\u6811)","text":"<p>\u56fe\u5f62\u5316\u53c2\u8003: B-Tree Visualization (usfca.edu) B+ Tree Visualization (usfca.edu)</p> <p>\u901a\u8fc7\u4e0a\u9762\u4e24\u4e2a\u94fe\u63a5\u56fe\u5f62\u5316\u6f14\u793a, \u53ef\u4ee5\u7b80\u5355\u6982\u62ec\u4e3a:</p> <p>B\u6811\u7684\u7236\u8282\u70b9\u5b58\u50a81\u4e2a\u62162\u4e2a\u6570\u636e, \u5373\u5206\u644a\u4e86\u6570\u636e\u53c8\u51cf\u5c11\u4e86\u6811\u7684\u9ad8\u5ea6, \u540c\u65f6\u6ee1\u8db3\u5de6\u5b50\u8282\u70b9\u7684\u503c&lt;\u7236\u8282\u70b9\u7684\u503c&lt;\u53f3\u5b50\u8282\u70b9\u7684\u503c</p> <p>B+\u6811\u76f8\u5bf9\u4e8eB\u6811, \u6700\u663e\u8457\u7684\u6539\u53d8\u6709\u4e24\u70b9:</p> <ul> <li>\u53f6\u5b50\u8282\u70b9\u5305\u542b\u6240\u6709\u8282\u70b9(\u5305\u62ec\u7236\u8282\u70b9, \u5197\u4f59\u7684), \u5373\u6700\u5e95\u5c42\u7684\u53f6\u5b50\u8282\u70b9\u662f\u6392\u597d\u5e8f\u7684\u6240\u6709\u6570\u636e</li> <li>\u53f6\u5b50\u8282\u70b9\u7528\u6307\u9488\u8fde\u63a5(\u76f8\u5f53\u4e8e\u94fe\u8868, \u6bcf\u4e00\u5757\u7684\u6700\u540e\u5b58\u50a8\u4e0b\u4e00\u5757\u7684\u5730\u5740)</li> </ul> <p>\u5982\u56fe:</p> <p></p> <p>MySQL\u4f7f\u7528\u7684\u662fB+\u6811, \u4f46\u5bf9B+\u6811\u505a\u4e86\u4f18\u5316: </p> <ul> <li> <p>\u7236\u8282\u70b9\u5b58\u50a8\u7684\u6570\u636e\u66f4\u591a(\u53ef\u4ee5\u5927\u4e8e2)</p> </li> <li> <p>\u6807\u51c6\u7684B+\u6811\u662f\u5355\u5411\u7bad\u5934(\u60f3\u8c61\u5355\u5411\u94fe\u8868), \u4f18\u5316\u540e\u662f\u53cc\u5411\u7bad\u5934(\u60f3\u8c61\u53cc\u5411\u94fe\u8868), \u53f6\u5b50\u8282\u70b9\u7528\u6307\u9488\u8fde\u63a5(\u6bcf\u4e00\u5757\u7684\u6700\u540e\u5b58\u50a8\u4e0b\u4e00\u5757\u7684\u5730\u5740, \u6bcf\u4e00\u4e2a\u7684\u6700\u524d\u5b58\u50a8\u4e0a\u4e00\u5757\u7684\u5730\u5740), \u63d0\u9ad8\u533a\u95f4\u8bbf\u95ee(where\u6761\u4ef6\u540e\u9762\u7684\u8303\u56f4\u67e5\u8be2, \u6bd4\u5982\u5927\u4e8e\u6216\u5c0f\u4e8e\u67d0\u4e2a\u503c)\u7684\u6027\u80fd</p> </li> </ul> <p>PS: \u8303\u56f4\u67e5\u627e\u7684\u7ed3\u679c\u7684\u6570\u636e\u91cf\u5f88\u5927\u7684\u65f6\u5019, \u4f9d\u7136\u4f1a\u5f88\u6162, \u6b64\u65f6\u91c7\u7528\u5206\u9875\u5373\u53ef\u89e3\u51b3</p> <ul> <li>\u975e\u53f6\u5b50\u8282\u70b9\u4e0d\u5b58\u50a8data, \u53ea\u5b58\u50a8\u7d22\u5f15, \u6700\u5e95\u5c42\u7684\u53f6\u5b50\u8282\u70b9\u4e0d\u4ec5\u5b58\u50a8\u7d22\u5f15, \u8fd8\u5b58\u50a8\u4e86\u6570\u636e(\u5b57\u6bb5\u7684\u503c)</li> </ul> <p>MySQL\u4f7f\u7528B+\u6811\u5b58\u50a8\u591a\u4e2a\u6839\u8282\u70b9\u65f6, \u5206\u914d\u5230\u4e00\u5757\u8fde\u7eed\u7684\u78c1\u76d8\u7a7a\u95f4(\u78c1\u76d8\u9875, \u5927\u5c0f\u662f16KB), \u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u67e5\u770b:</p> <pre><code>show global status like 'Innodb_page_size';\n</code></pre> <p>MySQL\u4e00\u822c\u4f1a\u5c06\u6839\u8282\u70b9\u5e38\u9a7b\u5230\u5185\u5b58\u4e2d(\u51cf\u5c11\u78c1\u76d8I/O), \u9ad8\u7248\u672c\u7684MySQL\u53ef\u80fd\u4f1a\u5c06\u6240\u6709\u975e\u53f6\u5b50\u8282\u70b9\u90fd\u5e38\u9a7b\u5230\u5185\u5b58\u4e2d</p> <p>PS: MySQL\u662f\u6309\u7167\u9875\u64cd\u4f5c\u7684, \u4f8b\u5982\u8bfb\u53d6\u4e00\u6761\u6570\u636e\u5e76\u4e0d\u662f\u5355\u72ec\u53d6\u8fd9\u4e00\u6761, \u800c\u662f\u5c06\u8fd9\u4e00\u6761\u6570\u636e\u6240\u5728\u7684\u9875\u7684\u5168\u90e8\u6570\u636e\u653e\u5230Buffer Pool\u4e2d</p> <p>B+\u6811\u7684\u9ad8\u5ea6\u8bf4\u767d\u5c31\u662f\u7531\u975e\u53f6\u5b50\u8282\u70b9\u80fd\u5b58\u653e\u591a\u5c11\u4e2a\u7d22\u5f15\u7684\u6570\u91cf\u51b3\u5b9a\u7684</p> <p>MySIAM\u7d22\u5f15\u6587\u4ef6(.myi)\u548c\u6570\u636e\u6587\u4ef6(.myd)\u662f\u5206\u79bb\u7684(\u975e\u805a\u96c6\u7d22\u5f15, \u53c8\u53eb\u975e\u805a\u7c07\u7d22\u5f15, \u53c8\u53eb\u7a00\u758f\u7d22\u5f15)</p> <p>InnoDB\u7d22\u5f15\u6587\u4ef6\u548c\u6570\u636e\u6587\u4ef6\u662f\u4e00\u8d77\u7684(.ibd\u6587\u4ef6,  \u805a\u96c6\u7d22\u5f15, \u53c8\u53eb\u805a\u7c07\u7d22\u5f15), \u4e14\u805a\u96c6\u7d22\u5f15\u67e5\u5230\u6700\u7ec8\u6570\u636e\u6bd4\u975e\u805a\u96c6\u6240\u6709\u5feb(\u56e0\u4e3a\u5728\u540c\u4e00\u4e2a\u6587\u4ef6\u4e2d)</p> <p>\u5bf9\u4e8e\u4f7f\u7528InnoDB\u7684\u8868\u6765\u8bf4, \u6709\u4e14\u53ea\u80fd\u6709\u4e00\u4e2a\u805a\u96c6\u7d22\u5f15</p> <p>\u5bf9\u4e8eInnoDB\u6765\u8bf4, \u8868\u6570\u636e\u6587\u4ef6\u672c\u8eab\u5c31\u662f\u6309B+\u6811\u7ec4\u7ec7\u7684\u4e00\u4e2a\u6240\u6709\u7ed3\u6784\u6587\u4ef6, \u5176\u805a\u96c6\u7d22\u5f15-\u53f6\u5b50\u8282\u70b9\u5305\u542b\u5b8c\u6574\u7684\u6570\u636e\u8bb0\u5f55(\u4e3b\u952e\u7684\u6570\u636e+\u5176\u4ed6\u5217\u7684\u6570\u636e)</p> <p>\u5efa\u8baeInnoDB\u8868\u4f7f\u7528\u6574\u5f62\u81ea\u589e\u4e3b\u952e\u7684\u539f\u56e0:</p> <ul> <li> <p>\u5982\u679c\u5efa\u8868\u65f6\u6ca1\u6709\u8bbe\u7f6e\u4e3b\u952e, InnoDB\u4f1a\u81ea\u52a8\u9009\u4e00\u5217\u4e14\u8fd9\u5217\u6570\u636e\u6ca1\u6709\u91cd\u590d, \u5f53\u4f5c\u4e3b\u952e, \u5982\u679c\u6ca1\u6709\u627e\u5230\u4e0d\u91cd\u590d\u7684\u5217, \u4f1a\u81ea\u52a8\u5efa\u7acb\u4e00\u4e2a\u9690\u85cf\u7684\u4e0d\u91cd\u590d\u7684\u5217(\u6bd4\u5982\u7528\u884c\u53f7row_id)\u4f5c\u4e3a\u4e3b\u952e</p> </li> <li> <p>\u4f7f\u7528\u6574\u5f62\u4f5c\u4e3aID, \u800c\u4e0d\u662fUUID, \u7ed3\u5408\u4e8c\u53c9\u6811\u7684\u6570\u636e\u7ed3\u6784, \u53ef\u4ee5\u53d1\u73b0\u6574\u5f62\u6bd4\u5927\u5c0f\u7684\u6548\u7387\u6bd4UUID\u5feb, \u4e14\u6574\u5f62\u6bd4UUID\u5360\u7528\u7684\u78c1\u76d8\u7a7a\u95f4\u5c0f</p> </li> <li> <p>\u4f7f\u7528\u81ea\u589e\u662f\u56e0\u4e3a\u5e73\u8861\u4e8c\u53c9\u6811\u7684\u539f\u56e0, \u5f53\u63d2\u5165\u975e\u81ea\u589eID\u65f6, \u8981\u6ee1\u8db3 \u5de6\u8282\u70b9&lt;\u7236\u8282\u70b9&lt;\u53f3\u8282\u70b9 \u7684\u6761\u4ef6, \u9700\u8981\u5e73\u8861\u8c03\u6574\u6811\u7ed3\u6784, \u5f71\u54cd\u6548\u7387, \u800c\u9012\u589e ID, \u53ea\u9700\u8981\u5728\u6700\u53f3\u4fa7\u6dfb\u52a0\u8282\u70b9\u5373\u53ef(\u60f3\u8c61\u4e00\u4e2aPython\u5217\u8868\u4e2d\u7684append\u548cinsert\u65b9\u6cd5)</p> </li> </ul> <p>\u6240\u4ee5\u5c3d\u91cf\u7ed9\u6bcf\u5f20\u8868\u8bbe\u7f6e\u4e00\u4e2a\u6574\u5f62\u81ea\u589e\u7684\u4e3b\u952e</p> <p>\u975e\u4e3b\u952e(\u8868\u4e2d\u7684\u5176\u4ed6\u5217)\u7d22\u5f15\u7ed3\u6784\u4e2d\u53f6\u5b50\u8282\u70b9\u50a8\u5b58\u7684\u662f\u4e3b\u952e(\u8868\u4e2d\u7684\u4e3b\u952e\u5217)\u7684\u539f\u56e0: \u4e00\u81f4\u6027\u548c\u8282\u7ea6\u5b58\u50a8\u7a7a\u95f4, \u5982\u56fe:</p> <p></p> <p>\u4e0a\u9762\u8bf4\u4e86\u53ea\u6709\u4e00\u4e2a\u805a\u96c6\u7d22\u5f15(\u5305\u542b\u6240\u6709\u6570\u636e), \u800c\u5176\u4ed6\u975e\u4e3b\u952e\u7684\u7d22\u5f15\u7684\u53f6\u5b50\u8282\u70b9\u4e2d\u5b58\u50a8\u7684data\u5c31\u662f\u4e3b\u952e\u7684\u503c(\u5373\u8282\u7ea6\u4e86\u7a7a\u95f4), \u540c\u65f6\u51cf\u5c11\u4e86\u590d\u6742\u5ea6(\u5373\u63d2\u5165\u6570\u636e\u65f6, \u53ea\u8981\u4e3b\u952e\u7d22\u5f15\u66f4\u65b0\u5b8c\u6bd5, \u5176\u4ed6\u975e\u4e3b\u952e\u7d22\u5f15\u5f15\u7528\u4e3b\u952e\u5373\u53ef, \u51cf\u5c11\u4e86\u51fa\u9519\u7684\u53ef\u80fd\u884c, \u4e5f\u5c31\u662f\u4e00\u81f4\u6027)</p> <p>\u975e\u4e3b\u952e\u7d22\u5f15, \u5373\u4e8c\u7ea7\u7d22\u5f15, \u4e5f\u5c31\u662f\u975e\u805a\u96c6\u7d22\u5f15, \u4f7f\u7528\u7684\u65f6\u5019\u5148\u901a\u8fc7\u4e8c\u7ea7\u7d22\u5f15\u627e\u5230\u4e3b\u952e, \u518d\u901a\u8fc7\u4e3b\u952e\u7d22\u5f15\u67e5\u5230\u6700\u7ec8\u9700\u8981\u7684\u6570\u636e, \u8fd9\u5c31\u662f\u56de\u8868</p> <p>\u8054\u5408\u7d22\u5f15, \u53c8\u53eb\u590d\u5408\u7d22\u5f15, \u5373\u591a\u4e2a\u5b57\u6bb5\u7ec4\u5408\u6210\u4e00\u4e2a\u7d22\u5f15, \u5982\u56fe:</p> <p></p> <p>\u8fd9\u91cc\u6d89\u53ca\u5230\u4e00\u4e2a\u7d22\u5f15\u6700\u5de6\u5217\u539f\u7406(\u53c8\u53eb\u5de6\u5217\u539f\u7406), \u5373\u6392\u5e8f\u7684\u65f6\u5019\u6309\u7167\u5b57\u6bb5\u7684\u987a\u5e8f, \u4e0a\u56fe\u793a\u4f8b\u4e2d\u7684name\u3001age\u548cposition\u7684\u987a\u5e8f\u8fdb\u884c\u6bd4\u5927\u5c0f, \u7136\u540e\u6392\u5e8f</p> <p>\u5982\u679c, name\u3001age\u548cposition\u6bd4\u8f83\u5b8c\u6bd5\u53d1\u73b0\u4e00\u6837, \u5c31\u4e0d\u5206\u5148\u540e\u653e\u5728\u4e00\u8d77, \u53f6\u5b50\u8282\u70b9\u7684data\u80af\u5b9a\u662f\u4e3b\u952e</p> <p>\u5982\u679c, name\u3001age\u548cposition\u662f\u8054\u5408\u4e3b\u952e, \u5373\u4e09\u8005\u5408\u4e00\u4e0d\u53ef\u80fd\u91cd\u590d, \u5b83\u672c\u8eab\u5c31\u662f\u805a\u96c6\u7d22\u5f15, \u53f6\u5b50\u8282\u70b9\u7684data\u5b58\u50a8\u5176\u4ed6\u5217\u7684\u6570\u636e</p> <p>\u540c\u65f6, \u4f7f\u7528\u8054\u5408\u7d22\u5f15\u65f6, \u9700\u8981\u6ce8\u610f\u5b57\u6bb5\u7684\u987a\u5e8f, \u5982:</p> <pre><code>select * from table_1 where name='xxx' and age='xxx';  # \u4f7f\u7528\u4e86\u7d22\u5f15\nselect * from table_1 where age='xxx' and position='xxx';  # \u672a\u4f7f\u7528\u7d22\u5f15\nselect * from table_1 where name='xxx'  # \u4f7f\u7528\u4e86\u7d22\u5f15\nselect * from table_1 where position='xxx'  # \u672a\u4f7f\u7528\u7d22\u5f15\n\n# \u8fd9\u5c31\u662f\u6700\u5de6\u524d\u7f00\u539f\u7406\n# why?\n# \u770b\u4e0a\u56fe, \u7d22\u5f15\u5c31\u662f\u6392\u597d\u5e8f\u7684\u6570\u636e\u7ed3\u6784, \u6240\u4ee5\u4e0a\u56fe\u4e2d\u5148\u6392\u5e8f\u7684name, \u7136\u540eage, \u6700\u540eposition\n\n# \u4f7f\u7528explain\u8bed\u6cd5\u53ef\u4ee5\u67e5\u770b\u7d22\u5f15\u7684\u4f7f\u7528, \u5982:\nexplain select * from table_1 where name='xxx' and age='xxx'; \n</code></pre> <p>\u4e00\u822c\u6765\u8bb2, \u4e00\u5f20\u8868\u4e2d\u4e0d\u63a8\u8350\u5efa\u7acb\u591a\u4e2a\u5355\u952e\u7d22\u5f15, \u57fa\u672c\u4e0a\u90fd\u7528\u8054\u5408\u7d22\u5f15</p>"},{"location":"mysql/MySQL%E7%B4%A2%E5%BC%95/#hash","title":"Hash","text":"<p>\u5176\u5b9e\u5728MySQL\u4e2d\u5efa\u7acb\u7d22\u5f15\u65f6, \u9664\u4e86B+\u6811\u8fd8\u53ef\u4ee5\u9009\u62e9Hash\u7ed3\u6784</p> <p>\u5176\u4f18\u70b9\u662f:</p> <p>\u200b   \u5bf9\u7d22\u5f15\u7684Key\u8fdb\u884c\u4e00\u6b21hash\u8ba1\u7b97\u5c31\u53ef\u4ee5\u5b9a\u4f4d\u51fa\u6570\u636e\u5b58\u50a8\u7684\u4f4d\u7f6e</p> <p>\u200b   \u5f88\u591a\u65f6\u5019hash\u6240\u6709\u6bd4B+\u6811\u6240\u6709\u66f4\u9ad8\u6548</p> <p>\u5176\u7f3a\u70b9\u662f:</p> <p>\u200b   \u4ec5\u80fd\u6ee1\u8db3 = \u548c in \u7684where\u6761\u4ef6\u67e5\u8be2, \u4e0d\u652f\u6301\u8303\u56f4\u67e5\u8be2</p> <p>\u200b    \u5bf9\u4e8e\u590d\u5408\u7d22\u5f15, hash\u662f\u5c06\u6240\u6709\u5b57\u6bb5\u7ec4\u5408\u5230\u4e00\u8d77\u8ba1\u7b97hash\u503c, \u6240\u4ee5hash\u7d22\u5f15\u65e0\u6cd5\u4e0d\u652f\u6301\u8986\u76d6\u7d22\u5f15\u7684\u7528\u6cd5</p> <p>\u200b   hash\u51b2\u7a81\u95ee\u9898\u6216\u8303\u56f4\u67e5\u8be2\u4f9d\u7136\u4f1a\u5bfc\u81f4\u8868\u626b\u63cf</p> <p>\u6240\u4ee5\u57fa\u672c\u4e0a\u8fd8\u662f\u7528B+\u6811\u7684\u591a</p>"},{"location":"mysql/MySQL%E8%AF%AD%E5%8F%A5%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B/","title":"MySQL\u8bed\u53e5\u6267\u884c\u8fc7\u7a0b","text":"<p>\u4f8b\u5982update\u67d0\u884c\u67d0\u4e2a\u5b57\u6bb5\u7684\u503c\u7684\u8fc7\u7a0b\u5982\u4e0b:</p> <p>1\u3001\u5728Buffer Pool\u4e2d\u52a0\u8f7d\u6539\u884c\u6570\u636e\u6240\u5728\u9875\u7684\u6574\u9875\u6570\u636e;</p> <p>2\u3001\u5728undo\u65e5\u5fd7\u4e2d\u5199\u5165\u4fee\u6539\u524d\u7684\u6570\u636e\u4ee5\u4fbf\u4e8e\u51fa\u73b0\u95ee\u9898\u65f6\u4f1a\u6eda;</p> <p>3\u3001\u66f4\u65b0\u5185\u5b58(Buffer Pool)\u4e2d\u7684\u6570\u636e</p> <p>4\u3001\u5728\u540d\u4e3aRedo Log Buffer\u7684\u5185\u5b58\u5757\u4e2d\u5199\u5165\u66f4\u65b0\u540e\u7684\u6570\u636e(\u5373redo\u65e5\u5fd7)</p> <p>5\u3001\u5c06redo\u65e5\u5fd7\u5199\u5165\u78c1\u76d8\u4e2d\u7684redo\u65e5\u5fd7\u6587\u4ef6</p> <p>6\u3001\u540c\u65f6\u5199\u5165binlog\u65e5\u5fd7\u6587\u4ef6</p> <p>7\u3001binglog\u65e5\u5fd7\u6587\u4ef6\u5199\u5165\u6210\u529f\u540e\u518d\u5728redo\u65e5\u5fd7\u6587\u4ef6\u4e2d\u5199\u5165commit\u6807\u8bb0, \u8868\u793a\u4e8b\u52a1\u63d0\u4ea4\u6210\u529f</p> <p>8\u3001Buffer Pool\u4e2d\u7684IO\u8fdb\u7a0b\u4f1a\u968f\u673a\u7684\u5199\u5165\u9875\u6587\u4ef6\u5230\u78c1\u76d8(\u5373\u5237\u76d8), \u6570\u636e\u771f\u6b63\u4fee\u6539\u5b8c\u6210</p> <p>\u6ce8\u610f\u70b9:</p> <p>undo\u65e5\u5fd7\u548credo\u65e5\u5fd7\u662fInnoDB\u72ec\u6709\u7684\u673a\u5236</p> <p>undo\u65e5\u5fd7\u662f\u4e8b\u52a1\u63d0\u4ea4\u5931\u8d25\u65f6\u7528\u4e8e\u4f1a\u6eda\u6570\u636e\u4f7f\u7528</p> <p>redo\u65e5\u5fd7\u662f\u4e3a\u4e86\u4fdd\u969c\u4e0a\u9762\u6b65\u9aa48\u4e4b\u524d\u670d\u52a1\u5668\u5b95\u673a, \u6570\u636e\u6ca1\u6709\u6765\u5f97\u53ca\u5199\u5165\u78c1\u76d8, \u5bfc\u81f4\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u60c5\u51b5, \u5f53\u670d\u52a1\u5668\u6062\u590d\u540e, MySQL\u4f1a\u5c06redo\u65e5\u5fd7\u4e2d\u7684\u6570\u636e\u91cd\u65b0\u5199\u5165Buffer Pool\u4e2d, \u4ee5\u89e3\u51b3\u8be5\u95ee\u9898</p> <p>binlog\u662f\u6062\u590d\u6570\u636e\u65e5\u5fd7\u7528\u7684, \u6bd4\u5982\u5220\u5e93\u4e86</p> <p>\u987a\u4fbf\u8bf4\u4e00\u53e5MySQL\u7684\u6240\u6709crud\u90fd\u662f\u5728buffer pool\u4e2d\u5b8c\u6210\u7684, \u800c\u4e14\u7b2c8\u6b65\u4e2d\u662f\u968f\u673a\u8bfb\u5199, redo\u662f\u65e5\u5fd7\u662f\u987a\u5e8f\u8bfb\u5199</p> <p>MySQL\u901a\u8fc7\u8fd9\u5957\u590d\u6742\u7684\u673a\u5236\u4fdd\u8bc1\u4e86\u6570\u636e\u7684\u5b8c\u6574\u3001\u4e00\u81f4, \u540c\u65f6\u901a\u8fc7\u5185\u5b58\u7ea7\u522b\u7684\u64cd\u4f5c\u548c\u987a\u5e8f\u8bfb\u5199\u4fdd\u8bc1\u6027\u80fd</p> <p>\u60f3\u8c61\u4e00\u4e0b\u786c\u76d8\u7684\u968f\u673a\u8bfb\u5199\u6d4b\u8bd5\u6d4b\u8bd5\u662f\u4e0d\u662f\u5f88\u6162?, \u5185\u5b58\u548c\u987a\u5e8f\u8bfb\u5199\u5c31\u4fdd\u8bc1\u4e86\u6027\u80fd</p> <p>\u6269\u5c55\u4e00\u4e0b, kafka\u4e5f\u662f\u64cd\u4f5c\u78c1\u76d8\u6587\u4ef6, \u901f\u5ea6\u5feb\u7684\u539f\u56e0\u5c31\u662f\u987a\u5e8f\u8bfb\u5199, \u76f4\u63a5\u901a\u8fc7offset\u504f\u79fb\u91cf\u5c31\u80fd\u5b9a\u4f4d</p>"},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/","title":"\u68c0\u7d22\u6392\u540d\u524d\u4e09\u548c\u5220\u9664\u91cd\u590d","text":""},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/#_2","title":"\u51c6\u5907\u5de5\u4f5c","text":""},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/#_3","title":"\u521b\u5efa\u8868","text":"<pre><code>CREATE TABLE `test` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `name` varchar(100) DEFAULT NULL,\n  `score` int(11) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n</code></pre>"},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/#_4","title":"\u63d2\u5165\u6570\u636e","text":"<pre><code>INSERT INTO test.test (name,score) VALUES\n     ('zhangsan',100),\n     ('zhangsan',100),\n     ('lisi',99),\n     ('whangwu',99),\n     ('lisi',98),\n     ('zhaoliu',97);\n</code></pre>"},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/#1","title":"\u9898\u76ee1: \u67e5\u51fa\u6765\u5206\u6570\u524d\u4e09\u7684\u540c\u5b66","text":""},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/#_5","title":"\u6b65\u9aa4\u4e00: \u68c0\u7d22\u5206\u6570\u6700\u9ad8\u7684\u524d\u4e09\u4e2a, \u540c\u65f6\u8003\u8651\u5230\u53ef\u80fd\u51fa\u7ebf\u5206\u6570\u76f8\u540c(\u540d\u6b21\u5e76\u5217)\u7684\u60c5\u51b5","text":"<pre><code>-- \u65b9\u6cd51, \u5206\u6570\u53bb\u91cd\nselect distinct score from test limit 3\n-- \u65b9\u6cd52, \u5206\u6570\u5206\u7ec4\nselect score from test group by score order by score desc limit 3\n</code></pre>"},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/#_6","title":"\u6b65\u9aa4\u4e8c: \u68c0\u7d22\u5206\u6570\u7b49\u4e8e\u6700\u9ad8\u7684\u524d\u4e09\u4e2a\u7684\u540c\u5b66\u5373\u662f\u7b54\u6848","text":"<p>\u76f4\u63a5\u6267\u884csql: <code>select * from test where score in (select distinct score from test limit 3)</code></p> <p>\u4f1a\u62a5\u9519\u5e76\u63d0\u793a: <code>This version of MySQL doesn't yet support 'LIMIT &amp; IN/ALL/ANY/SOME subquery'</code></p> <p>\u5373\u4e0d\u652f\u6301\u5728\u5b50\u67e5\u8be2\u4e2d\u4f7f\u7528limit, \u89e3\u51b3\u529e\u6cd5\u5c31\u662f\u628a\u5b50\u67e5\u8be2\u53d8\u6210\u4e00\u5f20\u6d3e\u751f\u8868: <code>select * from (select distinct score from test limit 3) as t</code></p> <p>\u7136\u540e\u518d\u4f7f\u7528\u5b50\u67e5\u8be2(\u5373\u591a\u5d4c\u5957\u4e00\u5c42):</p> <pre><code>select * from test where score in\n(select * from\n(select distinct score from test limit 3) as t\n)\n</code></pre>"},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/#2","title":"\u9898\u76ee2: \u5220\u9664\u540d\u79f0\u91cd\u590d\u7684\u6570\u636e","text":""},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/#_7","title":"\u6b65\u9aa4\u4e00: \u68c0\u7d22\u51fa\u540d\u79f0\u91cd\u590d\u7684\u6570\u636e","text":"<p>\u76f4\u63a5\u6267\u884csql: <code>select name, count(name) as counts from test where count(name) &gt; 1 group by name</code></p> <p>\u4f1a\u62a5\u9519\u5e76\u63d0\u793a: <code>Invalid use of group function</code></p> <p>\u539f\u56e0\u662fwhere\u540e\u9762\u7684\u6761\u4ef6\u4e2d\u4e0d\u80fd\u4f7f\u7528\u805a\u5408\u51fd\u6570, \u8981\u4f7f\u7528having\u8bed\u6cd5\u66ff\u4ee3:</p> <pre><code>select name, count(name) as counts from test group by name having counts &gt; 1\n</code></pre>"},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/#_8","title":"\u6b65\u9aa4\u4e8c: \u5220\u9664\u91cd\u590d\u7684\u6570\u636e","text":"<p>\u901a\u8fc7max()\u6216min()\u51fd\u6570\u9009\u62e9\u4fdd\u7559ID\u6700\u5927\u6216\u6700\u5c0f\u7684\u6570\u636e: <code>select min(id) as min_id from test group by name</code></p> <p>\u5269\u4f59\u7684\u5373\u662f\u9700\u8981\u5220\u9664\u7684</p> <p>\u76f4\u63a5\u6267\u884csql: <code>delete from test where id not in (select min(id) as min_id from test group by name)</code></p> <p>\u4f1a\u62a5\u9519\u5e76\u63d0\u793a: <code>You can't specify target table 'test' for update in FROM clause</code></p> <p>\u539f\u56e0\u662f, \u4e0d\u80fd\u5148\u67e5\u51fa\u540c\u4e00\u4e2a\u8868\u4e2d\u7684\u6570\u636e\u4ee5\u540e\u518d\u8fdb\u884c\u66f4\u65b0(\u5305\u62ec\u5220\u9664), \u89e3\u51b3\u529e\u6cd5\u4e0e\u9898\u76ee1\u4e2d\u7684\u6b65\u9aa42\u4e00\u6837, \u751f\u6210\u6d3e\u751f\u8868\u5373\u53ef, \u7136\u540e\u901a\u8fc7\u6d3e\u751f\u8868\u5220\u9664:</p> <pre><code>delete from test where id not in\n(select min_id from\n(select min(id) as min_id from test group by name) as t\n)\n</code></pre> <p>\u5176\u4ed6\u89e3\u6cd5:</p> <pre><code>-- \u65b9\u6cd51\nselect a.id \nfrom (\n   select ROW_NUMBER() over (partition by name order by id) as d\n   ,name\n   ,id \n   from test) as a\nwhere a.d&gt;1\n\n-- \u65b9\u6cd52\nselect t.id  from test t \ninner join \n  (select count(1),name,min(id) as id from test group by name having count(1)&gt;1) as a \n on t.id &lt;&gt; a.id and t.name =a.name\n\n -- \u4e0a\u9762\u4e24\u4e2a\u90fd\u80fd\u76f4\u63a5\u67e5\u51fa\u6765\u9700\u8981\u5220\u9664\u7684\u6570\u636e, \u628aselect\u6539\u6210delete\u5373\u53ef, \u4e14\u6548\u7387\u6bd4\u5d4c\u5957\u5b50\u67e5\u8be2\u9ad8\n</code></pre>"},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/#3","title":"\u9898\u76ee3: \u5220\u9664\u540d\u79f0\u548c\u5206\u6570\u91cd\u590d\u7684\u6570\u636e","text":"<p>\u9898\u76ee3\u89e3\u7b54\u601d\u8def\u540c\u9898\u76ee2, \u4f46\u662f\u6240\u6709\u5b57\u6bb5\u91cd\u590d\u624d\u7b97\u91cd\u590d, \u6240\u4ee5select\u548cgroup by\u8981\u5217\u51fa\u6240\u6709\u5b57\u6bb5:</p> <pre><code>delete from test where id in\n(select max_id from\n(select max(id) as max_id, name, score, count(*) as counts from test group by name, score having counts &gt; 1) as t\n)\n</code></pre> <p>PS: count(name) count(score) count(*) \u6548\u679c\u4e00\u6837</p>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","title":"Git\u5e38\u7528\u547d\u4ee4","text":""},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_1","title":"\u914d\u7f6e\u7528\u6237\u540d\u79f0","text":"<pre><code>git config --global user.name \"your name\"\n</code></pre>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_2","title":"\u914d\u7f6e\u7535\u5b50\u90ae\u4ef6\u5730\u5740","text":"<pre><code>git config --global user.email \"your email\"\n</code></pre>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#git_1","title":"\u521b\u5efaGit\u7248\u672c\u5e93","text":"<pre><code>git init\n</code></pre>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_3","title":"\u514b\u9686\u8fdc\u7a0b\u4ed3\u5e93","text":"<p>\u547d\u4ee4\u683c\u5f0f</p> <p><code>git clone &lt;repo&gt; &lt;directory&gt;</code></p> <p>\u53c2\u6570\u8bf4\u660e: </p> <ul> <li>repo: Git\u4ed3\u5e93\u5730\u5740</li> <li>directory: \u672c\u5730\u76ee\u5f55\u540d\u79f0, \u53ef\u7701\u7565</li> </ul> <p>\u793a\u4f8b: </p> <pre><code>git clone git@github.com:public-apis/public-apis.git public_apis\n</code></pre>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_4","title":"\u521b\u5efa\u6587\u4ef6\u5e76\u63d0\u4ea4\u5230\u7248\u672c\u5e93","text":"<p>Git\u672c\u5730\u4ed3\u5e93\u6709\u4e09\u5927\u533a\u57df: \u5de5\u4f5c\u533a\u3001\u6682\u5b58\u533a\u3001\u7248\u672c\u533a</p> <p>\u521b\u5efa\u3001\u4fee\u6539\u6587\u4ef6\u7b49\u64cd\u4f5c\u662f\u5728\u5de5\u4f5c\u533a</p> <p><code>git add</code>\u547d\u4ee4\u662f\u5c06\u5de5\u4f5c\u533a\u7684\u5185\u5bb9\u6dfb\u52a0\u5230\u6682\u5b58\u533a</p> <p>git commit\u547d\u4ee4\u5c06\u4e34\u65f6\u5b58\u533a\u5185\u5bb9\u6dfb\u52a0\u5230\u672c\u5730\u4ed3\u5e93\u4e2d</p>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#add","title":"add\u547d\u4ee4","text":"<p>\u6dfb\u52a0\u4e00\u4e2a\u6216\u591a\u4e2a\u6587\u4ef6\u5230\u6682\u5b58\u533a <code>git add file1 file2 ...</code> \u6dfb\u52a0\u6307\u5b9a\u76ee\u5f55\u5230\u6682\u5b58\u533a, \u5305\u62ec\u5b50\u76ee\u5f55 <code>git add dir</code> \u6dfb\u52a0\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u5230\u6682\u5b58\u533a <code>git add .</code></p>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#commit","title":"commit\u547d\u4ee4","text":""},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_5","title":"\u63d0\u4ea4\u6682\u5b58\u533a\u5230\u672c\u5730\u4ed3\u5e93\u4e2d","text":"<p><code>git commit -m 'message'</code></p> <p>\u53c2\u6570\u8bf4\u660e:  -m: \u6dfb\u52a0-m\u53c2\u6570\u8868\u793a\u53ef\u4ee5\u76f4\u63a5\u8f93\u5165\u540e\u9762\u7684message</p> <p>\u5982\u679ccommit\u6ce8\u91ca\u5199\u9519\u4e86, \u53ea\u60f3\u6539\u4e00\u4e0b\u6ce8\u91ca, \u53ea\u9700\u8981: <code>git commit --amend</code>, \u5373\u53ef\u8fdb\u5165\u7f16\u8f91\u5668\u66f4\u6539\u6ce8\u91ca</p>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_6","title":"\u63d0\u4ea4\u6682\u5b58\u533a\u7684\u6307\u5b9a\u6587\u4ef6\u5230\u4ed3\u5e93\u533a","text":"<p><code>git commit file1 file2 ... -m 'message'</code></p>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_7","title":"\u67e5\u770b\u5f53\u524d\u4ed3\u5e93\u6587\u4ef6\u72b6\u6001","text":"<p><code>git status</code></p>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_8","title":"\u7248\u672c\u56de\u9000","text":"<p>git reset\u547d\u4ee4\u7528\u4e8e\u56de\u9000\u7248\u672c, \u53ef\u4ee5\u6307\u5b9a\u9000\u56de\u67d0\u4e00\u6b21\u63d0\u4ea4\u7684\u7248\u672c\u3002git reset\u547d\u4ee4\u8bed\u6cd5\u5982\u4e0b\u3002</p> <p><code>git reset [--soft | --mixed | --hard] [HEAD]</code></p> <p>\u53c2\u6570\u8bf4\u660e: </p> <ul> <li> <p>--mixed: \u9ed8\u8ba4, \u64a4\u9500commit, \u5e76\u4e14\u64a4\u9500<code>git add .</code>\u64cd\u4f5c, \u7528\u4e8e\u91cd\u7f6e\u6682\u5b58\u533a\u7684\u6587\u4ef6, \u5de5\u4f5c\u533a\u6587\u4ef6\u5185\u5bb9\u4fdd\u6301\u4e0d\u53d8</p> </li> <li> <p>--soft: \u64a4\u9500commit, \u4f46\u4e0d\u64a4\u9500<code>git add .</code>\u64cd\u4f5c, \u5de5\u4f5c\u533a\u6587\u4ef6\u5185\u5bb9\u4fdd\u6301\u4e0d\u53d8, \u7528\u4e8e\u56de\u9000\u5230\u67d0\u4e2a\u7248\u672c</p> </li> <li> <p>--hard: \u7528\u4e8e\u64a4\u9500\u5de5\u4f5c\u533a\u4e2d\u6240\u6709\u672a\u63d0\u4ea4\u7684\u4fee\u6539\u5185\u5bb9, \u5c06\u6682\u5b58\u533a\u4e0e\u5de5\u4f5c\u533a\u90fd\u56de\u5230\u4e0a\u4e00\u6b21\u7248\u672c, \u5e76\u5220\u9664\u4e4b\u524d\u7684\u6240\u6709\u4fe1\u606f\u63d0\u4ea4</p> </li> <li> <p>HEAD: </p> <p>HEAD\u548cHEAD~0\u8868\u793a\u5f53\u524d\u7248\u672c</p> <p>HEAD^\u548cHEAD~1\u8868\u793a\u4e0a\u4e00\u4e2a\u7248\u672c</p> <p>HEAD^^\u548cHEAD~2\u8868\u793a\u4e0a\u4e0a\u4e00\u4e2a\u7248\u672c</p> <p>HEAD^^^\u548cHEAD~3\u8868\u793a\u4e0a\u4e0a\u4e0a\u4e00\u4e2a\u7248\u672c</p> <p>\u5176\u4ed6\u7248\u672c\u4ee5\u6b64\u7c7b\u63a8...</p> </li> </ul>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_9","title":"\u6587\u4ef6\u6bd4\u8f83","text":"<p>git diff\u547d\u4ee4\u7528\u4e8e\u6bd4\u8f83\u6587\u4ef6\u7684\u4e0d\u540c, \u5373\u6bd4\u8f83\u6587\u4ef6\u5728\u6682\u5b58\u533a\u548c\u5de5\u4f5c\u533a\u7684\u5dee\u5f02</p> <p>git diff\u547d\u4ee4\u663e\u793a\u5df2\u5199\u5165\u6682\u5b58\u533a\u548c\u5df2\u7ecf\u88ab\u4fee\u6539\u4f46\u5c1a\u672a\u5199\u5165\u6682\u5b58\u533a\u6587\u4ef6\u7684\u533a\u522b</p>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_10","title":"\u67e5\u770b\u5c1a\u672a\u7f13\u5b58\u7684\u6539\u52a8","text":"<p><code>git diff</code></p>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_11","title":"\u67e5\u770b\u5df2\u7f13\u5b58\u7684\u6539\u52a8","text":"<p><code>git diff --cached</code></p>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_12","title":"\u67e5\u770b\u5df2\u7f13\u5b58\u7684\u4e0e\u672a\u7f13\u5b58\u7684\u6240\u6709\u6539\u52a8","text":"<p><code>git diff HEAD</code></p>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#diff","title":"\u663e\u793a\u6458\u8981, \u800c\u975e\u6574\u4e2adiff","text":"<p><code>git diff --stat</code></p>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_13","title":"\u67e5\u770b\u67d0\u4e2a\u6587\u4ef6\u7684\u6539\u52a8","text":"<p><code>git diff HEAD -- file</code></p>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#git_2","title":"Git\u7684\u64a4\u9500\u4fee\u6539","text":"<p>Git\u7684\u64a4\u9500\u4fee\u6539\u6709\u4e24\u79cd\u65b9\u5f0f</p> <ul> <li>\u6587\u4ef6\u4fee\u6539\u540e\u8fd8\u6ca1\u6709\u88ab\u653e\u5230\u6682\u5b58\u533a, \u64a4\u9500\u4fee\u6539\u5c31\u80fd\u56de\u5230\u7248\u672c\u5e93\u672a\u4fee\u6539\u524d\u72b6\u6001</li> <li>\u6587\u4ef6\u4fee\u6539\u540e\u6dfb\u52a0\u5230\u6682\u5b58\u533a, \u64a4\u9500\u6682\u5b58\u533a\u7684\u4fee\u6539\u5c31\u56de\u5230\u6dfb\u52a0\u5230\u6682\u5b58\u533a\u540e\u7684\u72b6\u6001, \u9700\u8981\u7ee7\u7eed\u6267\u884c\u64a4\u9500\u6587\u4ef6\u64cd\u4f5c, \u624d\u80fd\u5b8c\u5168\u64a4\u9500\u6210\u529f</li> </ul>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_14","title":"\u672a\u6dfb\u52a0\u5230\u7f13\u5b58\u533a","text":"<p><code>git checkout file</code></p> <p>PS: \u53ef\u4ee5\u901a\u8fc7\u6b64\u547d\u4ee4\u627e\u56de\u8bef\u5220\u9664\u7684\u6587\u4ef6</p>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_15","title":"\u5df2\u6dfb\u52a0\u5230\u7f13\u5b58\u533a","text":"<p><code>git reset HEAD file</code></p> <p><code>git checkout file</code></p>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_16","title":"\u5206\u652f\u7ba1\u7406","text":""},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_17","title":"\u67e5\u770b\u5206\u652f","text":"<p><code>git branch</code></p>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_18","title":"\u521b\u5efa|\u5207\u6362\u5206\u652f","text":"<p><code>git branch branch_name</code></p> <p>\u5206\u652f\u5b58\u5728\u8868\u793a\u5207\u6362, \u5426\u5219\u8868\u793a\u521b\u5efa</p>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_19","title":"\u521b\u5efa\u5e76\u5207\u6362\u5206\u652f","text":"<p><code>git checkout -b branch_name</code></p>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_20","title":"\u5220\u9664\u5206\u652f","text":"<p><code>git branch -d test</code></p> <p>\u82e5\u60f3\u8981\u5220\u9664\u5f53\u524d\u5206\u652f\u9700\u8981\u5148\u5207\u6362\u5230\u5176\u4ed6\u5206\u652f</p>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_21","title":"\u5408\u5e76\u5206\u652f","text":"<p><code>git merge branch_name</code></p> <p>\u8868\u793a\u5c06\u540d\u4e3abranch_name\u7684\u5206\u652f\u5408\u5e76\u5230\u5f53\u524d\u5206\u652f</p>"},{"location":"others/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_22","title":"\u91cd\u547d\u540d\u5206\u652f","text":"<p><code>git branch -m old_name new_name</code></p> <p>\u5982\u679c\u8be5\u5206\u652f\u5df2\u7ecf\u88ab\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93, \u5219\u5728\u91cd\u547d\u540d\u672c\u5730\u5206\u652f\u540e, \u8fd8\u9700\u5220\u9664\u8fdc\u7a0b\u5206\u652f, \u518d\u4e0a\u4f20\u672c\u5730\u91cd\u547d\u540d\u540e\u7684\u5206\u652f</p> <p>\u5220\u9664: <code>git push --delete origin old_name</code></p> <p>\u63a8\u9001: <code>git push origin new_name</code></p> <p>\u67d0\u4e9b\u60c5\u51b5\u4e0b\u8fd8\u53ef\u80fd\u9700\u8981\u505a\u4e00\u6b21\u5173\u8054\u64cd\u4f5c: <code>git branch --set-upstream-to origin/new_name</code></p>"},{"location":"others/Iptables/","title":"Iptables","text":""},{"location":"others/Iptables/#iptables_1","title":"\u4e00\u3001Iptables\u7ed3\u6784","text":"<p>\u81ea\u4e0a\u800c\u4e0b\u6709\u75313\u90e8\u5206\u7ec4\u6210:</p> <ul> <li>Tables - \u8868</li> <li>Chains - \u94fe</li> <li>Rules - \u89c4\u5219</li> </ul>"},{"location":"others/Iptables/#1tables","title":"1\u3001Tables\u7ec4\u6210","text":""},{"location":"others/Iptables/#11tables","title":"1.1\u3001Tables","text":"<p>\u5185\u5efa4\u4e2d\u8868, \u5206\u522b\u662f:</p> <ul> <li>Filter - \u5b9a\u4e49\u5141\u8bb8\u6216\u4e0d\u5141\u8bb8</li> <li>NAT - \u5b9a\u4e49\u5730\u5740\u8f6c\u6362</li> <li>Mangle - \u4fee\u6539\u62a5\u6587\u539f\u6570\u636e, \u4f8b\u5982\u6253\u6807\u8bb0</li> <li>Raw - ?</li> </ul> <p>\u4f18\u5148\u7ea7\u4ece\u4e0a\u5230\u4e0b\u4f9d\u6b21\u964d\u4f4e, \u5373: raw &gt; mangle &gt; nat &gt; filter</p>"},{"location":"others/Iptables/#12filter","title":"1.2\u3001Filter","text":"<p>Filter\u662fIptables\u7684\u9ed8\u8ba4\u8868,\u4f5c\u7528\u4e8e\u4ee5\u4e0b3\u79cd\u5185\u5efa\u94fe(Chains):</p> <ul> <li>INPUT - \u6570\u636e\u5305\u5165\u53e3, \u5224\u65ad\u8def\u7531\u5e76\u5904\u7406\u6765\u81ea\u5916\u90e8\u7684\u6570\u636e,</li> <li>OUTPUT - \u6570\u636e\u5305\u51fa\u53e3, \u540e\u63a5\u8def\u7531\u5224\u65ad\u51fa\u53e3, \u5411\u5916\u90e8\u53d1\u9001\u7684\u6570\u636e</li> <li>FORWARD - \u4e0d\u8fdb\u5165\u7528\u6237\u7a7a\u95f4, \u5c06\u6570\u636e\u8f6c\u53d1\u5230\u672c\u673a\u7684\u5176\u4ed6\u7f51\u5361\u8bbe\u5907\u4e0a</li> </ul>"},{"location":"others/Iptables/#13nat","title":"1.3\u3001NAT","text":"<p>NAT\u4f5c\u7528\u4e8e3\u79cd\u5185\u5efa\u94fe, \u5206\u522b\u662f:</p> <ul> <li>PREROUTING - \u8def\u7531\u524d, \u6570\u636e\u5305\u521a\u8fdb\u5165\u7f51\u7edc\u5c42</li> <li>OUTPUT</li> <li>POSTOUTING - \u8def\u7531\u540e, \u6570\u636e\u5305\u901a\u8fc7\u7f51\u7edc\u63a5\u53e3\u51fa\u53bb</li> </ul>"},{"location":"others/Iptables/#14mangle","title":"1.4\u3001Mangle","text":"<p>Mangle\u5219\u53ef\u4ee5\u4f5c\u7528\u4e8e\u4ee5\u4e0a\u5168\u90e8\u7684\u5185\u5efa\u94fe:</p> <ul> <li>PREROUTING</li> <li>INPUT</li> <li>FORWARD</li> <li>OUTPUT</li> <li>POSTOUTING</li> </ul>"},{"location":"others/Iptables/#14raw","title":"1.4\u3001Raw","text":"<p>Raw\u53ea\u4f5c\u7528\u4e8e2\u4e2a\u5185\u5efa\u94fe:</p> <ul> <li>PREROUTING</li> <li>OUTPUT</li> </ul>"},{"location":"others/Iptables/#2chains","title":"2\u3001Chains","text":"<ul> <li>PREROUTING</li> <li>INPUT</li> <li>FORWARD</li> <li>OUTPUT</li> <li>POSTOUTING</li> </ul>"},{"location":"others/Iptables/#3rules","title":"3\u3001Rules","text":"<p>\u901a\u8fc7Iptables\u8bed\u6cd5\u521b\u5efa\u7684\u89c4\u5219</p>"},{"location":"others/Iptables/#4","title":"4\u3001\u603b\u7ed3","text":"<p>\u901a\u8fc7Iptables\u8bed\u6cd5\u521b\u5efa\u7684\u89c4\u5219\u5b58\u653e\u4e8eTables\u4e2d\u5e76\u5e94\u7528\u5230Chains\u4e0a\u9762</p>"},{"location":"others/Iptables/#iptables_2","title":"\u4e8c\u3001Iptables\u8bed\u6cd5","text":""},{"location":"others/Iptables/#1","title":"1\u3001\u8bed\u6cd5\u89c4\u5219","text":"<p>\u683c\u5f0f\uff1a<code>iptables [-t table] COMMAND chain CRETIRIA -j ACTION</code></p> <p><code>-t table</code>: filter\u3001nat\u3001mangle\u3001raw</p> <p><code>COMMAND</code>:  \u5b9a\u4e49\u5982\u4f55\u5bf9\u89c4\u5219\u8fdb\u884c\u7ba1\u7406</p> <p><code>chain</code>:  \u5b9a\u4e49\u5982\u4f55\u5bf9\u89c4\u5219\u8fdb\u884c\u7ba1\u7406, \u6307\u5b9a\u8be5\u89c4\u5219\u5e94\u7528\u5230\u54ea\u4e2a\u94fe\u4e0a, \u5f53\u5b9a\u4e49\u7b56\u7565(--policy)\u65f6\u53ef\u7701\u7565</p> <p><code>CRETIRIA</code>: \u6307\u5b9a\u5339\u914d\u6807\u51c6</p> <p><code>-j ACTION</code>: \u6307\u5b9a\u5982\u4f55\u8fdb\u884c\u5904\u7406</p>"},{"location":"others/Iptables/#2","title":"2\u3001\u53c2\u6570\u8bf4\u660e","text":""},{"location":"others/Iptables/#21command","title":"2.1\u3001COMMAND","text":""},{"location":"others/Iptables/#211","title":"2.1.1\u3001\u94fe\u7ba1\u7406\u547d\u4ee4","text":"<p><code>-P</code>: \u8bbe\u7f6e\u9ed8\u8ba4\u7b56\u7565, \u9ed8\u8ba4\u7b56\u7565\u4e00\u822c\u53ea\u6709\u4e24\u79cd, \u5f00(ACCEPT)\u6216\u8005\u5173(DROP)</p> <p><code>-F</code>: \u6e05\u7a7a\u89c4\u5219\u94fe, \u4f46\u9700\u8981\u6ce8\u610f\u6bcf\u4e2a\u94fe\u7684\u7ba1\u7406\u6743\u9650</p> <p><code>-N</code>: \u65b0\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u94fe</p> <p><code>-X</code>: \u5220\u9664\u4e00\u4e2a\u81ea\u5b9a\u4e49\u94fe</p> <p><code>-E</code>: \u91cd\u547d\u540d\u4e00\u4e2a\u81ea\u5b9a\u4e49\u94fe</p> <p><code>-Z</code>: \u6e05\u7a7a\u94fe\u53ca\u94fe\u4e2d\u9ed8\u8ba4\u89c4\u5219\u7684\u8ba1\u6570\u5668</p>"},{"location":"others/Iptables/#212","title":"2.1.2\u3001\u89c4\u5219\u7ba1\u7406\u547d\u4ee4","text":"<p><code>-A</code>: \u5728\u672b\u5c3e\u589e\u52a0\u4e00\u4e2a\u89c4\u5219</p> <p><code>-I num</code>: \u628a\u5f53\u524d\u89c4\u5219\u63d2\u5165\u5230\u7b2c\u51e0\u6761, num\u662f\u6570\u5b57, \u7701\u7565num\u8868\u793a\u63d2\u5165\u5230\u6700\u524d\u9762</p> <p><code>-R num</code>: \u66ff\u6362\u4e00\u4e2a\u89c4\u5219, \u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3a\u4fee\u6539\u4e00\u4e2a\u89c4\u5219</p> <p><code>-D num</code>: \u5220\u9664\u7b2c\u51e0\u6761\u89c4\u5219</p>"},{"location":"others/Iptables/#213","title":"2.1.3\u3001\u67e5\u770b\u547d\u4ee4","text":"<p><code>-L</code>: \u67e5\u770b</p> <p><code>-n</code>: \u663e\u793a\u4e3aIP\u5426\u5219\u662f\u57df\u540d</p> <p><code>-v</code>: \u663e\u793a\u8be6\u7ec6\u4fe1\u606f, \u53ef\u4ee5\u63a5\u591a\u4e2av, v\u8d8a\u591a\u8d8a\u8be6\u7ec6, \u4f8b\u5982 -vvv</p> <p><code>-x</code>: \u5728\u8ba1\u6570\u5668\u4e0a\u663e\u793a\u7cbe\u786e\u503c, \u4e0d\u505a\u5355\u4f4d\u8f6c\u6362</p> <p><code>-t table_name</code>: \u663e\u793a\u6307\u5b9a\u8868\u7684\u4fe1\u606f, \u4f8b\u5982 -t nat</p>"},{"location":"others/Iptables/#214","title":"2.1.4\u3001\u901a\u7528\u5339\u914d\u547d\u4ee4","text":"<p><code>-s</code>: \u6307\u5b9a\u4f5c\u4e3a\u6e90\u5730\u5740\u5339\u914d, \u9700\u4f7f\u7528IP, \u4e0d\u80fd\u662f\u4e3b\u673a\u540d, \u683c\u5f0f\u5305\u62ecIP\u3001IP/MASK\u30010.0.0.0/0.0.0.0, \u540c\u65f6\u53ef\u4ee5\u901a\u8fc7<code>!</code>\u53d6\u53cd</p> <p><code>-d</code>: \u8868\u793a\u5339\u914d\u76ee\u6807\u5730\u5740</p> <p><code>-p</code>: \u7528\u4e8e\u5339\u914d\u534f\u8bae, \u5e38\u7528\u7684\u6709TCP\u3001UCP\u548cICMP\u7b49</p> <p><code>-i eth0</code>: \u4eceeth0\u7f51\u5361\u6d41\u5165\u7684\u6570\u636e, \u4e00\u822c\u7528\u4e8eINPUT\u548cPREOUTING\u4e0a, eth0\u53ef\u4ee5\u662f\u5176\u4ed6\u63a5\u53e3</p> <p><code>-o eth0</code>: \u4eceeth0\u7f51\u5361\u6d41\u51fa\u7684\u6570\u636e, \u4e00\u822c\u7528\u4e8eOUTPUT\u548cPOSTOUTING\u4e0a, eth0\u53ef\u4ee5\u662f\u5176\u4ed6\u63a5\u53e3</p>"},{"location":"others/Iptables/#214_1","title":"2.1.4\u3001\u6269\u5c55(\u9690\u5f0f)\u5339\u914d\u547d\u4ee4","text":"<p>\u5f53\u4f7f\u7528\u4e86\u901a\u7528\u5339\u914d\u547d\u4ee4<code>-p</code>\u540e, \u9488\u5bf9\u4e0d\u540c\u7684\u534f\u8bae, \u6709\u4e0d\u540c\u7684\u6269\u5c55\u5339\u914d\u547d\u4ee4, \u5206\u522b\u662f:</p> <p>TCP:</p> <ul> <li>--dport xx, xx\u662f\u6570\u5b57, \u8868\u793a\u6307\u5b9a\u4e00\u4e2a\u76ee\u6807\u7aef\u53e3, \u4f8b\u5982 --dport 22</li> <li>--dport xx-xx, \u6307\u5b9a\u8fde\u7eed\u7684\u76ee\u6807\u7aef\u53e3, \u4f8b\u5982 --dport 22-25</li> <li>--sport xx, \u6307\u5b9a\u6e90\u7aef\u53e3</li> <li>--tcp-fiags\uff1aTCP\u7684\u6807\u5fd7\u4f4d(SYN, ACK, FIN, PSH, RST, URG), \u5bf9\u4e8e\u5b83\u4e00\u822c\u8981\u8ddf\u4e24\u4e2a\u53c2\u6570: \u68c0\u67e5\u7684\u6807\u5fd7\u4f4d\u548c\u5fc5\u987b\u4e3a1\u7684\u6807\u5fd7\u4f4d</li> </ul> <p>UDP:</p> <ul> <li>--dport, \u540cTCP</li> <li>--sport, \u540cTCP</li> </ul> <p>ICMP:</p> <ul> <li>--icmp-type: echo-request(\u8bf7\u6c42\u56de\u663e), \u4e00\u822c\u75288 \u6765\u8868\u793a, \u6240\u4ee5 --icmp-type 8 \u5339\u914d\u8bf7\u6c42\u56de\u663e\u6570\u636e\u5305; echo-reply \uff08\u54cd\u5e94\u7684\u6570\u636e\u5305\uff09\u4e00\u822c\u75280\u6765\u8868\u793a</li> </ul>"},{"location":"others/Iptables/#215","title":"2..1.5\u3001\u663e\u793a\u5339\u914d\u547d\u4ee4","text":"<p>\u7528\u4e8e\u5f00\u5c55\u5404\u79cd\u6a21\u5757, \u5e38\u7528\u7684\u662f<code>-m</code>, \u5373mulitport, \u8868\u793a\u542f\u7528\u591a\u7aef\u53e3\u6269\u5c55, \u6bd4\u5982 --dports 21,23,80</p>"},{"location":"others/Iptables/#22chain","title":"2.2\u3001chain","text":""},{"location":"others/Iptables/#23cretiria","title":"2.3\u3001CRETIRIA","text":""},{"location":"others/Iptables/#24-j-action","title":"2.4\u3001-j ACTION","text":"<p>\u5e38\u7528\u7684ACTION\u5206\u522b\u662f:</p> <ul> <li>DROP - \u6084\u6084\u4e22\u5f03</li> <li>REJECT - \u660e\u786e\u62d2\u7edd</li> <li>ACCEPT - \u63a5\u53d7</li> <li>REDIRECT - \u91cd\u5b9a\u5411, \u4e3b\u8981\u7528\u4e8e\u5b9e\u73b0\u7aef\u53e3\u91cd\u5b9a\u5411</li> <li>MARK - \u6253\u9632\u706b\u5899\u6807\u8bb0</li> </ul> <p>\u5176\u4ed6\u7684\u8fd8\u6709:</p> <ul> <li>custom_chain - \u8f6c\u5411\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u94fe</li> <li>RETURN - \u8fd4\u56de, \u5728\u81ea\u5b9a\u4e49\u94fe\u6267\u884c\u5b8c\u6bd5\u540e\u4f7f\u7528\u8fd4\u56de\u6765\u8fd4\u56de\u539f\u89c4\u5219\u94fe</li> <li>DNAT</li> <li>SNAT</li> <li>MASQUERADE - \u662f SNAT \u7684\u4e00\u79cd\u7279\u6b8a\u5f62\u5f0f\uff0c\u9002\u7528\u4e8e\u52a8\u6001\u7684\u3001\u4e34\u65f6\u4f1a\u53d8\u7684 ip \u4e0a, \u4f8b\u5982\u6e90\u5730\u5740\u4f2a\u88c5</li> <li>LOG</li> </ul>"},{"location":"others/Iptables/#3","title":"3\u3001\u6c38\u4e45\u4fdd\u5b58","text":"<p>\u901a\u8fc7iptables\u547d\u4ee4\u6dfb\u52a0\u3001\u5220\u9664\u7684\u89c4\u5219\u4e0d\u4f1a\u6c38\u4e45\u751f\u6548, \u91cd\u542f\u540e\u6062\u590d\u539f\u6837, \u6301\u4e45\u5316\u7684\u547d\u4ee4\u4e3a:</p> <p>Debian\u7cfb\u5217: service iptables save \u6216 /sbin/iptables-save</p> <p>RedHat\u7cfb\u5217: /sbin/service iptables save</p> <p>\u67e5\u770b: cat  /etc/sysconfig/iptables</p>"},{"location":"others/PostgreSQL%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","title":"PostgreSQL\u5e38\u7528\u547d\u4ee4","text":"<p>\u5907\u4efd\u6570\u636e\u5e93</p> <pre><code>pg_dump -h 127.0.0.1 -U postgres -d db &gt;db.bak\n</code></pre> <p>\u8fd8\u539f\u6570\u636e\u5e93</p> <pre><code>psql -h 127.0.0.1 -U postgres -d db &lt;  db.bak\n</code></pre> <p>\u521b\u5efa\u6570\u636e\u5e93</p> <pre><code>create database testdb;\n</code></pre> <p>\u67e5\u770b\u6570\u636e\u5e93</p> <pre><code>\\l\n</code></pre> <p>\u5220\u9664\u6570\u636e\u5e93</p> <pre><code>drop database testdb;\n</code></pre> <p>\u8fde\u63a5\u6570\u636e\u5e93</p> <pre><code>\\c testdb;\n</code></pre> <p>\u521b\u5efa\u6ca1\u6709\u4e3b\u952e\u7684\u8868</p> <pre><code>create table tb1(id int not null,c_name varchar(32),c_phone char(14));\n</code></pre> <p>\u521b\u5efa\u5305\u542b\u4e3b\u952e\u7684\u8868</p> <pre><code>-- \u65b9\u6cd51\ncreate table tb2(id int primary key,c_name varchar(32),c_phone char(14));\n-- \u65b9\u6cd52\ncreate table tb3(id int not null,c_name varchar(32),c_phone char(14),primary key(id));\n</code></pre> <p>\u521b\u5efa\u5305\u542b\u591a\u4e2a\u4e3b\u952e\u7684\u8868</p> <pre><code>create table tb4(id int,c_name varchar(32),c_phone char(14),primary key(id,c_name));\n</code></pre> <p>\u521b\u5efa\u4e3b\u952e\u81ea\u52a8\u589e\u957f\u7684\u8868</p> <pre><code>-- \u4e3b\u952e\u5b57\u6bb5\u4e0d\u7528\u663e\u793a\u58f0\u660enot null\ncreate table tb5(id serial primary key, c_name varchar(32),c_phone char(14));\n</code></pre> <p>\u663e\u793a\u6240\u6709\u8868</p> <pre><code>\\d\n</code></pre> <p>\u663e\u793a\u67d0\u5f20\u8868</p> <pre><code>\\d tb1\n</code></pre> <p>\u5220\u9664\u8868</p> <pre><code>drop table tb1;\ndrop table tb2,tb3;\n</code></pre> <p>\u6269\u5c55\uff1a\u6a21\u5f0f(\u67b6\u6784)\uff0c\u6700\u5e38\u89c1\u7684public\u5c31\u662f\u4e00\u5f20\u6a21\u5f0f(\u67b6\u6784)</p> <pre><code>-- \u521b\u5efa\u6a21\u5f0f(\u67b6\u6784)\uff1a\ncreate schema myschema; \n\n-- \u5220\u9664\u6a21\u5f0f(\u67b6\u6784)\uff1a\ndrop schema myschema;\n</code></pre>"},{"location":"others/Redis%E6%8C%81%E4%B9%85%E5%8C%96/","title":"Redis\u6301\u4e45\u5316","text":"<p>\u4ee5redis7.0.11\u4e3e\u4f8b</p>"},{"location":"others/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#rdb","title":"RDB","text":"<p>RDB\u4e5f\u5c31\u662f\u5feb\u7167(SNAPSHOTTING)\u65b9\u5f0f, \u6062\u590d\u65f6\u76f4\u63a5\u5c06RDB\u6570\u636e\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d</p> <p>\u5728redis.conf\u4e2d\u7684\u76f8\u5173\u914d\u7f6e\u53c2\u6570\u4e3a:</p> <ul> <li>save</li> <li>stop-writes-on-bgsave-error</li> <li>rdbcompression</li> <li>rdbchecksum</li> <li>sanitize-dump-payload</li> <li>dbfilename</li> <li>rdb-del-sync-files</li> <li>dir</li> </ul> <p>\u5176\u4e2d\u6700\u4e3b\u8981\u7684\u662f<code>save</code>\u53c2\u6570</p>"},{"location":"others/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#save","title":"save","text":"<p>\u683c\u5f0f: save  [  ...] <p>\u914d\u7f6e\u4fdd\u5b58\u6570\u636e\u5230\u78c1\u76d8\u7684\u7b56\u7565</p> <p>\u793a\u4f8b1: save 36000 1, \u8868\u793a\u57283600\u79d2\u5185\u6709\u4e00\u6b21\u4fee\u6539\u64cd\u4f5c\u5c31\u4fdd\u5b58\u5feb\u7167\u5230\u78c1\u76d8</p> <p>\u793a\u4f8b2: save 3600 1 300 100 60 10000, \u8868\u793a\u57283600\u79d2\u5185\u6709\u4e00\u6b21\u4fee\u6539\u64cd\u4f5c\u6216300\u79d2\u5185\u6709100\u6b21\u4fee\u6539\u64cd\u4f5c\u621660\u5999\u5185\u670910000\u64cd\u4f5c\u5c31\u4fdd\u5b58\u5feb\u7167\u5230\u78c1\u76d8</p> <p>\u793a\u4f8b3: save \"\", \u8868\u793a\u7981\u7528\u5feb\u7167</p> <p>\u5173\u4e8e\u624b\u52a8\u89e6\u53d1\u6301\u4e45\u5316:</p> <p>\u5728redis-cli\u4e2d\u53ef\u4f7f\u7528save\u6216bgsave\u547d\u4ee4, \u533a\u522b\u5728\u4e8e</p> <p>save\u662f\u540c\u6b65\u7684, \u4f7f\u7528\u5f53\u524d\u8fdb\u7a0b\u8fdb\u884c\u6301\u4e45\u5316, \u4f1a\u963b\u585e\u5f53\u524d\u8fdb\u7a0b, \u5373\u5728\u6301\u4e45\u5316\u5b8c\u6210\u4e4b\u524dredis\u65e0\u6cd5\u5904\u7406\u589e\u5220\u6539\u67e5\u547d\u4ee4</p> <p>bgsave\u5219\u662f\u5f02\u6b65\u7684, \u5373fork\u4e00\u4e2a\u5b50\u8fdb\u7a0b\u8fdb\u7a0b\u6301\u4e45\u5316\u5904\u7406, \u4e0d\u4f1a\u963b\u585e\u5f53\u524d\u8fdb\u7a0b, \u4f46\u4f1a\u989d\u5916\u6d88\u8017\u5185\u5b58</p> <p>\u540c\u65f6, bgsave\u5229\u7528\u4e86\u7cfb\u7edf\u63d0\u4f9b\u7684\u5199\u65f6\u590d\u5236(Copy-on-Write, COP)\u6280\u672f, \u6301\u4e45\u5316\u5f00\u59cb\u65f6\u5c06\u5f53\u524d\u6570\u636e\u5199\u5165RDB\u6587\u4ef6, \u5199\u5165\u6587\u4ef6\u671f\u95f4\u5982\u679c\u6709\u65b0\u6570\u636e\u5199\u5165, \u65b0\u6570\u636e\u4e5f\u4f1a\u5199\u5165RDB\u6587\u4ef6</p>"},{"location":"others/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#stop-writes-on-bgsave-error","title":"stop-writes-on-bgsave-error","text":"<p>\u683c\u5f0f: stop-writes-on-bgsave-error yes|no</p> <p>\u9ed8\u8ba4\u503c\u662fyes, \u8868\u793a:</p> <p>1\u3001\u5982\u679c\u542f\u7528\u4e86RDB\u5feb\u7167\u5e76\u4e14\u6700\u65b0\u7684\u540e\u53f0\u4fdd\u5b58(bgsave)\u5931\u8d25, \u5219redis\u5c06\u505c\u6b62\u63a5\u53d7\u5199\u5165, \u662f\u7528\u6237\u610f\u8bc6\u5230\u6570\u636e\u6ca1\u6709\u6b63\u786e\u7684\u4fdd\u5b58\u5230\u78c1\u76d8\u4e0a</p> <p>2\u3001\u5982\u679c\u540e\u53f0\u4fdd\u5b58\u8fc7\u7a0b\u518d\u6b21\u5f00\u59cb\u5de5\u4f5c\uff0c\u5219Redis\u5c06\u81ea\u52a8\u5141\u8bb8\u518d\u6b21\u5199\u5165</p> <p>\u8bbe\u7f6e\u4e3ano, \u8868\u793a\u65e0\u8bba\u5feb\u7167\u662f\u5426\u4fdd\u5b58\u6210\u529f, redis\u90fd\u5141\u8bb8\u7ee7\u7eed\u5199\u5165</p>"},{"location":"others/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#rdbcompression","title":"rdbcompression","text":"<p>\u683c\u5f0f: rdbcompression yes|no</p> <p>\u9ed8\u8ba4\u503c\u662fyes, \u8868\u793a\u4f7f\u7528LZF\u538b\u7f29RDB\u6570\u636e, \u63d0\u9ad8\u6301\u4e45\u5316\u901f\u5ea6\u5e76\u51cf\u5c11\u78c1\u76d8\u5360\u7528, \u4f46\u4f1a\u589e\u52a0CPU\u4f7f\u7528\u91cf</p>"},{"location":"others/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#rdbchecksum","title":"rdbchecksum","text":"<p>\u683c\u5f0f: rdbchecksum yes|no</p> <p>\u9ed8\u8ba4\u503c\u662fyes, \u8868\u793a\u6301\u4e45\u5316\u6570\u636e\u65f6\u4f7f\u7528CRC64\u8ba1\u7b97\u6570\u636e\u7684\u6821\u9a8c\u548c, \u6570\u636e\u6062\u590d\u65f6\u8bfb\u53d6\u6301\u4e45\u5316\u6587\u4ef6\u4e2d\u7684\u6821\u9a8c\u548c\u5e76\u4e0e\u5b9e\u9645\u6570\u636e\u8fdb\u884c\u6bd4\u5bf9, \u4ee5\u786e\u4fdd\u6570\u636e\u7684\u51c6\u786e\u6027\u548c\u5b8c\u6574\u6027, \u4f46\u4f1a\u591a\u6d88\u8017\u7ea610%\u7684\u6027\u80fd, \u540c\u65f6\u4e5f\u4f1a\u964d\u4f4e\u6301\u4e45\u5316\u901f\u5ea6</p>"},{"location":"others/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#sanitize-dump-payload","title":"sanitize-dump-payload","text":"<p>\u683c\u5f0f: sanitize-dump-payload yes|no|clients</p> <p>\u914d\u7f6eRedis\u4f7f\u7528RDB\u6301\u4e45\u5316\u65f6\u662f\u5426\u8fdb\u884c\u8131\u654f\u5904\u7406, \u901a\u5e38\u662f\u5c06\u654f\u611f\u4fe1\u606f\u66ff\u6362\u4e3a\u7279\u5b9a\u7684\u5360\u4f4d\u7b26\u6216\u8fdb\u884c\u52a0\u5bc6\u5904\u7406, \u4ee5\u9632\u6b62\u6570\u636e\u6cc4\u9732</p> <p>\u9ed8\u8ba4\u503c\u662fno\u4e14\u9ed8\u8ba4\u88ab\u6ce8\u91ca\u6389(\u7981\u7528)</p> <p>\u8bbe\u7f6e\u4e3ano\u65f6, Redis\u5728\u8fdb\u884cRDB\u6301\u4e45\u5316\u65f6\u4e0d\u4f1a\u5bf9\u6570\u636e\u8fdb\u884c\u8131\u654f\u5904\u7406, \u6301\u4e45\u5316\u6587\u4ef6\u4e2d\u7684\u6570\u636e\u5c06\u4fdd\u6301\u539f\u6837</p> <p>\u8bbe\u7f6e\u4e3ayes\u65f6, Redis\u5728\u8fdb\u884cRDB\u6301\u4e45\u5316\u65f6\u4f1a\u5bf9\u6570\u636e\u8fdb\u884c\u8131\u654f\u5904\u7406</p> <p>\u8bbe\u7f6e\u4e3aclients\u65f6\uff0cRedis\u4f1a\u5bf9RDB\u6301\u4e45\u5316\u4e2d\u7684\u6570\u636e\u8fdb\u884c\u8131\u654f\u5904\u7406\uff0c\u4f46\u53ea\u6709\u6765\u81ea\u5916\u90e8\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u6570\u636e\u4f1a\u88ab\u8131\u654f\uff0c\u800c\u5185\u90e8\u7684Redis\u547d\u4ee4\u548c\u6570\u636e\u5c06\u4fdd\u6301\u539f\u6837\u3002\u8fd9\u6837\u53ef\u4ee5\u4fdd\u62a4\u6765\u81ea\u5916\u90e8\u5ba2\u6237\u7aef\u7684\u654f\u611f\u4fe1\u606f\uff0c\u540c\u65f6\u4fdd\u6301\u5185\u90e8\u6570\u636e\u7684\u53ef\u8bfb\u6027\u548c\u5b8c\u6574\u6027\u3002</p>"},{"location":"others/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#dbfilename","title":"dbfilename","text":"<p>\u683c\u5f0f: rdbchecksum \"string\"</p> <p>\"string\"\u8868\u793a\u751f\u6210\u7684RDB\u6587\u4ef6\u540d\u79f0, \u9ed8\u8ba4\u503c\u662fdump.rdb</p>"},{"location":"others/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#rdb-del-sync-files","title":"rdb-del-sync-files","text":"<p>\u683c\u5f0f: rdb-del-sync-files yes|no</p> <p>\u9ed8\u8ba4\u503c\u662fno</p> <p>\u5728\u672a\u542f\u7528\u6301\u4e45\u6027\u7684\u5b9e\u4f8b\u4e2d\u5220\u9664\u590d\u5236\u4f7f\u7528\u7684RDB\u6587\u4ef6</p> <p>\u7b80\u5355\u8bf4\u5c31\u662f\u4e3b\u4ece\u540c\u6b65\u6570\u636e\u65f6\u4f7f\u7528RDB\u6587\u4ef6, \u540c\u6b65\u5b8c\u6210\u540e\u662f\u5426\u5220\u9664RDB\u6587\u4ef6</p> <p>\u8be5\u9009\u9879\u4ec5\u5728\u540c\u65f6\u7981\u7528AOF\u548cRDB\u6301\u4e45\u5316\u7684\u5b9e\u4f8b\u4e2d\u6709\u6548, \u5426\u5219\u5c06\u5b8c\u5168\u88ab\u5ffd\u7565</p>"},{"location":"others/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#dir","title":"dir","text":"<p>\u683c\u5f0f: dir \"path\"</p> <p>\"path\"\u8868\u793a\u5b58\u653eRDB\u6587\u4ef6\u7684\u76ee\u5f55, \u9ed8\u8ba4\u503c\u662f/var/lib/redis</p>"},{"location":"others/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#aof","title":"AOF","text":"<p>aof\u5373append-only file, \u5373\u5c06\u6bcf\u6761redis\u547d\u4ee4\u8ffd\u52a0\u5230appendfilename\u914d\u7f6e\u7684\u6587\u4ef6\u4e2d</p> <p>\u5e76\u6839\u636eappendfsync\u65b9\u5f0f\u540c\u6b65\u5230\u78c1\u76d8\u4e2d, \u6062\u590d\u65f6\u8bfb\u53d6AOF\u6587\u4ef6\u4e2d\u7684\u547d\u4ee4\u5e76\u9010\u6761\u6267\u884c</p> <p>\u5728redis.conf\u4e2d\u7684\u76f8\u5173\u914d\u7f6e\u53c2\u6570\u4e3a:</p> <ul> <li>appendonly</li> <li>appendfilename</li> <li>appenddirname</li> <li>appendfsync</li> <li>no-appendfsync-on-rewrite</li> <li>auto-aof-rewrite-percentage</li> <li>auto-aof-rewrite-min-size</li> <li>aof-load-truncated</li> <li>aof-use-rdb-preamble yes</li> <li>aof-timestamp-enabled</li> </ul>"},{"location":"others/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#appendonly","title":"appendonly","text":"<p>\u683c\u5f0f: appendonly yes|no</p> <p>\u9ed8\u8ba4\u503c\u662fno, yes\u8868\u793a\u542f\u7528aof\u6301\u4e45\u5316</p>"},{"location":"others/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#appendfilename","title":"appendfilename","text":"<p>\u540cdbfilename, \u8bbe\u7f6eaof\u6587\u4ef6\u540d\u79f0, \u9ed8\u8ba4\u503c\u662fappendonly.aof</p> <p>\u4ece7.0\u7248\u672c\u5f00\u59cb\u4f7f\u7528\u4e00\u7ec4\u6587\u4ef6\u8fdb\u884c\u6301\u4e45\u5316, \u6709\u4e24\u79cd\u53ef\u7528\u7684\u6587\u4ef6\u7c7b\u578b:</p> <ul> <li> <p>\u57fa\u672c\u6587\u4ef6\uff0c\u5b83\u4eec\u662f\u8868\u793a\u521b\u5efa\u6587\u4ef6\u65f6\u6570\u636e\u96c6\u7684\u5b8c\u6574\u72b6\u6001\u7684\u5feb\u7167, \u57fa\u672c\u6587\u4ef6\u53ef\u4ee5\u662fRDB(\u4e8c\u8fdb\u5236\u5e8f\u5217\u5316)\u6216AOF(\u6587\u672c\u547d\u4ee4)\u7684\u5f62\u5f0f\u3002</p> </li> <li> <p>\u589e\u91cf\u6587\u4ef6\uff0c\u5176\u4e2d\u5305\u542b\u5e94\u7528\u4e8e\u4e0a\u4e00\u4e2a\u6587\u4ef6\u4e4b\u540e\u7684\u6570\u636e\u96c6\u7684\u5176\u4ed6\u547d\u4ee4</p> </li> </ul> <p>\u7b80\u5355\u6765\u8bf4\u4f1a\u751f\u62103\u4e2a\u6587\u4ef6:</p> <ul> <li> <p>appendonly.aof.1.base.rdb, \u5b9e\u9645\u4e0a\u5c31\u662frdb\u6587\u4ef6</p> </li> <li> <p>appendonly.aof.1.incr.aof, \u5b9e\u9645\u4e0a\u5c31\u662faof\u6587\u4ef6</p> </li> <li> <p>appendonly.aof.manifest, \u4e0a\u8ff0\u4e24\u4e2a\u6587\u4ef6\u7684\u8bf4\u660e</p> </li> </ul>"},{"location":"others/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#appenddirname","title":"appenddirname","text":"<p>\u683c\u5f0f: appenddirname \"string\"</p> <p>\"string\"\u8868\u793a\u5b58\u653eaof\u6587\u4ef6\u7684\u76ee\u5f55, \u6b64\u76ee\u5f55\u4e8b\u76f8\u5bf9\u76ee\u5f55, \u4fdd\u5b58\u5728dir\u914d\u7f6e\u7684\u76ee\u5f55\u4e0b</p>"},{"location":"others/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#appendfsync","title":"appendfsync","text":"<p>\u683c\u5f0f: appendfsync always|everysec|no</p> <p>\u914d\u7f6eaof\u6587\u4ef6\u5237\u5199\u78c1\u76d8\u7684\u65b9\u5f0f</p> <p>\u9ed8\u8ba4\u503c\u662feverysec, \u8868\u793a\u6bcf\u79d2\u5237\u5199\u4e00\u6b21, \u5982\u679c\u53d1\u751f\u6545\u969c, \u6700\u591a\u4e22\u59311\u79d2\u7684\u6570\u636e</p> <p>\u5176\u4ed6\u4e24\u4e2a\u53ef\u9009\u914d\u7f6e\u662falways\u548cno, always\u8868\u793a\u6bcf\u6b21\u5bf9redis\u7684\u589e\u5220\u6539\u547d\u4ee4\u90fd\u4f1a\u5199\u5165aof\u5e76\u5237\u5199\u5230\u78c1\u76d8</p> <p>\u6b64\u79cd\u65b9\u5f0f\u6700\u5b89\u5168, \u4e0d\u4f1a\u4e22\u5931\u6570\u636e\u4f46\u6548\u7387\u6700\u6162</p> <p>\u5982\u679c\u662fno\u5219\u8868\u793a\u4ea4\u7531\u7cfb\u7edf\u5904\u7406, \u901f\u5ea6\u6700\u5feb\u4f46\u662f\u6700\u4e0d\u5b89\u5168</p>"},{"location":"others/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#no-appendfsync-on-rewrite","title":"no-appendfsync-on-rewrite","text":"<p>\u683c\u5f0f: no-appendfsync-on-rewrite yes|no</p> <p>\u9ed8\u8ba4\u503c\u662fno</p> <p>\u8fd9\u91cc\u6d89\u53ca\u5230aof\u6587\u4ef6\u91cd\u5199\u673a\u5236, \u4f8b\u5982\u5728redis-cli\u4e2d\u591a\u6b21\u4f7f\u7528set\u5bf9\u540c\u4e00\u4e2akey\u8bbe\u7f6evalue\u6216\u8005incr\u5bf9\u67d0\u4e2akey\u7684value\u81ea\u589e</p> <p>\u5bf9\u4e8eaof\u6587\u4ef6\u6765\u8bf4, \u91cc\u9762\u7684\u547d\u4ee4\u662f\u5197\u4f59\u7684, \u53ea\u8981\u62ff\u5230\u6700\u540e\u4e00\u4e2a\u503c\u5373\u53ef, \u800c\u91cd\u5199\u673a\u5236\u80fd\u51cf\u5c11aof\u6587\u4ef6\u5bf9\u78c1\u76d8\u7684\u5360\u7528</p> <p>\u5f53appendfsync\u914d\u7f6e\u4e3aalways\u6216everysec\u65f6, \u4e3b\u8fdb\u7a0b\u4f1a\u8c03\u7528\u7cfb\u7edf\u7684fsync(), \u4f1a\u6d88\u8017\u5927\u91cf\u7684I/O, \u53ef\u80fd\u5bfc\u81f4\u963b\u585e\u592a\u957f\u65f6\u95f4</p> <p>\u7f13\u89e3\u529e\u6cd5\u662f\u4f7f\u7528bgsave\u6216bgrewriteaof, \u8fd9\u6837\u5c31\u4e0d\u4f1a\u4f7f\u7528\u4e3b\u8fdb\u7a0b\u8c03\u7528fsync()\u800c\u5bfc\u81f4\u963b\u585e, \u4f46\u4f9d\u65e7\u4f1a\u6d88\u8017\u5927\u91cfI/O</p> <p>\u5982\u679c\u5c06\u6b64\u914d\u7f6e\u7684\u503c\u914d\u7f6e\u4e3ayes, \u90a3\u4e48\u5f53\u65f6\u4f1a\u6682\u505c\u5bf9aof\u6587\u4ef6\u7684\u540c\u6b65(\u5373\u5237\u5199\u78c1\u76d8), \u51cf\u5c11I/O, \u4f46\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6570\u636e\u4e22\u5931</p> <p>\u56e0\u6b64\u5982\u679c\u78c1\u76d8I/O\u95ee\u9898\u4e0d\u662f\u74f6\u9888, \u5efa\u8bae\u4fdd\u6301\u9ed8\u8ba4\u914d\u7f6e, \u5373 no</p>"},{"location":"others/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#auto-aof-rewrite-percentage","title":"auto-aof-rewrite-percentage","text":"<p>\u683c\u5f0f: auto-aof-rewrite-percentage percentage</p> <p>percentage \u662f\u6570\u5b57, \u8868\u793a\u767e\u5206\u6bd4, \u9ed8\u8ba4\u503c\u662f100</p> <p>\u5f53AOF\u65e5\u5fd7\u5927\u5c0f\u589e\u957f\u5230\u6307\u5b9a\u7684\u767e\u5206\u6bd4\u65f6, Redis\u80fd\u591f\u81ea\u52a8\u91cd\u5199\u9690\u5f0f\u8c03\u7528BGREWRITEAOF\u7684\u65e5\u5fd7\u6587\u4ef6</p> <p>\u82e5\u8bbe\u7f6e\u4e3a0\u5219\u8868\u793a\u7981\u7528aof\u91cd\u5199</p> <p>\u6ce8\u610f, \u9700\u8981\u914d\u5408auto-aof-rewrite-min-size\u53c2\u6570\u4e00\u8d77\u4f7f\u7528</p>"},{"location":"others/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#auto-aof-rewrite-min-size","title":"auto-aof-rewrite-min-size","text":"<p>\u683c\u5f0f: auto-aof-rewrite-min-size size</p> <p>size \u662f\u6570\u5b57+\u5355\u4f4d, \u8868\u793a\u6587\u4ef6\u5927\u5c0f, , \u9ed8\u8ba4\u503c\u662f64mb</p> <p>\u5f53aof\u6587\u4ef6\u5927\u5c0f\u5230\u8fbe\u6307\u5b9a\u503c\u65f6\u8fdb\u884c\u91cd\u5199, \u540e\u7eed\u518d\u6b21\u91cd\u5199\u5219\u4f1a\u6839\u636eauto-aof-rewrite-percentage\u914d\u7f6e\u7684\u503c\u8ba1\u7b97, \u6ee1\u8db3\u6761\u4ef6\u540e\u4f1a\u518d\u6b21\u91cd\u5199</p>"},{"location":"others/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#aof-load-truncated","title":"aof-load-truncated","text":"<p>\u683c\u5f0f: aof-load-truncated yes|no</p> <p>\u9ed8\u8ba4\u503c\u662fyes</p> <p>\u5f53\u91cd\u542fredis\u540e\u4f1a\u81ea\u52a8\u52a0\u8f7daof\u6587\u4ef6, \u5982\u679c\u53d1\u73b0aof\u6587\u4ef6\u672b\u5c3e\u88ab\u622a\u65ad(\u53ef\u4ee5\u7406\u89e3\u4e3aaof\u6587\u4ef6\u5185\u5bb9\u683c\u5f0f\u4e0d\u6b63\u786e\u6216\u635f\u574f), \u63a7\u5236\u662f\u5426\u4ecd\u7136\u52a0\u8f7d\u6b63\u786e\u7684\u90e8\u5206, \u5426\u5219\u62a5\u9519(\u914d\u7f6e\u4e3ano\u65f6)</p> <p>\u6ce8\u610f, \u5982\u679caof\u6587\u4ef6\u4ece\u4e2d\u95f4\u51fa\u9519, \u4e0d\u662f\u672b\u5c3e, \u5373\u4f7f\u914d\u7f6e\u4e3ayes, redis\u91cd\u542f\u65f6\u52a0\u8f7daof\u4e5f\u4f1a\u62a5\u9519</p>"},{"location":"others/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#aof-use-rdb-preamble","title":"aof-use-rdb-preamble","text":"<p>\u683c\u5f0f: aof-use-rdb-preamble yes|no</p> <p>\u9ed8\u8ba4\u503cyes, \u8868\u793a\u6df7\u5408\u6301\u4e45\u5316, \u5373\u540c\u65f6\u4f7f\u7528RDB\u548cAOF</p> <p>\u5177\u4f53\u5c31\u662f\u5c06\u5f53\u524d\u5185\u5b58\u4e2d\u7684\u6570\u636e\u5199\u5165RDB\u6587\u4ef6(\u524d\u9762\u63d0\u5230\u7684appendonly.aof.1.base.rdb)</p> <p>\u518d\u6b21\u671f\u95f4redis\u63a5\u6536\u7684\u64cd\u4f5c\u5c06\u5199\u5165AOF\u6587\u4ef6(\u524d\u9762\u63d0\u5230\u7684appendonly.aof.1.incr.aof)</p> <p>\u5373\u52a0\u5feb\u7684\u901f\u5ea6\u4e5f\u4fdd\u8bc1\u4e86\u6570\u636e\u7684\u5b89\u5168</p> <p>\u6ce8\u610f: \u5f00\u542f\u6df7\u5408\u6301\u4e45\u5316, \u4e0d\u9700\u8981\u5f00\u542fRDB\u6301\u4e45\u5316, \u5373\u65e0\u9700\u914d\u7f6esave\u53c2\u6570</p>"},{"location":"others/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#aof-timestamp-enabled","title":"aof-timestamp-enabled","text":"<p>\u683c\u5f0f: aof-timestamp-enabled yes|no</p> <p>\u9ed8\u8ba4\u503c\u662fno, \u5982\u679c\u6539\u6210yes, \u5219Redis\u652f\u6301\u5728AOF\u4e2d\u8bb0\u5f55\u65f6\u95f4\u6233\u6ce8\u91ca, \u4f46\u53ef\u80fd\u51fa\u73b0\u4e0d\u517c\u5bb9\u60c5\u51b5</p>"},{"location":"others/Redis%E6%8C%81%E4%B9%85%E5%8C%96/#rdbaof","title":"RDB\u548cAOF\u7684\u5bf9\u6bd4","text":"<p>RDB\u7684\u4f18\u52bf\u662f\u78c1\u76d8\u7a7a\u95f4\u5360\u7528\u5c0f, \u6570\u636e\u5907\u4efd\u4e0e\u6062\u590d\u7684\u901f\u5ea6\u5feb, \u4f46\u53ef\u80fd\u4f1a\u4e22\u5931\u5927\u91cf\u6570\u636e</p> <p>AOF\u7684\u4f18\u52bf\u662f\u6570\u636e\u91cf\u4e22\u5931\u8f83\u5c0f, \u4f46\u5360\u7528\u78c1\u76d8\u7a7a\u95f4\u5927, \u6062\u590d\u901f\u5ea6\u8f83\u6162</p> <p>\u540c\u65f6, AOF\u7684\u542f\u52a8\u4f18\u5148\u7ea7\u6bd4RDB\u9ad8</p> <p>\u6240\u4ee5\u5efa\u8bae\u4f7f\u7528\u6df7\u5408\u6301\u4e45\u5316</p>"},{"location":"others/Supervisor%E7%A4%BA%E4%BE%8B/","title":"Supervisor\u793a\u4f8b","text":"<p>\u53c2\u8003: http://www.supervisord.org/configuration.html</p> <pre><code>[program:siem_remote]\n# \u8f83\u4f4e\u7684\u4f18\u5148\u7ea7\u8868\u793a\u5148\u542f\u52a8\u540e\u5173\u95ed\uff0c\u8f83\u9ad8\u7684\u4f18\u5148\u7ea7\u8868\u793a\u6700\u540e\u542f\u52a8\u548c\u5148\u5173\u95ed\u7684\u7a0b\u5e8f\npriority=100\n# \u6267\u884c\u5b50\u7a0b\u5e8f\u4e4b\u524d\u4f1a\u5207\u6362\u5230\u6b64\u76ee\u5f55\ndirectory=/root/siem_remote/\n# \u8be5\u7a0b\u5e8f\u542f\u52a8\u65f6\u5c06\u8fd0\u884c\u7684\u547d\u4ee4\ncommand=python3 manage.py runserver 0:8001 --noreload\n# \u5982\u679c\u4e3a\u771f\uff0c\u8fd9\u4e2a\u7a0b\u5e8f\u5c06\u5728supervisord\u542f\u52a8\u65f6\u81ea\u52a8\u542f\u52a8\nautostart=true\n# \u7a0b\u5e8f\u5728\u542f\u52a8\u540e\uff0c\u5373\u4fdd\u6301RUNNING\u72b6\u6001\u8d85\u8fc7\u4ee5\u4e0b\u7684\u79d2\u6570\uff0c\u8ba4\u4e3a\u542f\u52a8\u6210\u529f\nstartsecs=10\n# \u5728\u5c1d\u8bd5\u542f\u52a8\u7a0b\u5e8f\u65f6\uff0csupervisord\u5141\u8bb8\u7684\u8fde\u7eed\u5931\u8d25\u6b21\u6570\uff0c\u7136\u540e\u653e\u5f03\u5e76\u5c06\u8fdb\u7a0b\u7f6e\u4e8eFATAL\u72b6\u6001\nstartretries=3\n# \u8fdb\u7a0b\u5728RUNNING\u72b6\u6001\u4e0b\u9000\u51fa\uff0csupervisord\u662f\u5426\u5e94\u8be5\u81ea\u52a8\u91cd\u542f\u8fdb\u7a0b\nautorestart=true \n# \u65e5\u5fd7\u6587\u4ef6\u914d\u7f6e\nstdout_logfile=/var/log/supervisor/siem_remote_stdout.log\nstderr_logfile=/var/log/supervisor/siem_remote_stderr.log\n</code></pre>"},{"location":"others/V2ray%2BTrojan%E9%85%8D%E7%BD%AE/","title":"V2ray+Trojan\u914d\u7f6e","text":"<p>\u53c2\u8003: https://www.v2fly.org/config/overview.html</p>"},{"location":"others/V2ray%2BTrojan%E9%85%8D%E7%BD%AE/#_1","title":"\u51c6\u5907\u5de5\u4f5c","text":"<ul> <li>\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u5747\u4e0b\u8f7dv2ray-core</li> <li>\u5ba2\u6237\u7aef\u4e0b\u8f7d\u56fd\u5185\u5916\u8def\u7531\u5206\u6d41\u6587\u4ef6\u8def\u7531\u5206\u6d41</li> </ul>"},{"location":"others/V2ray%2BTrojan%E9%85%8D%E7%BD%AE/#_2","title":"\u670d\u52a1\u7aef","text":"<pre><code>{\n    // \u914d\u7f6e\u65e5\u5fd7\n    \"log\": {\n        \"access\": \"access.log\",\n        \"error\": \"error.log\",\n        \"loglevel\": \"debug\"\n    },\n    // \u914d\u7f6e\u5165\u7ad9\u8fde\u63a5\n    \"inbounds\": [\n        {\n            // \u4f7f\u7528Trojan\u534f\u8bae\n            \"protocol\": \"trojan\",\n            \"settings\": {\n                \"clients\": [\n                    {\n                        // \u5bc6\u7801, \u5ba2\u6237\u7aef\u8ba4\u8bc1\u4f7f\u7528\n                        \"password\": \"password\"\n                    }\n                ]\n            },\n            \"port\": 56789,\n            \"listen\": \"0.0.0.0\",\n            \"tag\": \"proxy\" \n        }\n    ],\n    // \u914d\u7f6e\u51fa\u7ad9\u8fde\u63a5\n    \"outbounds\": [\n        {\n            \"protocol\": \"freedom\"\n        }\n    ]\n}\n</code></pre>"},{"location":"others/V2ray%2BTrojan%E9%85%8D%E7%BD%AE/#_3","title":"\u5ba2\u6237\u7aef","text":"<pre><code>{\n     // \u914d\u7f6e\u65e5\u5fd7\n    \"log\": {\n        \"access\": \"access.log\",\n        \"error\": \"error.log\",\n        \"loglevel\": \"debug\"\n    },\n    // \u914d\u7f6e\u5165\u7ad9\u8fde\u63a5\n    \"inbounds\": [\n        // \u7528\u4e8e\u8bbe\u7f6e\u7cfb\u7edfHTTP\u4ee3\u7406\n        {\n            \"protocol\": \"http\",\n            \"port\": 8080,\n            \"listen\": \"0.0.0.0\"\n        },\n        // \u7528\u4e8e\u8bbe\u7f6e\u7cfb\u7edfSOCKS\u4ee3\u7406\n        {\n            \"protocol\": \"socks\",\n            \"settings\": {\n                // \u542f\u7528UDP\u534f\u8bae\n                \"udp\": true\n            },\n            \"port\": 1080,\n            \"listen\": \"0.0.0.0\"\n        }\n    ],\n    // \u914d\u7f6e\u51fa\u7ad9\u8fde\u63a5\n    \"outbounds\": [\n        {\n            // \u4f7f\u7528Trojan\u534f\u8bae\n            \"protocol\": \"trojan\",\n            \"settings\": {\n                \"servers\": [\n                    {\n                        // \u6539\u6210\u771f\u6b63\u7684\u670d\u52a1\u5668IP\u5730\u5740\n                        \"address\": \"127.0.0.1\",\n                        // \u670d\u52a1\u5668\u7aef\u53e3\n                        \"port\": 56789,\n                        // \u670d\u52a1\u7aef\u7684\u5bc6\u7801, \n                        \"password\": \"password\"\n                    }\n                ]\n            },\n            // \u914d\u7f6e\u6807\u7b7e, \u4e0d\u80fd\u91cd\u590d\n            \"tag\": \"proxy\" \n        },\n        {\n            \"protocol\": \"freedom\",\n            \"tag\": \"direct\" \n        }\n    ],\n    // \u914d\u7f6e\u8def\u7531, \u5b9e\u73b0\u5206\u6d41\n    \"routing\": {\n        // \u53ea\u4f7f\u7528\u57df\u540d\u8fdb\u884c\u8def\u7531\u9009\u62e9\uff0c\u9ed8\u8ba4\u503c\n        \"domainStrategy\": \"AsIs\",\n        // \u57df\u540d\u5339\u914d\u7b97\u6cd5\n        \"domainMatcher\": \"mph\",\n        // \u8def\u7531\u89c4\u5219\n        \"rules\": [\n            // \u4f18\u5148\u7ea7\u4ece\u4e0a\u5f80\u4e0b\u4f9d\u6b21\u9012\u51cf\n            {\n                \"domainMatcher\": \"mph\",\n                \"type\": \"field\",\n                // \u914d\u7f6e\u56fd\u5185\u8def\u7531\n                \"domains\": [\n                    \"geosite:private\",\n                    \"geosite:cn\",\n                    \"geosite:apple-cn\",\n                    \"geosite:google-cn\",\n                    \"geosite:category-games@cn\",\n                    // \u907f\u514d geolocation-!cn \u5bfc\u81f4 github \u8d70\u4ee3\u7406\n                    \"github.com\"\n                ],\n                // \u8bbf\u95ee\u4ee5\u4e0a\u7f51\u7ad9\u8d70\u76f4\u8fde\n                \"outboundTag\": \"direct\"\n            },\n            {\n                \"domainMatcher\": \"mph\",\n                \"type\": \"field\",\n                // \u914d\u7f6e\u56fd\u5916\u8def\u7531\n                \"domains\": [\n                    \"geosite:google\",\n                    \"geosite:facebook\",\n                    \"geosite:twitter\",\n                    \"geosite:telegram\",\n                    // geolocation-!cn \u5305\u542b\u4e86\u5e38\u89c1\u7684\u975e\u5927\u9646\u7ad9\u70b9\u57df\u540d\n                    // \u542f\u7528\u540e\u57fa\u672c\u4e0a\u6240\u6709\u56fd\u5916\u7f51\u7ad9(\u4f8b\u5982github)\u90fd\u8d70\u4ee3\u7406\n                    \"geosite:geolocation-!cn\"\n                ],\n                // \u8bbf\u95ee\u4ee5\u4e0a\u7f51\u7ad9\u8d70\u4ee3\u7406\n                \"outboundTag\": \"proxy\"\n            },\n            {\n                // \u5176\u4ed6\u7f51\u7ad9\u8d70\u76f4\u8fde\n                \"type\": \"field\",\n                \"network\": \"tcp,udp\",\n                \"outboundTag\": \"direct\"\n            }\n        ]\n    }\n}\n</code></pre>"},{"location":"others/V2ray%2BTrojan%E9%85%8D%E7%BD%AE/#_4","title":"\u5176\u4ed6","text":"<p>\u6d41\u91cf\u4ee3\u7406\u8fc7\u7a0b:</p> <p>\u6d4f\u89c8\u5668 -&gt; \u7cfb\u7edf\u4ee3\u7406(SOCKS) -&gt; \u5ba2\u6237\u7aefinbounds -&gt; \u5ba2\u6237\u7aefoutbounds -&gt; \u670d\u52a1\u7aefinbounds -&gt; \u670d\u52a1\u7aefoutbounds</p> <p>\u6240\u4ee5\u5ba2\u6237\u7aefoutbounds\u914d\u7f6e\u7684\u534f\u8bae\u8981\u4e8e\u670d\u52a1\u7aefinbounds\u4e00\u81f4, \u5426\u5219\u65e0\u6cd5\u4ee3\u7406\u6210\u529f</p> <p>\u56fd\u5185\u5916\u5206\u6d41\u8def:</p> <p>V2Ray \u8def\u7531\u89c4\u5219\u6587\u4ef6\u52a0\u5f3a\u7248\uff0c\u8bbf\u95ee\u8def\u7531\u5206\u6d41\u4e0b\u8f7d <code>geoip.dat</code> \u548c <code>geosite.dat</code> \u7684\u6587\u4ef6, \u8986\u76d6\u5b98\u65b9\u540c\u540d\u6587\u4ef6</p>"},{"location":"others/V2ray%2BTrojan%E9%85%8D%E7%BD%AE/#mac","title":"MAC\u811a\u672c","text":"<p>\u9002\u7528\u4e8eMacOS\u7684\u4e00\u952e\u811a\u672c</p> <pre><code>#!/bin/zsh\n\n\ngetSOCKSProxyStatus(){\n    status=`networksetup -getsocksfirewallproxy WI-FI|grep -E ^Enabled|cut -d \" \" -f 2`\n}\n\n\nenableSOCKSProxy(){\n    `networksetup -setsocksfirewallproxy WI-FI 127.0.0.1 1080`\n    `networksetup -setsocksfirewallproxystate WI-FI on`\n    echo \"Enable socks proxy for WI-FI\"\n}\n\n\ndisableSOCKSProxy(){\n    `networksetup -setsocksfirewallproxystate WI-FI off`\n    echo \"Disable socks proxy for WI-FI\"\n}\n\n\nstartV2ray(){\n    nohup ~/.v2ray/v2ray --config ~/.v2ray/config.json &gt; ~/.v2ray/nohup.log 2&gt;&amp;1 &amp;\n    echo \"V2ray started\"\n}\n\n\nstopV2ray(){\n    ps -ef|grep v2ray|grep -v v2ray.sh|grep -v grep|awk '{print $2}'|xargs kill -9\n    echo \"V2ray stopped\"\n}\n\n\nmain(){\n    getSOCKSProxyStatus\n\n    if [ $status == \"Yes\" ];\n    then\n        disableSOCKSProxy\n        stopV2ray\n    else\n        startV2ray\n        enableSOCKSProxy\n    fi\n}\n\n\nmain\n</code></pre> <p>PS: \u914d\u5408alias\u522b\u540d<code>alias v2=\"sh ~/.v2ray/v2ray.sh\"</code>\u4f7f\u7528\u6548\u679c\u66f4\u4f73</p>"},{"location":"others/VSCode%E5%85%8D%E5%AF%86%E5%8F%91%E5%B8%83%E4%BB%A3%E7%A0%81%E5%88%B0GitHub/","title":"VSCode\u514d\u5bc6\u53d1\u5e03\u4ee3\u7801\u5230GitHub","text":""},{"location":"others/VSCode%E5%85%8D%E5%AF%86%E5%8F%91%E5%B8%83%E4%BB%A3%E7%A0%81%E5%88%B0GitHub/#git","title":"\u8bbe\u7f6eGit\u5168\u5c40\u53d8\u91cf","text":"<pre><code>git config --global user.name \"your name\"     \ngit config --global user.email \"your email\"\n</code></pre>"},{"location":"others/VSCode%E5%85%8D%E5%AF%86%E5%8F%91%E5%B8%83%E4%BB%A3%E7%A0%81%E5%88%B0GitHub/#ssh-key","title":"\u751f\u6210SSH Key","text":"<pre><code>ssh-keygen -t ed25519 -C \"your email\"\n</code></pre> <p>\u6216</p> <pre><code>ssh-keygen -t rsa -b 4096 -C \"your email\"\n</code></pre>"},{"location":"others/VSCode%E5%85%8D%E5%AF%86%E5%8F%91%E5%B8%83%E4%BB%A3%E7%A0%81%E5%88%B0GitHub/#_1","title":"\u67e5\u770b\u516c\u94a5","text":"<pre><code>cat ~/.ssh/id_ed25519.pub\n</code></pre> <p>\u6216</p> <pre><code>cat ~/.ssh/id_rsa.pub\n</code></pre>"},{"location":"others/VSCode%E5%85%8D%E5%AF%86%E5%8F%91%E5%B8%83%E4%BB%A3%E7%A0%81%E5%88%B0GitHub/#github","title":"\u6dfb\u52a0\u516c\u94a5\u5230GitHub\u8d26\u53f7","text":"<p>setting -&gt; SSH and GPG keys -&gt; New SSH key</p> <p>\u7c98\u8d34\u5bc6\u94a5\u5e76\u4fdd\u5b58</p>"},{"location":"others/VSCode%E5%85%8D%E5%AF%86%E5%8F%91%E5%B8%83%E4%BB%A3%E7%A0%81%E5%88%B0GitHub/#_2","title":"\u53d1\u5e03\u4ee3\u7801","text":"<p>\u6253\u5f00vscode\uff0c\u6253\u5f00\u6e90\u4ee3\u7801\u7ba1\u7406\uff0c\u70b9\u51fb\u53d1\u5e03\u5230Github\uff0c\u6839\u636e\u63d0\u793a\u64cd\u4f5c\u5373\u53ef</p>"},{"location":"others/%E4%B8%8B%E8%BD%BDChrome%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%8C%85/","title":"\u4e0b\u8f7dChrome\u79bb\u7ebf\u5b89\u88c5\u5305","text":"<p>\u56fd\u5185</p> <p>https://www.google.cn/chrome/?system=true&amp;standalone=1</p> <p>\u56fd\u5916</p> <p>https://www.google.com/chrome/?system=true&amp;standalone=1</p>"},{"location":"python/Flask%E4%B8%8A%E4%B8%8B%E6%96%87/","title":"Flask\u4e0a\u4e0b\u6587","text":""},{"location":"python/Flask%E4%B8%8A%E4%B8%8B%E6%96%87/#_1","title":"\u5e94\u7528\u7a0b\u5e8f\u4e0a\u4e0b\u6587","text":"<p>\u53c2\u8003: https://flask.palletsprojects.com/en/latest/appcontext/</p> <p>\u5373The Application Context, \u5177\u4f53\u8868\u73b0\u4e3acurrent_app\u548cg</p>"},{"location":"python/Flask%E4%B8%8A%E4%B8%8B%E6%96%87/#current_app","title":"current_app","text":"<p>\u5728\u5de5\u5382\u51fd\u6570\u4e2d\u5b9e\u4f8b\u5316\u7684Flask\u5bf9\u8c61app\u65f6\u6709\u4e2a\u91cd\u8981\u7684\u5c5e\u6027config</p> <p>\u5728\u5176\u4ed6\u6a21\u5757(\u6bd4\u5982view\u3001model\u7b49)\u4e2d\u8981\u8bbf\u95ee config \u4e2d\u7684\u914d\u7f6e\u9700\u8981\u5bfc\u5165 app</p> <p>\u4f46app\u6240\u5904\u7684\u5de5\u5382\u51fd\u6570\u6709\u8bf8\u5982\u6ce8\u518c\u84dd\u56fe\u7b49\u64cd\u4f5c, \u8fd9\u6837\u4f1a\u5c31\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5faa\u73af\u5bfc\u5165</p> <p>\u7136\u800c, Flask\u5904\u7406\u8bf7\u6c42\u671f\u95f4\u4f1a\u81ea\u52a8\u63a8\u9001\u5e94\u7528\u7a0b\u5e8f\u4e0a\u4e0b\u6587</p> <p>\u5728\u8bf7\u6c42\u671f\u95f4\u8fd0\u884c\u7684\u89c6\u56fe\u51fd\u6570\u3001\u9519\u8bef\u5904\u7406\u7a0b\u5e8f\u548c\u5176\u4ed6\u51fd\u6570\u7b49\u5747\u53ef\u4ee5\u8bbf\u95eecurrent_app</p> <p>current_app\u6307\u5411\u5904\u7406\u5f53\u524d\u6d3b\u52a8\u7684\u5e94\u7528\u7a0b\u5e8f(\u5373Flask\u7684\u5b9e\u4f8bapp)</p> <p>\u6b64\u65f6\u7528current_app\u5373\u53ef\u89e3\u51b3\u81f4\u5faa\u73af\u5bfc\u5165\u95ee\u9898</p>"},{"location":"python/Flask%E4%B8%8A%E4%B8%8B%E6%96%87/#g","title":"g","text":"<p>g\u53d8\u91cf\u662f\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u7ea7\u522b\u7684\u5168\u5c40\u53d8\u91cf, \u4e0ecurrent_app\u6709\u76f8\u540c\u7684\u751f\u547d\u5468\u671f</p> <p>\u4f46\u5b83\u88ab\u8bbe\u8ba1\u4e3a\u5728\u5904\u7406\u5355\u4e2a\u8bf7\u6c42\u65f6\u5b58\u50a8\u4e34\u65f6\u6570\u636e, \u5373\u4e0d\u540c\u8bf7\u6c42\u4e4b\u95f4\u7684 g \u53d8\u91cf\u662f\u4e0d\u540c\u7684</p> <p>\u5f53\u8bf7\u6c42\u5904\u7406\u7ed3\u675f\u65f6\uff0c\u8bf7\u6c42\u4e0a\u4e0b\u6587\u73af\u5883\u5c06\u88ab\u9500\u6bc1\uff0c\u5e76\u4e14 g \u5bf9\u8c61\u4e5f\u5c06\u88ab\u5220\u9664</p> <p>\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u662f\u4f7f\u7528\u94a9\u5b50\u51fd\u6570\u5728\u6bcf\u4e2a\u8bf7\u6c42\u4e4b\u524d\u68c0\u67e5token\u5e76\u5c06token\u5b58\u50a8\u5230g\u53d8\u91cf</p> <p>\u540e\u7eed\u771f\u6b63\u7684\u8bf7\u6c42\u5c31\u53ef\u4ee5\u62ff\u5230g\u53d8\u91cf\u4e2d\u5b58\u50a8\u7684token</p>"},{"location":"python/Flask%E4%B8%8A%E4%B8%8B%E6%96%87/#_2","title":"\u8bf7\u6c42\u4e0a\u4e0b\u6587","text":"<p>\u53c2\u8003: https://flask.palletsprojects.com/en/latest/reqcontext/</p> <p>\u5373The Request Context, \u5177\u4f53\u8868\u73b0\u4e3arequest\u548csession</p>"},{"location":"python/Flask%E4%B8%8A%E4%B8%8B%E6%96%87/#request","title":"request","text":"<p>\u5904\u7406\u8bf7\u6c42\u65f6Flask\u4f1a\u81ea\u52a8\u521b\u5efa\u63a8\u9001\u8bf7\u6c42\u4e0a\u4e0b\u6587(RequestContext )</p> <p>\u5176\u4e2d\u5305\u542b\u4e00\u4e2a\u65b0\u7684 request \u5bf9\u8c61, \u8be5\u5bf9\u8c61\u8868\u793a\u5f53\u524dHTTP\u8bf7\u6c42</p> <p>\u5904\u7406\u7ed3\u675f\u540e\u8bf7\u6c42\u4e0a\u4e0b\u6587(\u5305\u62ecrequest\u5bf9\u8c61)\u4f1a\u968f\u4e4b\u88ab\u5220\u9664</p> <p>\u5728\u8bf7\u6c42\u671f\u95f4\u8fd0\u884c\u7684\u89c6\u56fe\u51fd\u6570\u3001\u9519\u8bef\u5904\u7406\u7a0b\u5e8f\u548c\u5176\u4ed6\u51fd\u6570\u7b49</p> <p>\u5747\u53ef\u4ee5\u8bbf\u95ee\u8bf7\u6c42\u4e0a\u4e0b\u6587(\u90fd\u6307\u5411\u540c\u4e00\u4e2arequest\u5bf9\u8c61)</p> <p>\u8bf7\u6c42\u4e0a\u4e0b\u6587\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u7ebf\u7a0b\u90fd\u662f\u552f\u4e00\u7684, \u4e0d\u540c\u7ebf\u7a0b\u6709\u4e0d\u540c\u7684\u4e0a\u4e0b\u6587\u7a7a\u95f4, \u5e76\u4e14\u4e0d\u77e5\u9053\u7236\u7ebf\u7a0b\u6307\u5411\u7684\u8bf7\u6c42</p>"},{"location":"python/Flask%E4%B8%8A%E4%B8%8B%E6%96%87/#session","title":"session","text":"<p>\u6bcf\u4e2a\u8bf7\u6c42\u90fd\u4f1a\u6709\u81ea\u5df1\u72ec\u7acb\u7684session\u5bf9\u8c61</p> <p>\u56e0\u6b64\u5728\u591a\u4e2a\u5e76\u53d1\u8bf7\u6c42\u4e4b\u95f4\u4e0d\u4f1a\u51fa\u73b0\u6570\u636e\u7ade\u4e89\u7684\u95ee\u9898</p> <p>\u53ef\u4ee5\u4f7f\u7528session\u5bf9\u8c61\u65b9\u4fbf\u5730\u5b58\u50a8\u548c\u8bbf\u95ee\u4e0e\u5ba2\u6237\u7aef\u4f1a\u8bdd\u76f8\u5173\u7684\u6570\u636e</p> <p>current_app\u3001g\u3001request\u548csession\u90fd\u662f\u7ebf\u7a0b\u5b89\u5168\u7684</p>"},{"location":"python/Flask%E4%B8%8A%E4%B8%8B%E6%96%87/#_3","title":"\u4e0a\u4e0b\u6587\u63a8\u9001\u4e0e\u5f39\u51fa\u8fc7\u7a0b","text":"<p>\u7b80\u5355\u6765\u8bf4\u5c31\u662f:</p> <p>1\u3001Flask\u5e94\u7528\u7a0b\u5e8f\u5f00\u59cb\u5904\u7406\u8bf7\u6c42</p> <p>2\u3001\u63a8\u9001\u5e94\u7528\u7a0b\u5e8f\u4e0a\u4e0b\u6587</p> <p>3\u3001\u63a8\u9001\u8bf7\u6c42\u4e0a\u4e0b\u6587</p> <p>4\u3001\u8bf7\u6c42\u7ed3\u675f</p> <p>5\u3001\u5f39\u51fa\u8bf7\u6c42\u4e0a\u4e0b\u6587</p> <p>6\u3001\u5f39\u51fa\u5e94\u7528\u7a0b\u5e8f\u4e0a\u4e0b\u6587</p>"},{"location":"python/Flask%E4%B8%8A%E4%B8%8B%E6%96%87/#_4","title":"\u8bf7\u6c42\u4e0e\u54cd\u5e94\u8fc7\u7a0b","text":"<p>\u4e0a\u9762\u63d0\u5230\u7684\u4e0a\u4e0b\u6587\u63a8\u9001\u4e0e\u5f39\u51fa\u8fc7\u7a0b\u662f\u4ece\u5ba2\u6237\u7aef\u53d1\u8d77\u8bf7\u6c42\u5230\u670d\u52a1\u7aef\u8fd4\u56de\u54cd\u5e94\u7684\u5176\u4e2d\u4e00\u90e8\u5206</p> <p>\u6574\u4f53\u6d41\u7a0b\u53c2\u8003: https://flask.palletsprojects.com/en/latest/lifecycle/#serving-the-application</p> <p>\u5177\u4f53\u6765\u8bf4\u5c31\u662f:</p> <p>1\u3001\u4f7f\u7528\u6d4f\u89c8\u5668\u6216\u5176\u4ed6\u5de5\u5177\u53d1\u9001\u4e00\u4e2aHTTP\u8bf7\u6c42(request)</p> <p>2\u3001WSGI\u670d\u52a1\u5668\u6536\u5230\u8bf7\u6c42</p> <p>3\u3001WSGI\u670d\u52a1\u5668\u5c06HTTP data(\u6570\u636e)\u8f6c\u6362\u4e3aWSGI environ dict</p> <p>4\u3001WSGI\u670d\u52a1\u5668\u643a\u5e26\u4e0a\u9762environ\u8c03\u7528WSGI application(\u5373Flask)</p> <p>5\u3001Flask\u8fdb\u884c\u6240\u6709\u5185\u90e8\u5904\u7406\u4ee5\u5c06\u8bf7\u6c42\u8def\u7531\u5230\u89c6\u56fe\u51fd\u6570\uff0c\u5904\u7406\u9519\u8bef\u7b49</p> <p>6\u3001Flask\u5c06\u89c6\u56fe\u51fd\u6570\u8fd4\u56de\u8f6c\u6362\u4e3aWSGI\u54cd\u5e94\u6570\u636e\uff0c\u5e76\u5c06\u5176\u4f20\u9012\u7ed9WSGI\u670d\u52a1\u5668</p> <p>7\u3001WSGI\u670d\u52a1\u5668\u521b\u5efa\u5e76\u53d1\u9001HTTP\u54cd\u5e94(response)</p> <p>8\u3001\u5ba2\u6237\u7aef\u6536\u5230HTTP\u54cd\u5e94</p> <p>\u4e0a\u4e0b\u6587\u63a8\u9001\u4e0e\u5f39\u51fa\u8fc7\u7a0b\u53d1\u751f\u5728\u6b65\u9aa44\u4e2d, \u66f4\u4e3a\u5177\u4f53\u8fc7\u7a0b\u8bf7\u53c2\u8003:</p> <p>https://flask.palletsprojects.com/en/latest/lifecycle/#how-a-request-is-handled</p>"},{"location":"python/Flask%E4%B8%8A%E4%B8%8B%E6%96%87/#_5","title":"\u6269\u5c55","text":"<p><code>current_app._get_current_object()</code>\u548c<code>current_app</code>\u7684\u533a\u522b</p> <p>current_app._get_current_object() \u8fd4\u56de\u5f53\u524d\u5e94\u7528\u5bf9\u8c61\u7684\u975e\u4ee3\u7406\u7248\u672c, \u5373\u771f\u5b9e\u7684Flask\u5b9e\u4f8b\u5bf9\u8c61</p> <p>current_app \u662f\u4e00\u4e2a\u901a\u8fc7LocalProxy\u8fd4\u56de\u7684\u7ebf\u7a0b\u672c\u5730\u53d8\u91cf(Thread Local Variable)</p> <p>LocalProxy \u7684\u4f5c\u7528\u5c31\u662f\u53ef\u4ee5\u6839\u636e\u7ebf\u7a0b/\u534f\u7a0b\u8fd4\u56de\u5bf9\u5e94\u5f53\u524d\u534f\u7a0b/\u7ebf\u7a0b\u7684\u5bf9\u8c61\uff0c\u4e5f\u5c31\u662f\u8bf4</p> <ul> <li>\u7ebf\u7a0b A \u5f80 LocalProxy \u4e2d\u585e\u5165 A</li> <li>\u7ebf\u7a0b B \u5f80 LocalProxy \u4e2d\u585e\u5165 B</li> </ul> <p>\u65e0\u8bba\u5728\u662f\u4ec0\u4e48\u5730\u65b9\uff0c</p> <ul> <li>\u7ebf\u7a0b A \u6c38\u8fdc\u53d6\u5230\u5f97\u662f A\uff0c\u7ebf\u7a0b B \u53d6\u5230\u5f97\u6c38\u8fdc\u662f B</li> </ul> <p>\u4ee3\u7801\u6848\u4f8b:</p> <pre><code>from threading import Thread\nfrom flask import current_app, render_template\nfrom flask.ext.mail import Message\nfrom . import mail\n\n\ndef send_async_email(app, msg):\n    with app.app_context():\n        mail.send(msg)\n\n\ndef send_email(to, subject, template, **kwargs):\n    app = current_app._get_current_object()\n    msg = Message(app.config['FLASKY_MAIL_SUBJECT_PREFIX'] + ' ' + subject, sender=app.config['FLASKY_MAIL_SENDER'], recipients=[to])\n    msg.body = render_template(template + '.txt', **kwargs)\n    msg.html = render_template(template + '.html', **kwargs)\n    thr = Thread(target=send_async_email, args=[app, msg])\n    thr.start()\n    return thr\n</code></pre> <p>\u8fd9\u91cc\u4f7f\u7528current_app._get_current_object()\u4e0d\u4f7f\u7528current_app</p> <p>\u5c31\u662f\u5e94\u4e3a\u901a\u8fc7Thread\u7ebf\u7a0b\u5f00\u4e86\u53e6\u4e00\u4e2a\u7ebf\u7a0b, \u56e0\u4e3a\u518d\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\u662f\u83b7\u53d6\u4e0d\u5230current_app</p> <p>\u4e3a\u4e86\u5728\u7ebf\u7a0b\u4e2d\u4f7f\u7528Flask\u7684\u4e0a\u4e0b\u6587\u5c31\u5fc5\u987b\u4f7f\u7528current_app._get_current_object()</p>"},{"location":"python/PIP/","title":"PIP","text":""},{"location":"python/PIP/#pip_1","title":"\u914d\u7f6ePIP\u6e05\u534e\u6e90","text":""},{"location":"python/PIP/#_1","title":"\u547d\u4ee4\u914d\u7f6e","text":"<p>\u53c2\u8003\uff1apypi | \u955c\u50cf\u7ad9\u4f7f\u7528\u5e2e\u52a9 | \u6e05\u534e\u5927\u5b66\u5f00\u6e90\u8f6f\u4ef6\u955c\u50cf\u7ad9 | Tsinghua Open Source Mirror</p> <pre><code>pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple\n</code></pre>"},{"location":"python/PIP/#_2","title":"\u624b\u52a8\u914d\u7f6e","text":""},{"location":"python/PIP/#_3","title":"\u521b\u5efa\u914d\u7f6e\u6587\u4ef6\u5939","text":"<pre><code>mkdir -p ~/.config/pip\n</code></pre>"},{"location":"python/PIP/#_4","title":"\u521b\u5efa\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>vim ~/.config/pip/pip.conf\n</code></pre>"},{"location":"python/PIP/#_5","title":"\u5199\u5165\u914d\u7f6e\u5185\u5bb9","text":"<pre><code>[global]\nindex-url = https://pypi.tuna.tsinghua.edu.cn/simple\n</code></pre>"},{"location":"python/PIP/#_6","title":"\u4e0b\u8f7d\u5305\u53ca\u5176\u4f9d\u8d56\u5230\u6307\u5b9a\u76ee\u5f55","text":"<pre><code>pip download -d /path/to/target/ package\n</code></pre>"},{"location":"python/PIP/#_7","title":"\u5b89\u88c5\u5305\u53ca\u5176\u4f9d\u8d56\u5230\u6307\u5b9a\u76ee\u5f55","text":"<pre><code>pip install --target=/path/to/target/ package\npip install --target=/path/to/target/ -r requirements.txt \n</code></pre> <p>\u6ce8\u610f, \u5b89\u88c5\u5305\u5230\u6307\u5b9a\u4f4d\u7f6e\u540e\u4f1a\u5bfc\u81f4Python\u89e3\u91ca\u5668\u65e0\u6cd5\u52a0\u8f7d\u8fd9\u4e9b\u5305, \u9700\u8981\u6307\u5b9a\u73af\u5883\u53d8\u91cf</p> <p>export PYTHONPATH=/path/to/target1;/path/to/target2;</p>"},{"location":"python/Python%E8%B5%84%E6%BA%90%E7%B4%A2%E5%BC%95/","title":"Python\u8d44\u6e90\u7d22\u5f15","text":"<p>\u6848\u4f8b\u4ee3\u7801: Python Code Examples</p> <p>\u5b66\u4e60\u6559\u7a0b: GitHub - Python-100-Days</p> <p>\u7b97\u6cd5\u4ee3\u7801: GitHub - Algorithms</p> <p>\u5404\u7c7b\u5305\u96c6\u5408: GitHub - Awesome Python GitHub - Awesome-cryptography</p> <p>\u5f02\u6b65SSH: GitHub - AsyncSSH Document - AsyncSSH</p> <p>\u5047\u6570\u636e\u751f\u6210: GitHub -  Faker Document - Faker</p> <p>\u52a0\u5bc6\u7b97\u6cd5: </p> <ul> <li>GitHub - PyCryptodome Document - PyCryptodome</li> <li>GitHub - Cryptography Document - Cryptography</li> </ul> <p>\u6253\u5305\u4e8c\u8fdb\u5236: </p> <ul> <li> <p>GitHub - Nuitka Document - Nuitka</p> </li> <li> <p>GitHub - PyInstaller Document - PyInstaller</p> </li> </ul> <p>\u914d\u5957Django\u7684\u5305: Django Packages</p> <p>\u914d\u5957Flask\u7684\u5305: GitHub -Awesome Flask</p>"},{"location":"python/%E5%8F%98%E9%87%8F%E5%90%8D%E7%A7%B0%E4%B8%AD%E7%9A%84%E4%B8%8B%E5%88%92%E7%BA%BF/","title":"\u53d8\u91cf\u540d\u79f0\u4e2d\u7684\u4e0b\u5212\u7ebf","text":""},{"location":"python/%E5%8F%98%E9%87%8F%E5%90%8D%E7%A7%B0%E4%B8%AD%E7%9A%84%E4%B8%8B%E5%88%92%E7%BA%BF/#_","title":"\u5355\u4e0b\u5212\u7ebf <code>_</code>","text":"<p>\u8868\u793a\u4e34\u65f6\u7684\u6216\u65e0\u5173\u7d27\u8981\u7684\u53d8\u91cf, \u4f8b\u5982:</p> <pre><code>for _ in range(5):\n    print('Hello World!')\n</code></pre> <p>\u540c\u65f6\u4e5f\u53ef\u5728REPL(\u4ea4\u4e92\u5f0f\u89e3\u91ca\u5668)\u4e2d\u50a8\u5b58\u6700\u8fd1\u7684\u4e00\u4e2a\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c, \u4f8b\u5982:</p> <pre><code>&gt;&gt;&gt; 1+1\n2\n&gt;&gt;&gt; _\n2\n&gt;&gt;&gt; 1+2\n3\n&gt;&gt;&gt; _\n3\n&gt;&gt;&gt; list()\n[]\n&gt;&gt;&gt; _.append(1)\n&gt;&gt;&gt; _.extend([2,3])\n&gt;&gt;&gt; _\n[1, 2, 3]\n</code></pre>"},{"location":"python/%E5%8F%98%E9%87%8F%E5%90%8D%E7%A7%B0%E4%B8%AD%E7%9A%84%E4%B8%8B%E5%88%92%E7%BA%BF/#_var","title":"\u524d\u7f6e\u5355\u4e0b\u5212\u7ebf <code>_var</code>","text":"<p>\u5355\u4e2a\u4e0b\u5212\u7ebf\u5f00\u5934\u7684\u53d8\u91cf\u6216\u65b9\u6cd5\u4ec5\u4f9b\u5185\u90e8\u4f7f\u7528, \u5728PEP 8\u4e2d\u5b9a\u4e49\u7684\u7ea6\u5b9a\u4fd7\u6210\u7684\u975e\u5f3a\u5236\u6027\u7684,\u4e0d\u9650\u5236\u8bbf\u95ee, \u4f8b\u5982:</p> <pre><code>class Demo:\n    def __init__(self):\n        self.a = 1\n\n    @staticmethod\n    def _return_something():\n        return 'Hello World'\n\n\ndemo = Demo()\nprint(demo.a)  # \u8f93\u51fa1\nprint(demo._return_something())  # Hello World\n</code></pre> <p>\u4f46\u662f\u5728\u5bfc\u5165\u65f6\u4f1a\u6709\u4e00\u4e9b\u533a\u522b, \u4f8b\u5982\u7f16\u5199\u5982\u4e0b\u6a21\u5757:</p> <pre><code>\"\"\"demo.py\"\"\"\n\n\nname = 'zhangsan'\n_age = 18\ngender = 'male'\n\n\ndef _get_gender():\n    return gender\n\n\nclass _Birthday:\n    BIRRTHDAY = '1970-01-01 00:00:00'\n</code></pre> <p>\u4f7f\u7528\u901a\u914d\u7b26\u5bfc\u5165\u6a21\u5757\u4e2d\u7684\u53d8\u91cf, \u9ed8\u8ba4\u4f1a\u5ffd\u7565\u4ee5\u5355\u4e0b\u5212\u7ebf\u5f00\u5934\u7684\u53d8\u91cf\u3001\u51fd\u6570\u548c\u7c7b, \u4f8b\u5982:</p> <pre><code>&gt;&gt;&gt; from demo import *\n&gt;&gt;&gt; name\n'zhangsan'\n&gt;&gt;&gt; age\n18\n&gt;&gt;&gt; _gender\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nNameError: name '_gender' is not defined\n&gt;&gt;&gt; _get_gender()\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nNameError: name '_get_gender' is not defined\n&gt;&gt;&gt; _Birthday\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nNameError: name '_Birthday' is not defined\n</code></pre> <p>\u5982\u679c\u5728\u6a21\u5757<code>demo.py</code>\u4e2d\u8bbe\u7f6e\u4e86<code>__all__ = ['name', 'age', '_gender', '_get_gender', '_Birthday']</code>, \u5219\u53ef\u4ee5\u8bbf\u95ee:</p> <pre><code>&gt;&gt;&gt; from demo import *\n&gt;&gt;&gt; name\n'zhangsan'\n&gt;&gt;&gt; age\n18\n&gt;&gt;&gt; _gender\n'male'\n&gt;&gt;&gt; _get_gender\n&lt;function _get_gender at 0x103291d80&gt;\n&gt;&gt;&gt; _Birthday\n&lt;class 'a._Birthday'&gt;\n</code></pre> <p>\u6216\u8005\u6ce8\u91ca\u6389<code>__all__</code>\u4f46\u4e0d\u4f7f\u7528\u901a\u914d\u7b26\u65b9\u5f0f\u5bfc\u5165, \u4f7f\u7528<code>\u5305\u540d.</code>\u7684\u65b9\u5f0f\u4e5f\u53ef\u8bbf\u95ee:</p> <pre><code>&gt;&gt;&gt; import demo\n&gt;&gt;&gt; demo.name\n'zhangsan'\n&gt;&gt;&gt; demo.age\n18\n&gt;&gt;&gt; demo._get_gender\n&lt;function _get_gender at 0x102e29d80&gt;\n&gt;&gt;&gt; demo._Birthday\n&lt;class 'a._Birthday'&gt;\n</code></pre>"},{"location":"python/%E5%8F%98%E9%87%8F%E5%90%8D%E7%A7%B0%E4%B8%AD%E7%9A%84%E4%B8%8B%E5%88%92%E7%BA%BF/#var_","title":"\u540e\u7f6e\u5355\u4e0b\u5212\u7ebf <code>var_</code>","text":"<p>\u540e\u7f6e\u5355\u4e0b\u5212\u7ebf\u901a\u5e38\u7528\u4e8e\u907f\u514d\u4e0ePython\u7684\u5173\u952e\u5b57\u4ea7\u751f\u51b2\u7a81, \u4f8b\u5982:</p> <pre><code>&gt;&gt;&gt; def=1\n  File \"&lt;stdin&gt;\", line 1\n    def=1\n       ^\nSyntaxError: invalid syntax\n&gt;&gt;&gt; def_=1\n&gt;&gt;&gt; \n&gt;&gt;&gt; def test(class):\n  File \"&lt;stdin&gt;\", line 1\n    def test(class):\n             ^^^^^\nSyntaxError: invalid syntax\n&gt;&gt;&gt; def test(class_):\n... \n</code></pre>"},{"location":"python/%E5%8F%98%E9%87%8F%E5%90%8D%E7%A7%B0%E4%B8%AD%E7%9A%84%E4%B8%8B%E5%88%92%E7%BA%BF/#__var","title":"\u524d\u7f6e\u53cc\u4e0b\u5212\u7ebf <code>__var</code>","text":"<p>\u524d\u7f6e\u53cc\u4e0b\u5212\u7ebf\u7684\u53d8\u91cf\u3001\u51fd\u6570\u548c\u7c7b\u540c\u5355\u524d\u7f6e\u4e0b\u5212\u7ebf, \u4f8b\u5982:</p> <pre><code>\"\"\"demo.py\"\"\"\n\n\n__a = 1\n\n\ndef __b():\n    pass\n\n\nclass __C:\n    pass\n</code></pre> <pre><code>&gt;&gt;&gt; from demo import *\n&gt;&gt;&gt; __a\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nNameError: name '__a' is not defined\n&gt;&gt;&gt; __b\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nNameError: name '__b' is not defined\n&gt;&gt;&gt; __C\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nNameError: name '__C' is not defined\n&gt;&gt;&gt; import demo\n&gt;&gt;&gt; demo.__a\n1\n&gt;&gt;&gt; demo.__b\n&lt;function __b at 0x100cf1d80&gt;\n&gt;&gt;&gt; demo.__C\n&lt;class 'z.__C'&gt;\n</code></pre> <p>\u4f46\u5982\u679c\u7528\u4e8e\u7c7b\u5185\u90e8\u7684\u5c5e\u6027\u6216\u65b9\u6cd5\u53ca\u5176\u65b9\u6cd5\u53d8\u91cf, \u4f1a\u89e6\u53d1Python\u7684\u4e00\u4e2a\u7279\u6027: \u540d\u79f0\u4fee\u9970(name mangling), \u5373\u89e3\u91ca\u5668\u4f1a\u66f4\u6539\u53d8\u91cf\u7684\u540d\u79f0, \u4f8b\u5982:</p> <pre><code>\"\"\"demo.py\"\"\"\n\n\nclass Demo:\n    __CLASSNAME = 'Demo'\n\n    def __init__(self):\n        self.foo = 1\n        self._bar = 2\n        self.__baz = 3\n\n    def __hey(self):\n        pass\n</code></pre> <pre><code>&gt;&gt;&gt; from demo import Demo\n&gt;&gt;&gt; d = Demo()\n&gt;&gt;&gt; d.__CLASSNAME\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: 'Demo' object has no attribute '__CLASSNAME'. Did you mean: '_Demo__CLASSNAME'?\n&gt;&gt;&gt; d.foo\n1\n&gt;&gt;&gt; d._bar\n2\n&gt;&gt;&gt; d.__baz\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: 'Demo' object has no attribute '__baz'. Did you mean: '_bar'?\n&gt;&gt;&gt; d.__hey\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: 'Demo' object has no attribute '__hey'\n</code></pre> <p>\u65e0\u6cd5\u8bbf\u95ee<code>__CLASSNAME\u3001</code>d._baz<code>\u548c</code>d.__hey<code>, \u5c31\u662f\u56e0\u4e3a\u540d\u79f0\u4fee\u9970, \u539f\u672c\u7684\u540d\u79f0\u5df2\u7ecf\u88ab\u66f4\u6539, \u901a\u8fc7</code>dir(d)`\u67e5\u770b\u6240\u6709\u5c5e\u6027\u53ef\u4ee5\u770b\u51fa:</p> <pre><code>&gt;&gt;&gt; dir(d)\n['_Demo__CLASSNAME', '_Demo__baz', '_Demo__hey', '__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', '_bar', 'foo']\n</code></pre> <ul> <li><code>__CLASSNAME</code>\u88ab\u91cd\u547d\u540d\u6210<code>_Demo__CLASSNAME</code></li> <li><code>__baz</code>\u88ab\u91cd\u547d\u540d\u6210<code>_Demo__baz</code></li> <li><code>__hey</code>\u88ab\u91cd\u547d\u540d\u6210<code>_Demo__hey</code></li> </ul> <p>\u6240\u4ee5\u5b9e\u9645\u4e0a\u5e94\u8be5\u8fd9\u6837\u8bbf\u95ee:</p> <pre><code>&gt;&gt;&gt; d._Demo__CLASSNAME\n'demo'\n&gt;&gt;&gt; d._Demo__baz\n3\n&gt;&gt;&gt; d._Demo__hey\n&lt;bound method Demo.__hey of &lt;demo.Demo object at 0x101110be0&gt;&gt;\n</code></pre> <p>\u5373, \u901a\u8fc7 <code>_\u7c7b\u540d__\u53d8\u91cf\u540d</code>\u7684\u65b9\u5f0f\u53ef\u4ee5\u8bbf\u95ee, \u4f46\u4e0d\u5efa\u8bae\u8fd9\u4e48\u505a, \u4e00\u822c\u6765\u8bb2\u524d\u7f6e\u53cc\u4e0b\u5212\u7ebf\u7684\u53d8\u91cf\u5728\u7ea6\u5b9a\u4fd7\u6210\u4e2d\u65f6\u79c1\u6709\u5c5e\u6027, \u4e0d\u5141\u8bb8\u5916\u90e8\u8bbf\u95ee</p> <p>\u540c\u65f6\u540d\u79f0\u4fee\u9970\u4f1a\u5f15\u53d1\u4e00\u4e2a\u73b0\u8c61, \u4f8b\u5982:</p> <pre><code>\"\"\"demo.py\"\"\"\n\n\nclass Demo:\n    __CLASSNAME = 'Demo'\n\n    def __init__(self):\n        self.foo = 1\n        self._bar = 2\n        self.__baz = 3\n        super().__init__()\n\n    def __hey(self):\n        pass\n\n\nclass SubDemo(Demo):\n    __CLASSNAME = 'SubDemo'\n\n    def __init__(self):\n        self.foo = 11\n        self._bar = 22\n        self.__baz = 33\n</code></pre> <pre><code>&gt;&gt;&gt; from demo import SubDemo\n&gt;&gt;&gt; sd = SubDemo()\n&gt;&gt;&gt; dir(sd)\n['_Demo__CLASSNAME', '_Demo__baz', '_Demo__hey', '_SubDemo__CLASSNAME', '_SubDemo__baz', '__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', '_bar', 'foo']\n</code></pre> <p>\u5b58\u5728 <code>_Demo__CLASSNAME</code>\u3001<code>_Demo__baz</code>\u3001<code>_Demo__hey</code>\u3001<code>_SubDemo__CLASSNAME</code>\u3001 <code>_SubDemo__baz</code></p> <pre><code>&gt;&gt;&gt; sd._Demo__CLASSNAME\n'Demo'\n&gt;&gt;&gt; sd._Demo__baz\n3\n&gt;&gt;&gt; sd._Demo__hey\n&lt;bound method Demo.__hey of &lt;demo.SubDemo object at 0x101045510&gt;&gt;\n&gt;&gt;&gt; sd._SubDemo__CLASSNAME\n'SubDemo'\n&gt;&gt;&gt; sd._SubDemo__baz\n33\n</code></pre> <p>\u8bc1\u660e: \u7c7b\u7684\u79c1\u6709\u5c5e\u6027\u53ef\u4ee5\u88ab\u5b50\u7c7b\u7ee7\u627f, \u4f46\u56e0\u4e3a\u540d\u79f0\u4fee\u9970\u7684\u673a\u5236\u5bfc\u81f4\u4e0d\u4f1a\u88ab\u91cd\u5199</p> <p>\u5728\u770b\u4e00\u4e2a\u5947\u602a\u7684\u4f8b\u5b50:</p> <pre><code>\"\"\"demo.py\"\"\"\n\n\n_Demo__name = '\u5168\u5c40\u53d8\u91cfDemo'\n\n\nclass Demo:\n    @staticmethod\n    def test():\n        return __name\n</code></pre> <p>\u672c\u6848\u4f8b\u4e2d\u5728IDE\u4e2d\u4e00\u5b9a\u4f1a\u63d0\u793a<code>__name</code>\u672a\u5b9a\u4e49, \u5c5e\u4e8e\u4e00\u4e2a\u9519\u8bef</p> <p>\u4f46\u662f\u7531\u4e8e\u540d\u79f0\u4fee\u9970\u7684\u539f\u56e0, \u5b9e\u9645\u4e0a\u4e0d\u4f1a\u8fd4\u56de<code>__name</code>, \u800c\u662f\u8fd4\u56de\u4fee\u9970\u540e<code>_Demo__name</code></p> <p>\u6070\u5de7\u6709\u4e2a\u5168\u5c40\u53d8\u91cf<code>_Demo__name</code>, \u6240\u4ee5\u53ef\u4ee5\u6b63\u5e38\u8fd4\u56de, \u4f8b\u5982:</p> <pre><code>&gt;&gt;&gt; from demo import Demo\n&gt;&gt;&gt; Demo().test()\n'\u5168\u5c40\u53d8\u91cfDemo'\n</code></pre>"},{"location":"python/%E5%8F%98%E9%87%8F%E5%90%8D%E7%A7%B0%E4%B8%AD%E7%9A%84%E4%B8%8B%E5%88%92%E7%BA%BF/#__var__","title":"\u524d\u540e\u53cc\u4e0b\u5212\u7ebf <code>__var__</code>","text":"<p>\u524d\u540e\u53cc\u4e0b\u5212\u7ebf\u5373\u539f\u6765\u7684\u9b54\u6cd5(magic)\u53d8\u91cf\u6216\u9b54\u6cd5\u65b9\u6cd5, \u73b0\u5728\u53ebdunder\u65b9\u6cd5, \u4e2a\u4eba\u7f16\u7801\u5e94\u907f\u514d\u6b64\u7c7b\u5199\u6cd5</p>"},{"location":"python/decorator-generator-iterator/%E7%94%9F%E6%88%90%E5%99%A8/","title":"\u751f\u6210\u5668","text":"<p>\u751f\u6210\u5668\u5176\u5b9e\u5c31\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u8fed\u4ee3\u5668, \u7528\u8fc7yield\u8bed\u6cd5\u5b9e\u73b0</p>"},{"location":"python/decorator-generator-iterator/%E7%94%9F%E6%88%90%E5%99%A8/#1","title":"\u4ee3\u78011","text":"<pre><code>import math\n\n\n# 2\u662f\u6700\u5c0f\u7684\u8d28\u6570\nnumber = 2\n\n\ndef is_prime_number(number):\n    \"\"\"\u5224\u65ad\u4f20\u5165\u6570\u5b57\u662f\u5426\u662f\u8d28\u6570\"\"\"\n\n    end = int(math.sqrt(number)) + 1\n    for i in range(2, end):\n        if math.remainder(number, i) == 0:\n            return False\n    return True\n\n\ndef generate_prime_number():\n    \"\"\"\u8d28\u6570\u751f\u6210\u5668\"\"\"\n\n    global number\n\n    while True:\n        tmp = number\n        number += 1\n        if is_prime_number(tmp):\n            yield tmp\n\n\ndef main():\n    \"\"\"\u8f93\u51fa100\u4ee5\u5185\u7684\u6240\u6709\u8d28\u6570\"\"\"\n\n    for _ in range(24):\n        print(next(generate_prime_number()), end=', ')\n    print(next(generate_prime_number()))\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97\n</code></pre> <p>\u89e3\u91ca:</p> <p>\u4f7f\u7528\u4e86yield\u5173\u952e\u5b57\u7684\u51fd\u6570\u4e0d\u518d\u662f\u666e\u901a\u51fd\u6570\uff0c\u800c\u662f\u751f\u6210\u5668(generator), \u751f\u6210\u5668\u662f\u4e00\u7c7b\u7279\u6b8a\u7684\u8fed\u4ee3\u5668</p> <p>yield\u5173\u952e\u5b57\u6709\u4e24\u70b9\u4f5c\u7528:</p> <ul> <li>\u4fdd\u5b58\u5f53\u524d\u8fd0\u884c\u72b6\u6001, \u5373\u9047\u5230 yield \u540e\u6682\u505c\u6267\u884c\uff0c\u5373\u5c06\u751f\u6210\u5668\u6302\u8d77</li> <li>\u5c06 yield \u540e\u9762\u7684\u503c\u8fd4\u56de</li> <li>\u4f7f\u7528 next() \u51fd\u6570\u5524\u9192\u751f\u6210\u5668\u4ece\u800c\u7ee7\u7eed\u6267\u884c</li> </ul> <p>PS: \u628a\u5217\u8868\u63a8\u5230\u5f0f\u5916\u9762\u7684[]\u6362\u6210()\u5c31\u662f\u4e00\u4e2a\u751f\u6210\u5668, \u7136\u540e\u53ef\u4ee5\u4f7f\u7528next()\u65b9\u6cd5\u8f93\u51fa\u5176\u5143\u7d20</p>"},{"location":"python/decorator-generator-iterator/%E7%94%9F%E6%88%90%E5%99%A8/#2","title":"\u4ee3\u78012","text":"<pre><code>def fibonacci_sequence(n):\n    \"\"\"\u6590\u6ce2\u90a3\u5951\u6570\u5217\"\"\"\n\n    current = 0\n    num1, num2 = 1, 1\n    while current &lt; n:\n        num = num1\n        num1, num2 = num2, num1 + num2\n        current += 1\n        yield num\n    # \u89e6\u53d1StopIteration\u5f02\u5e38\u65f6\u53ef\u8fd4\u56de\u7684\u503c\n    return '\u6ca1\u6709\u4e86'\n\n\ndef main():\n    fs = fibonacci_sequence(6)\n\n    while True:\n        try:\n            print(next(fs))\n        except StopIteration as e:\n            print(e.value)\n            break\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>1\n1\n2\n3\n5\n8\n\u6ca1\u6709\u4e86\n</code></pre> <p>\u89e3\u91ca:</p> <p>\u5f53\u5f15\u53d1StopIteration\u5f02\u5e38\u65f6, \u751f\u6210\u5668\u51fd\u6570fibonacci_sequence\u4e2dreturn\u540e\u7684\u503c\u53ef\u4ee5\u88ab\u8f93\u51fa</p> <p>main\u51fd\u6570\u4e2d\u5fc5\u987b\u5148\u5b9a\u4e49\u53d8\u91cf fs = fibonacci_sequence(6), \u518d\u4f7f\u7528 next(fs)</p> <p>\u5426\u5219\u4f1a\u65e0\u9650\u5faa\u73af\u8f93\u51fa 1</p> <p>\u56e0\u4e3a\u6bcf\u6b21\u90fd\u8c03\u7528\u51fd\u6570\uff0c\u90fd\u662f\u4e00\u4e2a\u65b0\u7684\u5b9e\u4f8b\uff0c\u6bcf\u6b21\u90fd\u90fd\u4ece\u7b2c\u4e00\u4e2a\u6570\u636e\u5f00\u59cb\u53d6</p> <p>\u5bf9\u6bd4\u4ee3\u78011, \u5e76\u6ca1\u6709\u8bbe\u7f6e\u53d8\u91cf, \u4e4b\u6240\u4ee5\u76f4\u63a5\u8c03\u7528\u7684\u7ed3\u679c\u4f9d\u65e7\u6b63\u786e, \u662f\u56e0\u4e3a\u8bbe\u7f6e\u4e86\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf, \u6bcf\u6b21\u8c03\u7528\u7684\u521d\u59cb\u6761\u4ef6\u90fd\u4e0d\u4e00\u6837</p> <p>\u751f\u6210\u5668\u4e2d\u8fd8\u6709\u4e00\u4e2asend\u65b9\u6cd5, \u8be6\u60c5\u89c1: https://blog.csdn.net/qq_42103091/article/details/124995095</p>"},{"location":"python/decorator-generator-iterator/%E8%A3%85%E9%A5%B0%E5%99%A8/","title":"\u88c5\u9970\u5668","text":""},{"location":"python/decorator-generator-iterator/%E8%A3%85%E9%A5%B0%E5%99%A8/#_2","title":"\u666e\u901a\u88c5\u9970\u5668","text":"<pre><code>import time\n\n\ndef outer_func(func):\n    def inner_func():\n        start_time = time.time()\n        func()\n        end_time = time.time()\n        print(f'\u51fd\u6570test_func\u8fd0\u884c\u65f6\u957f: {end_time - start_time}')\n    return inner_func\n\n\n@outer_func\ndef test_func():\n    time.sleep(1)\n\ndef main():\n    # \u91cd\u70b9\uff1a\n    # \u88c5\u9970\u5668\u672c\u8d28\u4e0a\u662f\u628a\u88ab\u88c5\u9970\u7684\u51fd\u6570\u5f53\u4f5c\u53c2\u6570\u4f20\u5165\u5e76\u53cd\u56de\u4e00\u4e2a\u540c\u540d\u51fd\u6570\n    # \u89e3\u91ca\uff1a\n    # \u8c03\u7528\u88ab\u88c5\u9970\u8fc7\u7684\u51fd\u6570test_func\u65f6\u5b9e\u9645\u4e0a\u8c03\u7528outer_func(test_func)\n    # \u6240\u4ee5 test_func \u5c31\u662f outer_func(test_func)\n    # \u56e0\u6b64 test_func() \u5c31\u662f outer_func(test_func)()\n    # outer_func(test_func)() \u4e2d\u7684 outer_func(test_func) \u53cd\u56de inner_func\n    # \u6240\u4ee5\u5c31\u662f inner_func()\n    # inner_func() \u5185\u90e8\u53ef\u4ee5\u8c03\u7528\u5916\u90e8\u51fd\u6570\u7684\u53c2\u6570\uff0c\u4e5f\u5c31\u662ffunc\uff0c\u800cfunc\u624d\u662f\u771f\u771f\u7684test_func\n    # \u6240\u4ee5 inner_func() \u5185\u90e8\u8c03\u7528\u4e86 test_func()\n    test_func()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"python/decorator-generator-iterator/%E8%A3%85%E9%A5%B0%E5%99%A8/#_3","title":"\u591a\u5c42\u88c5\u9970\u5668","text":"<pre><code>def outer_func_1(func):\n    def inner_func():\n        print('\u88c5\u9970\u5668outer_func_1\u8fd0\u884c\u5f00\u59cb')\n        func()\n        print('\u88c5\u9970\u5668outer_func_1\u8fd0\u884c\u7ed3\u675f')\n    return inner_func\n\n\ndef outer_func_2(func):\n    def inner_func():\n        print('\u88c5\u9970\u5668outer_func_2\u8fd0\u884c\u5f00\u59cb')\n        func()\n        print('\u88c5\u9970\u5668outer_func_2\u8fd0\u884c\u7ed3\u675f')\n    return inner_func\n\n\n@outer_func_2\n@outer_func_1\ndef test_func():\n    print(\"\u6211\u624d\u662ftest_func\u51fd\u6570\")\n\ndef main():\n    test_func()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>\u88c5\u9970\u5668outer_func_2\u8fd0\u884c\u5f00\u59cb\n\u88c5\u9970\u5668outer_func_1\u8fd0\u884c\u5f00\u59cb\n\u6211\u624d\u662ftest_func\u51fd\u6570\n\u88c5\u9970\u5668outer_func_1\u8fd0\u884c\u7ed3\u675f\n\u88c5\u9970\u5668outer_func_2\u8fd0\u884c\u7ed3\u675f\n</code></pre> <p>\u89e3\u91ca:</p> <ul> <li> <p>\u591a\u5c42\u88c5\u9970\u5668\u7531\u5916\u5411\u5185\u8c03\u7528\uff0c\u7531\u5185\u5411\u5916\u53cd\u56de</p> </li> <li> <p>\u6839\u636e\u88c5\u9970\u5668\u7684\u672c\u8d28\uff0c\u5b9e\u9645\u6267\u884c\u7684\u662f test_func = outer_func_2(outer_func_1(test_func))\uff0c\u5206\u89e3\u5f00\u5c31\u662f:</p> </li> </ul> <p>1\u3001outer_func_1 = outer_func_2(outer_func_1)</p> <p>2\u3001test_func = outer_func_1(test_func)</p> <ul> <li>\u9996\u5148\u662f\u8fc7\u7a0b1\uff0c\u8c03\u7528\u7684outer_func_1\u5176\u5b9e\u662fouter_func_2\u53cd\u56de\u7684\u540c\u540d\u51fd\u6570\uff0c\u6240\u4ee5\u5b9e\u9645\u6267\u884c\u7684\u662fouter_func_2\u51fd\u6570\uff0c\u56e0\u6b64\u7b2c\u4e00\u4e2a\u8f93\u51fa\u662f\u201c\u88c5\u9970\u5668outer_func_2\u8fd0\u884c\u5f00\u59cb\u201d</li> </ul> <p>\u5176\u6b21\u662f\u8fc7\u7a0b2\uff0c\u8c03\u7528\u7684test_func\u5176\u5b9e\u662fouter_func_1\u53cd\u56de\u7684\u540c\u540d\u51fd\u6570\uff0c\u6240\u4ee5\u5b9e\u9645\u6267\u884c\u7684\u662fouter_func_1\u51fd\u6570\uff0c\u56e0\u6b64\u7b2c\u4e8c\u4e2a\u8f93\u51fa\u662f\u201c\u88c5\u9970\u5668outer_func_1\u8fd0\u884c\u5f00\u59cb\u201d</p> <p>\u7136\u540e\u5f00\u59cb\u6267\u884c\u771f\u6b63\u7684\u51fd\u6570test_func\uff0c\u56e0\u6b64\u7b2c\u4e09\u4e2a\u8f93\u51fa\u662f\u201c\u6211\u624d\u662ftest_func\u51fd\u6570\u201d</p> <p>\u6700\u540e\u662f\u4f9d\u6b21\u53cd\u56de\u4e0a\u5c42\u51fd\u6570outer_func_1\u3001outer_func_2\uff0c\u56e0\u6b64\u7b2c\u4e09\u4e2a\u8f93\u51fa\u201c\u88c5\u9970\u5668outer_func_1\u8fd0\u884c\u7ed3\u675f\u201d\uff0c\u7b2c\u56db\u4e2a\u8f93\u51fa\u201c\u88c5\u9970\u5668outer_func_2\u8fd0\u884c\u7ed3\u675f\u201d</p>"},{"location":"python/decorator-generator-iterator/%E8%A3%85%E9%A5%B0%E5%99%A8/#_4","title":"\u88ab\u88c5\u9970\u7684\u51fd\u6570\u6709\u8fd4\u56de\u503c","text":"<pre><code>def outer_func(func):\n    def inner_func():       \n        # \u5f53\u88ab\u88c5\u9970\u7684\u51fd\u6570\u6709\u8fd4\u56de\u503c\n        # \u6b64\u5904\u4e0d\u80fd\u4ec5\u4ec5\u662f\u8c03\u7528 func()\uff0c \u5426\u5219\u4e0d\u4f1a\u8f93\u51fa Hello World!\n        # \u800c\u662f\u9700\u8981\u8fd4\u56de\u8c03\u7528\n        return func()\n    return inner_func\n\n\n@outer_func\ndef test_func():\n    return 'Hello World!'\n\ndef main():\n    print(test_func())\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"python/decorator-generator-iterator/%E8%A3%85%E9%A5%B0%E5%99%A8/#_5","title":"\u88ab\u88c5\u9970\u7684\u51fd\u6570\u6709\u53c2\u6570","text":"<p>\u4ee3\u78011</p> <pre><code>def outer_func(func):\n    def inner_func(name, age):\n        func(name, age)\n    return inner_func\n\n\n@outer_func\ndef introduce(name, age):\n    print(f'\u6211\u662f{name}\u4eca\u5e74{age}\u5c81')\n\ndef main():\n    introduce('\u8c01', '\u51e0')\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u4ee3\u78012</p> <pre><code>def outer_func(func):\n    def inner_func(*args, **kwargs):\n        func(*args, **kwargs)\n    return inner_func\n\n\n@outer_func\ndef print_parmeter(a, b, *args, **kwargs):\n    print(a, b)\n    print(f'args:{args}')\n    print(f'kwargs:{kwargs}')\n\ndef main():\n    print_parmeter(1, 2, 3, 4, 5, key1='value1', key2='value2')\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa\uff1a</p> <pre><code>1 2\nargs:(3, 4, 5)\nkwargs:{'key1': 'value1', 'key2': 'value2'}\n</code></pre>"},{"location":"python/decorator-generator-iterator/%E8%A3%85%E9%A5%B0%E5%99%A8/#_6","title":"\u88c5\u9970\u5668\u5de5\u5382","text":"<p>\u5373\u51fd\u6570\u5185\u90e8\u5b9a\u4e49\u4e86\u88c5\u9970\u5668\uff0c\u6700\u540e\u53cd\u56de\u8fd9\u4e2a\u88c5\u9970\u5668\uff0c\u5373\u8be5\u51fd\u6570\u521b\u5efa\u4e86\u4e00\u4e2a\u88c5\u9970\u5668\uff0c\u6240\u4ee5\u53eb\u88c5\u9970\u5668\u5de5\u5382</p> <pre><code>def wraps_factory():\n    def outer_func(func):\n        def inner_func():\n            func()\n        return inner_func\n    return outer_func\n\n\n# \u6ce8\u610f\u8fd9\u91cc\uff0c\u540e\u6765\u5e26\u4e86\u62ec\u53f7\n# \u4f7f\u7528\u88c5\u9970\u5668\u65e0\u9700\u5e26\u62ec\u53f7\uff0c\u4f7f\u7528\u88c5\u9970\u5668\u529f\u80fd\u9700\u5e26\u62ec\u53f7\n@wraps_factory()\ndef test_func():\n    print('Hello World')\n\n\ndef main():\n    test_func()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u4e0a\u9762\u7684\u793a\u4f8b\u610f\u4e49\u4e0d\u5927\uff0c\u56e0\u4e3a\u7528\u88c5\u9970\u5668\u5c31\u80fd\u5b8c\u6210\uff0c\u4e0d\u9700\u8981\u88c5\u9970\u5668\u5de5\u5382</p> <p>\u88c5\u9970\u5668\u5de5\u5382\u7684\u771f\u6b63\u610f\u4e49\u5728\u4e8e\u7ed9\u88c5\u9970\u5668\u643a\u5e26\u53c2\u6570\uff0c\u5177\u4f53\u770b\u4e0b\u9762\u7684\u4f8b\u5b50</p>"},{"location":"python/decorator-generator-iterator/%E8%A3%85%E9%A5%B0%E5%99%A8/#_7","title":"\u88c5\u9970\u5668\u4e0e\u88ab\u88c5\u9970\u5668\u90fd\u6709\u53c2\u6570","text":"<p>\u88c5\u9970\u5668\u672c\u8eab\u53ef\u4ee5\u643a\u5e26\u53c2\u6570\uff0c\u90a3\u5fc5\u5b9a\u662f\u88c5\u9970\u5668\u5de5\u5382\uff0c\u56e0\u4e3a\u53ea\u6709\u88c5\u9970\u5668\u5de5\u5382\u53ef\u4ee5\u5e26\u53c2\u6570</p> <pre><code>def wraps_factory(factory):\n    def outer_func(func):\n        def inner_func(parm=None):\n            if parm:\n                func(parm)\n            else:\n                # \u88c5\u9970\u5668\u7684\u53c2\u6570\u53ef\u4ee5\u88ab\u5185\u90e8\u4f7f\u7528\n                func(factory)\n        return inner_func\n    return outer_func\n\n\n@wraps_factory('abc')\ndef test_func(parm=None):\n    print(f'factory name is {parm}')\n\n\ndef main():\n    test_func()  # \u7b49\u540c\u4e8e wraps_factory('abc')(test_func)(parm=None)\n    test_func('xyz')  # \u7b49\u540c\u4e8e wraps_factory('abc')(test_func)(parm='xyz')\n\n\nif __name__ == '__main__':\n    main()\n    wraps_factory('abc')(test_func)(parm=None)\n    wraps_factory('abc')(test_func)(parm='xyz')\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>factory name is abc\nfactory name is xyz\n</code></pre>"},{"location":"python/decorator-generator-iterator/%E8%A3%85%E9%A5%B0%E5%99%A8/#_8","title":"\u88c5\u9970\u5668\u7c7b","text":"<p>\u88c5\u9970\u5668\u7c7b\u9700\u8981\u5b9e\u73b0\u4e24\u4e2a\u65b9\u6cd5\uff1a<code>__init__</code> \u548c <code>__call__</code></p> <p><code>__init__</code>\u63a5\u6536\u4e00\u4e2a\u53c2\u6570\uff0c\u5373\u88ab\u88c5\u9970\u7684\u51fd\u6570\uff0c \u76f8\u5f53\u4e8eouter_func(func)</p> <p><code>__call__</code> \u8d1f\u8d23\u5904\u7406\u4e1a\u52a1\uff0c\u76f8\u5f53\u4e8einner_func()</p> <pre><code>class Wraps:\n    def __init__(self, func):\n        self.func = func\n\n    def __call__(self, *args, **kwds):\n         print('\u5f00\u59cb\u88c5\u9970')\n         func = self.func(*args, **kwds)\n         print('\u88c5\u9970\u7ed3\u675f')\n         return func\n\n\n@Wraps\ndef test_func(num1, num2):\n    for i in range(num1, num2):\n        print('Hello World')\n\n\ndef main():\n    test_func(1,3)\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"python/decorator-generator-iterator/%E8%A3%85%E9%A5%B0%E5%99%A8%E5%89%AF%E4%BD%9C%E7%94%A8/","title":"\u88c5\u9970\u5668\u526f\u4f5c\u7528","text":"<pre><code>from typing import Any\n\n\ndef get_func_info(func):\n    def wrap(param: Any) -&gt; None:\n        \"\"\"this is the wrap function\"\"\"\n        func(param)\n    return wrap\n\n\n@get_func_info\ndef func(param: str) -&gt; None:\n    \"\"\"\u6253\u5370\u201c\u4e16\u754c\u4f60\u597d\u201d\"\"\"\n    print(param)\n\n\ndef main():\n    print(f'func name is: {func.__name__}')\n    print(f'func docs is: {func.__doc__}')\n    print(f'func annotations is: {func.__annotations__}')\n    func('Hello World')\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>func name is: wrap\nfunc docs is: this is the wrap function\nfunc annotations is: {'param': typing.Any, 'return': None}\nHello World\n</code></pre> <p>\u89e3\u91ca:</p> <p>@get_func_info \u88c5\u9970\u5668\u7b49\u4ef7\u4e8e func = get_func_info(func) </p> <p>\u6240\u4ee5 func() \u5b9e\u9645\u6307\u5411\u7684\u662f wrap()</p> <p>\u56e0\u6b64\u8f93\u51fa\u7684 wrap \u7684\u540d\u79f0\u3001\u6587\u6863\u548c\u6ce8\u89e3</p> <p>\u8fd9\u5c31\u662f\u88c5\u9970\u5668\u7684\u526f\u4f5c\u7528\uff0c\u88c5\u9970\u5668\u4e0d\u4f1a\u6539\u53d8\u539f\u6709\u51fd\u6570\u7684\u529f\u80fd\uff0c\u4f46\u4f1a\u6539\u53d8\u539f\u6709\u51fd\u6570\u7684\u4e00\u4e9b\u5c5e\u6027</p> <p>\u89e3\u51b3\u529e\u6cd5\u5c31\u662f\u4f7f\u7528 functools.wraps \u88c5\u9970 \u88c5\u9970\u5668\u7684\u5185\u90e8\u51fd\u6570\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>from functools import wraps\nfrom typing import Any\n\n\ndef get_func_info(func):\n    # \u6ce8\u610f\u6b64\u5904\uff0c\u4f7f\u7528 @wraps(func) \u88c5\u9970 \u88c5\u9970\u5668\u7684\u5185\u90e8\u51fd\u6570\uff0c\u62b5\u6d88\u88c5\u9970\u5668\u5bf9\u539f\u51fd\u6570\u5e26\u6765\u7684\u526f\u4f5c\u7528\n    @wraps(func)\n    def wrap(param: Any) -&gt; None:\n        \"\"\"this is the wrap function\"\"\"\n        func(param)\n    return wrap\n\n\n@get_func_info\ndef func(param: str) -&gt; None:\n    \"\"\"\u6253\u5370\u201c\u4e16\u754c\u4f60\u597d\u201d\"\"\"\n    print(param)\n\n\ndef main():\n    print(f'func name is: {func.__name__}')\n    print(f'func docs is: {func.__doc__}')\n    print(f'func annotations is: {func.__annotations__}')\n    func('Hello World')\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>func name is: func\nfunc docs is: \u6253\u5370\u201c\u4e16\u754c\u4f60\u597d\u201d\nfunc annotations is: {'param': &lt;class 'str'&gt;, 'return': None}\nHello World\n</code></pre>"},{"location":"python/decorator-generator-iterator/%E8%BF%AD%E4%BB%A3%E5%99%A8/","title":"\u8fed\u4ee3\u5668","text":""},{"location":"python/decorator-generator-iterator/%E8%BF%AD%E4%BB%A3%E5%99%A8/#1","title":"\u4ee3\u78011","text":"<pre><code>from collections.abc import Iterable, Iterator\n\n\nclass MyIterable:\n    def __iter__(self):\n        pass\n\nclass MyIterator:\n    def __iter__(self):\n        pass\n\n    def __next__(self):\n        pass\n\n\ndef main():\n    print(isinstance(MyIterable(), Iterable))\n    print(isinstance(MyIterable(), Iterator))\n    print(isinstance(MyIterator(), Iterable))\n    print(isinstance(MyIterator(), Iterator))\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>True\nFalse\nTrue\nTrue\n</code></pre> <p>\u89e3\u91ca:</p> <p>MyIterable \u5b9e\u73b0\u4e86 <code>__iter__</code> \u8868\u793a\u8be5\u5bf9\u8c61\u53ef\u8fed\u4ee3</p> <p>MyIterator \u5b9e\u73b0\u4e86 <code>__iter__</code> \u548c <code>__next__</code> \u8868\u793a\u8be5\u5bf9\u8c61\u662f\u8fed\u4ee3\u5668</p>"},{"location":"python/decorator-generator-iterator/%E8%BF%AD%E4%BB%A3%E5%99%A8/#2","title":"\u4ee3\u78012","text":"<pre><code>class FibIterator:\n    \"\"\"\u6590\u6ce2\u90a3\u5951\u6570\u5217\u8fed\u4ee3\u5668\"\"\"\n\n    def __init__(self, num):\n        self.num = num\n        self.fisrt = 1\n        self.second = 1\n        self.index = 0\n\n    def __iter__(self):\n        return self\n\n    def __next__(self):\n        if self.index &lt; self.num:\n            self.index += 1\n            item = self.fisrt\n            self.fisrt, self.second = self.second, self.fisrt + self.second\n            return item\n        else:\n            raise StopIteration\n\n\ndef main():\n    for i in FibIterator(6):\n        print(i)\n\n    print()\n\n    fi = FibIterator(6)\n    print(next(fi))\n    print(next(fi))\n    print(next(fi))\n    print(next(fi))\n    print(next(fi))\n    print(next(fi))\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>1\n1\n2\n3\n5\n8\n\n1\n1\n2\n3\n5\n8\n</code></pre> <p>\u89e3\u91ca:</p> <ul> <li>iter() \u5c31\u662f\u901a\u8fc7<code>__iter__</code>\u83b7\u53d6\u8fed\u4ee3\u5668, \u6240\u4ee5\u8981\u8fd4\u56de\u81ea\u5df1, \u4e5f\u5c31\u662f return self</li> <li>next() \u672c\u8d28\u5c31\u662f\u901a\u8fc7\u8fed\u4ee3\u5668\u7684<code>__next__</code>\u65b9\u6cd5\u83b7\u53d6\u503c, \u4e5f\u5c31\u662f return item\uff0c\u76f4\u81f3\u9047\u5230StopIteration\u5f02\u5e38</li> <li>for \u5faa\u73af\u7684\u672c\u8d28\u662f\u5148\u901a\u8fc7 iter() \u51fd\u6570\u83b7\u53d6\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u8fed\u4ee3\u5668, \u4e0d\u65ad\u4f7f\u7528 next() \u65b9\u6cd5\u8c03\u7528\u8fed\u4ee3\u5668, \u83b7\u53d6\u4e0b\u4e00\u4e2a\u503c\u5e76\u8d4b\u503c\u7ed9 item, \u76f4\u5230\u9047\u5230 StopIteration \u5f02\u5e38\u540e\u7ed3\u675f\u5faa\u73af</li> </ul>"},{"location":"python/exercises/%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/","title":"\u8fd4\u56de\u5217\u8868\u4e2d\u4e24\u4e2a\u6570\u7684\u548c\u7b49\u4e8e\u76ee\u6807\u503c\u7684\u7d22\u5f15","text":"<p>\u9650\u5236\u6761\u4ef6: \u5217\u8868\u4e2d\u7684\u6570\u5b57\u53ef\u4ee5\u91cd\u590d, \u4f46\u8fd4\u56de\u7684\u7d22\u5f15\u4e0d\u80fd\u91cd\u590d</p> <p>\u65b9\u6cd51:</p> <pre><code>def demo(array: list, target: int):\n    # \u904d\u5386\u5217\u8868\n    for index, value in enumerate(array):\n        # \u6c42\u5dee\u503c\n        tmp = target - value\n        # \u6392\u9664\u7d22\u5f15\u91cd\u590d\u7684\u60c5\u51b5\n        if tmp == value and array.count(value) == 1:\n            continue\n        # \u5982\u679c\u5dee\u503c\u4e5f\u5728\u5217\u8868\u4e2d\u76f4\u63a5\u8fd4\u56de\u7ed3\u679c\n        if tmp in array and tmp != value:\n            return [index, array.index(tmp)]\n        # \u5982\u679c\u5dee\u503c\u4e5f\u5728\u5217\u8868\u4e2d\u4f46\u4e0e\u5f53\u524d\u503c\u76f8\u7b49\n        # \u8981\u53d6\u540e\u9762\u7684\u5dee\u503c\u7684\u7d22\u5f15\u5e76\u52a0\u4e0a\u504f\u79fb\u91cf index+1\n        if tmp in array:\n            return [index, array[index + 1 :].index(tmp) + index + 1]\n</code></pre> <p>\u65b9\u6cd52:</p> <pre><code>def demo(array, target):\n    # \u5b58\u653e\u6570\u5b57(key)\u548c\u7d22\u5f15(value)\u7684\u5b57\u5178\n    mydict = {}\n    # \u904d\u5386\u5217\u8868\n    for index, value in enumerate(array):\n        # \u6c42\u5dee\u503c\n        tmp = target - value\n        # \u5982\u679c\u5b57\u5178\u91cc\u5b58\u5728\u8be5\u5dee\u503c\u5219\u76f4\u63a5\u8fd4\u56de\u7d22\u5f15\n        if mydict.get(tmp) is not None:\n            return [mydict[tmp], index]\n        # \u5426\u5219\u653e\u5165\u5b57\u5178\n        mydict[value] = index\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>if __name__ == '__main__':\n    li = [2, 7, 11, 15]\n    print(demo(li, 9))\n\n    li = [2, 7, 11, 15]\n    print(demo(li, 26))\n\n    li = [3, 2, 4]\n    print(demo(li, 6))\n\n    li = [3, 2, 3]\n    print(demo(li, 6))\n\n    li = [3, 3]\n    print(demo(li, 6))\n\n    li = [5, 6, 4, 1, 4]\n    print(demo(li, 8))\n</code></pre> <p>[0, 1] [2, 3] [1, 2] [0, 2] [0, 1] [2, 4]</p>"},{"location":"python/exercises/%E4%B9%98%E6%B3%95%E5%8F%A3%E8%AF%80%E8%A1%A8/","title":"\u4e58\u6cd5\u53e3\u8bc0\u8868","text":"<pre><code>def main():\n    x = 1\n    while x &lt;= 9:\n        y = 1\n        while y &lt;= x:\n            print('%d * %d = %d' % (y, x, x*y), end='\\t')\n            y += 1\n        print('')\n        x += 1\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>1 * 1 = 1\n1 * 2 = 2       2 * 2 = 4\n1 * 3 = 3       2 * 3 = 6       3 * 3 = 9\n1 * 4 = 4       2 * 4 = 8       3 * 4 = 12      4 * 4 = 16\n1 * 5 = 5       2 * 5 = 10      3 * 5 = 15      4 * 5 = 20      5 * 5 = 25\n1 * 6 = 6       2 * 6 = 12      3 * 6 = 18      4 * 6 = 24      5 * 6 = 30      6 * 6 = 36\n1 * 7 = 7       2 * 7 = 14      3 * 7 = 21      4 * 7 = 28      5 * 7 = 35      6 * 7 = 42      7 * 7 = 49\n1 * 8 = 8       2 * 8 = 16      3 * 8 = 24      4 * 8 = 32      5 * 8 = 40      6 * 8 = 48      7 * 8 = 56      8 * 8 = 64\n1 * 9 = 9       2 * 9 = 18      3 * 9 = 27      4 * 9 = 36      5 * 9 = 45      6 * 9 = 54      7 * 9 = 63      8 * 9 = 72      9 * 9 = 81\n</code></pre>"},{"location":"python/exercises/%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%92/","title":"\u6768\u8f89\u4e09\u89d2","text":"<pre><code>\"\"\"\n\u6253\u5370\u6768\u8f89\u4e09\u89d2\n1 \n1 1 \n1 2 1 \n1 3 3 1 \n1 4 6 4 1 \n1 5 10 10 5 1 \n1 6 15 20 15 6 1 \n1 7 21 35 35 21 7 1 \n1 8 28 56 70 56 28 8 1\n\"\"\"\n\ndef yhsj1(n):\n    \"\"\"\u9012\u5f52(\u6548\u7387\u4f4e\u4e0d\u63a8\u8350)\"\"\"\n\n    listx = ['1']\n    listy = listx[:]\n\n    if n == 1:\n        return listx\n    if n == 2:\n        listy.append('1')\n        return listy\n\n    leny = len(yhsj1(n - 1))\n\n    for i in range(leny):\n        if i &lt; leny - 1:\n            z = int(yhsj1(n - 1)[i]) + int(yhsj1(n - 1)[i + 1])\n            listy.append(str(z))\n    listy.append('1')\n\n    return listy\n\n\ndef yhsj2(n):\n    \"\"\"\u5faa\u73af(\u63a8\u8350)\"\"\"\n    lists = []\n    for i in range(n):\n        lists += [1]\n        if i &gt; 1:\n            lists_cp = lists[:]\n            for j in range(1,i):\n                lists[j] = lists_cp[j] + lists_cp[j-1]\n        for sj in lists:\n            print(sj, end = '\\t')\n        print()\n\n\ndef main():\n    # \u8c03\u75289\u6b21\u51fd\u6570\u6253\u5370\u7ed3\u679c\n    for i in range(1, 10):\n        print('\\t'.join(yhsj1(i)))\n\n    yhsj2(9)\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"python/exercises/%E6%B1%89%E8%AF%BA%E5%A1%94/","title":"\u6c49\u8bfa\u5854","text":"<pre><code>def dg(num, A, B, C, count=0):\n    \"\"\"\n    \u6c49\u8bfa\u5854\n    num: \u76d8\u5b50\u7684\u6570\u91cf\n    count: \u64cd\u4f5c\u6b21\u6570\n    \"\"\"\n    # \u89e3\u51b3\u601d\u8def:\n    # \u65e0\u8bba\u6709\u591a\u5c11\u4e2a\u76d8\u5b50, \u6700\u4e0a\u9762\u7684\u76d8\u5b50\u6c38\u8fdc\u662f\u6700\u5c0f\u7684\n    # \u4e0b\u9762\u7684\u6240\u6709\u76d8\u5b50\u5f53\u4f5c\u4e00\u4e2a\u6574\u4f53, \u662f\u5927\u76d8\u5b50\n    # \u90a3\u4e48\u53ea\u9700\u89813\u6b65\n    # \u4e0b\u9762\u6ce8\u91ca\u4e2d\u7684\u7b2c\u4e00\u6b65\u3001\u7b2c\u4e8c\u6b65\u3001\u7b2c\u4e09\u6b65\u662f\u9488\u5bf9n&gt;1\u7684\u60c5\u51b5\n    if num == 1:\n        count += 1\n        print(f'{A}-&gt;{C}')  # \u7b2c\u4e8c\u6b65: \u628a\u5927\u76d8\u5b50\u4ecea\u653e\u5230c\n    else:\n        count += 1\n        count = dg(num-1,A,C,B, count)  # \u7b2c\u4e00\u6b65: \u628a\u5c0f\u76d8\u5b50\u4ecea\u653e\u5230b\n        print(f'{A}-&gt;{C}')\n        count = dg(num-1,B,A,C, count)  # \u7b2c\u4e09\u6b65: \u628a\u5c0f\u76d8\u5b50\u4eceb\u653e\u5230c\n    return count\n\n\ndef main():\n    print(f\"\u603b\u5171\u9700\u8981{dg(1,'A','B','C')}\u6b65\")\n    print()\n    print(f\"\u603b\u5171\u9700\u8981{dg(2,'A','B','C')}\u6b65\")\n    print()\n    print(f\"\u603b\u5171\u9700\u8981{dg(3,'A','B','C')}\u6b65\")\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>A-&gt;C\n\u603b\u5171\u9700\u89811\u6b65\n\nA-&gt;B\nA-&gt;C\nB-&gt;C\n\u603b\u5171\u9700\u89813\u6b65\n\nA-&gt;C\nA-&gt;B\nC-&gt;B\nA-&gt;C\nB-&gt;A\nB-&gt;C\nA-&gt;C\n\u603b\u5171\u9700\u89817\u6b65\n</code></pre>"},{"location":"python/exercises/%E8%BF%9E%E7%BB%AD%E5%AD%90%E6%95%B0%E7%BB%84%E7%9A%84%E6%9C%80%E5%A4%A7%E5%92%8C/","title":"\u8fde\u7eed\u5b50\u6570\u7ec4\u7684\u6700\u5927\u548c","text":"<pre><code>\"\"\"\n\u52a8\u6001\u89c4\u5212: \u5176\u57fa\u672c\u601d\u60f3\u662f\u5c06\u5f85\u6c42\u89e3\u95ee\u9898\u5206\u89e3\u6210\u82e5\u5e72\u4e2a\u5b50\u95ee\u9898,\n\u5148\u6c42\u89e3\u5b50\u95ee\u9898\uff0c\u7136\u540e\u4ece\u8fd9\u4e9b\u5b50\u95ee\u9898\u7684\u89e3\u5f97\u5230\u539f\u95ee\u9898\u7684\u89e3\n\"\"\"\n\n\ndef func(li):\n    \"\"\"\n    \u95ee\u9898: \n    \u5bf9\u4e8e\u4e00\u4e2a\u957f\u5ea6\u4e3a n \u7684\u6570\u7ec4, \u6c42\u8fde\u7eed\u5b50\u6570\u7ec4\u7684\u6700\u5927\u548c\n\n    \u6838\u5fc3: \n    \u5982\u679c li[i] \u524d\u9762\u7684\u6240\u6709\u6570\u5b57(\u5b50\u6570\u7ec4)\u4e4b\u548c\u5c0f\u4e8e li[i],\n    \u90a3\u4e48\u524d\u9762\u7684\u5b50\u6570\u7ec4\u653e\u5f03, \u4ece\u5f53\u524d\u6570\u5b57 li[i] \u91cd\u65b0\u5f00\u59cb\u6c42\u548c\n\n    \u601d\u8def: \n    \u5229\u7528\u52a8\u6001\u89c4\u5212\u7b97\u6cd5, \u5c06\u957f\u5ea6\u4e3a n \u7684\u6570\u7ec4, \u62c6\u89e3\u6210\u4e24\u90e8\u5206 li[0] \u548c li[1:],\n    \u518d\u5c06 li[1:] \u62c6\u89e3\u6210 li[1:][0] \u548c li[1:][1:], \u4ee5\u6b64\u7c7b\u63a8\n    \"\"\"\n\n    # 1\u3001\u9996\u5148, \u59d1\u4e14\u8ba4\u4e3a\u7b2c\u4e00\u4e2a\u6570\u5b57\u662f\u6700\u5927\u7684, \u6bd4\u5269\u4f59\u6240\u6709\u5143\u7d20\u7684\u7d2f\u79ef\u8fd8\u8981\u8981\u5927\n    max_sum = li[0]\n    # 2\u3001\u5176\u6b21, \u5b9a\u4e49\u4e00\u4e2a\u4e34\u65f6\u53d8\u91cf, \u8bb0\u5f55\u771f\u6b63\u7684\u6700\u5927\u548c\n    tmp = 0\n\n    # 3\u3001\u7136\u540e, \u904d\u5386\u6574\u4e2a\u6570\u7ec4\n    for i in li:\n\n        # 4\u3001\u63a5\u7740, \u7528\u4e34\u65f6\u53d8\u91cf tmp (\u521d\u59cb\u503c\u4e3a0) + \u5f53\u524d\u6570\u5b57\u540e\u4e0e\u5f53\u524d\u7684\u6570\u5b57\u6bd4\u5927\u5c0f\n        # \u5c31\u662f\u8bf4\u5982\u679c\u524d\u9762\u7684\u4e00\u7cfb\u5217\u6570\u5b57(\u5b50\u6570\u7ec4)\u4e4b\u548c\u90fd\u4e0d\u5982\u5f53\u524d\u7684\u6570\u5b57\u5927,\n        # \u5219\u629b\u5f03\u5b50\u6570\u7ec4\u4fdd\u7559(\u8d4b\u503c\u7ed9 tmp )\u5f53\u524d\u6570\u5b57, \u5426\u5219\u53cd\u4e4b\n        tmp = max(tmp + i, i)\n\n        # 5\u3001\u6700\u540e, \u5224\u65ad\u4e00\u4e0b\u6211\u4eec\u8ba4\u4e3a\u7684\u6700\u5927\u548c(max_sum) \n        # \u4e0e\u771f\u6b63\u7684\u6700\u5927\u548c(\u4e0d\u65ad\u904d\u5386\u7d2f\u52a0\u5e76\u5224\u65ad\u540e\u88ab\u8d4b\u503c\u7684 tmp) \u54ea\u4e2a\u5927\n        max_sum = max(max_sum, tmp)\n\n    return max_sum\n\n\ndef main():\n    li = [1, -2, 3, 10, -4, 7, 2, -5]\n    print(func(li))\n\n    li = [2]\n    print(func(li))\n\n    li = [-10]\n    print(func(li))\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"python/exercises/%E9%80%92%E5%BD%92%E5%AE%9E%E7%8E%B0%E7%B4%AF%E5%8A%A0%E5%92%8C%E9%98%B6%E4%B9%98/","title":"\u9012\u5f52\u5b9e\u73b0\u7d2f\u52a0\u548c\u9636\u4e58","text":"<pre><code>def accumulation(n):\n    \"\"\"\u7d2f\u52a0\"\"\"\n\n    return 0 if n &lt;1 else n + accumulation(n-1)\n\n\n\ndef factorial(n):\n    \"\"\"\u9636\u4e58\"\"\"\n\n    return 1 if n &lt;2 else n * factorial(n-1)\n\n\ndef main():\n    print(accumulation(5))\n    print(factorial(5))\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"python/linked-list/%E5%8D%95%E5%90%91%E5%BE%AA%E7%8E%AF%E9%93%BE%E8%A1%A8/","title":"\u5355\u5411\u5faa\u73af\u94fe\u8868","text":"<pre><code># singlelcycinklist\n\n\nclass Node(object):\n    \"\"\"\u8282\u70b9\"\"\"\n\n    def __init__(self, item):\n        # \u8bb0\u5f55\u6570\u636e\u5185\u5bb9\n        self.item = item\n        # \u8bb0\u5f55\u4e0b\u4e00\u4e2a\u8282\u70b9\n        self.next = None\n\n\nclass SingleCycLinkList(object):\n    \"\"\"\u5355\u5411\u5faa\u73af\u94fe\u8868\"\"\"\n\n    def __init__(self):\n        # \u8bb0\u5f55\u5934\u8282\u70b9\uff0c\u6240\u6709\u7684\u64cd\u4f5c\u4ece\u5934\u8282\u70b9\u5f00\u59cb\n        self.__head = None\n\n    def is_empty(self):\n        \"\"\"\u94fe\u8868\u662f\u5426\u4e3a\u7a7a\"\"\"\n\n        # \u5224\u65ad\u5934\u8282\u70b9\u662f\u5426\u4e3a\u7a7a\n        return self.__head is None\n\n    def length(self):\n        \"\"\"\u94fe\u8868\u957f\u5ea6\"\"\"\n\n        if self.is_empty():\n            return 0\n\n        # \u5b9a\u4e49count \u7d2f\u8ba1\u52a01\n        count = 1\n        # \u4ece\u5934\u5230\u5c3e\u904d\u5386\n        cur = self.__head\n        while cur.next is not self.__head:\n            count += 1\n            cur = cur.next\n        return count\n\n    def travel(self):\n        \"\"\"\u904d\u5386\u6574\u4e2a\u94fe\u8868\"\"\"\n\n        if self.is_empty():\n            return\n\n        # \u5b9a\u4e49\u6e38\u6807\uff0c\u4ece\u5934\u5f80\u540e\u79fb\u52a8\n        cur = self.__head\n        print(cur.item, end=\" \")\n        while cur.next is not self.__head:\n            cur = cur.next\n            print(cur.item, end=\" \")\n        print()\n\n    def add(self, item):\n        \"\"\"\u94fe\u8868\u5934\u90e8\u6dfb\u52a0\u5143\u7d20\"\"\"\n\n        # \u521b\u5efa\u65b0\u8282\u70b9\n        node = Node(item)\n        # \u5224\u65ad\u94fe\u8868\u662f\u5426\u4e3a\u7a7a\n        if self.is_empty():\n            # \u94fe\u8868\u53ea\u6709\u4e00\u4e2a\u8282\u70b9\uff0c\u81ea\u5df1\u7684next\u6307\u5411\u81ea\u5df1\n            self.__head = node\n            node.next = self.__head\n            return\n\n        # \u904d\u5386\u627e\u5230\u5c3e\u8282\u70b9\uff0cwhile\u5faa\u73af\u7ed3\u675f\uff0ccur\u6307\u5411\u7684\u662f\u5c3e\u8282\u70b9\n        cur = self.__head\n        while cur.next is not self.__head:\n            cur = cur.next\n\n        # \u8ba9\u65b0\u8282\u70b9\u7684next\u6307\u5411\u539f\u6765\u7684\u5934\n        node.next = self.__head\n        # \u8ba9head\u8bb0\u5f55\u65b0\u8282\u70b9\n        self.__head = node\n        # \u5c3e\u8282\u70b9\u6307\u5411\u65b0\u7684\u5934\n        cur.next = node\n\n    def append(self, item):\n        \"\"\"\u94fe\u8868\u5c3e\u90e8\u6dfb\u52a0\u5143\u7d20\"\"\"\n\n        # \u5224\u65ad\u5934\u8282\u70b9\u662f\u5426\u4e3a\u7a7a\n        if self.is_empty():\n            self.add(item)\n            return\n\n        # \u4ece\u5934\u904d\u5386\uff0c\u627e\u5230\u5c3e\u8282\u70b9\n        cur = self.__head\n        while cur.next is not self.__head:\n            cur = cur.next\n\n        # \u5f53while\u5faa\u73af\u7ed3\u675f\uff0ccur\u6307\u5411\u7684\u662f\u5c3e\u8282\u70b9\n        node = Node(item)\n        cur.next = node\n        # \u8ba9\u65b0\u8282\u70b9\u7684next\u6307\u5411\u5934\u8282\u70b9\n        node.next = self.__head\n\n    def insert(self, pos, item):\n        \"\"\"\u6307\u5b9a\u4f4d\u7f6e\u6dfb\u52a0\u5143\u7d20\"\"\"\n\n        # \u5065\u58ee\u6027\n        if pos &lt;= 0:\n            self.add(item)\n        elif pos &gt;= self.length():\n            self.append(item)\n        else:\n            # \u4ece\u5934\u904d\u5386\uff0c\u627e\u5230pos\u524d\u9762\u7684\u8282\u70b9\n            cur = self.__head\n\n            # \u5b9a\u4e49\u4e0b\u6807\uff0cindex\u8bb0\u5f55\u7684\u662f\u5f53\u524dcur\u6307\u5411\u7684\u5bf9\u8c61\u7684\u4e0b\u6807\n            index = 0\n            while index &lt; (pos - 1):\n                index += 1\n                cur = cur.next\n\n            # while\u5faa\u73af\u7ed3\u675f\uff0ccur\u6267\u884c\u7684\u662fpos\u524d\u9762\u7684\u8282\u70b9\n            node = Node(item)\n            node.next = cur.next\n            cur.next = node\n\n    def remove(self, item):\n        \"\"\"\u5220\u9664\u8282\u70b9\"\"\"\n\n        # \u4ece\u5934\u904d\u5386\uff0c\u627e\u5230\u8981\u5220\u9664\u7684\u8282\u70b9\n        cur = self.__head\n\n        # \u5b9a\u4e49pre\uff0c\u8bb0\u5f55cur\u7684\u524d\u7f6e\u8282\u70b9\n        pre = None\n        while cur.next is not self.__head:\n            if cur.item == item:\n                # \u5982\u679cpre\u4e3a\u7a7a\uff0c\u8bc1\u660e\u5220\u9664\u7684\u662f\u9996\u8282\u70b9\n                if pre is None:\n                    # \u627e\u5230\u5c3e\u8282\u70b9\n                    end_node = self.__head\n                    while end_node.next is not self.__head:\n                        end_node = end_node.next\n                    # \u8ba9head\u6307\u5411cur\u4e0b\u4e00\u4e2a\u8282\u70b9\n                    self.__head = cur.next\n                    # \u8ba9\u5c3e\u8282\u70b9\u6307\u5411\u65b0\u7684\u5934\u8282\u70b9\n                    end_node.next = self.__head\n                else:\n                    pre.next = cur.next\n                return\n            pre = cur\n            cur = cur.next\n\n        # while\u5faa\u73af\u4e0d\u80fd\u5904\u7406\u5c3e\u8282\u70b9\uff0c\u5faa\u73af\u540e\u5355\u72ec\u5904\u7406\u5c3e\u8282\u70b9\n        if cur.item == item:\n            # \u5982\u679cpre\u4e3a\u7a7a\uff0c\u8bc1\u660e\u5f53\u524d\u53ea\u6709\u4e00\u4e2a\u8282\u70b9\uff0c\u800c\u4e14\u5220\u9664\u7684\u662f\u8fd9\u4e2a\u8282\u70b9\n            if pre is None:\n                self.__head = None\n            else:\n                # \u8ba9\u524d\u7f6e\u8282\u70b9\u6307\u5411\u5934\u8282\u70b9\n                pre.next = self.__head\n\n    def search(self, item):\n        \"\"\"\u67e5\u627e\u8282\u70b9\u662f\u5426\u5b58\u5728\"\"\"\n\n        if self.is_empty():\n            return False\n\n        # \u53ef\u80fd\u662f\u9996\u8282\u70b9\n        cur = self.__head\n        if cur.item == item:\n            return True\n\n        # \u5426\u5219\u904d\u5386\n        while cur.next is not self.__head:\n            cur = cur.next\n            if cur.item == item:\n                return True\n\n        # while\u5faa\u73af\u7ed3\u675f\uff0c\u6ca1\u627e\u5230\n        return False\n\n\nif __name__ == '__main__':\n    sll = SingleCycLinkList()\n    print(sll.is_empty())\n    print(sll.length())\n    sll.add(3)\n    sll.add(2)\n    sll.add(1)\n    print(sll.is_empty())\n    print(sll.length())\n    sll.travel()\n    sll.add(4)\n    sll.travel()\n    print(sll.length())\n    sll.append(5)\n    sll.travel()\n    sll.insert(2, 6)\n    sll.travel()\n    sll.insert(4, 7)\n    sll.travel()\n    sll.insert(-100, 8)\n    sll.insert(100, 9)\n    sll.travel()\n    sll.remove(6)\n    sll.remove(8)\n    sll.remove(9)\n    sll.travel()\n    print(sll.search(4))\n    print(sll.search(2))\n    print(sll.search(5))\n    print(sll.search(6))    \n</code></pre>"},{"location":"python/linked-list/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/","title":"\u5355\u5411\u94fe\u8868","text":"<pre><code># singlelinklist\n\n\nclass Node:\n    \"\"\"\u8282\u70b9\"\"\"\n\n    def __init__(self, item):\n        # \u8bb0\u5f55\u6570\u636e\u5185\u5bb9\n        self.item = item\n        # \u8bb0\u5f55\u4e0b\u4e00\u4e2a\u8282\u70b9\n        self.next = None\n\n\nclass SingleLinkList:\n    \"\"\"\u5355\u5411\u94fe\u8868\"\"\"\n\n    def __init__(self):\n        # \u8bb0\u5f55\u5934\u8282\u70b9\uff0c\u6240\u6709\u7684\u64cd\u4f5c\u4ece\u5934\u8282\u70b9\u5f00\u59cb\n        self.__head = None\n\n    def is_empty(self):\n        \"\"\"\u94fe\u8868\u662f\u5426\u4e3a\u7a7a\"\"\"\n\n        # \u5224\u65ad\u5934\u8282\u70b9\u662f\u5426\u4e3a\u7a7a\n        return self.__head is None\n\n    def length(self):\n        \"\"\"\u94fe\u8868\u957f\u5ea6\"\"\"\n\n        if self.is_empty():\n            return 0\n\n        # \u5b9a\u4e49count \u7d2f\u8ba1\u52a01\n        count = 0\n        # \u4ece\u5934\u5230\u5c3e\u904d\u5386\n        cur = self.__head\n        while cur is not None:\n            count += 1\n            cur = cur.next\n        return count\n\n    def travel(self):\n        \"\"\"\u904d\u5386\u6574\u4e2a\u94fe\u8868\"\"\"\n\n        if self.is_empty():\n            return\n\n        # \u5b9a\u4e49\u6e38\u6807\uff0c\u4ece\u5934\u5f80\u540e\u79fb\u52a8\n        cur = self.__head\n        while cur is not None:\n            print(cur.item, end=\" \")\n            cur = cur.next\n        print()\n\n    def add(self, item):\n        \"\"\"\u94fe\u8868\u5934\u90e8\u6dfb\u52a0\u5143\u7d20\"\"\"\n\n        # \u521b\u5efa\u65b0\u8282\u70b9\n        node = Node(item)\n        # \u8ba9\u65b0\u8282\u70b9\u7684next\u6307\u5411\u539f\u6765\u7684\u5934\n        node.next = self.__head\n        # \u8ba9head\u8bb0\u5f55\u65b0\u8282\u70b9\n        self.__head = node\n\n    def append(self, item):\n        \"\"\"\u94fe\u8868\u5c3e\u90e8\u6dfb\u52a0\u5143\u7d20\"\"\"\n\n        # \u5224\u65ad\u5934\u8282\u70b9\u662f\u5426\u4e3a\u7a7a\n        if self.is_empty():\n            self.add(item)\n            return\n\n        # \u4ece\u5934\u904d\u5386\uff0c\u627e\u5230\u5c3e\u8282\u70b9\n        cur = self.__head\n        while cur.next is not None:\n            cur = cur.next\n\n        # \u5f53while\u5faa\u73af\u7ed3\u675f\uff0ccur\u6307\u5411\u7684\u662f\u5c3e\u8282\u70b9\n        node = Node(item)\n        cur.next = node\n\n    def insert(self, pos, item):\n        \"\"\"\u6307\u5b9a\u4f4d\u7f6e\u6dfb\u52a0\u5143\u7d20\"\"\"\n\n        # \u5065\u58ee\u6027\n        if pos &lt;= 0:\n            self.add(item)\n        elif pos &gt;= self.length():\n            self.append(item)\n        else:\n            # \u4ece\u5934\u904d\u5386\uff0c\u627e\u5230pos\u524d\u9762\u7684\u8282\u70b9\n            cur = self.__head\n\n            # \u5b9a\u4e49\u4e0b\u6807\uff0cindex\u8bb0\u5f55\u7684\u662f\u5f53\u524dcur\u6307\u5411\u7684\u5bf9\u8c61\u7684\u4e0b\u6807\n            index = 0\n            while index &lt; (pos - 1):\n                index += 1\n                cur = cur.next\n\n            # while\u5faa\u73af\u7ed3\u675f\uff0ccur\u6267\u884c\u7684\u662fpos\u524d\u9762\u7684\u8282\u70b9\n            node = Node(item)\n            node.next = cur.next\n            cur.next = node\n\n    def remove(self, item):\n        \"\"\"\u5220\u9664\u8282\u70b9\"\"\"\n\n        # \u4ece\u5934\u904d\u5386\uff0c\u627e\u5230\u8981\u5220\u9664\u7684\u8282\u70b9\n        cur = self.__head\n\n        # \u5b9a\u4e49pre\uff0c\u8bb0\u5f55cur\u7684\u524d\u7f6e\u8282\u70b9\n        pre = None\n        while cur is not None:\n            if cur.item == item:\n                # \u5982\u679cpre\u4e3a\u7a7a\uff0c\u8bc1\u660e\u5220\u9664\u7684\u662f\u9996\u8282\u70b9\n                if pre is None:\n                    self.__head = cur.next\n                else:\n                    pre.next = cur.next\n                return\n            pre = cur\n            cur = cur.next\n\n    def search(self, item):\n        \"\"\"\u67e5\u627e\u8282\u70b9\u662f\u5426\u5b58\u5728\"\"\"\n\n        if self.is_empty():\n            return False\n\n        cur = self.__head\n        while cur is not None:\n            if cur.item == item:\n                return True\n            cur = cur.next\n\n        # while\u5faa\u73af\u7ed3\u675f\uff0c\u6ca1\u627e\u5230\n        return False\n\n\nif __name__ == '__main__':\n    sll = SingleLinkList()\n    print(sll.is_empty())\n    print(sll.length())\n    sll.add(3)\n    sll.add(2)\n    sll.add(1)\n    print(sll.is_empty())\n    print(sll.length())\n    sll.travel()\n    sll.add(4)\n    sll.travel()\n    print(sll.length())\n    sll.append(5)\n    sll.travel()\n    sll.insert(2, 6)\n    sll.travel()\n    sll.insert(4, 7)\n    sll.travel()\n    sll.insert(-100, 8)\n    sll.insert(100, 9)\n    sll.travel()\n    sll.remove(6)\n    sll.remove(8)\n    sll.remove(9)\n    sll.travel()\n    print(sll.search(4))\n    print(sll.search(2))\n    print(sll.search(5))\n    print(sll.search(6))\n</code></pre>"},{"location":"python/linked-list/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/","title":"\u53cc\u5411\u94fe\u8868","text":"<pre><code># doublelinklist\n\n\nclass Node(object):\n    \"\"\"\u8282\u70b9\"\"\"\n\n    def __init__(self, item):\n        # \u8bb0\u5f55\u6570\u636e\u5185\u5bb9\n        self.item = item\n        # \u8bb0\u5f55\u4e0b\u4e00\u4e2a\u8282\u70b9\n        self.next = None\n        # \u8bb0\u5f55\u524d\u7f6e\u8282\u70b9\n        self.pre = None\n\n\nclass DoubleLinkList(object):\n    \"\"\"\u53cc\u5411\u94fe\u8868\"\"\"\n\n    def __init__(self):\n        # \u8bb0\u5f55\u5934\u8282\u70b9\uff0c\u6240\u6709\u7684\u64cd\u4f5c\u4ece\u5934\u8282\u70b9\u5f00\u59cb\n        self.__head = None\n\n    def is_empty(self):\n        \"\"\"\u94fe\u8868\u662f\u5426\u4e3a\u7a7a\"\"\"\n\n        # \u5224\u65ad\u5934\u8282\u70b9\u662f\u5426\u4e3a\u7a7a\n        return self.__head is None\n\n    def length(self):\n        \"\"\"\u94fe\u8868\u957f\u5ea6\"\"\"\n\n        if self.is_empty():\n            return 0\n\n        # \u5b9a\u4e49count \u7d2f\u8ba1\u52a01\n        count = 0\n        # \u4ece\u5934\u5230\u5c3e\u904d\u5386\n        cur = self.__head\n        while cur is not None:\n            count += 1\n            cur = cur.next\n        return count\n\n    def travel(self):\n        \"\"\"\u904d\u5386\u6574\u4e2a\u94fe\u8868\"\"\"\n\n        if self.is_empty():\n            return\n\n        # \u5b9a\u4e49\u6e38\u6807\uff0c\u4ece\u5934\u5f80\u540e\u79fb\u52a8\n        cur = self.__head\n        while cur is not None:\n            print(cur.item, end=\" \")\n            cur = cur.next\n        print()\n\n    def add(self, item):\n        \"\"\"\u94fe\u8868\u5934\u90e8\u6dfb\u52a0\u5143\u7d20\"\"\"\n\n        # \u521b\u5efa\u65b0\u8282\u70b9\n        node = Node(item)\n\n        # \u5224\u65ad\u94fe\u8868\u662f\u5426\u4e3a\u7a7a\n        if self.is_empty():\n            self.__head = node\n            return\n\n        # \u8ba9\u65b0\u8282\u70b9\u7684next\u6307\u5411\u539f\u6765\u7684\u5934\n        node.next = self.__head\n        # \u8ba9\u539f\u6765\u7684\u5934\u8282\u70b9\u7684pre\u6307\u5411\u65b0\u8282\u70b9\n        self.__head.pre = node\n        # \u8ba9head\u8bb0\u5f55\u65b0\u8282\u70b9\n        self.__head = node\n\n    def append(self, item):\n        \"\"\"\u94fe\u8868\u5c3e\u90e8\u6dfb\u52a0\u5143\u7d20\"\"\"\n\n        # \u5224\u65ad\u5934\u8282\u70b9\u662f\u5426\u4e3a\u7a7a\n        if self.is_empty():\n            self.add(item)\n            return\n\n        # \u4ece\u5934\u904d\u5386\uff0c\u627e\u5230\u5c3e\u8282\u70b9\n        cur = self.__head\n        while cur.next is not None:\n            cur = cur.next\n\n        # \u5f53while\u5faa\u73af\u7ed3\u675f\uff0ccur\u6307\u5411\u7684\u662f\u5c3e\u8282\u70b9\n        node = Node(item)\n        cur.next = node\n        # \u8ba9\u65b0\u8282\u70b9\u7684pre\u6307\u5411\u539f\u6765\u7684\u5c3e\u8282\u70b9\n        node.pre = cur\n\n    def insert(self, pos, item):\n        \"\"\"\u6307\u5b9a\u4f4d\u7f6e\u6dfb\u52a0\u5143\u7d20\"\"\"\n\n        # \u5065\u58ee\u6027\n        if pos &lt;= 0:\n            self.add(item)\n        elif pos &gt;= self.length():\n            self.append(item)\n        else:\n            # \u4ece\u5934\u904d\u5386\uff0c\u627e\u5230pos\u524d\u9762\u7684\u8282\u70b9\n            cur = self.__head\n\n            # \u5b9a\u4e49\u4e0b\u6807\uff0cindex\u8bb0\u5f55\u7684\u662f\u5f53\u524dcur\u6307\u5411\u7684\u5bf9\u8c61\u7684\u4e0b\u6807\n            index = 0\n            while index &lt; (pos - 1):\n                index += 1\n                cur = cur.next\n\n            # while\u5faa\u73af\u7ed3\u675f\uff0ccur\u6267\u884c\u7684\u662fpos\u524d\u9762\u7684\u8282\u70b9\n            node = Node(item)\n            node.next = cur.next\n            # \u539f\u6765\u4f4d\u7f6e\u8282\u70b9\u7684pre\u8bb0\u5f55\u8282\u70b9\n            cur.next.pre = node\n            cur.next = node\n            # \u65b0\u8282\u70b9\u7684pre\u8bb0\u5f55pos\u524d\u9762\u7684\u8282\u70b9\n            node.pre = cur\n\n    def remove(self, item):\n        \"\"\"\u5220\u9664\u8282\u70b9\"\"\"\n\n        # \u4ece\u5934\u904d\u5386\uff0c\u627e\u5230\u8981\u5220\u9664\u7684\u8282\u70b9\n        cur = self.__head\n        while cur is not None:\n            if cur.item == item:\n                # \u5982\u679ccur.pre\u4e3a\u7a7a\uff0c\u8bc1\u660e\u5220\u9664\u7684\u5934\u8282\u70b9\n                if cur.pre is None:\n                    self.__head = cur.next\n                else:\n                    cur.pre.next = cur.next\n                    # \u5982\u679ccur.next\u4e3a\u7a7a\uff0c\u8bc1\u660e\u5220\u6389\u7684\u662f\u5c3e\u8282\u70b9\n                    if cur.next is not None:\n                        cur.next.pre = cur.pre\n                return\n            cur = cur.next\n\n    def search(self, item):\n        \"\"\"\u67e5\u627e\u8282\u70b9\u662f\u5426\u5b58\u5728\"\"\"\n\n        if self.is_empty():\n            return False\n\n        cur = self.__head\n        while cur is not None:\n            if cur.item == item:\n                return True\n            cur = cur.next\n\n        # while\u5faa\u73af\u7ed3\u675f\uff0c\u6ca1\u627e\u5230\n        return False\n\n\nif __name__ == '__main__':\n    sll = DoubleLinkList()\n    print(sll.is_empty())\n    print(sll.length())\n    sll.add(3)\n    sll.add(2)\n    sll.add(1)\n    print(sll.is_empty())\n    print(sll.length())\n    sll.travel()\n    sll.add(4)\n    sll.travel()\n    print(sll.length())\n    sll.append(5)\n    sll.travel()\n    sll.insert(2,6)\n    sll.travel()\n    sll.insert(4, 7)\n    sll.travel()\n    sll.insert(-100, 8)\n    sll.insert(100, 9)\n    sll.travel()\n    sll.remove(6)\n    sll.remove(8)\n    sll.remove(9)\n    sll.travel()\n    print(sll.search(4))\n    print(sll.search(2))\n    print(sll.search(5))\n    print(sll.search(6))\n</code></pre>"},{"location":"python/other/%2B%20%2B%3D%20append%20extend%20%E7%9A%84%E5%8C%BA%E5%88%AB/","title":"+ += append extend \u7684\u533a\u522b","text":"<pre><code>def test1(li):\n    \"\"\"\u4f7f\u7528+\u64cd\u4f5c\u4e24\u4e2a\u5217\u8868\"\"\"\n    raw_li = li\n    print(f'\u539f\u59cbli: \\t{raw_li}')\n\n    li  = li + li\n    print(f'\u4f7f\u7528+\u64cd\u4f5c\u540e: \\t{li}')\n\n    print(f'\u539f\u59cbli: \\t{raw_li}')\n    print()\n\n\ndef test2(li):\n    \"\"\"\u4f7f\u7528+=\u64cd\u4f5c\u5217\u8868\"\"\"\n    raw_li = li\n    print(f'\u539f\u59cbli: \\t{raw_li}')\n\n    li += li\n    print(f'\u4f7f\u7528+=\u64cd\u4f5c\u540e: \\t{li}')\n\n    print(f'\u539f\u59cbli: \\t{raw_li}')\n    print()\n\n\ndef test3(li: list):\n    \"\"\"\u4f7f\u7528append\u64cd\u4f5c\u5217\u8868\"\"\"\n    raw_li = li\n    print(f'\u539f\u59cbli: \\t\\t{raw_li}')\n\n    li.append(4)\n    print(f'\u4f7f\u7528append\u64cd\u4f5c\u540e: \\t{li}')\n\n    print(f'\u539f\u59cbli: \\t\\t{raw_li}')\n    print()\n\n\ndef test4(li: list):\n    \"\"\"\u4f7f\u7528extend\u64cd\u4f5c\u5217\u8868\"\"\"\n    raw_li = li\n    print(f'\u539f\u59cbli: \\t\\t{raw_li}')\n\n    li.extend(li)\n    print(f'\u4f7f\u7528extend\u64cd\u4f5c\u540e: \\t{li}')\n\n    print(f'\u539f\u59cbli: \\t\\t{raw_li}')\n\n\ndef main():\n    li = [1, 2, 3]\n    test1(li)\n\n    li = [1, 2, 3]\n    test2(li)\n\n    li = [1, 2, 3]\n    test3(li)\n\n    li = [1, 2, 3]\n    test4(li)\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>\u539f\u59cbli:         [1, 2, 3]\n\u4f7f\u7528+\u64cd\u4f5c\u540e:     [1, 2, 3, 1, 2, 3]\n\u539f\u59cbli:         [1, 2, 3]\n\n\u539f\u59cbli:         [1, 2, 3]\n\u4f7f\u7528+=\u64cd\u4f5c\u540e:    [1, 2, 3, 1, 2, 3]\n\u539f\u59cbli:         [1, 2, 3, 1, 2, 3]\n\n\u539f\u59cbli:                 [1, 2, 3]\n\u4f7f\u7528append\u64cd\u4f5c\u540e:        [1, 2, 3, 4]\n\u539f\u59cbli:                 [1, 2, 3, 4]\n\n\u539f\u59cbli:                 [1, 2, 3]\n\u4f7f\u7528extend\u64cd\u4f5c\u540e:        [1, 2, 3, 1, 2, 3]\n\u539f\u59cbli:                 [1, 2, 3, 1, 2, 3]\n</code></pre> <p>\u89e3\u91ca:</p> <ul> <li> <p>\u5bf9\u4e8e\u53ef\u53d8\u6570\u636e\u7c7b\u578b, \u51fd\u6570\u5185\u90e8\u5bf9\u5176\u8fdb\u884c +=\u3001append\u548cextend\u64cd\u4f5c, \u4f1a\u66f4\u6539\u539f\u59cb\u6570\u636e</p> </li> <li> <p>\u800c li=li+li, \u5219\u662f\u5728\u51fd\u6570\u5185\u90e8\u521b\u5efa\u4e86\u4e00\u5c40\u90e8\u53d8\u91cfli, \u4e0d\u4f1a\u5bf9\u5916\u9762\u7684li\u9020\u6210\u5f71\u54cd</p> </li> <li> <p><code>+=</code> \u5185\u90e8\u4f7f\u7528\u4e86\u9b54\u6cd5\u65b9\u6cd5<code>__iadd__</code>, <code>__iadd__</code>\u5185\u90e8\u53c8\u8c03\u7528\u4e86<code>extend</code>\u65b9\u6cd5</p> </li> </ul> <p>\u62d3\u5c55:</p> <ul> <li> <p><code>+</code> \u53ea\u80fd\u64cd\u4f5c\u7c7b\u578b\u4e00\u76f4\u7684\u5bf9\u8c61, \u4f8b\u5982\u5217\u8868+\u5217\u8868, \u5982\u679c\u662f\u5217\u8868+\u8fdc\u8db3, \u5219\u63d0\u793aTyperError</p> </li> <li> <p><code>extend</code>\u65b9\u6cd5\u4f20\u5165\u53c2\u6570\u662f\u53ef\u8fed\u4ee3\u5bf9\u8c61(iterable), \u6240\u4ee5\u53ef\u4ee5 \u5217\u8868.extend(\u5143\u7ec4)\u3001\u5143\u7ec4.extend(\u96c6\u5408)\u7b49\u7b49</p> </li> </ul>"},{"location":"python/other/AtExit/","title":"AtExit","text":""},{"location":"python/other/AtExit/#_1","title":"\u4ee3\u7801","text":"<pre><code>import atexit\nimport sys\n\n\ndef run_func_at_exit_1():\n    print(f'func name is {sys._getframe().f_code.co_name}')\n    print(f'file name is {sys._getframe().f_code.co_filename}')\n\n\ndef run_func_at_exit_2(hello, world):\n    print(f'{hello} {world}')\n\n\natexit.register(run_func_at_exit_1)\natexit.register(run_func_at_exit_2, 'Good', 'Morning')\n\n\n@atexit.register\ndef run_func_at_exit_3():\n    run_func_at_exit_2('Hi,', 'How are you')\n</code></pre>"},{"location":"python/other/AtExit/#_2","title":"\u8f93\u51fa","text":"<pre><code>Hi, How are you\nGood Morning\nfunc name is run_func_at_exit_1\nfile name is /root/code/python/my_atexit.py\n</code></pre>"},{"location":"python/other/AtExit/#_3","title":"\u5b66\u4e60\u70b9","text":"<ul> <li><code>sys._getframe().f_code.co_name</code> \u53ef\u4ee5\u8f93\u51fa\u5f53\u524d\u8fd0\u884c\u51fd\u6570\u7684\u540d\u79f0</li> <li><code>sys._getframe().f_code.co_filename</code>\u53ef\u4ee5\u8f93\u51fa\u5f53\u524d\u8fd0\u884c\u51fd\u6570\u6240\u5728\u6a21\u5757\u7684\u7edd\u5bf9\u8def\u5f84</li> <li><code>atexit</code>\u6a21\u5757\u7684<code>register</code>\u51fd\u6570\u6ce8\u518c\u7684\u5176\u4ed6\u51fd\u6570\u4f1a\u5728\u5f53\u524d\u6a21\u5757\u7684\u4ee3\u7801\u4ece\u4e0a\u800c\u4e0b\u6267\u884c\u5b8c\u6bd5\u540e\u81ea\u52a8\u8c03\u7528(\u4e0d\u9700\u8981 <code>__name__ == '__main__'</code>)</li> <li>atexit.register()\u548c@atexit.register\u662f\u4e24\u79cd\u4f7f\u7528\u65b9\u6cd5, \u5176\u8fd0\u884c\u987a\u5e8f\u662f\u6700\u540e\u6ce8\u518c\u7684\u6700\u5148\u8fd0\u884c</li> <li>\u5982\u679c\u7a0b\u5e8f\u662f\u975e\u6b63\u5e38crash\uff0c\u6216\u901a\u8fc7os._exit()\u9000\u51fa\uff0c\u6ce8\u518c\u7684\u56de\u8c03\u51fd\u6570\u5c06\u4e0d\u4f1a\u88ab\u8c03\u7528</li> <li>atexit.unregister(func) \u53ef\u53d6\u6d88\u6ce8\u518c\u51fd\u6570</li> </ul>"},{"location":"python/other/Cython%E7%BC%96%E8%AF%91so%E6%96%87%E4%BB%B6/","title":"Cython\u7f16\u8bd1so\u6587\u4ef6","text":"<p>Demo1:</p> <pre><code>from os import walk, path, system\n\n\ndef py2so():\n    for root, dirs, files in walk('./app'):\n        for file in files:\n            if not file.startswith('setup_') and file.endswith('.py'):\n                abs_f = path.abspath(path.join(root, file))\n                aps_p = path.dirname(abs_f)\n                setup_f = path.join(aps_p, f'setup_{file}')\n                with open(setup_f, 'w', encoding='utf-8') as f:\n                    f.write(f\"\"\"from distutils.core import setup\nfrom Cython.Build import cythonize\n\nsetup(name='Flask Demo Test', ext_modules=cythonize(r'{abs_f}'))\n\"\"\")\n                my_cmd = f'python {setup_f} build_ext --inplace'\n                system(my_cmd)\n\n    del_cmd = \"find ./app -name '*.py' | xargs rm\"\n    system(del_cmd)\n    del_cmd = \"find ./app -name '*.c' | xargs rm\"\n    system(del_cmd)\n    del_cmd = \"rm -rf build\"\n    system(del_cmd)\n\n\ndef main():\n    py2so()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>Demo2:</p> <pre><code>from os import walk, path, system, cpu_count\nfrom concurrent.futures import ThreadPoolExecutor\n\nthread_pool = ThreadPoolExecutor(max_workers=cpu_count() * 2)\n\n\ndef py2so():\n    for root, dirs, files in walk('./app'):\n        thread_pool.submit(kernel_code, *[files, root])\n    thread_pool.shutdown(True)\n    del_cmd = \"find ./app -name '*.py' | xargs rm;find ./app -name '*.c' | xargs rm;rm -rf build\"\n    system(del_cmd)\n\n\ndef kernel_code(files, root):\n    for file in files:\n        if not file.startswith('setup_') and file.endswith('.py'):\n            abs_f = path.abspath(path.join(root, file))\n            aps_p = path.dirname(abs_f)\n            setup_f = path.join(aps_p, f'setup_{file}')\n            with open(setup_f, 'w', encoding='utf-8') as f:\n                f.write(f\"\"\"from distutils.core import setup\nfrom Cython.Build import cythonize\n\nsetup(name='Flask Demo Test', ext_modules=cythonize(r'{abs_f}'))\n\"\"\")\n            my_cmd = f'python {setup_f} build_ext --inplace'\n            system(my_cmd)\n\n\ndef main():\n    py2so()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"python/other/MRO/","title":"MRO","text":"<p>Python\u591a\u7ee7\u627f\u7684mro\u987a\u5e8f</p> <pre><code>class A:\n    def __init__(self):\n        pass\n\n\nclass B(A):\n    def __init__(self):\n        pass\n\n\nclass C:\n    def __init__(self):\n        pass\n\n\nclass D(C):\n    def __init__(self):\n        pass\n\n\nclass E(A):\n    def __init__(self):\n        pass\n\n\nclass F:\n    def __init__(self):\n        pass\n\n\nclass G(F):\n    def __init__(self):\n        pass\n\n\nclass H(G):\n    def __init__(self):\n        pass\n\n\nclass I(F):\n    def __init__(self):\n        pass\n\n\nclass Test1(B, E, D, H, I):\n    def __init__(self):\n        pass\n\n\nclass Test2(I, E, D, H):\n    def __init__(self):\n        pass\n\n\nclass Test3(C, I, H, E, B):\n    def __init__(self):\n        pass\n\n\n\ndef main():\n    print(Test1.__mro__)\n    print()\n    print(Test2.__mro__)\n    print()\n    print(Test3.__mro__)\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>(&lt;class '__main__.Test1'&gt;, &lt;class '__main__.B'&gt;, &lt;class '__main__.E'&gt;, &lt;class '__main__.A'&gt;, &lt;class '__main__.D'&gt;, &lt;class '__main__.C'&gt;, &lt;class '__main__.H'&gt;, &lt;class '__main__.G'&gt;, &lt;class '__main__.I'&gt;, &lt;class '__main__.F'&gt;, &lt;class 'object'&gt;)\n\n(&lt;class '__main__.Test2'&gt;, &lt;class '__main__.I'&gt;, &lt;class '__main__.E'&gt;, &lt;class '__main__.A'&gt;, &lt;class '__main__.D'&gt;, &lt;class '__main__.C'&gt;, &lt;class '__main__.H'&gt;, &lt;class '__main__.G'&gt;, &lt;class '__main__.F'&gt;, &lt;class 'object'&gt;)\n\n(&lt;class '__main__.Test3'&gt;, &lt;class '__main__.C'&gt;, &lt;class '__main__.I'&gt;, &lt;class '__main__.H'&gt;, &lt;class '__main__.G'&gt;, &lt;class '__main__.F'&gt;, &lt;class '__main__.E'&gt;, &lt;class '__main__.B'&gt;, &lt;class '__main__.A'&gt;, &lt;class 'object'&gt;)\n</code></pre> <p>\u89e3\u91ca:</p> <p></p> <p>Test1 \u7ee7\u627f B E D H I, Test2 \u7ee7\u627f I E D H, Test3 \u7ee7\u627f C I H E B: </p> <p>MRO\u7684\u987a\u5e8f\u662f:</p> <ul> <li>\u9996\u5148, \u6839\u636e\u7c7b\u7684\u62ec\u53f7\u5185\u7684\u4e66\u5199\u987a\u5e8f\u7ee7\u627f</li> <li>\u5176\u6b21, \u5f53\u524d\u8282\u70b9\u7684\u7c7b\u7684\u7236\u7c7b\u7684\u5b50\u7c7b\u90fd\u88ab\u7ee7\u627f\u7684\u60c5\u51b5\u4e0b, \u76f4\u63a5\u7ee7\u627f\u7236\u7c7b(\u53c2\u89c1Test1\u4e2dB-&gt;E-&gt;A\u3001D-&gt;C\u3001H-&gt;G)</li> <li>\u7136\u540e, \u7ee7\u627f\u5f53\u524d\u8282\u70b9\u7684\u7c7b\u7684\u7236\u7c7b\u540e, \u4f1a\u4ece\u65b0\u56de\u5230\u540c\u5f53\u524d\u8282\u70b9\u7c7b\u540c\u7ea7\u7684\u5176\u4ed6\u8282\u70b9\u7684\u7c7b\u5f00\u59cb\u7ee7\u627f(\u53c2\u89c1Test2\u4e2dE-&gt;A\u540e\u53d8\u6210D-&gt;C)</li> <li>\u63a5\u7740, \u5982\u679c\u7ee7\u627f\u5f53\u524d\u8282\u70b9\u7684\u7c7b\u540e\u53d1\u73b0\u8fd8\u6709\u66f4\u4f4e\u7ea7\u8282\u70b9\u7684\u7c7b, \u5219\u5f00\u59cb\u7ee7\u627f\u66f4\u4f4e\u7ea7\u8282\u70b9\u7684\u7c7b(\u53c2\u89c1Test3\u4e2dC-&gt;I-&gt;H)</li> <li>\u6700\u540e, \u7edf\u8ba1\u7c7b\u7684\u7c7b\u90fd\u7ee7\u627f\u5b8c\u6210\u4e4b\u540e, \u5f00\u59cb\u51e0\u4e2aObject</li> </ul>"},{"location":"python/other/Mp3Cut/","title":"Mp3Cut","text":"<pre><code>import sys\nfrom mutagen.mp3 import MP3\n\n\n\"\"\"\n\u9700: pip install mutagen\n\"\"\"\n\n\nclass Mp3Cut(object):\n    def __init__(self):\n        # \u8bfb\u53d6\u6b4c\u66f2\u540d\u79f0\n        self.file = sys.argv[1]\n\n        # \u83b7\u53d6\u6bd4\u7279\u7387(kbps), kb\u662f1000bit, p\u662fper, s\u662fsecond, \u5373\u6bcf\u79d2\u4f20\u8f93\u7684\u6570\u636e\u91cf\n        mp3 = MP3('\u738b\u529b\u5b8f - \u5929\u5730\u9f99\u9cde.mp3')\n        bitrate = mp3.info.bitrate\n\n        # kb / 8 \u5c31\u662f\u6bd4\u7279(bit)\u5230\u5b57\u8282(Byte)\u7684\u8f6c\u6362, \u5373\u6bcf\u79d2\u4f20\u8f93\u591a\u5c11\u5b57\u8282\n        self.kBps = bitrate / 8\n\n        # \u83b7\u53d6\u6587\u4ef6\u540d\uff08\u4e0d\u5305\u62ec\u6587\u4ef6\u6269\u5c55\u540d\uff09\n        self.name = self.file[:self.file.rindex('.')]\n\n    def start_time(self):\n        tt = input(\"\u8bf7\u8f93\u5165\u5f00\u59cb\u65f6\u95f4, \u5206\u79d2\u4ee5.\u5206\u9694: \")\n        minute = int(tt.split('.')[0])  # \u53d6\u5206\n        second = int(tt.split('.')[1])  # \u53d6\u79d2\n        self.tms = minute * 60 + second  # \u4e00\u5171\u591a\u5c11\u79d2\n\n    def stop_time(self):\n        pt = input(\"\u8bf7\u8f93\u5165\u7ed3\u675f\u65f6\u95f4, \u5206\u79d2\u4ee5.\u5206\u9694: \")\n        minute = int(pt.split('.')[0])\n        second = int(pt.split('.')[1])\n        self.pms = minute * 60 + second\n\n    def cut_mp3(self):\n        first_part = self.tms * self.kBps  # \u79d2\u6570(s) * \u901f\u7387(kBps) = \u6570\u636e\u5927\u5c0f(kB), \u8fd9\u5c31\u662f\u5f00\u59cb\u622a\u53d6\u7684\u4f4d\u7f6e\n        last_part = (self.pms - self.tms) * self.kBps  # \u540c\u7406, \u8fd9\u5c31\u662f\u7ed3\u675f\u622a\u53d6\u7684\u4f4d\u7f6e\n\n        with open(self.file, 'rb') as start_f:\n            start_f.read(int(first_part))  # \u8bfb\u53d6\u5230\u8981\u622a\u53d6\u7684\u4f4d\u7f6e\n            with open(f'{self.name}_cut.mp3', 'wb') as stop_f:\n                stop_f.write(start_f.read(int(last_part)))  # \u5728\u65b0\u6587\u4ef6\u5199\u5165\u5230\u8981\u7ed3\u675f\u622a\u53d6\u7684\u4f4d\u7f6e\n\ndef main():\n    mp3 = Mp3Cut()\n    mp3.start_time()\n    mp3.stop_time()\n    mp3.cut_mp3()\n\n\nif __name__ == '__main__':        \n    main()\n</code></pre> <p>\u8fd0\u884c:</p> <pre><code>python a.py xxxx.mp3\n\u8bf7\u8f93\u5165\u5f00\u59cb\u65f6\u95f4\uff08\u5206\u79d2\u4ee5.\u5206\u9694\uff09\uff1a0.50\n\u8bf7\u8f93\u5165\u7ed3\u675f\u65f6\u95f4\uff08\u5206\u79d2\u4ee5.\u5206\u9694\uff09\uff1a1.20\n</code></pre> <p>\u8f93\u51fa:</p> <p>\u5373\u53ef\u622a\u53d6\u672c\u9996\u6b4c\u66f2\u4ece0\u520650\u79d2\u52301\u520620\u4e2d\u4e4b\u95f4\u768430\u79d2\u957f\u5ea6\u7684\u6b4c\u66f2</p>"},{"location":"python/other/UNZIP/","title":"UNZIP","text":"<pre><code>import pathlib\nimport sys\nimport pathlib\nimport zipfile\n\n\ndef un_zip_file():\n    \"\"\"\n    \u89e3\u538b\u591a\u4e2aZIP\u6587\u4ef6\n    python un_zip.py file1.zip file2.zip file3.zip ...\n    \u89e3\u538b\u540e\u751f\u6210\u6587\u4ef6\u5939 file1 file2 file3 ...\n    \u6bcf\u4e2a\u6587\u4ef6\u5939\u4e2d\u5c31\u662fzip\u89e3\u538b\u540e\u7684\u6587\u4ef6\n    \"\"\"\n    zip_files = sys.argv[1:]\n\n    for zip_file in zip_files:\n        # \u83b7\u53d6 \u53bb\u9664\u6389 .zip \u540e\u7684\u540d\u79f0\n        dir_nbame = zip_file[:-4]\n        # \u7528\u4e0a\u9762\u7684\u540d\u79f0\u5f53\u4f5c\u6587\u4ef6\u5939\u7684\u540d\u79f0\n        if not pathlib.Path(dir_nbame).is_dir():\n            pathlib.Path(dir_nbame).mkdir()\n\n        with zipfile.ZipFile(zip_file, \"r\") as f:\n            file_list = f.namelist()\n            print(f'\u538b\u7f29\u6587\u4ef6 {zip_file} \u4e00\u5171\u6709 {len(file_list)} \u4e2a: ')\n            for index, file in enumerate(file_list):\n                print(f'{index+1}: {file}')\n\n            un_zip_file_number = int(input('\u8bf7\u8f93\u5165\u8981\u89e3\u538b\u7684\u6587\u4ef6(\u8f93\u51650\u89e3\u538b\u6240\u6709): '))\n            if un_zip_file_number &gt; len(file_list):\n                print('\u7f16\u53f7\u9519\u8bef')\n                continue\n            if un_zip_file_number == 0:\n                f.extractall(path=dir_nbame)\n            else:\n                f.extract(file_list[un_zip_file_number-1], path=dir_nbame)\n\n\ndef main():\n    un_zip_file()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"python/other/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/","title":"\u4e8c\u5206\u67e5\u627e","text":"<pre><code># search\n\n\ndef search(li, item):\n    \"\"\"\u4e8c\u5206\u67e5\u627e\u9002\u7528\u4e8e\u6709\u5e8f\u5217\u8868\"\"\"\n\n    n = len(li)\n    if n == 0:\n        return False\n    # \u4ece\u4e00\u534a\u7684\u4f4d\u7f6e\u5f00\u59cb\u627e\n    mid = n // 2\n    # \u90a3\u4e2d\u95f4\u4f4d\u7f6e\u6570\u636e\u4e0e\u8981\u627e\u7684\u6570\u636e\u6bd4\u8f83\n    if item == li[mid]:\n        return True\n    elif item &gt; li[mid]:  # \u6b63\u5e8f\u65f6\uff0c\u5927\u4e8emid \u5f80\u53f3\u627e\n        return search(li[mid + 1:], item)\n    else:  # \u6b63\u5e8f\u65f6\uff0c\u5c0f\u4e8emid \u5f80\u5de6\u627e\n        return search(li[:mid], item)\n\n\nif __name__ == '__main__':\n    l = [1, 2, 3, 4, 5, 6]\n    print(search(l, 1))\n    print(search(l, 3))\n    print(search(l, 6))\n    print(search(l, 0))\n    print(search(l, 9))\n\n    # \u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(logn)\n</code></pre>"},{"location":"python/other/%E4%BA%8C%E5%8F%89%E6%A0%91/","title":"\u4e8c\u53c9\u6811","text":"<pre><code># tree\n\n\nclass Node(object):\n    \"\"\"\u4e8c\u53c9\u6811\u7684\u8282\u70b9\"\"\"\n\n    def __init__(self, item):\n        # \u8bb0\u5f55\u6570\u636e\n        self.item = item\n        # \u8bb0\u5f55\u5de6\u5b69\u5b50\n        self.left = None\n        # \u8bb0\u5f55\u53f3\u5b69\u5b50\n        self.right = None\n\n\nclass Tree(object):\n    \"\"\"\u4e8c\u53c9\u6811\"\"\"\n\n    def __init__(self):\n        # \u8bb0\u5f55\u6839\u8282\u70b9\n        self.__root = None\n\n    def add(self, item):\n        \"\"\"\u6dfb\u52a0\u8282\u70b9\"\"\"\n        new_node = Node(item)\n        if self.__root is None:\n            self.__root = new_node\n            return\n\n        # \u4ece\u4e0a\u5230\u4e0b\uff0c\u4ece\u5de6\u5230\u53f3\u904d\u5386\uff0c\u7528\u5230\u961f\u5217\n        queue = []\n        queue.append(self.__root)\n\n        while queue:\n            node = queue.pop(0)\n            # \u5224\u65ad\u5f53\u524d\u8282\u70b9\uff0c\u5de6\u53f3\u6709\u6ca1\u6709\u5b50\u8282\u70b9\n            if node.left is None:\n                node.left = new_node\n                return\n            if node.right is None:\n                node.right = new_node\n                return\n            # \u628a\u5f53\u524d\u8282\u70b9\u7684\u5de6\u53f3\u5b50\u8282\u70b9\u6dfb\u52a0\u5230\u961f\u5217\uff0c\u5c06\u8981\u5904\u7406\n            queue.append(node.left)\n            queue.append(node.right)\n\n    def breath_travel(self):\n        \"\"\"\u5e7f\u5ea6\u4f18\u5148\u904d\u5386 \u4ece\u4e0a\u5230\u4e0b\uff0c\u4ece\u5de6\u5230\u53f3\u904d\u5386\uff0c\u7528\u5230\u961f\u5217\"\"\"\n\n        if self.__root is None:\n            return\n\n        queue = []\n        queue.append(self.__root)\n\n        while queue:\n            node = queue.pop(0)\n            print(node.item, end=\" \")\n\n            if node.left is not None:\n                queue.append(node.left)\n            if node.right is not None:\n                queue.append(node.right)\n        print()\n\n    def depth_travel(self):\n        \"\"\"\u6df1\u5ea6\u4f18\u5148\u904d\u5386\"\"\"\n\n        self.pre_order(self.__root)\n        print()\n        self.in_order(self.__root)\n        print()\n        self.post_order(self.__root)\n        print()\n\n    def pre_order(self, node):\n        \"\"\"\u6839 \u5de6 \u53f3\"\"\"\n\n        if node is None:\n            return\n        print(node.item, end=\" \")\n        self.pre_order(node.left)\n        self.pre_order(node.right)\n\n    def in_order(self, node):\n        \"\"\"\u5de6 \u6839 \u53f3\"\"\"\n\n        if node is None:\n            return\n        self.in_order(node.left)\n        print(node.item, end=\" \")\n        self.in_order(node.right)\n\n    def post_order(self, node):\n        \"\"\"\u5de6 \u53f3 \u6839\"\"\"\n\n        if node is None:\n            return\n        self.post_order(node.left)\n        self.post_order(node.right)\n        print(node.item, end=\" \")\n\n\nif __name__ == '__main__':\n    tree = Tree()\n    tree.add(0)\n    tree.add(1)\n    tree.add(2)\n    tree.add(3)\n    tree.add(4)\n    tree.add(5)\n    tree.add(6)\n    tree.add(7)\n    tree.add(8)\n    tree.add(9)\n    tree.breath_travel()\n    tree.depth_travel()\n</code></pre>"},{"location":"python/other/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8/","title":"\u81ea\u5b9a\u4e49\u5f02\u5e38","text":"<pre><code>class AgeException(Exception):\n    \"\"\"\u81ea\u5b9a\u4e49\u5f02\u5e38\"\"\"\n\n    def __init__(self, age):\n        self.age = age\n\n    def __str__(self):\n        return f'Wrong Age: {self.age}'\n\n\ndef main():\n    age = 0\n    if age &lt;= 0:\n        raise AgeException(age)\n    print(age)\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"python/other/%E9%9A%8F%E6%9C%BA%E5%AD%97%E7%AC%A6%E4%B8%B2/","title":"\u968f\u673a\u5b57\u7b26\u4e32","text":"<pre><code>import random\nimport secrets\nimport string\n\n\ndef generate_random_str(length=6):\n    \"\"\"\n    \u751f\u6210\u6307\u5b9a\u957f\u5ea6\u7684\u968f\u673a\u5b57\u7b26\u4e32\n    \u4e00\u822c\u7528\u4e8e\u9a8c\u8bc1\u7801\n    \"\"\"\n\n    # \u7eaf\u6570\u5b57\u7684\u968f\u673a\u5b57\u7b26\u4e32\n    print(''.join(random.sample(string.digits, length)))\n\n    # \u7eaf\u5c0f\u5199\u5b57\u6bcd\u7684\u968f\u673a\u5b57\u7b26\u4e32\n    print(''.join(random.sample(string.ascii_lowercase, length)))\n\n    # \u7eaf\u5927\u5199\u5b57\u6bcd\u7684\u968f\u673a\u5b57\u7b26\u4e32\n    print(''.join(random.sample(string.ascii_uppercase, length)))\n\n    # \u6df7\u5408\u6570\u5b57\u548c\u5927\u5c0f\u5199\u5b57\u6bcd\u7684\u968f\u673a\u5b57\u7b26\u4e32\n    str_source = string.digits + string.ascii_lowercase + string.ascii_uppercase\n    print(''.join(random.sample(str_source, length)))\n\n\ndef generate_random_key(length=None):\n    \"\"\"\n    \u751f\u6210\u968f\u673a\u5bc6\u94a5\n    \u4e00\u822c\u7528\u4e8e\u5b89\u5168\u5bc6\u94a5, \u4f8b\u5982Flask\u7684Secret Key\n    \"\"\"\n\n    # \u8fd4\u56de\u957f\u5ea6length\u7684\u968f\u673a\u5b57\u8282\u5b57\u7b26\u4e32, length\u9ed8\u8ba4\u662f32\n    print(secrets.token_bytes(length))\n\n    # \u8fd4\u56de\u957f\u5ea6length*2\u7684\u968f\u673a16\u8fdb\u5236\u5b57\u7b26\u4e32, length\u9ed8\u8ba4\u662f32\n    print(secrets.token_hex(length))\n\n    # \u8fd4\u56de\u4e00\u4e2a\u7ecf\u8fc7Base64\u7f16\u7801\u540e\u7684URL\u5b89\u5168\u7684\u5b57\u7b26\u4e32\n    # length\u9ed8\u8ba4\u662f32, \u4f46\u7ecf\u8fc7Base64\u7f16\u7801\u957f\u5ea6\u4e0d\u786e\u5b9a\n    print(secrets.token_urlsafe(length))\n\n\nif __name__ == '__main__':\n    generate_random_str()\n    generate_random_key()\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>063582\nyqctlu\nQHXYOM\nUxcjHt\nb'\\xb5\\xc7\\xa7b\\xd3\\xc6\\xfa^\\xa2\\xbe\\xcaP\\x19\\x82G+9\\xac\\xf7\\xc5\\xc6\\xb3i\\x0e\\x8a\\xddzH\\xb0\\xf3\\xc2J'\n58a595f814c34a90254c17f7b02986bc603c0972811d386d6d4ef86e9e45a4a8\nablQClbICKIjHYmEGYtqKo-ZT9CmlbXxrXL1FyiGc3E\n</code></pre>"},{"location":"python/other/%E9%AD%94%E6%B3%95%E6%96%B9%E6%B3%95--%E5%AD%97%E5%85%B8/","title":"\u9b54\u6cd5\u65b9\u6cd5 -- \u5b57\u5178","text":"<p>\u4ee3\u7801</p> <pre><code>class Demo(object):\n    def __init__(self, start = 0, step = 1):\n        self.start = start\n        self.step = step\n        self.changed = {}\n\n    def __getitem__(self, key):\n        try:\n            return self.changed[key]\n        except KeyError:\n            return self.start + key * self.step\n\n    def __setitem__(self, key , value):\n        self.changed[key] = value\n        print('\u957f\u5ea61: ', len(self.changed))\n\n    def __delitem__(self, key):\n        self.changed.pop(key)\n        print('\u957f\u5ea62: ', len(self.changed))\n\n\ndef main():\n    demo = Demo(1,2)\n\n    # \u81ea\u52a8\u89e6\u53d1\u6267\u884c __getitem__\n    print(demo[4])\n    print(demo.changed)\n\n    # \u81ea\u52a8\u89e6\u53d1\u6267\u884c __setitem__\n    demo[4] = 2\n    print(demo[4])\n    print(demo.changed)\n\n    # \u81ea\u52a8\u89e6\u53d1\u6267\u884c __delitem__\n    del demo[4]\n    print(demo.changed)\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>9\n{}\n\u957f\u5ea61:  1\n2\n{4: 2}\n\u957f\u5ea62:  0\n{}\n</code></pre> <p>PS: \u524d\u540e\u53cc\u4e0b\u5212\u7ebf\u7684\u65b9\u6cd5, \u4ee5\u524d\u53eb\u9b54\u6cd5(magic)\u53d8\u91cf\u6216\u9b54\u6cd5\u65b9\u6cd5, \u73b0\u5728\u53ebdunders</p>"},{"location":"python/queue-stack/%E5%A0%86/","title":"\u5806","text":"<pre><code># queue\uff0c\u5148\u8fdb\u5148\u51fa(FIFO: First In First Out)\n\n\nclass Queue(object):\n    \"\"\"\u5806\"\"\"\n\n    def __init__(self):\n        \"\"\"\u521b\u5efa\u4e00\u4e2a\u7a7a\u7684\u961f\u5217\"\"\"\n        self.data = []\n\n    def enqueue(self, item):\n        \"\"\"\u5f80\u961f\u5217\u4e2d\u6dfb\u52a0\u4e00\u4e2aitem\u5143\u7d20\"\"\"\n        self.data.append(item)\n\n    def dequeue(self):\n        \"\"\"\u4ece\u961f\u5217\u5934\u90e8\u5220\u9664\u4e00\u4e2a\u5143\u7d20\"\"\"\n        return self.data.pop(0)\n\n    def is_empty(self):\n        \"\"\"\u5224\u65ad\u4e00\u4e2a\u961f\u5217\u662f\u5426\u4e3a\u7a7a\"\"\"\n        return self.data == []\n\n    def size(self):\n        \"\"\"\u8fd4\u56de\u961f\u5217\u7684\u5927\u5c0f\"\"\"\n        return len(self.data)\n\n\nif __name__ == '__main__':\n    queue = Queue()\n    print(queue.is_empty())\n    queue.enqueue(1)\n    queue.enqueue(3)\n    queue.enqueue(2)\n    print(queue.is_empty())\n    print(queue.dequeue())\n    print(queue.dequeue())\n    print(queue.dequeue())\n</code></pre>"},{"location":"python/queue-stack/%E5%A0%86%E6%A0%88/","title":"\u5806\u6808","text":"<pre><code>\"\"\"\ndeque\uff0c\u53c8\u53eb\u53cc\u7aef\u961f\u5217\uff0c\u56e0\u4e3a\u65e2\u53ef\u4ee5\u5148\u8fdb\u5148\u51fa\u4e5f\u53ef\u4ee5\u540e\u8fdb\u5148\u51fa\n\u4ee5\u4e0b\u4f7f\u7528\u5217\u8868\u6a21\u62df\n\nPython\u5185\u7f6e\u4e86\u771f\u6b63\u7684\u53cc\u7aef\u961f\u5217,\u8bf7\u53c2\u8003\nhttps://docs.python.org/zh-cn/3/library/collections.html#collections.deque\n\"\"\"\n\n\nclass Deque(object):\n    \"\"\"\u53cc\u7aef\u961f\u5217\"\"\"\n\n    def __init__(self):\n        \"\"\"\u521b\u5efa\u4e00\u4e2a\u7a7a\u7684\u53cc\u7aef\u961f\u5217\"\"\"\n        self.data = []\n\n    def add_front(self, item):\n        \"\"\"\u4ece\u961f\u5934\u52a0\u5165\u4e00\u4e2aitem\u5143\u7d20\"\"\"\n        self.data.insert(0,item)\n\n    def add_rear(self, item):\n        \"\"\"\u4ece\u961f\u5c3e\u52a0\u5165\u4e00\u4e2aitem\u5143\u7d20\"\"\"\n        self.data.append(item)\n\n    def remove_front(self):\n        \"\"\"\u4ece\u961f\u5934\u5220\u9664\u4e00\u4e2aitem\u5143\u7d20\"\"\"\n        return self.data.pop(0)\n\n    def remove_rear(self):\n        \"\"\"\u4ece\u961f\u5c3e\u5220\u9664\u4e00\u4e2aitem\u5143\u7d20\"\"\"\n        return self.data.pop()\n\n\nif __name__ == '__main__':\n    deque = Deque()\n    # \u5f53\u6210\u6808\u4f7f\u7528\n    deque.add_rear(1)\n    deque.add_rear(2)\n    deque.add_rear(3)\n    print(deque.remove_rear())\n    print(deque.remove_rear())\n    print(deque.remove_rear())\n\n    # \u5f53\u6210\u961f\u5217\u4f7f\u7528\n    deque.add_front(1)\n    deque.add_front(2)\n    deque.add_front(3)\n    print(deque.remove_rear())\n    print(deque.remove_rear())\n    print(deque.remove_rear())\n</code></pre>"},{"location":"python/queue-stack/%E6%A0%88/","title":"\u6808","text":"<pre><code># stack\uff0c\u540e\u8fdb\u5148\u51fa(LIFO: Last In First Out)\n\n\nclass Stack(object):\n    \"\"\"\n    \u4f7f\u7528\u5217\u8868\u5b9e\u73b0\u7684\u987a\u5e8f\u6808\n    \"\"\"\n\n    def __init__(self):\n        \"\"\"\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7a7a\u6808\"\"\"\n        self.data = []\n\n    def push(self,item):\n        \"\"\"\u5165\u6808\uff0c\u8fdb\u6808\uff0c\u538b\u6808\"\"\"\n        self.data.append(item)\n\n    def pop(self):\n        \"\"\"\u51fa\u6808\uff0c\u9000\u6808\"\"\"\n        return self.data.pop()\n\n    def peek(self):\n        \"\"\"\u8fd4\u56de\u6808\u9876\u5143\u7d20\"\"\"\n        return self.data[-1]\n\n    def is_empty(self):\n        \"\"\"\u5224\u65ad\u6808\u662f\u5426\u4e3a\u7a7a\"\"\"\n        return self.data == []\n\n    def size(self):\n        \"\"\"\u8fd4\u56de\u6808\u7684\u5143\u7d20\u4e2a\u6570\"\"\"\n        return len(self.data)\n\n\nif __name__ == '__main__':\n    stack = Stack()\n    stack.push(1)\n    stack.push(2)\n    stack.push(3)\n    print(stack.peek())\n    print(stack.pop())\n    print(stack.pop())\n    print(stack.pop())\n</code></pre>"},{"location":"python/single-multiple-instance/%E5%8D%95%E4%BE%8B/","title":"\u5355\u4f8b","text":"<pre><code>class Singleton:\n    \"\"\"\u5355\u4f8b\u6a21\u5f0f\u4e14\u53ea\u521d\u59cb\u5316\u4e00\u6b21\"\"\"\n\n    instance = None\n    init = False\n\n    def __new__(cls, *args, **kwargs):\n        \"\"\"\u5355\u4f8b\"\"\"\n\n        if cls.instance is None:\n            # \u8c03\u7528\u57fa\u7c7bobject\u8fdb\u884c\u5b9e\u4f8b\uff0c\u5e76\u7528instance\u8bb0\u5f55\u5b9e\u4f8b\u5730\u5740\n            cls.instance = object.__new__(cls)  # \u4e5f\u53ef\u7528 super() \u66ff\u6362 object, \u662f\u4e00\u6837\u7684\n        # \u8bb0\u5f55\u5730\u5740\u4ee5\u540e\uff0c\u540e\u7eed\u7684\u5b9e\u4f8b\u5316\u5bf9\u8c61\u64cd\u4f5c\u90fd\u8fd4\u56de\u8fd9\u4e2a\u6700\u5f00\u59cb\u7684\u5b9e\u4f8b\u5730\u5740\n        return cls.instance\n\n    def __init__(self):\n        \"\"\"\u521d\u59cb\u5316\u4e00\u6b21\"\"\"\n\n        if self.init:\n            return\n        print('\u521d\u59cb\u5316')\n        self.init = True\n\n\ndef main():\n    dog = Singleton()\n    cat = Singleton()\n    pig = Singleton()\n\n    print(id(dog) == id(cat) == id(pig))\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>\u521d\u59cb\u5316\nTrue\n</code></pre>"},{"location":"python/single-multiple-instance/%E5%A4%9A%E5%AE%9E%E4%BE%8B%E8%AE%A1%E6%95%B0/","title":"\u591a\u5b9e\u4f8b\u8ba1\u6570","text":"<pre><code>class MyClass(object):\n    \"\"\"\u591a\u5b9e\u4f8b\u8ba1\u6570\"\"\"\n\n    __num = 0\n\n    def __new__(cls, *args, **kwargs):\n        cls.__num += 1\n        return object.__new__(cls)\n\n    # \u65b9\u6cd51\n    # def __del__(self):\n    #     MyClass.__num -= 1\n\n    # \u65b9\u6cd52\n    @classmethod\n    def __del__(cls):\n        cls.__num -= 1\n\n    # \u65b9\u6cd51\n    # @staticmethod\n    # def get_nums():\n    #     return MyClass.__num\n\n    # \u65b9\u6cd52\n    @classmethod\n    def get_nums(cls):\n        return cls.__num\n\n\ndef main():\n    mc1 = MyClass()\n    print(mc1.get_nums())\n\n    mc2 = MyClass()\n    print(mc1.get_nums())\n\n    del mc2\n    print(MyClass.get_nums())\n\n    del mc1\n    print(MyClass.get_nums())\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>1\n2\n1\n0\n</code></pre>"},{"location":"python/sort/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/","title":"\u5192\u6ce1\u6392\u5e8f","text":"<pre><code># bubblesort\n\"\"\"\n\u7528\u7b2c\u4e00\u4e2a\u6570\u548c\u7b2c\u4e8c\u4e2a\u6570\u6bd4\u8f83\uff0c\u5982\u679c\u524d\u8005\u5c0f\u4e8e\u540e\u8005\uff0c\u4e0d\u505a\u4ea4\u6362\uff0c\u5426\u5219\u4ea4\u6362\u4f4d\u7f6e\n\u7136\u540e\u7528\u7b2c\u4e8c\u4e2a\u6570\u548c\u7b2c\u4e09\u4e2a\u6570\u6bd4\u8f83\uff0c\u5982\u679c\u524d\u8005\u5c0f\u4e8e\u540e\u8005\uff0c\u4e0d\u505a\u4ea4\u6362\uff0c\u5426\u5219\u4ea4\u6362\u4f4d\u7f6e\n\u4ee5\u6b64\u7c7b\u63a8\uff0c\u7136\u540e\u6700\u5927\u7684\u6570\u5728\u6700\u53f3\u8fb9\uff0c\u6b21\u8981\u5927\u7684\u6570\u5728\u5012\u6570\u7b2c\u4e8c\u4e2a\uff0c\u6700\u7ec8\u5b9e\u73b0\u6392\u5e8f\n\"\"\"\n\n\ndef bubble_sort(li):\n    n = len(li)\n    # \u5185\u90e8\u5faa\u73af\u6bcf\u4e00\u6b21\u80fd\u628a\u6700\u5927\u7684\u6570\u79fb\u52a8\u5230\u6700\u53f3\u8fb9\uff0c\u5171n-1\u6b21\n    for j in range(n - 1):  # 0 1 2 3\n\n        # \u5185\u90e8\u5faa\u73af\u4e00\u904d\uff0c\u5982\u679c\u6ca1\u6709\u6267\u884c\u8fc7\u4ea4\u6362\uff0c\u8bc1\u660e\u6570\u636e\u5df2\u7ecf\u6709\u5e8f\uff08\u63d0\u9ad8\u6548\u7387\uff09\n        flag = 0\n\n        # \u5b9a\u4e49\u6e38\u6807\uff0c\u4ece0\u79fb\u52a8\u5230\u5012\u6570\u7b2c\u4e8c\u4e2a\u4f4d\u7f6e\n        for i in range(n - 1 - j):  # n-1 n-2 n-3\n            # \u62ff\u5f53\u524d\u4f4d\u7f6e\u4e0e\u4e0b\u4e00\u4e2a\u4f4d\u7f6e\u7684\u6570\u636e\u6bd4\u8f83\n            if li[i] &gt; li[i + 1]:\n                li[i], li[i + 1] = li[i + 1], li[i]\n                flag += 1\n\n        # \u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u5224\u65ad\uff0c\u5bf9\u4e8e\u5927\u90e8\u5206\u662f\u6709\u5e8f\uff0c\u6700\u540e\u51e0\u4e2a\u5143\u7d20\u65e0\u5e8f\u7684\u5217\u8868\u6765\u8bf4\n        # \u4f1a\u589e\u52a0\u6ca1\u6709\u5fc5\u8981\u7684\u5faa\u73af\uff0c\u52a0\u4e0a\u4e4b\u540e\u53ef\u4ee5\u63d0\u9ad8\u6548\u7387\n        if flag == 0:\n            return\n\n\nif __name__ == '__main__':\n    l = [4, 2, 3, 5, 1]\n    l = [5, 4, 3, 2, 1]\n    bubble_sort(l)\n    print(l)\n    # \u7a33\u5b9a\u6027\uff1a\u7a33\u5b9a\n    # \u6700\u574f\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(n^2)\n    # \u6700\u4f18\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(n)\n</code></pre>"},{"location":"python/sort/%E5%AD%97%E5%85%B8%E6%8E%92%E5%BA%8F/","title":"\u5b57\u5178\u6392\u5e8f","text":""},{"location":"python/sort/%E5%AD%97%E5%85%B8%E6%8E%92%E5%BA%8F/#_2","title":"\u57fa\u7840\u7248","text":"<p>\u6309\u7167\u5b57\u5178\u7684key\u6216value\u6392\u5e8f</p> <pre><code># \u5b57\u5178\u5982\u4e0b\uff1a\nmydict1 = {'b': 3, 'd': 1, 'c': 2, 'a': 4}\nmydict2 = {'name': '\u5f20\u4e09', 'age': '18\u5c81', 'city': '\u6df1\u5733', 'tel': '13626266627'}\nprint('\u5b57\u5178mydict1\u6392\u5e8f\u524d\uff1a', mydict1)\nprint('\u5b57\u5178mydict2\u6392\u5e8f\u524d\uff1a', mydict2)\nprint()\n\nprint('\u6309\u7167\u5b57\u5178\u7684key\u6392\u5e8f:')\nprint()\n\n\ndef func1(mydict):\n    \"\"\"\n    \u65b9\u6cd5\u4e00\uff1a\n    \u601d\u8def\u662f\u5c06k\u548cv\u4ee5\u5143\u7ec4\u7684\u5f62\u5f0f\u7ec4\u6210\u5217\u8868\u5e76\u6392\u5e8f\uff08\u4f1a\u4ee5\u5143\u7ec4\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u5927\u5c0f\u6392\u5e8f\uff0c\u5373k\uff09\uff0c\u518d\u904d\u5386\u5217\u8868\u53d6\u51fa\u5143\u7ec4\uff0c\n    \u5143\u7ec4\u4e2d\u7684\u5143\u7d20\u5206\u522b\u662fk\u548cv,\u653e\u5230\u4e00\u4e2a\u65b0\u7684\u5b57\u5178\u91cc\uff0c\u6700\u540e\u8fd4\u56de\u8fd9\u4e2a\u65b0\u5b57\u5178\n    \"\"\"\n    mydict2list = sorted([item for item in mydict.items()])  # \u76ee\u7684\u662f\u5c06\u5b57\u5178\u53d8\u6210\u5217\u8868\u518d\u7528sorted()\u6392\u5e8f\n    new_dict = {}  #\n    for i in mydict2list:  # \u904d\u5386\u51fa\u6765\u7684i\u662f\u4e00\u4e2a\u5143\u7956\uff0c\u5305\u542bkey\u548cvalue\u4e24\u4e2a\u5143\u7d20\n        new_dict[i[0]] = i[1]\n    print('\u65b9\u6cd5\u4e00\u6392\u5e8f\u540e\uff1a', new_dict)\n\n\nfunc1(mydict1)\nfunc1(mydict2)\nprint()\n\n\ndef func2(mydict):\n    \"\"\"\n    \u65b9\u6cd5\u4e8c\uff1a\n    \u7528\u7684\u8fd8\u662f\u65b9\u6cd5\u4e00\u7684\u601d\u8def\uff0c\u4f46\u662fsorted()\u51fd\u6570\u7684\u8fd4\u56de\u503c\u5c31\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u5199\u5217\u8868\u63a8\u5bfc\u5f0f\n    \u5373sorted([item for item in mydict.items()])\u53ef\u4ee5\u7b80\u5199\u6210sorted(mydict.items())\n    \"\"\"\n    mydict2list = sorted(mydict.items())\n    new_dict = {}\n    for i in mydict2list:\n        new_dict[i[0]] = i[1]\n    print('\u65b9\u6cd5\u4e8c\u6392\u5e8f\u540e\uff1a', new_dict)\n\n\nfunc2(mydict1)\nfunc2(mydict2)\nprint()\n\n\ndef func3(mydict):\n    \"\"\"\n    \u65b9\u6cd5\u4e09\uff1a\n    mydict2list\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u5217\u8868\u5185\u7684\u5143\u7d20\u662f\u4e00\u4e2a\u4e2a\u7684\u5143\u7ec4\uff0c\u5143\u7ec4\u91cc\u5305\u542b\u4e24\u4e2a\u5143\u7d20\n    \u5206\u522b\u662f\u539f\u59cb\u5b57\u5178\u4e2d\u7684key\u548cvalue\uff0c\u800cdict()\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u8f6c\u5316\u8fd9\u79cd\u7ed3\u6784\u6210\u5b57\u5178\n    \u6240\u4ee5\u5c06for\u5faa\u73af\u7701\u7565\uff0c\u5199\u6210\u4e0b\u9762\u7684\u65b9\u6cd5\n    \"\"\"\n    mydict2list = sorted(mydict.items())\n    new_dict = dict(mydict2list)\n    print('\u65b9\u6cd5\u4e09\u6392\u5e8f\u540e\uff1a', new_dict)\n\n\nfunc3(mydict1)\nfunc3(mydict2)\nprint()\n\n\ndef func4(mydict):\n    \"\"\"\n    \u65b9\u6cd5\u56db\uff1a\n    \u65b9\u6cd5\u4e09\u4e2d\u7684\u4e24\u884c\u4ee3\u7801\u53ef\u4ee5\u5408\u5e76\u6210\u4e00\u884c\n    \"\"\"\n    print('\u65b9\u6cd5\u56db\u6392\u5e8f\u540e\uff1a', dict(sorted(mydict.items())))\n\n\nfunc4(mydict1)\nfunc4(mydict2)\nprint()\n\nprint(\"\"\"\n\u603b\u7ed3\u4e0b\u6765\uff0c\u5b57\u5178\u6309\u7167key\u6392\u5e8f\u7684\u683c\u5f0f\u662f\uff1a\ndict(sorted(mydict.items()))\n\u5373\uff0c\u6700\u5916\u5c42\u662fdict(),\u4e2d\u95f4\u5c42\u662fsorted()\uff0c\u6700\u5185\u5c42\u662f\u88ab\u6392\u5e8f\u5b57\u5178.items()\n\u6700\u7ec8\u7ed3\u679c\u5c31\u662f\uff1adict(sorted(mydict.items())))\n\"\"\")\nprint()\n\nprint('\u62d3\u5c55\uff1a\u53ea\u8981\u5217\u8868\u6216\u8005\u5143\u7956\u4e2d\u7684\u5143\u7d20\uff0c\u662f\u6210\u5bf9\u513f\u51fa\u73b0\u7684\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528dict()\u5c06\u5176\u8f6c\u5316\u6210\u5b57\u5178\uff0c\u4f8b\u5982\uff1a')\nmylist = [['a', 1], ['b', 2], ('c', [4])]\nprint('\u5217\u8868\uff1a', mylist)\nprint('\u5217\u8868\u8f6c\u5b57\u5178\uff1a', dict(mylist))\nmytuple = (['a', 1], [('b',), 2], ('c', [4]))\nprint('\u5143\u7ec4\uff1a', mytuple)\nprint('\u5143\u7ec4\u8f6c\u5b57\u5178\uff1a', dict(mytuple))\nprint()\n\n\ndef func5(mydict):\n    \"\"\"\n    \u65b9\u6cd5\u4e94\uff1a\n    \u5176\u4e2dsorted()\u65b9\u6cd5\u6709\u4e2a\u53c2\u6570\u662fkey\uff0c\u53ef\u4ee5\u6307\u5b9a\u53c2\u4e0e\u6bd4\u8f83\u7684\u5143\u7d20\n    \u53ef\u4ee5\u4f7f\u7528lambda\u51fd\u6570\u6765\u8fd4\u56de\u53c2\u4e0e\u6bd4\u8f83\u7684\u5143\u7d20\uff0c\u4e0a\u8ff0\u4ee3\u7801\u53ef\u4ee5\u5199\u6210\u8fd9\u6837:\n    \"\"\"\n    print('\u65b9\u6cd5\u4e94\u6392\u5e8f\u540e\uff1a', dict(sorted(mydict.items(), key=lambda x: x[0])))  # \u5bf9\u6bd4\u65b9\u6cd5\u56db\uff0c\u53d1\u73b0key\u8fd9\u4e2a\u53c2\u6570\u52a0\u4e0d\u52a0\u90fd\u53ef\u4ee5\uff0c\u52a0\u4e0a\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u5f15\u51fa\u540e\u9762\u7684\u6309\u7167value\u6392\u5e8f\n\n\nfunc5(mydict1)\nfunc5(mydict2)\nprint()\n\nprint(\"\"\"\u4ece\u65b9\u6cd5\u4e00\u5230\u65b9\u6cd5\u56db\n\u603b\u7ed3\u51fa\u5b57\u5178\u6392\u5e8f\u7684\u6838\u5fc3\u8bed\u53e5\u662f\uff1asorted(mydict.items())\n\u800c\u65b9\u6cd5\u4e94\u7684\u6838\u5fc3\u8bed\u53e5\u662f\uff1asorted(mydict.items(),key=lambda x:x[0])\n\u5728sorted()\u65b9\u6cd5\u4e2d\u6dfb\u52a0\u4e86\u4e00\u4e2a\u53c2\u6570key\uff0c\u8868\u793a\u6392\u5e8f\u6761\u4ef6\u662flambda x:x[0]\n\u89e3\u91ca\uff1a\n\u533f\u540d\u51fd\u6570 lambda x:y \u4e2dx\u8868\u793a\u4f20\u5165\u7684\u53c2\u6570\uff0cy\u8868\u793alambda \u51fd\u6570\u7684\u8fd4\u56de\u503c\n\u6240\u4ee5 lambda x:x[0] \u8868\u793a\u4f20\u5165\u53c2\u6570x\u8fd4\u56de\u53c2\u6570x\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\uff0c\u5373x[0]\n\u800c\u5b57\u5178\u7684items()\u65b9\u6cd5\u5c06\u5b57\u5178\u7684k\u548cv\u8f6c\u5316\u4e3a\u4e86\u5143\u7ec4\uff0c\u5e76\u4e14\u88ab\u5f53\u4f5c\u53c2\u6570\u4f20\u7ed9\u4e86lambda\u7684x\nx\u7684\u7ed3\u6784\u662f(k,v),x[0]\u5c31\u662fk\uff0c\u4e5f\u5c31\u662f\u7528\u5b57\u5178\u7684key\u4f5c\u4e3a\u6392\u5e8f\u6761\u4ef6\n\u4e3a\u4e86\u66f4\u52a0\u65b9\u4fbf\u7684\u7406\u89e3\u533f\u540d\u51fd\u6570lambda\uff0c\u53ef\u4ee5\u6539\u5199\u6210\u6b63\u5e38\u7684\u51fd\u6570, \u5e76\u8f93\u51fax\u3001x[0]\u7684\u7ed3\u679c\u548c\u7c7b\u578b\n\"\"\")\n\n\ndef mykey(x):\n    print('x\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a', x, type(x))\n    print('x[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a', x[0], type(x[0]))\n    return x[0]\n\n\nprint('\u65b9\u6cd5\u4e94\u6392\u5e8f\u540e\uff1a', dict(sorted(mydict1.items(), key=mykey)))\nprint('')\nprint('\u65b9\u6cd5\u4e94\u6392\u5e8f\u540e\uff1a', dict(sorted(mydict2.items(), key=mykey)))\nprint('')\nprint('\u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u7ed3\u679c\u53ef\u4ee5\u770b\u51fax[0]\u5c31\u662f\u5b57\u5178\u7684key\u503c')\n\n# \u5982\u6b64\u4e00\u6765\u6309\u7167value\u6392\u5e8f\u53ea\u8981\u628ax[0]\u6539\u6210x[1]\u5373\u53ef\uff1a\nprint('\u6309\u7167\u5b57\u5178\u7684value\u6392\u5e8f:')\nprint('\u6392\u5e8f\u540e\uff1a', dict(sorted(mydict1.items(), key=lambda x: x[1])))\nprint('\u6392\u5e8f\u540e\uff1a', dict(sorted(mydict2.items(), key=lambda x: x[1])))\nprint(\"\"\"\n\u6309\u7167value\u6392\u5e8f\u540e\u53d1\u73b0\u201c\u5f20\u4e09\u201d\u5728\u201c\u6df1\u5733\u201d\u524d\u9762\n\u539f\u56e0\u662fpython\u4ee5\u8f83\u6c49\u5b57\u7684utf-8\u7684\u7f16\u7801\u503c\u6392\u5e8f\u7684\n\u4f7f\u7528ord()\u65b9\u6cd5\u53ef\u4ee5\u5f97\u5230\u6c49\u65cf\u7684Unicode\u7f16\u7801(10\u8fdb\u5236)\nord('\u5f20')\u5f97\u51fa24352,ord('\u6df1')\u5f97\u51fa28145\n\u6240\u4ee5\u2018\u5f20\u2019\u6392\u5728\u2018\u6df1\u2019\u524d\u9762\n\u6216\u8005\u4f7f\u7528 '\u5f20'.encode() \u5f97\u51faE5BCA0\uff0c'\u6df1'.encode() \u5f97\u51faE6B7B1\uff0c\u6bd4\u8f8316\u8fdb\u5236\u4e5f\u80fd\u770b\u51fa\u5927\u5c0f\n\"\"\")\n\n# \u90a3\u4e48\u5bf9\u4e8e\u5d4c\u5957\u7684\u5b57\u5178\u7ed3\u6784\u5982\u4f55\u6392\u5e8f\u5462\uff1f\ndit = {\n    'd': {'sort': 7},\n    'a': {'sort': 3},\n    'c': {'sort': 4},\n    'b': {'sort': 1},\n}\nprint('\u5b57\u5178\u5d4c\u5957\u5b57\u5178\uff0c\u6309\u7167\u88ab\u5d4c\u5957\u5b57\u5178\u7684key\u6392\u5e8f\uff0c\u5373abcd\u6392\u5e8f\uff1a')\nprint('\u539f\u59cb\u987a\u5e8f\uff1a', dit)\nprint('\u6309\u7167key\u6392\u5e8f\uff1a', dict(sorted(dit.items(), key=lambda x: x[0])))\nprint('\u5b57\u5178\u5d4c\u5957\u5b57\u5178\uff0c\u6309\u7167\u88ab\u5d4c\u5957\u5b57\u5178\u7684value\u6392\u5e8f\uff0c\u53731347\u6392\u5e8f\uff1a')\nprint('\u6309\u7167key\u6392\u5e8f\uff1a', dict(sorted(dit.items(), key=lambda x: x[1]['sort'])))\nprint('')\nprint(\"\u4e3a\u4e86\u65b9\u4fbf\u7406\u89e3\uff0c\u518d\u6b21\u628alambda\u6539\u5199\u6210\u6b63\u5e38\u7684\u51fd\u6570\uff0c\u5e76\u8f93\u51fax[1]['sort']\u7684\u503c:\")\n\n\ndef value(x):\n    print(x, x[1], x[1]['sort'])\n    return x[1]['sort']\n\n\nprint('\u6309\u7167value\u6392\u5e8f\uff1a', dict(sorted(dit.items(), key=value)))\nprint()\n\n# \u8fd8\u662f\u5d4c\u5957\u5b57\u5178\uff0c\u4f46\u662f\u5d4c\u5957\u5b57\u5178\u7684key\u4e0d\u4e00\u6837\u5462\uff1f\ndit = {\n    'd': {'sortd': 7},\n    'a': {'sorta': 3},\n    'c': {'sortc': 4},\n    'b': {'sortb': 1},\n}\n\n\ndef value(x):\n    \"\"\"\n    \u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5c31\u4e0d\u80fd\u4f7f\u7528x[1]['sort']\uff0c\u56e0\u4e3a\u88ab\u5d4c\u5957\u7684\u5b57\u5178\u7684key\u4e0d\u662f\u7edf\u4e00\u7684'sort'\uff0c\u6240\u4ee5\u8981\u901a\u8fc7\u5b57\u5178\u7684values()\u53d6\u51fa\u6240\u6709\u7684key\uff0c\n    \u4f46\u662fvalues()\u7684\u7c7b\u578b\u662fdict_values\uff0c\u4e0d\u80fd\u901a\u8fc7\u7d22\u5f15\u53d6\u51favalue\uff0c\u6240\u4ee5\u8981\u8f6c\u6210\u5217\u8868\n    \u5373list(x[1].values())\uff0c\u6b64\u65f6\u7684\u5217\u8868\u5c31\u4e00\u4e2a\u5143\u7d20\uff0c\u901a\u8fc7\u7d22\u5f15\u5c31\u80fd\u53d6\u51fa\u6765\n    \u6700\u7ec8\u7684\u5f62\u5f0f\u5c31\u662flist(x[1].values())[0]\n    \"\"\"\n    print(x[1], x[1].values(), list(x[1].values())[0])\n    return list(x[1].values())[0]\n\n\nprint('\u6309\u7167value\u6392\u5e8f\uff1a', dict(sorted(dit.items(), key=value)))\nprint()\n\n# \u65e2\u7136\u6838\u5fc3\u4ee3\u7801\u662flist(x[1].values())[0]\uff0c\u90a3\u4e48\u6700\u7ec8\u7684\u5199\u6cd5\u5c31\u662f\uff1a\nprint('\u6309\u7167value\u6392\u5e8f\uff1a', dict(sorted(dit.items(), key=lambda x: list(x[1].values())[0])))\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>\u5b57\u5178mydict1\u6392\u5e8f\u524d\uff1a {'b': 3, 'd': 1, 'c': 2, 'a': 4}\n\u5b57\u5178mydict2\u6392\u5e8f\u524d\uff1a {'name': '\u5f20\u4e09', 'age': '18\u5c81', 'city': '\u6df1\u5733', 'tel': '13626266627'}\n\n\u6309\u7167\u5b57\u5178\u7684key\u6392\u5e8f:\n\n\u65b9\u6cd5\u4e00\u6392\u5e8f\u540e\uff1a {'a': 4, 'b': 3, 'c': 2, 'd': 1}\n\u65b9\u6cd5\u4e00\u6392\u5e8f\u540e\uff1a {'age': '18\u5c81', 'city': '\u6df1\u5733', 'name': '\u5f20\u4e09', 'tel': '13626266627'}\n\n\u65b9\u6cd5\u4e8c\u6392\u5e8f\u540e\uff1a {'a': 4, 'b': 3, 'c': 2, 'd': 1}\n\u65b9\u6cd5\u4e8c\u6392\u5e8f\u540e\uff1a {'age': '18\u5c81', 'city': '\u6df1\u5733', 'name': '\u5f20\u4e09', 'tel': '13626266627'}\n\n\u65b9\u6cd5\u4e09\u6392\u5e8f\u540e\uff1a {'a': 4, 'b': 3, 'c': 2, 'd': 1}\n\u65b9\u6cd5\u4e09\u6392\u5e8f\u540e\uff1a {'age': '18\u5c81', 'city': '\u6df1\u5733', 'name': '\u5f20\u4e09', 'tel': '13626266627'}\n\n\u65b9\u6cd5\u56db\u6392\u5e8f\u540e\uff1a {'a': 4, 'b': 3, 'c': 2, 'd': 1}\n\u65b9\u6cd5\u56db\u6392\u5e8f\u540e\uff1a {'age': '18\u5c81', 'city': '\u6df1\u5733', 'name': '\u5f20\u4e09', 'tel': '13626266627'}\n\n\n\u603b\u7ed3\u4e0b\u6765\uff0c\u5b57\u5178\u6309\u7167key\u6392\u5e8f\u7684\u683c\u5f0f\u662f\uff1a\ndict(sorted(mydict.items()))\n\u5373\uff0c\u6700\u5916\u5c42\u662fdict(),\u4e2d\u95f4\u5c42\u662fsorted()\uff0c\u6700\u5185\u5c42\u662f\u88ab\u6392\u5e8f\u5b57\u5178.items()\n\u6700\u7ec8\u7ed3\u679c\u5c31\u662f\uff1adict(sorted(mydict.items())))\n\n\n\u62d3\u5c55\uff1a\u53ea\u8981\u5217\u8868\u6216\u8005\u5143\u7956\u4e2d\u7684\u5143\u7d20\uff0c\u662f\u6210\u5bf9\u513f\u51fa\u73b0\u7684\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528dict()\u5c06\u5176\u8f6c\u5316\u6210\u5b57\u5178\uff0c\u4f8b\u5982\uff1a\n\u5217\u8868\uff1a [['a', 1], ['b', 2], ('c', [4])]\n\u5217\u8868\u8f6c\u5b57\u5178\uff1a {'a': 1, 'b': 2, 'c': [4]}\n\u5143\u7ec4\uff1a (['a', 1], [('b',), 2], ('c', [4]))\n\u5143\u7ec4\u8f6c\u5b57\u5178\uff1a {'a': 1, ('b',): 2, 'c': [4]}\n\n\u65b9\u6cd5\u4e94\u6392\u5e8f\u540e\uff1a {'a': 4, 'b': 3, 'c': 2, 'd': 1}\n\u65b9\u6cd5\u4e94\u6392\u5e8f\u540e\uff1a {'age': '18\u5c81', 'city': '\u6df1\u5733', 'name': '\u5f20\u4e09', 'tel': '13626266627'}\n\n\u4ece\u65b9\u6cd5\u4e00\u5230\u65b9\u6cd5\u56db\n\u603b\u7ed3\u51fa\u5b57\u5178\u6392\u5e8f\u7684\u6838\u5fc3\u8bed\u53e5\u662f\uff1asorted(mydict.items())\n\u800c\u65b9\u6cd5\u4e94\u7684\u6838\u5fc3\u8bed\u53e5\u662f\uff1asorted(mydict.items(),key=lambda x:x[0])\n\u5728sorted()\u65b9\u6cd5\u4e2d\u6dfb\u52a0\u4e86\u4e00\u4e2a\u53c2\u6570key\uff0c\u8868\u793a\u6392\u5e8f\u6761\u4ef6\u662flambda x:x[0]\n\u89e3\u91ca\uff1a\n\u533f\u540d\u51fd\u6570 lambda x:y \u4e2dx\u8868\u793a\u4f20\u5165\u7684\u53c2\u6570\uff0cy\u8868\u793alambda \u51fd\u6570\u7684\u8fd4\u56de\u503c\n\u6240\u4ee5 lambda x:x[0] \u8868\u793a\u4f20\u5165\u53c2\u6570x\u8fd4\u56de\u53c2\u6570x\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\uff0c\u5373x[0]\n\u800c\u5b57\u5178\u7684items()\u65b9\u6cd5\u5c06\u5b57\u5178\u7684k\u548cv\u8f6c\u5316\u4e3a\u4e86\u5143\u7ec4\uff0c\u5e76\u4e14\u88ab\u5f53\u4f5c\u53c2\u6570\u4f20\u7ed9\u4e86lambda\u7684x\nx\u7684\u7ed3\u6784\u662f(k,v),x[0]\u5c31\u662fk\uff0c\u4e5f\u5c31\u662f\u7528\u5b57\u5178\u7684key\u4f5c\u4e3a\u6392\u5e8f\u6761\u4ef6\n\u4e3a\u4e86\u66f4\u52a0\u65b9\u4fbf\u7684\u7406\u89e3\u533f\u540d\u51fd\u6570lambda\uff0c\u53ef\u4ee5\u6539\u5199\u6210\u6b63\u5e38\u7684\u51fd\u6570, \u5e76\u8f93\u51fax\u3001x[0]\u7684\u7ed3\u679c\u548c\u7c7b\u578b\n\nx\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('b', 3) &lt;class 'tuple'&gt;\nx[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a b &lt;class 'str'&gt;\nx\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('d', 1) &lt;class 'tuple'&gt;\nx[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a d &lt;class 'str'&gt;\nx\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('c', 2) &lt;class 'tuple'&gt;\nx[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a c &lt;class 'str'&gt;\nx\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('a', 4) &lt;class 'tuple'&gt;\nx[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a a &lt;class 'str'&gt;\n\u65b9\u6cd5\u4e94\u6392\u5e8f\u540e\uff1a {'a': 4, 'b': 3, 'c': 2, 'd': 1}\n\nx\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('name', '\u5f20\u4e09') &lt;class 'tuple'&gt;\nx[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a name &lt;class 'str'&gt;\nx\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('age', '18\u5c81') &lt;class 'tuple'&gt;\nx[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a age &lt;class 'str'&gt;\nx\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('city', '\u6df1\u5733') &lt;class 'tuple'&gt;\nx[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a city &lt;class 'str'&gt;\nx\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('tel', '13626266627') &lt;class 'tuple'&gt;\nx[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a tel &lt;class 'str'&gt;\n\u65b9\u6cd5\u4e94\u6392\u5e8f\u540e\uff1a {'age': '18\u5c81', 'city': '\u6df1\u5733', 'name': '\u5f20\u4e09', 'tel': '13626266627'}\n\n\u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u7ed3\u679c\u53ef\u4ee5\u770b\u51fax[0]\u5c31\u662f\u5b57\u5178\u7684key\u503c\n\u6309\u7167\u5b57\u5178\u7684value\u6392\u5e8f:\n\u6392\u5e8f\u540e\uff1a {'d': 1, 'c': 2, 'b': 3, 'a': 4}\n\u6392\u5e8f\u540e\uff1a {'tel': '13626266627', 'age': '18\u5c81', 'name': '\u5f20\u4e09', 'city': '\u6df1\u5733'}\n\n\u6309\u7167value\u6392\u5e8f\u540e\u53d1\u73b0\u201c\u5f20\u4e09\u201d\u5728\u201c\u6df1\u5733\u201d\u524d\u9762\n\u539f\u56e0\u662fpython\u4ee5\u8f83\u6c49\u5b57\u7684utf-8\u7684\u7f16\u7801\u503c\u6392\u5e8f\u7684\n\u4f7f\u7528ord()\u65b9\u6cd5\u53ef\u4ee5\u5f97\u5230\u6c49\u65cf\u7684Unicode\u7f16\u7801(10\u8fdb\u5236)\nord('\u5f20')\u5f97\u51fa24352,ord('\u6df1')\u5f97\u51fa28145\n\u6240\u4ee5\u2018\u5f20\u2019\u6392\u5728\u2018\u6df1\u2019\u524d\u9762\n\u6216\u8005\u4f7f\u7528 '\u5f20'.encode() \u5f97\u51faE5BCA0\uff0c'\u6df1'.encode() \u5f97\u51faE6B7B1\uff0c\u6bd4\u8f8316\u8fdb\u5236\u4e5f\u80fd\u770b\u51fa\u5927\u5c0f\n\n\u5b57\u5178\u5d4c\u5957\u5b57\u5178\uff0c\u6309\u7167\u88ab\u5d4c\u5957\u5b57\u5178\u7684key\u6392\u5e8f\uff0c\u5373abcd\u6392\u5e8f\uff1a\n\u539f\u59cb\u987a\u5e8f\uff1a {'d': {'sort': 7}, 'a': {'sort': 3}, 'c': {'sort': 4}, 'b': {'sort': 1}}\n\u6309\u7167key\u6392\u5e8f\uff1a {'a': {'sort': 3}, 'b': {'sort': 1}, 'c': {'sort': 4}, 'd': {'sort': 7}}\n\u5b57\u5178\u5d4c\u5957\u5b57\u5178\uff0c\u6309\u7167\u88ab\u5d4c\u5957\u5b57\u5178\u7684value\u6392\u5e8f\uff0c\u53731347\u6392\u5e8f\uff1a\n\u6309\u7167key\u6392\u5e8f\uff1a {'b': {'sort': 1}, 'a': {'sort': 3}, 'c': {'sort': 4}, 'd': {'sort': 7}}\n\n\u4e3a\u4e86\u65b9\u4fbf\u7406\u89e3\uff0c\u518d\u6b21\u628alambda\u6539\u5199\u6210\u6b63\u5e38\u7684\u51fd\u6570\uff0c\u5e76\u8f93\u51fax[1]['sort']\u7684\u503c:\n('d', {'sort': 7}) {'sort': 7} 7\n('a', {'sort': 3}) {'sort': 3} 3\n('c', {'sort': 4}) {'sort': 4} 4\n('b', {'sort': 1}) {'sort': 1} 1\n\u6309\u7167value\u6392\u5e8f\uff1a {'b': {'sort': 1}, 'a': {'sort': 3}, 'c': {'sort': 4}, 'd': {'sort': 7}}\n\n{'sortd': 7} dict_values([7]) 7\n{'sorta': 3} dict_values([3]) 3\n{'sortc': 4} dict_values([4]) 4\n{'sortb': 1} dict_values([1]) 1\n\u6309\u7167value\u6392\u5e8f\uff1a {'b': {'sortb': 1}, 'a': {'sorta': 3}, 'c': {'sortc': 4}, 'd': {'sortd': 7}}\n\n\u6309\u7167value\u6392\u5e8f\uff1a {'b': {'sortb': 1}, 'a': {'sorta': 3}, 'c': {'sortc': 4}, 'd': {'sortd': 7}}\n</code></pre>"},{"location":"python/sort/%E5%AD%97%E5%85%B8%E6%8E%92%E5%BA%8F/#_3","title":"\u56f0\u96be\u7248","text":"<p>\u4e0a\u9762\u90fd\u662f\u76f4\u63a5\u6392\u5e8f\u5b57\u5178, \u5982\u679c\u6570\u636e\u662f\u5217\u8868\u4e2d\u5305\u542b\u591a\u4e2a\u5b57\u5178, \u4f8b\u5982:</p> <pre><code>li = [{'k': 1, 'v': 2}, {'k': 12, 'v': 222}, {'k': 13, 'v': 32}]\n</code></pre> <p>\u6b63\u5e38\u51fd\u6570\u5c31\u662f:</p> <pre><code>def my_sort(x):\n    # print(x)\n    return x.get('k')\n</code></pre> <p>\u6309\u7167key\u548cvalue\u5012\u5e8f\u5c31\u662f:</p> <pre><code>print(sorted(li, key=my_sort, reverse=True))\nprint(sorted(li, key=lambda x: x.get('v'), reverse=True))\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>[{'k': 13, 'v': 32}, {'k': 12, 'v': 222}, {'k': 1, 'v': 2}]\n[{'k': 12, 'v': 222}, {'k': 13, 'v': 32}, {'k': 1, 'v': 2}]\n</code></pre>"},{"location":"python/sort/%E5%AD%97%E5%85%B8%E6%8E%92%E5%BA%8F/#plus","title":"\u56f0\u96be\u7248Plus","text":"<p>\u5217\u8868\u4e2d\u6bcf\u4e2a\u5143\u7d20\u7684key\u548cvalue\u7684\u503c\u90fd\u4e0d\u4e00\u6837</p> <pre><code>li = [{'k1': 1, 'v1': 2}, {'k2': 12, 'v2': 222}, {'k3': 13, 'v2': 32}]\n</code></pre> <p>\u6b63\u5e38\u7684\u51fd\u6570\u5c31\u662f:</p> <pre><code>def my_sort(x):\n    # print(list(x.items()))\n    return list(x.items())[0][1]\n</code></pre> <p>\u6309\u7167key\u548cvalue\u5012\u5e8f\u5c31\u662f:</p> <pre><code>print(sorted(li, key=my_sort, reverse=True))\nprint(sorted(li, key=lambda x: list(x.items())[1][1], reverse=True))\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>[{'k3': 13, 'v2': 32}, {'k2': 12, 'v2': 222}, {'k1': 1, 'v1': 2}]\n[{'k2': 12, 'v2': 222}, {'k3': 13, 'v2': 32}, {'k1': 1, 'v1': 2}]\n</code></pre>"},{"location":"python/sort/%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F/","title":"\u5e0c\u5c14\u6392\u5e8f","text":"<p>\u53c2\u8003: \u5e0c\u5c14\u6392\u5e8f(\u56fe\u6587\u5e76\u8302)</p> <pre><code># shellsort\n\n\ndef shell_sort(li):\n    n = len(li)\n    # \u8bbe\u7f6e \u6b65\u957f\n    gap = n // 2\n    # \u6b65\u957f\u4ece\u5927\u5230\u5c0f\uff0c\u6700\u540e\u5fc5\u987b\u6309\u71671\u6b65\u957f\u6392\u5e8f\n    while gap &gt;= 1:\n\n        # \u4ece\u6b65\u957f\u4f4d\u7f6e\u904d\u5386\u5269\u4e0b\u6570\u636e\uff0c\u5206\u7ec4\uff0c\u8ba9\u6bcf\u7ec4\u7684\u6570\u636e\u6392\u5e8f\n        for i in range(gap, n):\n\n            # \u62ff\u5f53\u524d\u4f4d\u7f6e\u4e0e\u51cf\u6b65\u957f\u7684\u4f4d\u7f6e\u7684\u6570\u636e\u6bd4\u8f83\n            while (i - gap) &gt;= 0:\n                if li[i] &lt; li[i - gap]:\n                    li[i], li[i - gap] = li[i - gap], li[i]\n                    i -= gap\n                else:\n                    break\n        gap //= 2\n\n\nif __name__ == '__main__':\n    l = [6, 5, 6, 3, 2, 7]\n    shell_sort(l)\n    print(l)\n\n    # \u7a33\u5b9a\u6027\uff1a\u4e0d\u7a33\u5b9a\n    # \u65f6\u95f4\u590d\u6742\u5ea6\uff1a\u8ddf\u6b65\u957f\u76f8\u5173\n</code></pre>"},{"location":"python/sort/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F/","title":"\u5f52\u5e76\u6392\u5e8f","text":"<p>\u53c2\u8003\uff1a</p> <p>\u5f52\u5e76\u6392\u5e8f(\u56fe\u6587\u5e76\u8302)</p> <p>\u5f52\u5e76\u6392\u5e8f(\u52a8\u56fe\u7406\u89e3)</p> <pre><code># mergesort\n\"\"\"\n1\u3001merge_sort\u51fd\u6570\u628a\u4e00\u4e2a\u5217\u8868\u5206\u6210\u4e24\u90e8\u5206\uff0c\u6bcf\u4e00\u4e2a\u90e8\u5206\u7ee7\u7eed\u4e8c\u5206\uff0c\u9012\u5f52\u4e0b\u53bb\uff0c\u76f4\u5230\u5217\u8868\u91cc\u53ea\u67091\u4e2a\u5143\u7d20\n2\u3001\u7136\u540e\u5c06\u5404\u81ea\u53ea\u67091\u4e2a\u5143\u7d20\u7684\u4e24\u4e2a\u5217\u8868\u4f20\u9012\u7ed9merge\u51fd\u6570\uff0c\u6bd4\u8f83\u5927\u5c0f\u6784\u5efa\u6210\u6709\u5e8f\u7684\u5217\u8868\n3\u3001\u4f9d\u6b21\u6309\u71671\u4e2d\u9012\u5f52\u7684\u987a\u5e8f\u8fd4\u56de2\u4e2d\u5217\u8868\uff0c\u4e0d\u65ad\u7684\u5408\u5e76\uff0c\u6700\u540e\u5f97\u5230\u6392\u5e8f\u597d\u7684\u6570\u7ec4\n\"\"\"\n\n\ndef merge_sort(li):\n    if len(li) == 1:\n        return li\n\n    # \u628a\u6570\u636e\u62c6\u5206\u6210\u5de6\u53f3\u5404\u4e00\u534a\n    mid = n // 2\n    left = li[:mid]\n    right = li[mid:]\n\n    # \u7ee7\u7eed\u9012\u5f52\u62c6\u5206\n    l_res = merge_sort(left)\n    r_res = merge_sort(right)\n\n    # \u628a\u4e0b\u5c42\u65b9\u6cd5\u8fd4\u56de\u7684\u4e24\u4e2a\u6709\u5e8f\u5e8f\u5217\uff0c\u518d\u7ec4\u6210\u6709\u5e8f\n    res = merge(l_res, r_res)\n    return res\n\n\ndef merge(ll, rl):\n    \"\"\"\u628a\u4e24\u4e2a\u6709\u5e8f\u5e8f\u5217\uff0c\u518d\u7ec4\u6210\u6709\u5e8f\"\"\"\n    # [1] [2]\n    # [1,2] [3,6]\n\n    # \u4e24\u4e2a\u4e0b\u6807\u5206\u522b\u6307\u5411\u4e24\u4e2a\u5e8f\u5217\u76840\u4f4d\u7f6e\n    l_index = 0\n    r_index = 0\n\n    # \u521b\u5efa\u4e34\u65f6\u5217\u8868\u5b58\u653e\u7ed3\u679c\n    res = []\n    while l_index &lt; len(ll) and r_index &lt; len(rl):\n        if ll[l_index] &lt;= rl[r_index]:  # \u7b49\u53f7\u4fdd\u8bc1\u7a33\u5b9a\u6027\n            res.append(ll[l_index])\n            l_index += 1\n        else:\n            res.append(rl[r_index])\n            r_index += 1\n    # \u5faa\u73af\u7ed3\u675f\u65f6\uff0c\u53ea\u80fd\u628a\u5176\u4e2d\u4e00\u4e2a\u5217\u8868\u7684\u6570\u636e\u5168\u90e8\u653e\u5230\u7ed3\u679c\u4e2d\n    res += ll[l_index:]\n    res += rl[r_index:]\n    return res\n\n\nif __name__ == '__main__':\n    l = [4, 2, 3, 5, 1]\n    l = [5, 4, 3, 2, 1]\n    print(merge_sort(l))\n    # l=[2,4,6,7,8]\n    # r=[1,3,5]\n    # # 1,2,3,4,5\n    # print(merge(l,r))\n\n    # \u7a33\u5b9a\u6027\uff1a\u7a33\u5b9a\n    # \u6700\u574f\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(nlogn)\n    # \u6700\u4f18\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(nlogn)\n</code></pre>"},{"location":"python/sort/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/","title":"\u5feb\u901f\u6392\u5e8f","text":"<p>\u53c2\u8003: \u5feb\u901f\u6392\u5e8f\u7b97\u6cd5(\u56fe\u6587\u5e76\u8302)</p> <pre><code># quicksort\n\"\"\"\n1\u3001\u9996\u5148\u8ba4\u4e3a\u7b2c\u4e00\u4e2a\u6570\u662f\u6700\u5c0f\u7684\uff0c\u4f46\u5b9e\u9645\u4e0a\u53ef\u80fd\u4e0d\u662f\n2\u3001\u90a3\u4e48\u5c31\u8981\u904d\u5386\u5269\u4e0b\u7684\u6570\uff0c\u628a\u6bd4\u8fd9\u4e2a\u6570\u5c0f\u7684\u653e\u5230\u5b83\u7684\u5de6\u8fb9\uff0c\u6bd4\u8fd9\u4e2a\u6570\u5927\u7684\u653e\u5230\u5b83\u7684\u53f3\u8fb9\n3\u3001\u5de6\u53f3\u5f00\u59cb\u5f80\u4e2d\u95f4\u904d\u5386\uff0c\u5148\u53f3\u518d\u5de6\uff0c\u6309\u71672\u7684\u89c4\u5219\u6392\u5217\uff0c\u5de6\u53f3\u91cd\u5408\u5c31\u662f1\u4e2d\u6211\u4eec\u8ba4\u4e3a\u7684\u8fd9\u4e2a\u6570\u7684\u4f4d\u7f6e\n4\u3001\u7136\u540e\u75283\u4e2d\u8fd9\u4e2a\u4f4d\u7f6e\u7684\u7d22\u5f15\u5206\u6210\u5de6\u53f3\u4e24\u4e2a\u90e8\u5206\uff0c\u7ee7\u7eed\u91cd\u590d1234\u6b65\u9aa4\uff0c\u5373\u53ef\u6392\u5e8f\n\"\"\"\n\n\ndef quick_sort(li, start, end):\n    \"\"\"\n    li: \u9700\u8981\u6392\u5e8f\u7684\u5217\u8868\n    start: \u5217\u8868\u9996\u4f4d\u5143\u7d20\u7684\u7d22\u5f15\n    end: \u5217\u8868\u672b\u4f4d\u5143\u7d20\u7684\u7d22\u5f15\n    \"\"\"\n\n    if start &gt;= end:\n        return\n\n    n = len(li)\n    # \u8ba4\u4e3a0\u4f4d\u7f6e\u662f\u4e2d\u95f4\u503c\uff0c\u8bb0\u5f55\u4e2d\u95f4\u503c\n    mid = li[start]\n    # \u5b9a\u4e49\u4e24\u4e2a\u6e38\u6807\n    left = start\n    right = end\n\n    while left &lt; right:\n        # \u8ba9\u53f3\u8fb9\u6e38\u6807\u5f80\u5de6\u79fb\u52a8\uff0c\u627e\u5230\u5c0f\u4e8emid\u7684\u503c\uff0c\u653e\u5230\u5de6\u8fb9\u6e38\u6807\u4f4d\u7f6e\n        while left &lt; right and li[right] &gt;= mid:\n            right -= 1\n        # \u5faa\u73af\u7ed3\u675f\uff0c\u653e\u5230\u5de6\u8fb9\u6e38\u6807\u4f4d\u7f6e\n        li[left] = li[right]\n\n        # \u8ba9\u5de6\u8fb9\u6e38\u6807\u5f80\u53f3\u79fb\u52a8\uff0c\u627e\u5230\u5927\u4e8emid\u7684\u503c\uff0c\u653e\u5230\u53f3\u8fb9\u6e38\u6807\u4f4d\u7f6e\n        while left &lt; right and li[left] &lt; mid:\n            left += 1\n        # \u5faa\u73af\u7ed3\u675f\uff0c\u653e\u5230\u53f3\u8fb9\u6e38\u6807\u4f4d\u7f6e\n        li[right] = li[left]\n\n    # left=right \u628amid\u653e\u5230\u6b64\u4f4d\u7f6e\n    li[left] = mid\n    # \u9012\u5f52\u7ee7\u7eed\u5904\u7406\u5de6\u8fb9\u548c\u53f3\u8fb9\u7684\u6570\u636e\n    quick_sort(li, start, left - 1)\n    quick_sort(li, left + 1, end)\n\n\nif __name__ == '__main__':\n    l = [4, 6, 2, 5, 1, 3]\n    l = [6, 5, 3, 2, 1]\n    l = [3, 1, 5, 6, 2, 4]\n    # 3 [2,1,3,6,5,4]\n    quick_sort(l, 0, len(l) - 1)\n    print(l)\n    # \u7a33\u5b9a\u6027\uff1a\u4e0d\u7a33\u5b9a\n    # \u6700\u574f\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(n^2)\n    # \u6700\u4f18\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(nlogn)\n</code></pre>"},{"location":"python/sort/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/","title":"\u63d2\u5165\u6392\u5e8f","text":"<p>\u53c2\u8003: \u63d2\u5165\u6392\u5e8f(\u52a8\u56fe\u7406\u89e3)</p> <pre><code># insertsort\n\"\"\"\n\u62ff\u540e\u4e00\u4e2a\u6570\u8ddf\u524d\u4e00\u4e2a\u6570\u6bd4\n\u5982\u679c\u540e\u9762\u7684\u6570\u5927\u4e8e\u524d\u9762\u7684\u6570\u5c31\u5ffd\u7565\uff0c\u5426\u5219\u4ea4\u6362\u4f4d\u7f6e\n\u4ea4\u6362\u4f4d\u7f6e\u540e\uff0c\u518d\u7ee7\u7eed\u8ddf\u524d\u4e00\u4e2a\u6570\u6bd4\uff0c\u7136\u540e\u91cd\u590d\u8fd9\u4e2a\u6b65\u9aa4\uff0c\u76f4\u5230\u6ca1\u6bd4\u4ed6\u5c0f\u7684\u6216\u7d22\u5f15\u4e3a0\n\"\"\"\n\n\ndef insert_sort(li):\n    n = len(li)\n    # \u8ba4\u4e3a\u7b2c\u4e00\u4e2a\u6570\u6709\u5e8f\uff0c\u6bcf\u6b21\u4ece\u540e\u9762\u53d6\u4e00\u4e2a\u6570\n    for j in range(1, n):\n\n        # \u4ece\u540e\u9762\u53d6\u4e00\u4e2a\u6570\u636e\uff08\u5012\u7740\u53d6\u6570\uff09\uff0c\u8ddf\u63d2\u5165\u5230\u524d\u9762\u7684\u6709\u5e8f\u5e8f\u5217\u4e2d\n        for i in range(j, 0, -1):\n            # \u62ff\u5f53\u524d\u4f4d\u7f6e\u4e0e\u524d\u9762\u4f4d\u7f6e\u6570\u636e\u8fdb\u884c\u6bd4\u8f83\n            if li[i] &lt; li[i - 1]:\n                li[i], li[i - 1] = li[i - 1], li[i]\n            else:\n                break\n\n\nif __name__ == '__main__':\n    l = [4, 2, 3, 5, 1]\n    l = [5, 4, 3, 2, 1]\n    insert_sort(l)\n    print(l)\n    # \u7a33\u5b9a\u6027\uff1a\u7a33\u5b9a\n    # \u6700\u574f\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(n^2)\n    # \u6700\u4f18\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(n)\n</code></pre>"},{"location":"python/sort/%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F/","title":"\u9009\u62e9\u6392\u5e8f","text":"<p>\u53c2\u8003: \u9009\u62e9\u6392\u5e8f(\u52a8\u56fe\u7406\u89e3)</p> <pre><code># selectsort\n\"\"\"\n\u8ba4\u4e3a\u7b2c\u4e00\u4e2a\u6570\u662f\u6700\u5c0f\u7684\uff0c\u904d\u5386\u540e\u9762\u7684\u6570\u8ddf\u4e00\u4e2a\u6570\u6bd4\uff0c\u5982\u679c\u6bd4\u7b2c\u4e00\u4e2a\u6570\uff0c\u8bb0\u5f55\u4e0b\u6765\n\u904d\u5386\u5b8c\u6bd5\u540e\u5f97\u51fa\u540e\u9762\u7684\u6570\u4e2d\u6700\u5c0f\u7684\u6570\uff0c\u548c\u7b2c\u4e00\u4e2a\u4ea4\u6362\u4f4d\u7f6e\n\u6b64\u65f6\u7b2c\u4e00\u4e2a\u6570\u5df2\u7ecf\u662f\u6700\u5c0f\u7684\uff0c\u7ee7\u7eed\u904d\u5386\uff0c\u8ba4\u4e3a\u7b2c2\u4e2a\u6570\u662f\u5269\u4f59\u6240\u6709\u6570\u4e2d\u6700\u5c0f\u7684\uff0c\u7ee7\u7eed\u91cd\u590d\u4e0a\u8ff0\u6b65\u9aa4\u5373\u53ef\n\"\"\"\n\n\ndef select_sort(li):\n    n = len(li)\n    # \u5185\u90e8\u5faa\u73af\u6bcf\u6b21\u627e\u5230\u4e00\u4e2a\u6700\u5c0f\u7684\u6570\uff0c\u5171\u9700\u8981n-1\u6b21\n    for j in range(n - 1):  # j=1\n\n        # \u8bb0\u5f550\u4f4d\u7f6e\uff0c\u8ba4\u4e3a0\u4f4d\u7f6e\u5c31\u662f\u6700\u5c0f\u7684\u6570\n        min = j\n        # \u904d\u5386\u540e\u9762\u7684\u6570\u636e\uff0c\u4e0e\u6700\u5c0f\u7684\u6570\u8fdb\u884c\u6bd4\u8f83\n        for i in range(j + 1, n):\n            if li[i] &lt; li[min]:\n                min = i\n        # \u5faa\u73af\u7ed3\u675f\u65f6\uff0cmin\u6307\u5411\u7684\u662f\u6700\u5c0f\u7684\u6570\uff0c\u628a\u6700\u5c0f\u7684\u6570\u653e\u5230\u5269\u4e0b\u7684\u65e0\u5e8f\u5e8f\u5217\u7684\u6700\u524d\u9762\n        li[min], li[j] = li[j], li[min]\n\n\nif __name__ == '__main__':\n    l = [4, 2, 3, 5, 1]\n    l = [5, 4, 3, 2, 1]\n    select_sort(l)\n    print(l)\n    # \u7a33\u5b9a\u6027\uff1a\u4e0d\u7a33\u5b9a\n    # \u6700\u574f\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(n^2)\n    # \u6700\u4f18\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(n^2)\n</code></pre>"},{"location":"python/tcp-udp/TCP%E9%80%9A%E8%AE%AF/","title":"TCP\u901a\u8baf","text":""},{"location":"python/tcp-udp/TCP%E9%80%9A%E8%AE%AF/#tcp_server","title":"TCP_Server","text":"<pre><code>import socket\n\ntcp_server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\ntcp_server.bind(('localhost', 8080))\ntcp_server.listen(5)\ntcp_client, tcp_client_ip_port = tcp_server.accept()\ntcp_client_data = tcp_client.recv(1024).decode('utf-8')\nhost = tcp_client_ip_port[0] + ':' + str(tcp_client_ip_port[1])\nprint(host+':',tcp_client_data)\ntcp_client.send('\u670d\u52a1\u7aef\u5df2\u6536\u5230\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u6d88\u606f\uff01'.encode('utf-8'))\n</code></pre>"},{"location":"python/tcp-udp/TCP%E9%80%9A%E8%AE%AF/#tcp_client","title":"TCP_Client","text":"<pre><code>import socket\n\ntcp_client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\ntcp_client.connect(('localhost', 8080))\ntcp_client.send('\u6211\u662ftcp\u5ba2\u6237\u7aef\uff01'.encode('utf-8'))\nprint(tcp_client.recv(1024).decode('utf-8'))\n</code></pre>"},{"location":"python/tcp-udp/TCP%E9%80%9A%E8%AE%AF/#tcp_server_client","title":"TCP_Server_Client","text":"<pre><code>import socket\n\n\ndef send_data(tcp_socket, tcp_address):\n    tcp_socket.connect(tcp_address)\n    tcp_socket.sendto(input('\u8bf7\u8f93\u5165\u8981\u53d1\u9001\u7684\u5185\u5bb9\uff1a').encode('utf-8'), tcp_address)\n    print(tcp_socket.recv(1024).decode('utf-8'))\n\n\ndef recv_data(tcp_socket, tcp_address):\n    tcp_socket.bind(tcp_address)\n    tcp_socket.listen(5)\n    tcp_client, tcp_client_ip_port = tcp_socket.accept()\n    tcp_client_data = tcp_client.recv(1024).decode('utf-8')\n    host = tcp_client_ip_port[0] + ':' + str(tcp_client_ip_port[1])\n    print(host + ':', tcp_client_data)\n    tcp_client.send('\u670d\u52a1\u7aef\u5df2\u6536\u5230\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u6d88\u606f\uff01'.encode('utf-8'))\n\n\nif __name__ == '__main__':\n    tcp_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    tcp_address = ('localhost', 8080)\n    # \u4e0d\u7ecf\u5386TIME_WAIT\u7684\u8fc7\u7a0b, \u7acb\u5373\u5173\u95edsocket\u5e76\u91ca\u653e\u7aef\u53e3\n    tcp_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, True)\n    while True:\n        choice = input('1\u3001\u53d1\u9001\\t2\u3001\u63a5\u6536\\n')\n        if choice == '1':\n            send_data(tcp_socket, tcp_address)\n        if choice == '2':\n            recv_data(tcp_socket, tcp_address)\n</code></pre>"},{"location":"python/tcp-udp/UDP%E9%80%9A%E8%AE%AF/","title":"UDP\u901a\u8baf","text":""},{"location":"python/tcp-udp/UDP%E9%80%9A%E8%AE%AF/#udp_server","title":"UDP_Server","text":"<pre><code>import socket\n\n# udp\u670d\u52a1\u7aef\nudp_server = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)\nudp_server.bind(('', 8080))\n\n# recv()\u63a5\u6536\u5ba2\u6237\u7aef\u53d1\u6765\u7684\u6570\u636e\n# udp_client_data = udp_server.recv(1024).decode('utf-8')\n# print(udp_client_data)\n\n# recvfrom()\u63a5\u6536\u4e00\u4e2a\u5143\u7ec4\n# \u7b2c\u4e00\u4e2a\u5143\u9001\u662f\u5ba2\u6237\u7aef\u53d1\u6765\u7684\u6570\u636e\n# \u7b2c\u4e8c\u4e2a\u5143\u7d20\u662f\u4e00\u4e2a\u5305\u542b\u5ba2\u6237\u7aefip\u548cport\u7684\u5143\u7ec4\nudp_client_data = udp_server.recvfrom(1024)\nprint(udp_client_data[0].decode('utf-8'), udp_client_data[1])\n</code></pre>"},{"location":"python/tcp-udp/UDP%E9%80%9A%E8%AE%AF/#udp_client","title":"UDP_Client","text":"<pre><code>import socket\n\n# udp\u5ba2\u6237\u7aef\nudp_client = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)\nudp_client.sendto('\u6211\u662fudp\u5ba2\u6237\u7aef'.encode('utf-8'), ('localhost', 8080))\n</code></pre>"},{"location":"python/tcp-udp/UDP%E9%80%9A%E8%AE%AF/#udp_server_client","title":"UDP_Server_Client","text":"<pre><code>import socket\n\n\ndef send_data(udp_socket, udp_address):\n    udp_socket.sendto(input('\u8bf7\u8f93\u5165\u8981\u53d1\u9001\u7684\u5185\u5bb9\uff1a').encode('utf-8'), udp_address)\n\n\ndef recv_data(udp_socket):\n    data, ip_port = udp_socket.recvfrom(1024)\n    ip, port = ip_port\n    host = ip + ':' + str(port)\n    print(host + ':', data.decode('utf-8'))\n\n\nif __name__ == '__main__':\n    udp_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)\n    udp_address = ('localhost', 8081)\n    udp_socket.bind(udp_address)\n    while True:\n        choice = input('1\u3001\u53d1\u9001\\t2\u3001\u63a5\u6536\\n')\n        if choice == '1':\n            send_data(udp_socket, udp_address)\n        if choice == '2':\n            recv_data(udp_socket)\n</code></pre>"},{"location":"python/tcp-udp/%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/","title":"\u6587\u4ef6\u4e0b\u8f7d","text":"<p>\u4f7f\u7528argparse\u5e93\u5b9e\u73b0\u547d\u4ee4\u884c</p> <p>\u4f7f\u7528pathlib\u5e93\u5b8c\u6210\u76ee\u5f55\u3001\u6587\u4ef6\u90e8\u5206</p> <p>\u4f7f\u7528socket\u5e93\u5b8c\u6210tcp\u4e0b\u8f7d</p> <p>\u4f7f\u7528concurrent.futures\u5e93\u5b9e\u73b0\u7ebf\u7a0b\u6c60</p>"},{"location":"python/tcp-udp/%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/#_2","title":"\u670d\u52a1\u7aef","text":"<pre><code>import argparse\nimport os\nimport pathlib\nimport socket\nfrom concurrent.futures import ThreadPoolExecutor\n\n\nclass CLI(object):\n    def __init__(self):\n        parser = argparse.ArgumentParser(\n            prog='FileTransfer',\n            description='Download the file from server to client by socket',\n            epilog='www.911205.xyz',\n        )\n\n        # \u53ef\u9009\u53c2\u6570\n        parser.add_argument('-i', dest='ip', help='\u670d\u52a1\u5668\u5730\u5740', default='0.0.0.0', type=str)\n        parser.add_argument('-p', dest='port', help='\u670d\u52a1\u5668\u7aef\u53e3', default=9876, type=int)\n        parser.add_argument('-f', dest='file', help='\u670d\u52a1\u5668\u6587\u4ef6, \u652f\u6301\u76f8\u5bf9\u8def\u5f84\u548c\u7edd\u5bf9\u8def\u5f84', type=str)\n        parser.add_argument('-s', dest='size', help='\u5355\u6b21\u4f20\u8f93\u6587\u4ef6\u5927\u5c0f, \u9ed8\u8ba41024\u5b57\u8282(Byte), \u53731KB', default=1024, type=int)\n\n        args = parser.parse_args()\n        print(f'\u670d\u52a1\u5668\u76d1\u542c\u5730\u5740: {args.ip}')\n        print(f'\u670d\u52a1\u5668\u76d1\u542c\u7aef\u53e3: {args.port}')\n        print(f'\u670d\u52a1\u5668\u76d1\u542c\u6587\u4ef6: {pathlib.Path(args.file).resolve()}')\n        print(f'\u6bcf\u6b21\u4f20\u9001\u6587\u4ef6\u5927\u5c0f: {args.size}\u5b57\u8282')\n\n        SendFile(*args.__dict__.values())\n\n\nclass SendFile:\n    def __init__(self, ip: str, port: int, file: str, size: int):\n        self.file, self.file_name = self.get_file(file)\n\n        # tcp\u670d\u52a1\u7aef\u5957\u63a5\u5b57\n        self.tcp_server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n        # \u5173\u95ed\u540e\u7acb\u5373\u91ca\u653e\u7aef\u53e3(\u4e0d\u7ecf\u5386TIME_WAIT\u9636\u6bb5)\n        self.tcp_server_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, True)\n        # \u7ed1\u5b9a\u7aef\u53e3\n        self.tcp_server_socket.bind((ip, port))\n        # \u4e3b\u52a8\u5957\u63a5\u5b57\u53d8\u88ab\u52a8\n        self.tcp_server_socket.listen(os.cpu_count()*2)\n\n\n        # \u63d0\u4f9b\u4e00\u6b21\u6027\u4e0b\u8f7d\u670d\u52a1\n        # # \u83b7\u53d6\u5ba2\u6237\u7aef\u7684\u5957\u63a5\u5b57\n        # self.client_socket, clinet_info = self.tcp_server_socket.accept()\n        # self.client_socket.send(file_name.encode('utf-8'))\n        # # \u53d1\u9001\u6587\u4ef6\n        # self.send_file(file, clinet_info)\n\n        # \u542f\u7528\u7ebf\u7a0b\u6c60\n        thread_pool = ThreadPoolExecutor(max_workers=os.cpu_count()) \n\n        # \u63d0\u4f9b\u591a\u6b21\u4e0b\u8f7d\u670d\u52a1(\u670d\u52a1\u5668\u4e0d\u5173\u95ed, \u591a\u4e2a\u5ba2\u6237\u7aef\u5747\u53ef\u4e0b\u8f7d)\n        while True:\n            self.client_socket, clinet_info = self.tcp_server_socket.accept()\n            # self.client_socket.send(file_name.encode('utf-8'))\n            # self.send_file(file, size, clinet_info)\n\n            # \u4f7f\u7528\u7ebf\u7a0b\u6c60\u540c\u65f6\u5904\u7406\u591a\u4e2a\u8bf7\u6c42\n            thread_pool.submit(self.send_file_in_thread_pool, *[size, clinet_info])\n\n    def get_file(self, file):\n        \"\"\"\u83b7\u53d6\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\u548c\u540d\u79f0\"\"\"\n\n        file, file_name = self.is_file(file)\n        print(f'\u51c6\u5907\u53d1\u9001\u6587\u4ef6: {file_name}')\n        return file, file_name\n\n    @staticmethod\n    def is_file(file):\n        \"\"\"\u5224\u65ad\u6587\u4ef6\u662f\u5426\u5b58\u5728\u5e76\u8fd4\u56de\u7edd\u5bf9\u8def\u5f84\u548c\u6587\u4ef6\u540d\u79f0\"\"\"\n\n        file = pathlib.Path(file)\n        if not file.is_file():\n            raise FileNotFoundError(f'\u6587\u4ef6{file}\u4e0d\u5b58\u5728') \n        return file.resolve(), file.name\n\n    def send_file_in_thread_pool(self, size, clinet_info):\n        \"\"\"\u4f7f\u7528\u8fdb\u7a0b\u6c60, \u53ef\u540c\u65f6\u5904\u7406\u591a\u4e2a\u5ba2\u6237\u7aef\u8bf7\u6c42\"\"\"\n\n        self.client_socket.send(self.file_name.encode('utf-8'))\n        self.send_file(size, clinet_info)\n\n    def send_file(self, size, clinet_info):\n        \"\"\"\u53d1\u9001\u6587\u4ef6\u5230\u5ba2\u6237\u7aef\"\"\"\n\n        with open(self.file, \"rb\") as f:\n            while True:\n                # \u8bfb\u53d6\u6570\u636e\n                result = f.read(size)\n                if result:\n                    # \u53d1\u9001\u6570\u636e\n                    self.client_socket.send(result)\n                else:\n                    print(f\"\u6587\u4ef6\u4f20\u8f93\u5b8c\u6210...{clinet_info}\")\n                    break\n        self.close_socket()\n\n    def close_socket(self):\n        \"\"\"\u5173\u95ed\u5957\u63a5\u5b57\"\"\"\n\n        # \u5173\u95ed\u5957\u63a5\u5b57 -&gt; \u4e0d\u518d\u8fdb\u884c\u6536\u53d1\u6570\u636e\n        self.client_socket.close()\n        # \u5173\u95ed\u5957\u63a5\u5b57 -&gt; \u4e0d\u518d\u63a5\u6536\u5176\u4ed6\u5ba2\u6237\u7aef\u4e0e\u5176\u5efa\u7acb\u8fde\u63a5\n        # self.tcp_server_socket.close()\n\n\ndef main():\n    try:\n        CLI()\n    except FileNotFoundError as e:\n        print(f'\u9519\u8bef: {e}')\n    except Exception as e:\n        print(f'\u9519\u8bef: {e}')\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"python/tcp-udp/%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/#_3","title":"\u5ba2\u6237\u7aef","text":"<pre><code>import argparse\nimport pathlib\nimport socket\nfrom typing import Union\n\n\nclass CLI(object):\n    def __init__(self):\n        parser = argparse.ArgumentParser(\n            prog='FileTransfer',\n            description='Download the file from server to client by socket',\n            epilog='www.911205.xyz',\n        )\n\n        # \u4f4d\u7f6e\u53c2\u6570\n        parser.add_argument('ip', help='\u670d\u52a1\u5668\u5730\u5740', type=str)\n        # \u53ef\u9009\u53c2\u6570\n        parser.add_argument('-p', dest='port', help='\u670d\u52a1\u5668\u7aef\u53e3', default=9876, type=int)\n        parser.add_argument('-o', dest='output', help='\u6587\u4ef6\u8f93\u51fa\u4f4d\u7f6e, \u540e\u9762\u6839\u6587\u4ef6\u540d\u5219\u8868\u793a\u91cd\u547d\u540d', type=str)\n\n        args = parser.parse_args()\n        print(f'\u670d\u52a1\u5668\u76d1\u542c\u5730\u5740: {args.ip}')\n        print(f'\u670d\u52a1\u5668\u76d1\u542c\u7aef\u53e3: {args.port}')\n\n        ReceiveFile(*args.__dict__.values())\n\n\nclass ReceiveFile:\n    def __init__(self, ip: str, port: int, output: Union[str, None]):\n         # \u521b\u5efatcp\u5ba2\u6237\u7aef\u5957\u63a5\u5b57\n        self.tcp_client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n        # \u5efa\u7acb\u8fde\u63a5\n        self.tcp_client_socket.connect((ip, port))\n\n        # \u63a5\u6536\u6587\u4ef6\u540d\u79f0\n        self.file_name = self.tcp_client_socket.recv(1024).decode('utf-8')\n        print(f'\u51c6\u5907\u4e0b\u8f7d\u6587\u4ef6: {self.file_name}')\n\n        # \u4e0b\u8f7d\u6587\u4ef6\n        self.receive_file(output)\n\n    def receive_file(self, output):\n        if output:\n            file = pathlib.Path(output)\n            if file.is_dir():\n                file = file.joinpath(self.file_name)\n        else:\n            file = pathlib.Path(self.file_name)\n        file = file.resolve()\n        print(f'\u6587\u4ef6\u53e6\u5b58\u4e3a: {file}')\n\n        with open(f'{file}', \"wb\") as f:\n            while True:\n                # \u63a5\u6536\u6570\u636e\n                recv_data = self.tcp_client_socket.recv(1024)\n                if recv_data:\n                    # \u5199\u5165\u6570\u636e\n                    f.write(recv_data)\n                else:\n                    print(\"\u6587\u4ef6\u4e0b\u8f7d\u6210\u529f...\")\n                    break\n        self.close_socket()\n\n    def close_socket(self):\n        \"\"\"\u5173\u95ed\u5957\u63a5\u5b57\"\"\"\n\n        self.tcp_client_socket.close()\n\n\ndef main():\n    try:\n        CLI()\n    except ConnectionRefusedError as e:\n        print('\u9519\u8bef: \u65e0\u6cd5\u8fde\u63a5\u670d\u52a1\u5668')\n    except Exception as e:\n        print(f'\u9519\u8bef: {e}')\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"python/thread-process-coroutine/%E5%8D%8F%E7%A8%8B/","title":"\u534f\u7a0b","text":""},{"location":"python/thread-process-coroutine/%E5%8D%8F%E7%A8%8B/#1yield","title":"\u4ee3\u78011(yield)","text":"<pre><code>import time\n\n\ndef work_one():\n    for _ in range(3):\n        print('-----\u534f\u7a0b1-----')\n        yield\n        time.sleep(0.5)\n\n\ndef work_two():\n    for _ in range(3):\n        print('-----\u534f\u7a0b2-----')\n        yield\n        time.sleep(0.5)\n\n\ndef main():\n    wo, wt = work_one(), work_two()\n    for _ in range(3):\n        next(wo)\n        next(wt)\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"python/thread-process-coroutine/%E5%8D%8F%E7%A8%8B/#2greenlet","title":"\u4ee3\u78012(greenlet)","text":"<pre><code>import time\n\nfrom greenlet import greenlet\n\n\ndef main():\n\n    def work_one():\n        while True:\n            print('-----A-----')\n            gl_two.switch()\n            time.sleep(0.5)\n\n\n    def work_two():\n        while True:\n            print('-----B-----')\n            gl_one.switch()\n            time.sleep(0.5)\n\n\n\n    gl_one = greenlet(work_one)\n    gl_two = greenlet(work_two)\n\n    gl_one.switch()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u901a\u8fc7greenlet\u5b9e\u73b0\u7684\u534f\u7a0b\uff0c\u9700\u8981\u4eba\u5de5\u5207\u6362</p>"},{"location":"python/thread-process-coroutine/%E5%8D%8F%E7%A8%8B/#3gevent","title":"\u4ee3\u78013(gevent)","text":"<p>\u7528\u6cd51: \u4f7f\u7528monkey.patch_all()\u5b9e\u73b0\uff0c\u5f53\u9047\u5230\u8017\u65f6\u60c5\u51b5\u65f6\u81ea\u52a8\u5207\u6362\u534f\u7a0b</p> <pre><code>import time\n\nimport gevent\nfrom gevent import monkey\n\n# \u7ed9\u7a0b\u5e8f\u6253\u8865\u4e01, \u6709\u8017\u65f6\u64cd\u4f5c(\u4f8b\u5982time.sleep)\u65f6\nmonkey.patch_all()\n\n\ndef work1():\n    while True:\n        print('work1...')\n        time.sleep(1)\n\n\ndef work2():\n    while True:\n        print('work2...')\n        time.sleep(1)\n\n\ndef main():\n    w1 = gevent.spawn(work1)\n    w2 = gevent.spawn(work2)\n    w1.join()\n    w2.join()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u7528\u6cd52: \u4e0d\u4f7f\u7528monkey.patch_all()\u7684\u60c5\u51b5\u4e0b\u8981\u5b9e\u73b0\u534f\u7a0b\u7684\u81ea\u52a8\u5207\u6362\uff0c\u9700\u4f7f\u7528gevent\u4e2d\u81ea\u5df1\u7684\u8017\u65f6\u6a21\u5757</p> <pre><code>import gevent\n\n\ndef work1():\n    while True:\n        print('work1...')\n        # \u5c06\u7a0b\u5e8f\u4e2d\u7528\u5230\u7684\u8017\u65f6\u64cd\u4f5c\u7684\u4ee3\u7801\uff0c\u4f7f\u7528gevent\u4e2d\u81ea\u5df1\u5b9e\u73b0\u7684\u6a21\u5757\n        gevent.sleep(1)\n\n\ndef work2():\n    while True:\n        print('work2...')\n        # \u4f7f\u7528gevent\u4e2d\u81ea\u5df1\u5b9e\u73b0\u7684\u6a21\u5757\uff0c\u4e0d\u9700\u8981monkey.patch_all()\n        gevent.sleep(1)\n\n\ndef main():\n    w1 = gevent.spawn(work1)\n    w2 = gevent.spawn(work2)\n    w1.join()\n    w2.join()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u7528\u6cd53: \u6279\u91cfjoin\u534f\u7a0b\u548c\u4f20\u53c2</p> <pre><code>import gevent\n\n\ndef work1(msg):\n    while True:\n        print(msg)\n        gevent.sleep(1)\n\n\ndef work2(msg):\n    while True:\n        print(msg)\n        gevent.sleep(1)\n\n\ndef main():\n    # joinall\u53ef\u6279\u91cf\u6dfb\u52a0\u534f\u7a0b\n    gevent.joinall(\n        [\n            # \"I'm work1\" \u5373\u662f\u53c2\u6570\uff0c\u4f1a\u4f20\u7ed9\u524d\u9762\u7684\u51fd\u6570\uff0c\u5373work1\n            gevent.spawn(work1, \"I'm work1\"),\n            gevent.spawn(work2, \"I'm work2\")\n        ]\n    )\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u901a\u8fc7gevent\u5b9e\u73b0\u7684\u534f\u7a0b\uff0c\u4e0d\u9700\u8981\u4eba\u5de5\u5207\u6362\uff0c\u5f53\u68c0\u6d4b\u5230\u8017\u65f6\u64cd\u4f5c\u65f6\u4f1a\u81ea\u52a8\u5207\u6362</p>"},{"location":"python/thread-process-coroutine/%E5%8D%8F%E7%A8%8B/#_2","title":"\u603b\u7ed3","text":"<ul> <li>\u8fdb\u7a0b\u662f\u8d44\u6e90\u5206\u914d\u7684\u5355\u4f4d\uff0c\u540c\u4e00\u4e2a\u8fdb\u7a0b\u4e0b\u7684\u6240\u6709\u7ebf\u7a0b\u5171\u4eab\u5168\u90e8\u8d44\u6e90</li> <li>\u7ebf\u7a0b\u662f\u64cd\u4f5c\u7cfb\u7edf\u8c03\u5ea6\u7684\u5355\u4f4d</li> <li>\u8fdb\u7a0b\u5207\u6362\u9700\u8981\u7684\u8d44\u6e90\u5f88\u6700\u5927\uff0c\u6548\u7387\u5f88\u4f4e</li> <li>\u5728\u4e0d\u8003\u8651GIL\u7684\u60c5\u51b5\u4e0b\uff0c\u7ebf\u7a0b\u5207\u6362\u9700\u8981\u7684\u8d44\u6e90\u4e00\u822c\uff0c\u6548\u7387\u4e00\u822c</li> <li>\u534f\u7a0b\u5207\u6362\u4efb\u52a1\u8d44\u6e90\u5f88\u5c0f\uff0c\u6548\u7387\u9ad8</li> <li>\u8fdb\u7a0b\u3001\u7ebf\u7a0b\u4e0d\u53d7\u63a7\u5236\uff0c\u534f\u7a0b\u53d7\u63a7\u5236</li> <li>\u534f\u7a0b\u662f\u5e76\u53d1\u4e0d\u662f\u5e76\u884c</li> </ul>"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E7%BA%BF%E7%A8%8B/","title":"\u591a\u7ebf\u7a0b","text":""},{"location":"python/thread-process-coroutine/%E5%A4%9A%E7%BA%BF%E7%A8%8B/#1","title":"\u4ee3\u78011","text":"<pre><code>import threading\nimport time\n\n\ndef say_something(something):\n    for _ in range(3):\n        print(something)\n        time.sleep(0.5)\n\n\ndef main():\n    print(f'\u5f00\u59cb\u65f6\u95f4: {time.time()}')\n    thread_one = threading.Thread(target=say_something, args=('balabale...',))\n    thread_one.start()\n    thread_two = threading.Thread(target=say_something, args=('makabaka...',))\n    thread_two.start()\n    print(f'\u7ed3\u675f\u65f6\u95f4: {time.time()}')\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>\u5f00\u59cb\u65f6\u95f4: 1659739324.507312\nbalabale...\nmakabaka...\n\u7ed3\u675f\u65f6\u95f4: 1659739324.5080872\nbalabale...\nmakabaka...\nbalabale...\nmakabaka...\n</code></pre> <p>\u89e3\u91ca:</p> <ul> <li>\u5148\u6267\u884cthread_one\u540e\u6267\u884cthread_two\uff0c\u4f46balabal\u548cmakabaka\u5374\u662f\u4ea4\u66ff\u8f93\u51fa\uff0c\u8bc1\u660e\u662f\u591a\u7ebf\u7a0b</li> <li>\u7ed3\u675f\u65f6\u95f4\u4e0d\u662f\u6700\u540e\u8f93\u51fa\uff0c\u662f\u56e0\u4e3a\u4e3b\u7ebf\u7a0b\u4ee3\u7801\u81ea\u4e0a\u800c\u4e0b\u6267\u884c\uff0cthread_one\u548cthread_two\u5219\u662f\u5f00\u542f\u5b50\u7ebf\u7a0b\u6267\u884c</li> <li>\u6253\u5370\u7ed3\u675f\u65f6\u95f4\u8f93\u51fa\u540e\uff0c\u4f9d\u65e7\u8f93\u51fabalabal\u548cmakabak\u7684\u539f\u56e0\u662f\uff0c\u4e3b\u7ebf\u7a0b\u4ee3\u7801\u6267\u884c\u5b8c\u6bd5\u540e\u5728\u7b49\u5f85\u5b50\u7ebf\u7a0b\u4ee3\u7801\u6267\u884c\u5b8c\u6bd5</li> </ul>"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E7%BA%BF%E7%A8%8B/#2","title":"\u4ee3\u78012(\u7ebf\u7a0b\u540c\u6b65)","text":"<pre><code>import threading\nimport time\n\n\ndef say_something(something):\n    for _ in range(3):\n        print(something)\n        time.sleep(0.5)\n\n\ndef main():\n    print(f'\u5f00\u59cb\u65f6\u95f4: {time.time()}')\n    thread_one = threading.Thread(target=say_something, args=('balabale...',))\n    thread_one.start()\n    thread_one.join()\n    thread_two = threading.Thread(target=say_something, args=('makabaka...',))\n    thread_two.start()\n    print(f'\u7ed3\u675f\u65f6\u95f4: {time.time()}')\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa\uff1a</p> <pre><code>\u5f00\u59cb\u65f6\u95f4: 1659740206.5571399\nbalabale...\nbalabale...\nbalabale...\nmakabaka...\n\u7ed3\u675f\u65f6\u95f4: 1659740208.073323\nmakabaka...\nmakabaka...\n</code></pre> <p>\u89e3\u91ca\uff1a</p> <p>\u5bf9\u6bd4\u4ee3\u78011\uff0cthread_one\u8fdb\u7a0b\u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\u4e3b\u8fdb\u7a0b\u624d\u7ee7\u7eed\u6267\u884c\uff0c\u539f\u56e0\u662fthread_one\u4f7f\u7528\u4e86join\u65b9\u6cd5\uff0c\u5373\u7ebf\u7a0b\u540c\u6b65, \u4f1a\u4f7f\u4e3b\u7ebf\u7a0b\u8fdb\u5165\u963b\u585e\u72b6\u6001\uff0c\u76f4\u5230\u5b50\u7ebf\u7a0b\u6267\u884c\u5b8c\u6bd5</p>"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E7%BA%BF%E7%A8%8B/#3","title":"\u4ee3\u78013(\u5b88\u62a4\u7ebf\u7a0b)","text":"<pre><code>import threading\nimport time\n\n\ndef say_something(something):\n    for _ in range(3):\n        print(something)\n        time.sleep(0.5)\n\n\ndef main():\n    print(f'\u5f00\u59cb\u65f6\u95f4: {time.time()}')\n    thread_one = threading.Thread(target=say_something, args=('balabale...',))\n    thread_one.start()\n    thread_one.join()\n    thread_two = threading.Thread(target=say_something, args=('makabaka...',))\n    thread_two.setDaemon(True)\n    thread_two.start()\n    print(f'\u7ed3\u675f\u65f6\u95f4: {time.time()}')\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>\u5f00\u59cb\u65f6\u95f4: 1659740624.978488\nbalabale...\nbalabale...\nbalabale...\nmakabaka...\n\u7ed3\u675f\u65f6\u95f4: 1659740626.495806\n</code></pre> <p>\u89e3\u91ca:</p> <p>\u5bf9\u6bd4\u4ee3\u78012\uff0cmakaba\u53ea\u8f93\u51fa\u4e00\u6b21\uff0c\u662f\u56e0\u4e3a\u7ed9thread_two\u8bbe\u7f6e\u5b88\u62a4\u7ebf\u7a0b<code>setDaemon(True)</code>\uff0c\u5373\u4e3b\u7ebf\u6267\u884c\u5b8c\u6bd5\u540e\u7acb\u5373\u7ed3\u675f\u5b50\u7ebf\u7a0b</p> <p>\u53e6\u5916\uff0c<code>setDaemon(True)</code>\u5fc5\u987b\u5728\u8c03\u7528stat()\u4e4b\u524d\u8bbe\u7f6e\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u4e3b\u7ebf\u7a0b\u629b\u51fa\u5f02\u5e38\uff0c\u4f46\u5b50\u7ebf\u7a0b\u5df2\u7ecf\u6b63\u5e38\u8fd0\u884c</p>"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B9%8B%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E4%B8%8E%E4%BA%92%E6%96%A5%E9%94%81/","title":"\u591a\u7ebf\u7a0b\u4e4b\u8d44\u6e90\u7ade\u4e89\u4e0e\u4e92\u65a5\u9501","text":""},{"location":"python/thread-process-coroutine/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B9%8B%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E4%B8%8E%E4%BA%92%E6%96%A5%E9%94%81/#_2","title":"\u8d44\u6e90\u7ade\u4e89","text":"<pre><code>import threading\nimport time\n\n\nnum = 0\n\n\ndef add_num_one(count):\n    global num\n    for _ in range(count):\n        num +=1\n    print(f'add_num_one\u7ed3\u679c: {num}')\n\n\ndef add_num_two(count):\n    global num\n    for _ in range(count):\n        num +=1\n    print(f'add_num_two\u7ed3\u679c: {num}')\n\n\ndef main():\n    print(f'\u539f\u59cb\u6570\u5b57: {num}')\n\n    thread_one = threading.Thread(target=add_num_one, args=(1000000,))\n    thread_one.start()\n    thread_two = threading.Thread(target=add_num_two, args=(1000000,))\n    thread_two.start()\n\n    while threading.active_count() != 1:\n        time.sleep(0.5)\n    print(f'\u6700\u7ec8\u6570\u5b57: {num}')\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>\u539f\u59cb\u6570\u5b57: 0\nadd_num_one\u7ed3\u679c: 1126618\nadd_num_two\u7ed3\u679c: 1382806\n\u6700\u7ec8\u6570\u5b57: 1382806\n</code></pre> <p>\u89e3\u91ca:</p> <p>add_num_one\u548cadd_num_two\u7684\u53c2\u6570\u90fd\u662f1000000\uff0c\u4f46\u6700\u7ec8\u6570\u5b57\u7adf\u7136\u4e0d\u662f2000000\uff0c\u662f\u56e0\u4e3a\u53d1\u751f\u4e86\u8d44\u6e90\u7ade\u4e89\uff0c\u5373\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u5bf9\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u64cd\u4f5c\uff0c\u4f1a\u51fa\u73b0\u8d44\u6e90\u7ade\u4e89\uff0c\u5bfc\u81f4\u6570\u636e\u7ed3\u679c\u4e0d\u51c6\u786e</p> <p>\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u53c2\u6570\u4e0d\u662f1000000\u800c\u662f1000\uff0c\u7ed3\u679c\u53ef\u80fd\u662f\u6b63\u786e\u7684\uff0c\u6b64\u53c2\u6570\u5b58\u5728\u4e00\u4e2a\u4e34\u754c\u70b9\uff0c\u8ddfcpu\u9891\u7387\u6709\u5173\uff0c\u4f46\u7ed3\u679c\u6b63\u786e\u4e0d\u80fd\u8868\u793a\u4e0d\u4f1a\u53d1\u751f\u8d44\u6e90\u7ade\u4e89\uff0c\u53ea\u662f\u56e0\u4e3acpu\u901f\u5ea6\u592a\u5feb\uff0c\u5728\u8fdb\u7a0b\u8c03\u5ea6\u4e4b\u524d\u5df2\u7ecf\u5c06\u7ed3\u679c\u8ba1\u7b97\u5b8c\u6bd5\uff0c\u5bfc\u81f4\u6570\u636e\u6b63\u786e</p>"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B9%8B%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E4%B8%8E%E4%BA%92%E6%96%A5%E9%94%81/#_3","title":"\u4e92\u65a5\u9501","text":"<pre><code>import threading\nimport time\n\n\nnum = 0\n\n# \u4e92\u65a5\u9501\nmutex_lock = threading.Lock()\n\ndef add_num_one(count):\n    global num\n    mutex_lock.acquire()\n    for i in range(count):\n        num +=1\n    mutex_lock.release()\n    print(f'add_num_one\u7ed3\u679c: {num}')\n\n\ndef add_num_two(count):\n    global num\n    mutex_lock.acquire()\n    for i in range(count):\n        num +=1\n    mutex_lock.release()\n    print(f'add_num_two\u7ed3\u679c: {num}')\n\n\ndef main():\n    print(f'\u539f\u59cb\u6570\u5b57: {num}')\n\n    thread_one = threading.Thread(target=add_num_one, args=(1000000,))\n    thread_one.start()\n    thread_two = threading.Thread(target=add_num_two, args=(1000000,))\n    thread_two.start()\n\n    while threading.active_count() != 1:\n        time.sleep(0.5)\n    print(f'\u6700\u7ec8\u6570\u5b57: {num}')\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>\u539f\u59cb\u6570\u5b57: 0\nadd_num_one\u7ed3\u679c: 1000000\nadd_num_two\u7ed3\u679c: 2000000\n\u6700\u7ec8\u6570\u5b57: 2000000\n</code></pre> <p>\u7ed3\u8bba\uff1a\u4e92\u65a5\u9501\u89e3\u51b3\u4e86\u8d44\u6e90\u7ade\u4e89\u7684\u95ee\u9898</p> <p>\u4fee\u6539\u6838\u5fc3\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>def add_num_one(count):\n    global num\n    for i in range(count):\n        # \u7cbe\u786e\u52a0\u9501\uff0c\u4f18\u70b9\u662f\u7cbe\u786e\u9488\u5bf9\u53d1\u751f\u8d44\u6e90\u7ade\u4e89\u7684\u6838\u5fc3\u4ee3\u7801\uff0c\u7f3a\u70b9\u662f\u9891\u7e41\u7684\u52a0\u9501\u89e3\u9501\n        mutex_lock.acquire()\n        num +=1\n        mutex_lock.release()\n    print(f'add_num_one\u7ed3\u679c: {num}')\n\n\ndef add_num_two(count):\n    global num\n    # \u7c97\u7565\u52a0\u9501\uff0c\u4f18\u70b9\u65f6\u51cf\u5c11\u52a0\u9501\u89e3\u9501\u7684\u9891\u7387\uff0c\u7f3a\u70b9\u662f\u65e0\u6cd5\u7cbe\u786e\u5b9a\u4f4d\u53d1\u751f\u8d44\u6e90\u7ade\u4e89\u7684\u6838\u5fc3\u4ee3\u7801\n    mutex_lock.acquire()\n    for i in range(count):\n        num +=1\n    mutex_lock.release()\n    print(f'add_num_two\u7ed3\u679c: {num}')\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>\u539f\u59cb\u6570\u5b57: 0\nadd_num_two\u7ed3\u679c: 1042738\nadd_num_one\u7ed3\u679c: 2000000\n\u6700\u7ec8\u6570\u5b57: 2000000\n</code></pre> <p>\u7ed3\u679c\u4e0d\u518d\u662f add_num_one\u76841000000\u548cadd_num_two\u76842000000</p> <p>\u89e3\u91ca\uff1a</p> <p>cpu\u5728\u8c03\u5ea6\u8fdb\u7a0b\uff0c\u5f53\u8c03\u5ea6\u5230add_num_two\uff0c\u56e0\u4e3a\u4e92\u65a5\u9501\u52a0\u5728\u5faa\u73af\u5916\uff0c\u6240\u4ee5\u5927\u90e8\u5206\u8d44\u6e90\u662f\u5728\u8fdb\u884c num+=1 \u7684\u64cd\u4f5c</p> <p>\u800cadd_num_one\u7684\u4e92\u65a5\u9501\u52a0\u5728\u5faa\u73af\u5185\uff0c\u5927\u90e8\u5206\u8d44\u6e90\u662f\u5728\u8fdb\u884c\u52a0\u9501\u548c\u89e3\u9501\uff0c\u6240\u4ee5\u6bd4add_num_two\u6162</p> <p>\u6700\u7ec8\u5bfc\u81f4add_num_two\u7684\u6700\u7ec8\u7ed3\u679c\u57281000000\u52302000000\u4e4b\u95f4\uff0cadd_num_one\u6700\u7ec8\u7ed3\u679c\u4e00\u5b9a\u662f2000000</p>"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E8%BF%9B%E7%A8%8B/","title":"\u591a\u8fdb\u7a0b","text":"<pre><code>import os\nimport time\nfrom multiprocessing import Process\n\n\ndef sub_process(name, age, *args, **kwargs):\n    for _ in range(3):\n        print(f'\u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: {os.getpid()}')\n        print(f\"\u6211\u662f{name}, \u4eca\u5e74{age}\")\n        print(f'args: {args}, kwargs: {kwargs}')\n        print(f'\u7236\u8fdb\u7a0b\u7684pid\u662f: {os.getppid()}')\n        print()\n        time.sleep(1)\n\n\ndef main():\n    print(f'\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: {os.getpid()}')\n    process = Process(target=sub_process, args=('king', 18, 'balabala...', 'makabaka...'), kwargs={'key': 'value'})\n    process.start()\n    print('\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5')\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 74799\n\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5\n\u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 74801\n\u6211\u662fking, \u4eca\u5e7418\nargs: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'}\n\u7236\u8fdb\u7a0b\u7684pid\u662f: 74799\n\n\u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 74801\n\u6211\u662fking, \u4eca\u5e7418\nargs: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'}\n\u7236\u8fdb\u7a0b\u7684pid\u662f: 74799\n\n\u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 74801\n\u6211\u662fking, \u4eca\u5e7418\nargs: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'}\n\u7236\u8fdb\u7a0b\u7684pid\u662f: 74799\n</code></pre> <p>\u89e3\u91ca:</p> <p>main\u51fd\u6570\u662f\u4e3b\u8fdb\u7a0b\uff0c\u7531\u4e0b\u800c\u4e0b\u6267\u884c\uff0c\u5148\u8f93\u51fa\"\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 74799\", process.start()\u5f00\u542f\u5b50\u8fdb\u7a0b\uff0c\u7d27\u63a5\u7740\u8f93\u51fa\"\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5\", \u7136\u540e\uff0c\u5b50\u8fdb\u7a0b\u5f00\u59cb\u5faa\u73af3\u6b21\u8f93\u51fa</p> <p>\u4fee\u6539main\u51fd\u6570\u4ee3\u7801\uff0c\u52a0\u5165join\u65b9\u6cd5\u7684\u8c03\u7528:</p> <pre><code>def main():\n    print(f'\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: {os.getpid()}')\n    process = Process(target=sub_process, args=('king', 18, 'balabala...', 'makabaka...'), kwargs={'key': 'value'})\n    process.start()\n    process.join()\n    print('\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5')\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 75240\n\u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 75242\n\u6211\u662fking, \u4eca\u5e7418\nargs: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'}\n\u7236\u8fdb\u7a0b\u7684pid\u662f: 75240\n\n\u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 75242\n\u6211\u662fking, \u4eca\u5e7418\nargs: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'}\n\u7236\u8fdb\u7a0b\u7684pid\u662f: 75240\n\n\u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 75242\n\u6211\u662fking, \u4eca\u5e7418\nargs: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'}\n\u7236\u8fdb\u7a0b\u7684pid\u662f: 75240\n\n\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5\n</code></pre> <p>\u89e3\u91ca:</p> <p>\u5bf9\u6bd4\u4fee\u6539\u524d\u4ee3\u7801\u7684\u8f93\u51fa, \"\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5\"\u6700\u540e\u8f93\u51fa\uff0c\u662f\u56e0\u4e3ajoin()\u81f4\u4f7f\u4e3b\u8fdb\u7a0b\u8fdb\u5165\u963b\u585e\u72b6\u6001, \u7b49\u5f85\u5b50\u8fdb\u7a0b\u6267\u884c\u5b8c\u6bd5\u540e\u624d\u4f1a\u7ee7\u7eed\u6267\u884c</p> <p>\u518d\u6b21\u4fee\u6539main\u51fd\u6570\u4ee3\u7801, \u53d6\u6d88join()\u65b9\u6cd5, \u8bbe\u7f6e\u5b88\u62a4\u8fdb\u7a0b\uff1a</p> <pre><code>def main():\n    print(f'\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: {os.getpid()}')\n    process = Process(target=sub_process, args=('king', 18, 'balabala...', 'makabaka...'), kwargs={'key': 'value'})\n    process.daemon = True\n    process.start()\n    print('\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5')\n</code></pre> <p>\u6216\u52a0\u5165terminate()\u65b9\u6cd5\uff1a</p> <pre><code>def main():\n    print(f'\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: {os.getpid()}')\n    process = Process(target=sub_process, args=('king', 18, 'balabala...', 'makabaka...'), kwargs={'key': 'value'})\n    process.start()\n    process.terminate()\n    print('\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5')\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 75683\n\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5\n</code></pre> <p>\u89e3\u91ca:</p> <p><code>process.daemon = True</code>, \u548c\u524d\u9762\u8bf4\u5230\u591a\u7ebf\u7a0b\u4e00\u6837\u5fc5\u987b\u5728start\u4e4b\u524d\u8bbe\u5b9a</p> <p><code>process.terminate()</code>\u65b9\u6cd5\u90fd\u4f1a\u81f4\u4f7f\u4e3b\u8fdb\u7a0b\u5f3a\u5236\u7ed3\u675f\u5b50\u8fdb\u7a0b\u7684\u8fd0\u884c</p> <p>\u6700\u7ec8\u7ed3\u679c\u90fd\u662f\u5b50\u8fdb\u7a0b\u7684\u5185\u5bb9\u6ca1\u6709\u8f93\u51fa</p>"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E8%BF%9B%E7%A8%8B%E4%B9%8B%E8%BF%9B%E7%A8%8B%E6%B1%A0/","title":"\u591a\u8fdb\u7a0b\u4e4b\u8fdb\u7a0b\u6c60","text":"<pre><code>import os\nimport time\nfrom multiprocessing import Pool\n\n\ndef sub_process(name, age, *args, **kwargs):\n    for _ in range(2):\n        print(f'\u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: {os.getpid()}')\n        print(f\"\u6211\u662f{name}, \u4eca\u5e74{age}\")\n        print(f'args: {args}, kwargs: {kwargs}')\n        print(f'\u7236\u8fdb\u7a0b\u7684pid\u662f: {os.getppid()}')\n        print()\n        time.sleep(1)\n\n\ndef main():\n    print(f'\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: {os.getpid()}')\n\n    # \u521b\u5efa\u8fdb\u7a0b\u6c60\uff0c\u6700\u5927\u8fdb\u7a0b\u6570\u91cf\u7b49\u4e8e\u4e24\u500d\u7684CPU\u6838\u6570\n    pool = Pool(os.cpu_count() * 2)\n    for _ in range(2):\n        # \u4f7f\u7528\u8fdb\u7a0b\u6c60\u8c03\u7528\u5b50\u8fdb\u7a0b\n        pool.apply_async(sub_process, ('king', 18, 'balabala...', 'makabaka...'), {'key': 'value'})\n\n    # \u5173\u95ed\u8fdb\u7a0b\u6c60\uff0c\u4e4b\u540e\u4e0d\u518d\u63a5\u6536\u65b0\u7684\u8bf7\u6c42\n    pool.close()\n    # \u5fc5\u987b\u5148pool.close()\u4e4b\u540e\u624d\u80fd\u4f7f\u7528pool.join()\n    pool.join()\n    print('\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5')\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 80054\n\u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 80058\n\u6211\u662fking, \u4eca\u5e7418\nargs: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'}\n\u7236\u8fdb\u7a0b\u7684pid\u662f: 80054\n\n\u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 80059\n\u6211\u662fking, \u4eca\u5e7418\nargs: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'}\n\u7236\u8fdb\u7a0b\u7684pid\u662f: 80054\n\n\u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 80058\n\u6211\u662fking, \u4eca\u5e7418\nargs: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'}\n\u7236\u8fdb\u7a0b\u7684pid\u662f: 80054\n\n\u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 80059\n\u6211\u662fking, \u4eca\u5e7418\nargs: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'}\n\u7236\u8fdb\u7a0b\u7684pid\u662f: 80054\n\n\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5\n</code></pre>"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E8%BF%9B%E7%A8%8B%E4%B9%8B%E8%BF%9B%E7%A8%8B%E6%B1%A0%E9%97%B4%E9%80%9A%E4%BF%A1/","title":"\u591a\u8fdb\u7a0b\u4e4b\u8fdb\u7a0b\u6c60\u95f4\u901a\u4fe1","text":"<p>\u4f7f\u7528Manager\u5b8c\u6210\u8fdb\u7a0b\u6c60\u5185\u7684\u8fdb\u7a0b\u95f4\u901a\u4fe1</p> <pre><code>import os\nimport time\nfrom multiprocessing import Manager, Queue, Pool\n\n\ndef send_someting(queue: Queue, something):\n    print(f'\u53d1\u9001\u6d88\u606f: {something}, \u53d1\u9001\u6d88\u606f\u7684\u8fdb\u7a0bid: {os.getpid()}')\n    for _ in range(3):\n        send_time = time.time()\n        print(f'\u53d1\u9001\u65f6\u95f4: {send_time}')\n        queue.put((something, send_time))\n\n\ndef receive_something(queue: Queue):\n    # queue.qsize() \u662f\u6d88\u606f\u961f\u5217\u4e2d\u7684\u6d88\u606f\u6570\u91cf\n    while queue.qsize():\n        something, receive_time = queue.get()\n        print(f'\u63a5\u53d7\u6d88\u606f: {something}, \u63a5\u6536\u65f6\u95f4: {receive_time}, \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: {os.getpid()}')\n\n\ndef main():\n    print(f'\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: {os.getpid()}')\n\n    queue = Manager().Queue()\n    pool = Pool()\n\n    # \u53d1\u9001\u6d88\u606f\u7684\u8fdb\u7a0b\n    pool.apply_async(send_someting, (queue, 'Hello World'))\n    # \u56e0\u4e3a\u5199\u5165\u9700\u8981\u65f6\u95f4\uff0c\u8c28\u9632\u8fd8\u6ca1\u5199\u5b8c\u5c31\u5f00\u59cb\u8bfb\u53d6\n    time.sleep(1)\n    # \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0b\n    pool.apply_async(receive_something, kwds={'queue': queue})\n\n    pool.close()\n    pool.join()\n\n    print('\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5')\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 93817\n\u53d1\u9001\u6d88\u606f: Hello World, \u53d1\u9001\u6d88\u606f\u7684\u8fdb\u7a0bid: 93829\n\u53d1\u9001\u65f6\u95f4: 1659790972.757417\n\u53d1\u9001\u65f6\u95f4: 1659790972.75799\n\u53d1\u9001\u65f6\u95f4: 1659790972.758079\n\u63a5\u53d7\u6d88\u606f: Hello World, \u63a5\u6536\u65f6\u95f4: 1659790972.757417, \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: 93826\n\u63a5\u53d7\u6d88\u606f: Hello World, \u63a5\u6536\u65f6\u95f4: 1659790972.75799, \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: 93826\n\u63a5\u53d7\u6d88\u606f: Hello World, \u63a5\u6536\u65f6\u95f4: 1659790972.758079, \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: 93826\n\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5\n</code></pre>"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E8%BF%9B%E7%A8%8B%E4%B9%8B%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/","title":"\u591a\u8fdb\u7a0b\u4e4b\u8fdb\u7a0b\u95f4\u901a\u4fe1","text":"<p>\u4f7f\u7528Queue\u5b8c\u6210\u8fdb\u7a0b\u95f4\u901a\u4fe1</p> <pre><code>import os\nimport time\nfrom multiprocessing import Process, Queue\n\n\ndef send_someting(queue: Queue, something):\n    print(f'\u53d1\u9001\u6d88\u606f: {something}, \u53d1\u9001\u6d88\u606f\u7684\u8fdb\u7a0bid: {os.getpid()}')\n    for _ in range(3):\n        send_time = time.time()\n        print(f'\u53d1\u9001\u65f6\u95f4: {send_time}')\n        queue.put((something, send_time))\n\n\ndef receive_something(queue: Queue):\n    while not queue.empty():\n        something, receive_time = queue.get()\n        print(f'\u63a5\u53d7\u6d88\u606f: {something}, \u63a5\u6536\u65f6\u95f4: {receive_time}, \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: {os.getpid()}')\n\n\ndef main():\n    print(f'\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: {os.getpid()}')\n\n    queue = Queue()\n\n    # \u53d1\u9001\u6d88\u606f\u7684\u8fdb\u7a0b\n    process_send = Process(target=send_someting, args=(queue, 'Hello World'))\n    process_send.start()\n\n    # \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0b\n    process_receive = Process(target=receive_something, kwargs={'queue': queue})\n    process_receive.start()\n    # \u4f7f\u7528\u8fdb\u7a0b\u540c\u6b65\u963b\u585e\u4e3b\u8fdb\u7a0b, \u7b49\u5f85\u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0b\u6210\u529f\u63a5\u6536\u6d88\u606f\n    process_receive.join()\n\n    print('\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5')\n\n\nif __name__ == '__main__':\n    main()\n</code></pre> <p>\u8f93\u51fa\uff1a</p> <pre><code>\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 84824\n\u53d1\u9001\u6d88\u606f: Hello World, \u53d1\u9001\u6d88\u606f\u7684\u8fdb\u7a0bid: 84826\n\u53d1\u9001\u65f6\u95f4: 1659782172.101706\n\u53d1\u9001\u65f6\u95f4: 1659782172.101969\n\u53d1\u9001\u65f6\u95f4: 1659782172.101996\n\u63a5\u53d7\u6d88\u606f: Hello World, \u63a5\u6536\u65f6\u95f4: 1659782172.101706, \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: 84827\n\u63a5\u53d7\u6d88\u606f: Hello World, \u63a5\u6536\u65f6\u95f4: 1659782172.101969, \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: 84827\n\u63a5\u53d7\u6d88\u606f: Hello World, \u63a5\u6536\u65f6\u95f4: 1659782172.101996, \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: 84827\n\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5\n</code></pre>"},{"location":"windows/Hyper-v%20Linux%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%A8%E5%B1%8F/","title":"Hyper-v Linux\u865a\u62df\u673a\u5168\u5c4f","text":""},{"location":"windows/Hyper-v%20Linux%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%A8%E5%B1%8F/#_1","title":"\u7f16\u8f91\u914d\u7f6e","text":"<pre><code>vim /etc/default/grub\n</code></pre>"},{"location":"windows/Hyper-v%20Linux%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%A8%E5%B1%8F/#_2","title":"\u4fee\u6539\u914d\u7f6e","text":"<p>\u627e\u5230\u6709<code>GRUB_CMDLINE_LINUX_DEFAULT</code>\u7684\u8fd9\u884c</p> <p>\u4fee\u6539\u4e3a <code>GRUB_CMDLINE_LINUX_DEFAULT=\"quiet splash video=hyperv_fb:1980x1080\"</code></p> <p>\u5176\u4e2d 1980x1080 \u5373\u662f\u5168\u5c4f\u7684\u5206\u8fa8\u7387\uff0c\u8bf7\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539</p>"},{"location":"windows/Hyper-v%20Linux%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%A8%E5%B1%8F/#_3","title":"\u5237\u65b0\u914d\u7f6e","text":""},{"location":"windows/Hyper-v%20Linux%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%A8%E5%B1%8F/#debian","title":"Debian\u7cfb","text":"<pre><code>sudo update-grub\nsudo grub-mkconfig\n</code></pre>"},{"location":"windows/Hyper-v%20Linux%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%A8%E5%B1%8F/#centos","title":"CentOS\u7cfb","text":"<pre><code>grub2-mkconfig -o /boot/grub2/grub.cfg \n</code></pre> <p>\u7136\u540e\u91cd\u542f\u7cfb\u7edf\u5373\u53ef</p>"},{"location":"windows/Hyper-v%20Linux%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%A8%E5%B1%8F/#_4","title":"\u5176\u4ed6","text":"<p>\u5982\u679c\u4e0a\u8ff0\u65b9\u6cd5\u6ca1\u6709\u751f\u6548\uff0c\u53ef\u80fd\u662f\u9700\u8981\u5b89\u88c5\u4e00\u4e0b\u4f9d\u8d56</p> <pre><code># 1\u3001\u5148\u5b89\u88c5\u4e0blinux\u6838\u5fc3\u548c\u5934\u6587\u4ef6\nsudo apt-get install -y linux-image-3.11.0-15-generic linux-headers-3.11.0-15-generic\n2\u3001\u518d\u5b89\u88c5\u6838\u5fc3\u6587\u4ef6\u6269\u5c55\u5305\nsudo apt-get install linux-image-extra-virtual\n</code></pre>"},{"location":"windows/KMS%E6%BF%80%E6%B4%BB/","title":"KMS\u6fc0\u6d3b","text":""},{"location":"windows/KMS%E6%BF%80%E6%B4%BB/#kms_1","title":"\u67e5\u8be2KMS\u5bc6\u94a5","text":""},{"location":"windows/KMS%E6%BF%80%E6%B4%BB/#windows","title":"Windows\u5bc6\u94a5\u5730\u5740","text":"<p>https://docs.microsoft.com/zh-cn/windows-server/get-started/kmsclientkeys</p>"},{"location":"windows/KMS%E6%BF%80%E6%B4%BB/#office","title":"Office\u5bc6\u94a5\u5730\u5740","text":"<p>https://docs.microsoft.com/zh-cn/DeployOffice/vlactivation/gvlks</p>"},{"location":"windows/KMS%E6%BF%80%E6%B4%BB/#_1","title":"\u5e38\u7528\u5bc6\u94a5","text":"\u7248\u672c \u5bc6\u94a5 Windows 11 \u4e13\u4e1a\u7248Windows 10 \u4e13\u4e1a\u7248 W269N-WFGWX-YVC9B-4J6C9-T83GX Windows 11 \u4f01\u4e1a\u7248Windows 10 \u4f01\u4e1a\u7248 NPPR9-FWDCX-D2C8J-H872K-2YT43 Windows 11 \u6559\u80b2\u7248Windows 10 \u6559\u80b2\u7248 NW6C2-QMPVW-D7KKK-3GKT6-VCFB2 Windows 10 \u4f01\u4e1a\u7248 LTSC 2021Windows 10 \u4f01\u4e1a\u7248 LTSC 2019 M7XTQ-FN8P6-TTKYV-9D4CC-J462D Office LTSC \u4e13\u4e1a\u589e\u5f3a\u7248 2021 FXYTK-NJJ8C-GB6DW-3DYQT-6F7TH Office LTSC \u6807\u51c6\u7248 2021 KDX7X-BNVR8-TXXGX-4Q7Y8-78VT3 Office \u4e13\u4e1a\u589e\u5f3a\u7248 2019 NMMKJ-6RK4F-KMJVX-8D9MJ-6MWKP Office \u6807\u51c6\u7248 2019 6NWWJ-YQWMR-QKGCB-6TMB3-9D9HK"},{"location":"windows/KMS%E6%BF%80%E6%B4%BB/#kms_2","title":"\u4f7f\u7528KMS\u6fc0\u6d3b","text":"<p>\u4ee5\u7ba1\u7406\u5458\u8eab\u4efd\u8fd0\u884cCMD</p>"},{"location":"windows/KMS%E6%BF%80%E6%B4%BB/#windows_1","title":"Windows\u6fc0\u6d3b","text":"<p>\u5728CMD\u4e2d\u4f9d\u6b21\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4</p> <pre><code>slmgr /ipk W269N-WFGWX-YVC9B-4J6C9-T83GX    # \u5b89\u88c5\u5bc6\u94a5\nslmgr /skms kms.03k.org                     # \u8bbe\u7f6eKMS\u4e3b\u673a\nslmgr /ato                                  # \u6fc0\u6d3b\nslmgr /dlv                                  # \u67e5\u770b\u6fc0\u6d3b\u72b6\u6001\n</code></pre>"},{"location":"windows/KMS%E6%BF%80%E6%B4%BB/#office_1","title":"Office\u6fc0\u6d3b","text":"<p>\u5728CMD\u4e2d\u4f9d\u6b21\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4</p> <pre><code>cd C:\\Program Files\\Microsoft Office\\Office16             # \u8fdb\u5165Office\u811a\u672c\u76ee\u5f55\ncscript ospp.vbs /inpkey:FXYTK-NJJ8C-GB6DW-3DYQT-6F7TH    # \u5b89\u88c5\u5bc6\u94a5\ncscript ospp.vbs /sethst:kms.03k.org                      # \u8bbe\u7f6eKMS\u4e3b\u673a\ncscript ospp.vbs /act                                     # \u6fc0\u6d3b\ncscript ospp.vbs /dstatus                                 # \u67e5\u770b\u6fc0\u6d3b\u72b6\u6001\n</code></pre> <p>\u5173\u4e8eoffice\uff0c\u5982\u679c\u4e0a\u9762\u65b9\u6cd5\u65e0\u6cd5\u6fc0\u6d3b\u53ef\u5c1d\u8bd5\u5982\u4e0b\u65b9\u6cd5\uff0c\u5c06\u4ee5\u4e0b\u4ee3\u7801\u4fdd\u5b58\u4e3a.bat\u6587\u4ef6\uff0c\u7136\u540e\u53cc\u51fb\u6267\u884c\uff1a</p> <p>@echo off</p> <p>cd C:\\Program Files\\Microsoft Office\\Office16 cscript ospp.vbs /sethst:kms.03k.org cscript ospp.vbs /act cscript ospp.vbs /dstatus cscript ospp.vbs /remhst</p> <p>pause</p>"},{"location":"windows/KMS%E6%BF%80%E6%B4%BB/#_2","title":"\u5176\u4ed6","text":"<p>kms.03k.org \u662f\u516c\u5171\u7684KMS\u6fc0\u6d3b\u4e3b\u673a\uff0c\u7c7b\u4f3c\u7684\u8fd8\u6709 kms.shax.vip \u548c 91.149.135.83</p> <p>\u82e5\u4e0a\u8ff0\u547d\u4ee4\u65e0\u6cd5\u6fc0\u6d3b\u53ef\u5c1d\u8bd5\u66f4\u6362KMS\u4e3b\u673a</p>"},{"location":"windows/WSL%E4%BD%BF%E7%94%A8Debian%E5%90%AF%E5%8A%A8Docker%E6%8A%A5%E9%94%99/","title":"WSL\u4f7f\u7528Debian\u542f\u52a8Docker\u62a5\u9519","text":"<p>\u9488\u5bf9\u5982\u4e0b\u9519\u8bef\u63d0\u793a\u7684\u89e3\u51b3\u529e\u6cd5\uff1a</p> <p><code>grep: /etc/fstab: No such file or directory</code></p> <p>\u53c2\u8003\uff1ahttps://github.com/microsoft/WSL/discussions/4872</p> <p>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u89e3\u51b3</p> <pre><code>sudo touch /etc/fstab\n\nsudo update-alternatives --set iptables /usr/sbin/iptables-legacy\n\nsudo update-alternatives --set ip6tables /usr/sbin/ip6tables-legacy\n\nsudo service docker start\n</code></pre>"},{"location":"windows/WSL%E5%BF%AB%E6%8D%B7%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86/","title":"WSL\u5feb\u6377\u914d\u7f6e\u4ee3\u7406","text":"<p>\u7f16\u8f91.profile\u6587\u4ef6\u5e76\u5199\u5165\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code># \u5b9a\u4e49 clash \u51fd\u6570\nclash() {\n    # \u68c0\u67e5\u662f\u5426\u8bbe\u7f6e\u4e86\u4ee3\u7406\n    if [ -z \"$https_proxy\" ] &amp;&amp; [ -z \"$http_proxy\" ] &amp;&amp; [ -z \"$all_proxy\" ]; then\n        # \u5982\u679c\u6ca1\u6709\u5f00\u542f\u4ee3\u7406\uff0c\u5219\u8bbe\u7f6e\u4ee3\u7406\n        WINHOST=$(ip route show | grep -i default | awk '{ print $3 }')\n        export https_proxy=http://$WINHOST:7890 http_proxy=http://$WINHOST:7890 all_proxy=socks5://$WINHOST:7890\n        echo \"Proxy enabled\"\n    else\n        # \u5982\u679c\u5df2\u7ecf\u5f00\u542f\u4ee3\u7406\uff0c\u5219\u53d6\u6d88\u4ee3\u7406\n        unset https_proxy http_proxy all_proxy\n        echo \"Proxy disabled\"\n    fi\n}\n\n# \u8bbe\u7f6e\u522b\u540d clash\nalias clash=clash\n</code></pre>"},{"location":"windows/WSL%E6%9C%8D%E5%8A%A1%E6%89%B9%E9%87%8F%E7%AE%A1%E7%90%86/","title":"WSL\u670d\u52a1\u6279\u91cf\u7ba1\u7406","text":"<pre><code>#!/bin/bash\n\nservices=(\"ssh\" \"docker\" \"postgres\" \"redis-server\")\npassword=\"toor\"\naction=$1\nfor service in \"${services[@]}\"\ndo\n    echo $password|sudo -S service $service $action\ndone\n</code></pre>"},{"location":"windows/WSL%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/","title":"WSL\u7aef\u53e3\u8f6c\u53d1","text":""},{"location":"windows/WSL%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/#_1","title":"\u589e\u52a0\u7aef\u53e3\u8f6c\u53d1","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0bwsl\u4e2d\u7684\u7aef\u53e3\u53ea\u80fd\u591f\u88ab\u4e3b\u673a\u8bbf\u95ee\uff0c\u82e5\u60f3\u8981\u5c40\u57df\u7f51\u5185\u5176\u4ed6\u4e3b\u673a\u8bbf\u95ee\uff0c\u5219\u9700\u8981\u8bbe\u7f6e\u7aef\u53e3\u8f6c\u53d1</p> <p>\u547d\u4ee4\u683c\u5f0f\uff1a</p> <p>netsh interface portproxy add v4tov4 listenaddress=\u76d1\u542c\u5730\u5740 listenport=\u76d1\u542c\u7aef\u53e3 connectaddress=\u88ab\u8f6c\u53d1\u5730\u5740 connectport=\u88ab\u8f6c\u53d1\u7aef\u53e3</p> <p>\u547d\u4ee4\u8be6\u89e3\uff1a</p> <ul> <li>listenaddress \u5373\u5c40\u57df\u7f51\u5185\u5176\u4ed6\u4e3b\u673a\u8bbf\u95ee\u7684\u5730\u5740</li> <li>listenport \u5373\u5c40\u57df\u7f51\u5185\u5176\u4ed6\u4e3b\u673a\u8bbf\u95ee\u7684\u7aef\u53e3</li> <li>connectaddress \u5373WSL\u4e2d\u7684\u5730\u5740</li> <li>connectport \u5373WSL\u4e2d\u7684\u7aef\u53e3</li> </ul> <p>\u793a\u4f8b\uff1a</p> <pre><code>netsh interface portproxy add v4tov4 listenaddress=0.0.0.0 listenport=5001 connectaddress=0.0.0.0 connectport=5000\n</code></pre>"},{"location":"windows/WSL%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/#_2","title":"\u5220\u9664\u7aef\u53e3\u8f6c\u53d1","text":"<p>\u547d\u4ee4\u683c\u5f0f\uff1a</p> <p>netsh interface portproxy delete v4tov4 listenaddress=\u76d1\u542c\u5730\u5740 listenport=\u76d1\u542c\u7aef\u53e3</p> <p>\u793a\u4f8b\uff1a</p> <pre><code>netsh interface portproxy delete v4tov4 listenaddress=0.0.0.0 listenport=5000\n</code></pre>"},{"location":"windows/WSL%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/#_3","title":"\u67e5\u770b\u8f6c\u53e3\u8f6c\u53d1","text":"<p>\u82e5\u5fd8\u8bb0\u8f6c\u53d1\u7684\u7684\u5730\u5740\u548c\u7aef\u53e3\u53ef\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b</p> <pre><code>netsh interface portproxy show all\n</code></pre>"},{"location":"windows/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85WSL/","title":"\u624b\u52a8\u5b89\u88c5WSL","text":"<p>\u53c2\u8003\uff1a[\u5b89\u88c5 WSL | Microsoft Docs]</p> <p>\u6ce8\u89e3\uff1a\u4ee5\u4e0b\u547d\u4ee4\u5747\u5728CMD\u4e2d\u64cd\u4f5c</p>"},{"location":"windows/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85WSL/#wsl_1","title":"\u542f\u7528WSL\u529f\u80fd","text":"<pre><code>dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart\n</code></pre>"},{"location":"windows/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85WSL/#_1","title":"\u542f\u7528\u865a\u62df\u673a\u529f\u80fd","text":"<pre><code>dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart\n</code></pre>"},{"location":"windows/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85WSL/#linux","title":"\u4e0b\u8f7d\u5e76\u5b89\u88c5Linux\u5185\u6838\u66f4\u65b0\u5305","text":"<p>X64 \u5305</p> <p>ARM64 \u5305</p>"},{"location":"windows/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85WSL/#wsl2","title":"\u8bbe\u7f6eWSL2\u4e3a\u9ed8\u8ba4\u7248\u672c","text":"<pre><code>wsl --set-default-version 2\n</code></pre>"},{"location":"windows/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85WSL/#_2","title":"\u4e0b\u8f7d\u53d1\u884c\u7248","text":"<ul> <li>Debian GNU/Linux</li> <li>Ubuntu 22.04 LTS</li> </ul> <p>\u66f4\u591a\u53d1\u884c\u7248\u4e0b\u8f7d\u53c2\u89c1\uff1ahttps://docs.microsoft.com/zh-cn/windows/wsl/install-manual#downloading-distributions</p>"},{"location":"windows/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85WSL/#_3","title":"\u89e3\u538b\u53d1\u884c\u7248","text":"<p>\u4e0b\u8f7d\u7684Linux\u53d1\u884c\u7248\u6587\u4ef6\u683c\u5f0f\u662f.appx\uff0c\u53ef\u76f4\u63a5\u53f3\u952e\u4f7f\u75287zip\u89e3\u538b\u6216\u4fee\u6539\u6269\u5c55\u540d\u4e3a.zip\u540e\u89e3\u538b</p> <p>\u89e3\u538b\u5230\u6307\u5b9a\u4f4d\u7f6e\u540e\uff08\u4f8b\u5982 D:\\WSL\\Debian\uff09\uff0c\u8fdb\u5165\u76ee\u5f55\u540e\u521b\u5efa\u53cc\u51fb\u201c\u53d1\u884c\u7248\u540d\u79f0.exe\u201d\u5373\u53ef\u5b89\u88c5</p>"},{"location":"windows/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85WSL/#_4","title":"\u5907\u6ce8","text":"<p>\u540c\u4e00\u4e2a\u53d1\u884c\u7248\u9ed8\u8ba4\u53ea\u80fd\u5b89\u88c5\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u82e5\u60f3\u5b89\u88c5\u591a\u4e2a\u8bf7\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u64cd\u4f5c</p> <p>1\u3001\u5148\u6b63\u5e38\u5b89\u88c5</p> <p>2\u3001\u6253\u5f00\u6ce8\u518c\u8868\\HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Lxss</p> <p>3\u3001\u5728\u53f3\u4fa7\u627e\u5230DistributionName</p> <p>4\u3001\u53cc\u51fb\u4fee\u6539\u6210\u5176\u4ed6\u540d\u79f0\uff0c\u4f8b\u5982Debian1</p> <p>5\u3001\u91cd\u65b0\u89e3\u538b\u53cc\u51fbexe\u5373\u53ef\u5b89\u88c5\u591a\u4e2a\u5b9e\u4f8b</p>"},{"location":"windows/%E6%B8%85%E9%99%A4%E7%B3%BB%E7%BB%9F%E6%89%98%E7%9B%98%E5%9B%BE%E6%A0%87%E7%BC%93%E5%AD%98/","title":"\u6e05\u9664\u7cfb\u7edf\u6258\u76d8\u56fe\u6807\u7f13\u5b58","text":"<p>\u6253\u5f00\u6ce8\u518c\u8868</p> <p>\u6309\u4e0b\u7ec4\u5408\u952e<code>Win+R</code>\uff0c\u8f93\u5165<code>regedit</code>\u6253\u5f00\u6ce8\u518c\u8868\u7f16\u8f91\u5668</p> <p>\u5b9a\u4f4d\u4ee5\u4e0b\u8282\u70b9</p> <p>\\HKEY_CLASSES_ROOT\\Local Settings\\Software\\Microsoft\\Windows\\CurrentVersion\\TrayNotify</p> <p>\u5220\u9664\u4ee5\u4e0b\u4e24\u4e2a\u952e\u503c</p> <p><code>IconStreams</code>\u548c<code>PastIconsStream</code></p> <p>\u91cd\u542f\u8d44\u6e90\u7ba1\u7406\u5668</p> <p>\u6309\u4e0b\u7ec4\u5408\u952e<code>Ctrl+Shift+Esc</code>\u627e\u5230\u201c\u8d44\u6e90\u7ba1\u7406\u5668\u201d\uff08<code>explorer.exe</code>\uff09\uff0c\u53f3\u952e\u91cd\u542f\u5373\u53ef</p>"}]}