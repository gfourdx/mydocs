{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"I can programing Hello World! \ud83d\ude02","title":"Home"},{"location":"#i-can-programing-hello-world","text":"","title":"I can programing Hello World! &#x1F602;"},{"location":"android/Android%E8%B5%84%E6%BA%90/","text":"Android\u8d44\u6e90 AOSP ArrowOS CarbonROM crDroid dotOS Havoc-OS PixelExperience Resurrection Remix OS TWRP TWRP wzsx OpenGApps \u6c47\u603b: Download and install the latest GApps: Open GApps, and more! (xda-developers.com) Open GApps Gapps\u5404\u7248\u672c\u533a\u522b \u7248\u672c \u8bf4\u660e aroma \u4e0e super \u7248\u6240\u5305\u542b\u7684 GApps \u76f8\u540c, \u4f46\u662f\u5728 Recovery \u4e2d\u5f15\u5165\u4e86\u56fe\u5f62\u5316\u754c\u9762, \u53ef\u4ee5\u81ea\u884c\u9009\u62e9\u5b89\u88c5\u54ea\u4e9b GApps super \u5305\u542b\u4e86\u6240\u6709 GApps, \u50cf\u97e9\u8bed\u65e5\u8bed\u4e2d\u6587\u62fc\u97f3\u4e2d\u6587\u6ce8\u97f3\u8f93\u5165\u6cd5\u7b49, \u8bf7\u6ce8\u610f: \u5982\u679c\u4f60\u662f\u7528\u7684\u662f\u57fa\u4e8e\u539f\u751f\u7684 ROM, \u672c\u7248\u672c\u4f1a\u66ff\u6362\u76f8\u673a, \u901a\u8baf\u5f55\u7b49\u7b49\u6240\u6709\u6709\u5173\u5e94\u7528 stock \u7c7b\u4f3c\u4e8e Google Pixel \u51fa\u5382\u5185\u7f6e\u7684 GApps, \u76f8\u6bd4 super \u7248\u5c11\u4e86\u5176\u4ed6\u8bed\u79cd\u7684\u8f93\u5165\u6cd5\u4ee5\u53ca Google \u5730\u7403\u7b49, \u8bf7\u6ce8\u610f: \u5982\u679c\u4f60\u662f\u7528\u7684\u662f\u57fa\u4e8e\u539f\u751f\u7684 ROM, \u672c\u7248\u672c\u4f1a\u66ff\u6362\u76f8\u673a, \u901a\u8baf\u5f55\u7b49\u7b49\u6240\u6709\u6709\u5173\u5e94\u7528 full \u4e0e stock \u7248\u6240\u5305\u542b\u7684\u5185\u5bb9\u76f8\u540c\uff0c\u4f46\u6b64\u7248\u672c\u4e0d\u4f1a\u66ff\u6362\u624b\u673a\u539f\u672c\u7684\u5e94\u7528 mini \u5305\u542b\u57fa\u7840\u7684 Google \u670d\u52a1\u6846\u67b6, \u4ee5\u53ca\u4e00\u4e9b\u5f71\u54cd\u529b\u8f83\u5927\u7684 GApps, \u76f8\u6bd4 full \u7248\u53bb\u6389\u4e86 Docs \u7b49\u5e94\u7528 micro \u5305\u542b\u57fa\u7840\u7684 Google \u670d\u52a1\u6846\u67b6\u548c Gmail \u7b49\u5e38\u89c1 GApps nano \u5305\u542b\u57fa\u7840\u7684 Google \u670d\u52a1\u6846\u67b6, \u4f46\u4e0d\u4f1a\u6709\u5176\u4ed6 \u4e0d\u5fc5\u8981\u7684 GApps pico \u5305\u542b\u6700\u8ff7\u4f60\u7684 Google \u670d\u52a1\u6846\u67b6, \u4f46\u7531\u4e8e\u6846\u67b6\u5e76\u975e\u5b8c\u6574, \u90e8\u5206 GApps\u53ef\u80fd\u65e0\u6cd5\u8fd0\u884c NikGapps FlameGApps BiTGApps LiteGApps MindTheGapps GmsCore GmsCore\u662f\u4e00\u4e2a\u53d8\u79cd, \u5728\u4e0d\u5b89\u88c5OpenGApps\u7684\u60c5\u51b5\u4e0b\u652f\u6301\u5404\u79cdGoogle APPS\u7684\u5b89\u88c5 GmsCore Magisk Magisk ADB Tool SDK Platform Tools \u79bb\u7ebf\u4e0b\u8f7dGoogle Play\u5e94\u7528 APK Downloader APKPure","title":"Android\u8d44\u6e90"},{"location":"android/Android%E8%B5%84%E6%BA%90/#android","text":"","title":"Android\u8d44\u6e90"},{"location":"android/Android%E8%B5%84%E6%BA%90/#aosp","text":"ArrowOS CarbonROM crDroid dotOS Havoc-OS PixelExperience Resurrection Remix OS","title":"AOSP"},{"location":"android/Android%E8%B5%84%E6%BA%90/#twrp","text":"TWRP wzsx","title":"TWRP"},{"location":"android/Android%E8%B5%84%E6%BA%90/#opengapps","text":"\u6c47\u603b: Download and install the latest GApps: Open GApps, and more! (xda-developers.com) Open GApps Gapps\u5404\u7248\u672c\u533a\u522b \u7248\u672c \u8bf4\u660e aroma \u4e0e super \u7248\u6240\u5305\u542b\u7684 GApps \u76f8\u540c, \u4f46\u662f\u5728 Recovery \u4e2d\u5f15\u5165\u4e86\u56fe\u5f62\u5316\u754c\u9762, \u53ef\u4ee5\u81ea\u884c\u9009\u62e9\u5b89\u88c5\u54ea\u4e9b GApps super \u5305\u542b\u4e86\u6240\u6709 GApps, \u50cf\u97e9\u8bed\u65e5\u8bed\u4e2d\u6587\u62fc\u97f3\u4e2d\u6587\u6ce8\u97f3\u8f93\u5165\u6cd5\u7b49, \u8bf7\u6ce8\u610f: \u5982\u679c\u4f60\u662f\u7528\u7684\u662f\u57fa\u4e8e\u539f\u751f\u7684 ROM, \u672c\u7248\u672c\u4f1a\u66ff\u6362\u76f8\u673a, \u901a\u8baf\u5f55\u7b49\u7b49\u6240\u6709\u6709\u5173\u5e94\u7528 stock \u7c7b\u4f3c\u4e8e Google Pixel \u51fa\u5382\u5185\u7f6e\u7684 GApps, \u76f8\u6bd4 super \u7248\u5c11\u4e86\u5176\u4ed6\u8bed\u79cd\u7684\u8f93\u5165\u6cd5\u4ee5\u53ca Google \u5730\u7403\u7b49, \u8bf7\u6ce8\u610f: \u5982\u679c\u4f60\u662f\u7528\u7684\u662f\u57fa\u4e8e\u539f\u751f\u7684 ROM, \u672c\u7248\u672c\u4f1a\u66ff\u6362\u76f8\u673a, \u901a\u8baf\u5f55\u7b49\u7b49\u6240\u6709\u6709\u5173\u5e94\u7528 full \u4e0e stock \u7248\u6240\u5305\u542b\u7684\u5185\u5bb9\u76f8\u540c\uff0c\u4f46\u6b64\u7248\u672c\u4e0d\u4f1a\u66ff\u6362\u624b\u673a\u539f\u672c\u7684\u5e94\u7528 mini \u5305\u542b\u57fa\u7840\u7684 Google \u670d\u52a1\u6846\u67b6, \u4ee5\u53ca\u4e00\u4e9b\u5f71\u54cd\u529b\u8f83\u5927\u7684 GApps, \u76f8\u6bd4 full \u7248\u53bb\u6389\u4e86 Docs \u7b49\u5e94\u7528 micro \u5305\u542b\u57fa\u7840\u7684 Google \u670d\u52a1\u6846\u67b6\u548c Gmail \u7b49\u5e38\u89c1 GApps nano \u5305\u542b\u57fa\u7840\u7684 Google \u670d\u52a1\u6846\u67b6, \u4f46\u4e0d\u4f1a\u6709\u5176\u4ed6 \u4e0d\u5fc5\u8981\u7684 GApps pico \u5305\u542b\u6700\u8ff7\u4f60\u7684 Google \u670d\u52a1\u6846\u67b6, \u4f46\u7531\u4e8e\u6846\u67b6\u5e76\u975e\u5b8c\u6574, \u90e8\u5206 GApps\u53ef\u80fd\u65e0\u6cd5\u8fd0\u884c NikGapps FlameGApps BiTGApps LiteGApps MindTheGapps","title":"OpenGApps"},{"location":"android/Android%E8%B5%84%E6%BA%90/#gmscore","text":"GmsCore\u662f\u4e00\u4e2a\u53d8\u79cd, \u5728\u4e0d\u5b89\u88c5OpenGApps\u7684\u60c5\u51b5\u4e0b\u652f\u6301\u5404\u79cdGoogle APPS\u7684\u5b89\u88c5 GmsCore","title":"GmsCore"},{"location":"android/Android%E8%B5%84%E6%BA%90/#magisk","text":"Magisk","title":"Magisk"},{"location":"android/Android%E8%B5%84%E6%BA%90/#adb-tool","text":"SDK Platform Tools","title":"ADB Tool"},{"location":"android/Android%E8%B5%84%E6%BA%90/#google-play","text":"APK Downloader APKPure","title":"\u79bb\u7ebf\u4e0b\u8f7dGoogle Play\u5e94\u7528"},{"location":"android/Fastboot%E5%88%B7%E6%9C%BA/","text":"Fastboot\u5237\u673a 1\u3001\u6b63\u5e38\u542f\u52a8\u624b\u673a, \u5f00\u542f\u8c03\u8bd5\u6a21\u5f0f 2\u3001\u8fdb\u5165fastboot\u6a21\u5f0f adb reboot bootloader 3\u3001\u68c0\u67e5\u8bbe\u5907 fastboot devices 4\u3001\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u64e6\u9664 \u5fc5\u9009\u64e6\u9664 fastboot erase system fastboot erase cache fastboot erase config fastboot erase userdata \u53ef\u9009\u64e6\u9664 fastboot erase boot fastboot erase recovery 5\u3001\u5237\u673a fastboot flash boot boot.img fastboot flash recovery recovery.img fastboot flash system system.img boot.img\u548csystem.img\u9700\u8981\u63d0\u524d\u4ece\u5237\u673a\u5305\u4e2d\u89e3\u538b\u51fa\u6765, recovery.img\u4e00\u822c\u662ftwrp.img 6\u3001\u91cd\u542f fastboot reboot","title":"Fastboot\u5237\u673a"},{"location":"android/Fastboot%E5%88%B7%E6%9C%BA/#fastboot","text":"1\u3001\u6b63\u5e38\u542f\u52a8\u624b\u673a, \u5f00\u542f\u8c03\u8bd5\u6a21\u5f0f 2\u3001\u8fdb\u5165fastboot\u6a21\u5f0f adb reboot bootloader 3\u3001\u68c0\u67e5\u8bbe\u5907 fastboot devices 4\u3001\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u64e6\u9664 \u5fc5\u9009\u64e6\u9664 fastboot erase system fastboot erase cache fastboot erase config fastboot erase userdata \u53ef\u9009\u64e6\u9664 fastboot erase boot fastboot erase recovery 5\u3001\u5237\u673a fastboot flash boot boot.img fastboot flash recovery recovery.img fastboot flash system system.img boot.img\u548csystem.img\u9700\u8981\u63d0\u524d\u4ece\u5237\u673a\u5305\u4e2d\u89e3\u538b\u51fa\u6765, recovery.img\u4e00\u822c\u662ftwrp.img 6\u3001\u91cd\u542f fastboot reboot","title":"Fastboot\u5237\u673a"},{"location":"linux/Debian10%E9%80%9A%E8%BF%87kubeadm%E9%83%A8%E7%BD%B2Kubernetes%E9%9B%86%E7%BE%A4/","text":"Debian10\u901a\u8fc7kubeadm\u90e8\u7f72Kubernetes\u96c6\u7fa4 \u6ce8\u610f1\uff1a\u5168\u7a0b\u4f7f\u7528root\u7528\u6237\uff0c\u53ef\u901a\u8fc7\u547d\u4ee4 \u201csu -\u201d \u5207\u6362\u5230root\u7528\u6237 \u6ce8\u610f2\uff1amaster\u8282\u70b9\u6267\u884c\u7b2c\u4e00\u3001\u4e8c\u3001\u4e09\u3001\u56db\u6b65\u9aa4\u548cnode\u8282\u70b9\u6267\u884c\u7b2c\u4e00\u3001\u4e8c\u3001\u4e09\u3001\u4e94\u6b65\u9aa4 \u7b2c\u4e00\u6b65\uff1a\u5b89\u88c5Docker 1.1\u3001\u5982\u679c\u4f60\u8fc7\u53bb\u5b89\u88c5\u8fc7 docker\uff0c\u5148\u5220\u6389\uff1a sudo apt-get remove docker docker-engine docker.io 1.2\u3001\u5b89\u88c5\u4f9d\u8d56\uff1a sudo apt-get install -y apt-transport-https ca-certificates curl gnupg2 software-properties-common 1.3\u3001\u4fe1\u4efb Docker \u7684 GPG \u516c\u94a5\uff1a curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add - 1.4\u3001\u6dfb\u52a0\u8f6f\u4ef6\u4ed3\u5e93: cat <<EOF >>/etc/apt/sources.list deb [arch=amd64] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/debian buster stable EOF 1.5\u3001\u5b89\u88c5docker\uff1a apt-get update && apt-get install -y docker-ce 1.6\u3001\u8bbe\u7f6edaemon.json\uff1a cat > /etc/docker/daemon.json <<EOF { \"registry-mirrors\": [\"https://t6wp3k6n.mirror.aliyuncs.com\"], \"exec-opts\": [\"native.cgroupdriver=systemd\"], \"log-driver\": \"json-file\", \"log-opts\": { \"max-size\": \"100m\" }, \"storage-driver\": \"overlay2\" } EOF 1.7\u3001\u91cd\u542fdocker\u670d\u52a1\uff1a systemctl daemon-reload && systemctl restart docker 1.8\u3001\u68c0\u67e5docker\u4fe1\u606f\uff1a docker info \u5982\u679c\u8fd4\u56de\u4fe1\u606f\u7684\u6700\u540e\u4e00\u884c\u63d0\u793a\uff1aWARNING: No swap limit support\uff0c\u5219\u9700\u8981\u505a\u5982\u4e0b\u4fee\u6539\uff1a \u7f16\u8f91 /etc/default/grub \u6587\u4ef6\uff0c\u6dfb\u52a0\u6216\u7f16\u8f91GRUB_CMDLINE_LINUX\u884c\u4ee5\u6dfb\u52a0\u4ee5\u4e0b\u4e24\u4e2a\u952e\u503c\u5bf9\uff1a GRUB_CMDLINE_LINUX=\"cgroup_enable=memory swapaccount=1\" \u4fdd\u5b58\u5e76\u5173\u95ed\u6587\u4ef6\u540e\u66f4\u65b0GRUB\uff1a update-grub \u7b2c\u4e8c\u6b65\uff1a\u5173\u95edSWAP \u6ce8\u610f\uff1a\u5982\u679c\u7cfb\u7edf\u672a\u542f\u7528SWAP\uff0c\u53ef\u8df3\u8fc7\u6b64\u6b65 2.1\u3001\u5173\u95edswap\u5206\u533a swapoff -a 2.2\u3001\u7f16\u8f91 /etc/fstab \u6587\u4ef6\uff0c\u6ce8\u91ca\u6389\u5e26\u6709 swap \u5b57\u6837\u7684\u90a3\u884c\u4ee3\u7801\uff0c\u5373\u524d\u9762\u52a0 # \u53f7 2.3\u3001\u91cd\u542f\u7cfb\u7edf\uff1a init 6 \u7b2c\u4e09\u6b65\uff1a\u5b89\u88c5Kubernetes 3.1\u3001\u4fe1\u4efb \u5b89\u88c5Kubernetes \u7684 GPG \u516c\u94a5\uff1a curl https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg | apt-key add - 3.2\u3001\u6dfb\u52a0\u8f6f\u4ef6\u4ed3\u5e93: cat <<EOF >>/etc/apt/sources.list deb https://mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial main EOF 3.3\u3001\u5b89\u88c5kubelet kubeadm kubectl\uff1a apt-get update && apt-get install -y kubelet kubeadm kubectl \u6ce8\u610f\uff1a\u4ee5\u4e0a\u4e09\u6b65\u5b8c\u6210\u4e86\u642d\u5efaKubernetes\u96c6\u7fa4\u7684\u57fa\u672c\u73af\u5883\u914d\u7f6e\uff0c\u8bf7\u91cd\u590d\u4ee5\u4e0a\u6b65\u9aa4\u5b8c\u6210\u53e6\u5916\u4e24\u53f0\u673a\u5668\u7684\u914d\u7f6e \u7b2c\u56db\u6b65\uff1a\u5b89\u88c5\u914d\u7f6emaster\u8282\u70b9 4.1\u3001\u521d\u59cb\u5316master\u8282\u70b9\uff1a kubeadm init \\ --image-repository registry.aliyuncs.com/google_containers \\ --apiserver-advertise-address 192.168.254.10 \\ --pod-network-cidr=192.168.0.0/16 \u6ce8\u610f 1\uff1a--image-repository \u6307\u5b9a\u56fd\u5185\u955c\u50cf\u4ed3\u5e93\uff1b --apiserver-advertise-address \u6307\u5b9amaster\u8282\u70b9IP\uff1b --pod-network-cidr=10.244.0.0/16\u8bbe\u7f6epodCIDR\u3002 \u6ce8\u610f2\uff1a\u4f7f\u7528Calico\u5219\u8bbe\u7f6e--pod-network-cidr=192.168.0.0/16\uff0c\u4f7f\u7528Flannel\u5219\u8bbe\u7f6e--pod-network-cidr=10.244.0.0/16\uff0c\u6b64\u53c2\u6570\u4e0d\u80fd\u7701\u7565\uff08\u540e\u9762\u5b89\u88c5\u7f51\u7edc\u63d2\u4ef6\u4f9d\u8d56\u6b64\u5904\uff09 \u6ce8\u610f3\uff1a\u8bb0\u5f55\u4e0b\u8fd4\u56de\u7684\u6d88\u606f\u4e2d\u5173\u4e8ejoin\u7684\u547d\u4ee4 4.2\u3001\u521d\u59cb\u5316master\u8282\u70b9\u6210\u529f\u540e\u6839\u636e\u8fd4\u56de\u7684\u6d88\u606f\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff08\u89e3\u51b3kubectl\u65e0\u6cd5\u6b63\u5e38\u6267\u884c\u7684\u95ee\u9898\uff09\uff1a mkdir -p $HOME/.kube cp -i /etc/kubernetes/admin.conf $HOME/.kube/config chown $(id -u):$(id -g) $HOME/.kube/config 4.3 \u5b89\u88c5\u7f51\u7edc\u63d2\u4ef6\uff08Calico\u6216Flannel\uff09\uff0c\u672c\u6848\u4f8b\u4ee5Calico\u4e3a\u4f8b\uff1a kubectl apply -f https://docs.projectcalico.org/manifests/calico.yaml \u6216 kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml \u63d2\u4ef6\u8bf4\u660e\uff1a https://kubernetes.io/docs/concepts/cluster-administration/addons/ \u63a5\u7740\u6267\u884c\u547d\u4ee4\uff1a watch kubectl get pods --all-namespaces \u7b49\u5230\u6bcf\u4e00\u4e2aPod\u7684TSTATUS\u4e3aRunning\u72b6\u6001\uff0c\u606d\u559c\u4f60Calico\u5b89\u88c5\u6210\u529f\uff01 4.4 \u67e5\u770b\u8282\u70b9\u4fe1\u606f kubectl get nodes \u7b2c\u4e94\u6b65\uff1a\u5b89\u88c5\u914d\u7f6enode\u8282\u70b9 5.1\u3001\u5c06node\u8282\u70b9\u52a0\u5165\u5230master\u4e2d kubeadm join 192.168.254.10:6443 --token y13vcz.fuc18mvtl6li1yjy \\ --discovery-token-ca-cert-hash sha256:0581e5622f54b09825b5ea5695d13407fb1bf6df5490a0628bfa431627d821c2 \u6ce8\u610f1\uff1a\u4e0a\u9762\u7684\u547d\u4ee4\u662f\u6b65\u9aa4\u56db\u4e2d\u76844.1\u8fd4\u56de\u7684\u6d88\u606f\u4e2d\u63d0\u4f9b\u7684\uff0c\u6bcf\u6b21\u90fd\u4e0d\u4e00\u6837\uff0c\u8bf7\u6539\u6210\u4f60\u90a3\u91cc\u6b63\u786e\u7684\u547d\u4ee4\uff01 \u6ce8\u610f2\uff1amaster\u751f\u6210\u7684token\uff0c\u9ed8\u8ba4\u6709\u6548\u65f6\u957f\u662f24\u5c0f\u65f6\uff0c\u8bf7\u572824\u5c0f\u65f6\u5185\u5c06node\u8282\u70b9\u52a0\u5165\u5230master\u4e2d\uff0c\u5426\u5219\u9700\u8981\u91cd\u65b0\u751f\u6210token\uff01 5.2\u3001\u89e3\u51b3node\u8282\u70b9kubectl\u65e0\u6cd5\u6b63\u5e38\u6267\u884c\u7684\u95ee\u9898\uff1a \u590d\u5236master\u8282\u70b9\u7684admin.conf\u6587\u4ef6 cp /etc/kubernetes/admin.conf /home \u9ed8\u8ba4\u6743\u9650\u53ea\u8bfb\uff0cnode\u8282\u70b9\u65e0\u6cd5\u590d\u5236\uff0c\u6240\u4ee5\u5148\u8bbe\u7f6e\u6743\u9650 chmod 777 /home/admin.conf \u4f7f\u7528scp\u547d\u4ee4\u5c06\u6b64\u6587\u4ef6\u590d\u5236\u5230node\u8282\u70b9\u7684/etc/kubernetes scp kmaster@192.168.254.10:/home/admin.conf /etc/kubernetes/ \u518d\u6b21\u4fee\u6539\u56de\u9ed8\u8ba4\u6743\u9650 chmod 600 /etc/kubernetes/admin.conf \u6267\u884c\u6b65\u9aa4\u7b2c\u56db\u6b65\u76844.2\uff0c\u641e\u5b9a\uff01","title":"Debian\u642d\u5efaK8S\u96c6\u7fa4"},{"location":"linux/Debian10%E9%80%9A%E8%BF%87kubeadm%E9%83%A8%E7%BD%B2Kubernetes%E9%9B%86%E7%BE%A4/#debian10kubeadmkubernetes","text":"\u6ce8\u610f1\uff1a\u5168\u7a0b\u4f7f\u7528root\u7528\u6237\uff0c\u53ef\u901a\u8fc7\u547d\u4ee4 \u201csu -\u201d \u5207\u6362\u5230root\u7528\u6237 \u6ce8\u610f2\uff1amaster\u8282\u70b9\u6267\u884c\u7b2c\u4e00\u3001\u4e8c\u3001\u4e09\u3001\u56db\u6b65\u9aa4\u548cnode\u8282\u70b9\u6267\u884c\u7b2c\u4e00\u3001\u4e8c\u3001\u4e09\u3001\u4e94\u6b65\u9aa4","title":"Debian10\u901a\u8fc7kubeadm\u90e8\u7f72Kubernetes\u96c6\u7fa4"},{"location":"linux/Debian10%E9%80%9A%E8%BF%87kubeadm%E9%83%A8%E7%BD%B2Kubernetes%E9%9B%86%E7%BE%A4/#docker","text":"1.1\u3001\u5982\u679c\u4f60\u8fc7\u53bb\u5b89\u88c5\u8fc7 docker\uff0c\u5148\u5220\u6389\uff1a sudo apt-get remove docker docker-engine docker.io 1.2\u3001\u5b89\u88c5\u4f9d\u8d56\uff1a sudo apt-get install -y apt-transport-https ca-certificates curl gnupg2 software-properties-common 1.3\u3001\u4fe1\u4efb Docker \u7684 GPG \u516c\u94a5\uff1a curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add - 1.4\u3001\u6dfb\u52a0\u8f6f\u4ef6\u4ed3\u5e93: cat <<EOF >>/etc/apt/sources.list deb [arch=amd64] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/debian buster stable EOF 1.5\u3001\u5b89\u88c5docker\uff1a apt-get update && apt-get install -y docker-ce 1.6\u3001\u8bbe\u7f6edaemon.json\uff1a cat > /etc/docker/daemon.json <<EOF { \"registry-mirrors\": [\"https://t6wp3k6n.mirror.aliyuncs.com\"], \"exec-opts\": [\"native.cgroupdriver=systemd\"], \"log-driver\": \"json-file\", \"log-opts\": { \"max-size\": \"100m\" }, \"storage-driver\": \"overlay2\" } EOF 1.7\u3001\u91cd\u542fdocker\u670d\u52a1\uff1a systemctl daemon-reload && systemctl restart docker 1.8\u3001\u68c0\u67e5docker\u4fe1\u606f\uff1a docker info \u5982\u679c\u8fd4\u56de\u4fe1\u606f\u7684\u6700\u540e\u4e00\u884c\u63d0\u793a\uff1aWARNING: No swap limit support\uff0c\u5219\u9700\u8981\u505a\u5982\u4e0b\u4fee\u6539\uff1a \u7f16\u8f91 /etc/default/grub \u6587\u4ef6\uff0c\u6dfb\u52a0\u6216\u7f16\u8f91GRUB_CMDLINE_LINUX\u884c\u4ee5\u6dfb\u52a0\u4ee5\u4e0b\u4e24\u4e2a\u952e\u503c\u5bf9\uff1a GRUB_CMDLINE_LINUX=\"cgroup_enable=memory swapaccount=1\" \u4fdd\u5b58\u5e76\u5173\u95ed\u6587\u4ef6\u540e\u66f4\u65b0GRUB\uff1a update-grub","title":"\u7b2c\u4e00\u6b65\uff1a\u5b89\u88c5Docker"},{"location":"linux/Debian10%E9%80%9A%E8%BF%87kubeadm%E9%83%A8%E7%BD%B2Kubernetes%E9%9B%86%E7%BE%A4/#swap","text":"\u6ce8\u610f\uff1a\u5982\u679c\u7cfb\u7edf\u672a\u542f\u7528SWAP\uff0c\u53ef\u8df3\u8fc7\u6b64\u6b65 2.1\u3001\u5173\u95edswap\u5206\u533a swapoff -a 2.2\u3001\u7f16\u8f91 /etc/fstab \u6587\u4ef6\uff0c\u6ce8\u91ca\u6389\u5e26\u6709 swap \u5b57\u6837\u7684\u90a3\u884c\u4ee3\u7801\uff0c\u5373\u524d\u9762\u52a0 # \u53f7 2.3\u3001\u91cd\u542f\u7cfb\u7edf\uff1a init 6","title":"\u7b2c\u4e8c\u6b65\uff1a\u5173\u95edSWAP"},{"location":"linux/Debian10%E9%80%9A%E8%BF%87kubeadm%E9%83%A8%E7%BD%B2Kubernetes%E9%9B%86%E7%BE%A4/#kubernetes","text":"3.1\u3001\u4fe1\u4efb \u5b89\u88c5Kubernetes \u7684 GPG \u516c\u94a5\uff1a curl https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg | apt-key add - 3.2\u3001\u6dfb\u52a0\u8f6f\u4ef6\u4ed3\u5e93: cat <<EOF >>/etc/apt/sources.list deb https://mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial main EOF 3.3\u3001\u5b89\u88c5kubelet kubeadm kubectl\uff1a apt-get update && apt-get install -y kubelet kubeadm kubectl \u6ce8\u610f\uff1a\u4ee5\u4e0a\u4e09\u6b65\u5b8c\u6210\u4e86\u642d\u5efaKubernetes\u96c6\u7fa4\u7684\u57fa\u672c\u73af\u5883\u914d\u7f6e\uff0c\u8bf7\u91cd\u590d\u4ee5\u4e0a\u6b65\u9aa4\u5b8c\u6210\u53e6\u5916\u4e24\u53f0\u673a\u5668\u7684\u914d\u7f6e","title":"\u7b2c\u4e09\u6b65\uff1a\u5b89\u88c5Kubernetes"},{"location":"linux/Debian10%E9%80%9A%E8%BF%87kubeadm%E9%83%A8%E7%BD%B2Kubernetes%E9%9B%86%E7%BE%A4/#master","text":"4.1\u3001\u521d\u59cb\u5316master\u8282\u70b9\uff1a kubeadm init \\ --image-repository registry.aliyuncs.com/google_containers \\ --apiserver-advertise-address 192.168.254.10 \\ --pod-network-cidr=192.168.0.0/16 \u6ce8\u610f 1\uff1a--image-repository \u6307\u5b9a\u56fd\u5185\u955c\u50cf\u4ed3\u5e93\uff1b --apiserver-advertise-address \u6307\u5b9amaster\u8282\u70b9IP\uff1b --pod-network-cidr=10.244.0.0/16\u8bbe\u7f6epodCIDR\u3002 \u6ce8\u610f2\uff1a\u4f7f\u7528Calico\u5219\u8bbe\u7f6e--pod-network-cidr=192.168.0.0/16\uff0c\u4f7f\u7528Flannel\u5219\u8bbe\u7f6e--pod-network-cidr=10.244.0.0/16\uff0c\u6b64\u53c2\u6570\u4e0d\u80fd\u7701\u7565\uff08\u540e\u9762\u5b89\u88c5\u7f51\u7edc\u63d2\u4ef6\u4f9d\u8d56\u6b64\u5904\uff09 \u6ce8\u610f3\uff1a\u8bb0\u5f55\u4e0b\u8fd4\u56de\u7684\u6d88\u606f\u4e2d\u5173\u4e8ejoin\u7684\u547d\u4ee4 4.2\u3001\u521d\u59cb\u5316master\u8282\u70b9\u6210\u529f\u540e\u6839\u636e\u8fd4\u56de\u7684\u6d88\u606f\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff08\u89e3\u51b3kubectl\u65e0\u6cd5\u6b63\u5e38\u6267\u884c\u7684\u95ee\u9898\uff09\uff1a mkdir -p $HOME/.kube cp -i /etc/kubernetes/admin.conf $HOME/.kube/config chown $(id -u):$(id -g) $HOME/.kube/config 4.3 \u5b89\u88c5\u7f51\u7edc\u63d2\u4ef6\uff08Calico\u6216Flannel\uff09\uff0c\u672c\u6848\u4f8b\u4ee5Calico\u4e3a\u4f8b\uff1a kubectl apply -f https://docs.projectcalico.org/manifests/calico.yaml \u6216 kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml \u63d2\u4ef6\u8bf4\u660e\uff1a https://kubernetes.io/docs/concepts/cluster-administration/addons/ \u63a5\u7740\u6267\u884c\u547d\u4ee4\uff1a watch kubectl get pods --all-namespaces \u7b49\u5230\u6bcf\u4e00\u4e2aPod\u7684TSTATUS\u4e3aRunning\u72b6\u6001\uff0c\u606d\u559c\u4f60Calico\u5b89\u88c5\u6210\u529f\uff01 4.4 \u67e5\u770b\u8282\u70b9\u4fe1\u606f kubectl get nodes","title":"\u7b2c\u56db\u6b65\uff1a\u5b89\u88c5\u914d\u7f6emaster\u8282\u70b9"},{"location":"linux/Debian10%E9%80%9A%E8%BF%87kubeadm%E9%83%A8%E7%BD%B2Kubernetes%E9%9B%86%E7%BE%A4/#node","text":"5.1\u3001\u5c06node\u8282\u70b9\u52a0\u5165\u5230master\u4e2d kubeadm join 192.168.254.10:6443 --token y13vcz.fuc18mvtl6li1yjy \\ --discovery-token-ca-cert-hash sha256:0581e5622f54b09825b5ea5695d13407fb1bf6df5490a0628bfa431627d821c2 \u6ce8\u610f1\uff1a\u4e0a\u9762\u7684\u547d\u4ee4\u662f\u6b65\u9aa4\u56db\u4e2d\u76844.1\u8fd4\u56de\u7684\u6d88\u606f\u4e2d\u63d0\u4f9b\u7684\uff0c\u6bcf\u6b21\u90fd\u4e0d\u4e00\u6837\uff0c\u8bf7\u6539\u6210\u4f60\u90a3\u91cc\u6b63\u786e\u7684\u547d\u4ee4\uff01 \u6ce8\u610f2\uff1amaster\u751f\u6210\u7684token\uff0c\u9ed8\u8ba4\u6709\u6548\u65f6\u957f\u662f24\u5c0f\u65f6\uff0c\u8bf7\u572824\u5c0f\u65f6\u5185\u5c06node\u8282\u70b9\u52a0\u5165\u5230master\u4e2d\uff0c\u5426\u5219\u9700\u8981\u91cd\u65b0\u751f\u6210token\uff01 5.2\u3001\u89e3\u51b3node\u8282\u70b9kubectl\u65e0\u6cd5\u6b63\u5e38\u6267\u884c\u7684\u95ee\u9898\uff1a \u590d\u5236master\u8282\u70b9\u7684admin.conf\u6587\u4ef6 cp /etc/kubernetes/admin.conf /home \u9ed8\u8ba4\u6743\u9650\u53ea\u8bfb\uff0cnode\u8282\u70b9\u65e0\u6cd5\u590d\u5236\uff0c\u6240\u4ee5\u5148\u8bbe\u7f6e\u6743\u9650 chmod 777 /home/admin.conf \u4f7f\u7528scp\u547d\u4ee4\u5c06\u6b64\u6587\u4ef6\u590d\u5236\u5230node\u8282\u70b9\u7684/etc/kubernetes scp kmaster@192.168.254.10:/home/admin.conf /etc/kubernetes/ \u518d\u6b21\u4fee\u6539\u56de\u9ed8\u8ba4\u6743\u9650 chmod 600 /etc/kubernetes/admin.conf \u6267\u884c\u6b65\u9aa4\u7b2c\u56db\u6b65\u76844.2\uff0c\u641e\u5b9a\uff01","title":"\u7b2c\u4e94\u6b65\uff1a\u5b89\u88c5\u914d\u7f6enode\u8282\u70b9"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEDocker/","text":"Debian\u5b89\u88c5\u548c\u914d\u7f6eDocker \u5728\u7ebf\u5b89\u88c5 curl -fsSL https://get.docker.com -o get-docker.sh sh get-docker.sh \u6216 wget -qO- https://get.docker.com | sh \u955c\u50cf\u52a0\u901f\u548c\u914d\u7f6eIP\u5730\u5740\u6bb5 mkdir -p /etc/docker tee /etc/docker/daemon.json <<-'EOF' { \"registry-mirrors\": [\"https://t6wp3k6n.mirror.aliyuncs.com\"], \"bip\": \"192.168.255.1/24\" } registry-mirrors\u4e2d\u7684\u52a0\u901f\u5730\u5740\u4ece\u963f\u91cc\u4e91\u83b7\u53d6\uff0c\u83b7\u53d6\u5730\u5740\uff1a https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors bip\u662f\u4fee\u6539Docker\u9ed8\u8ba4\u5206\u914dbridge\u7f51\u7edc\u7684\u5730\u5740\u6bb5 \u82e5\u8981\u914d\u7f6eDNS, \u8bf7\u6dfb\u52a0 \"dns\": [\"223.5.5.5\", \"223.6.6.6\"] \u82e5\u8981\u914d\u7f6eDocker\u955c\u50cf\u548c\u5bb9\u5668\u7684\u5b58\u50a8\u914d\u7f6e, \u8bf7\u6dfb\u52a0 \"data-root\": \"/path/to/custom\" \u975eroot\u7528\u6237\u53d6\u6d88sudo\u9650\u5236 \u542f\u52a8docker service docker start \u6216 systemctl docker start \u5c06\u5f53\u524d\u7528\u6237\u52a0\u5165docker\u7ec4 sudo gpasswd -a ${USER} docker \u5237\u65b0group\u7f13\u5b58 newgrp - docker \u79bb\u7ebf\u5b89\u88c5 \u8bbf\u95ee\u5b98\u7f51\u4e0b\u8f7d\u5730\u5740 https://download.docker.com/linux/debian/dists/bullseye/pool/stable/amd64/ \u6539\u7f51\u7ad9 https://download.docker.com/ \u53ef\u79bb\u7ebf\u4e0b\u8f7dlinux\u3001mach\u548cwindos\u7684\u79bb\u7ebf\u5b89\u88c5\u5305 \u5bf9\u4e8elinx\uff0c\u53ef\u9009\u62e9\u652f\u6301\u7684\u53d1\u884c\u7248\u3001\u7248\u672c\u548c\u67b6\u6784\u7b49 \u672c\u6848\u4f8b\u662fDebian bullseye(11)\u7684amd64\u67b6\u6784 \u4e0b\u8f7d\u79bb\u7ebf\u5b89\u88c5\u5305 wget https://download.docker.com/linux/debian/dists/bullseye/pool/stable/amd64/containerd.io_1.4.6-1_amd64.deb wget https://download.docker.com/linux/debian/dists/bullseye/pool/stable/amd64/docker-ce-cli_20.10.7~3-0~debian-bullseye_amd64.deb wget https://download.docker.com/linux/debian/dists/bullseye/pool/stable/amd64/docker-ce_20.10.7~3-0~debian-bullseye_amd64.deb wget https://download.docker.com/linux/debian/dists/bullseye/pool/stable/amd64/docker-ce-rootless-extras_20.10.7~3-0~debian-bullseye_amd64.deb wget https://download.docker.com/linux/debian/dists/bullseye/pool/stable/amd64/docker-scan-plugin_0.8.0~debian-bullseye_amd64.deb \u79bb\u7ebf\u5b89\u88c5 dpkg -i containerd.io_1.4.6-1_amd64.deb dpkg -i docker-ce-cli_20.10.7~3-0~debian-bullseye_amd64.deb dpkg -i docker-ce_20.10.7~3-0~debian-bullseye_amd64.deb dpkg -i docker-ce-rootless-extras_20.10.7~3-0~debian-bullseye_amd64.deb dpkg -i docker-scan-plugin_0.8.0~debian-bullseye_amd64.deb","title":"Debian\u5b89\u88c5\u548c\u914d\u7f6eDocker"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEDocker/#debiandocker","text":"","title":"Debian\u5b89\u88c5\u548c\u914d\u7f6eDocker"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEDocker/#_1","text":"curl -fsSL https://get.docker.com -o get-docker.sh sh get-docker.sh \u6216 wget -qO- https://get.docker.com | sh","title":"\u5728\u7ebf\u5b89\u88c5"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEDocker/#ip","text":"mkdir -p /etc/docker tee /etc/docker/daemon.json <<-'EOF' { \"registry-mirrors\": [\"https://t6wp3k6n.mirror.aliyuncs.com\"], \"bip\": \"192.168.255.1/24\" } registry-mirrors\u4e2d\u7684\u52a0\u901f\u5730\u5740\u4ece\u963f\u91cc\u4e91\u83b7\u53d6\uff0c\u83b7\u53d6\u5730\u5740\uff1a https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors bip\u662f\u4fee\u6539Docker\u9ed8\u8ba4\u5206\u914dbridge\u7f51\u7edc\u7684\u5730\u5740\u6bb5 \u82e5\u8981\u914d\u7f6eDNS, \u8bf7\u6dfb\u52a0 \"dns\": [\"223.5.5.5\", \"223.6.6.6\"] \u82e5\u8981\u914d\u7f6eDocker\u955c\u50cf\u548c\u5bb9\u5668\u7684\u5b58\u50a8\u914d\u7f6e, \u8bf7\u6dfb\u52a0 \"data-root\": \"/path/to/custom\"","title":"\u955c\u50cf\u52a0\u901f\u548c\u914d\u7f6eIP\u5730\u5740\u6bb5"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEDocker/#rootsudo","text":"","title":"\u975eroot\u7528\u6237\u53d6\u6d88sudo\u9650\u5236"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEDocker/#docker","text":"service docker start \u6216 systemctl docker start","title":"\u542f\u52a8docker"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEDocker/#docker_1","text":"sudo gpasswd -a ${USER} docker","title":"\u5c06\u5f53\u524d\u7528\u6237\u52a0\u5165docker\u7ec4"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEDocker/#group","text":"newgrp - docker","title":"\u5237\u65b0group\u7f13\u5b58"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEDocker/#_2","text":"","title":"\u79bb\u7ebf\u5b89\u88c5"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEDocker/#_3","text":"https://download.docker.com/linux/debian/dists/bullseye/pool/stable/amd64/ \u6539\u7f51\u7ad9 https://download.docker.com/ \u53ef\u79bb\u7ebf\u4e0b\u8f7dlinux\u3001mach\u548cwindos\u7684\u79bb\u7ebf\u5b89\u88c5\u5305 \u5bf9\u4e8elinx\uff0c\u53ef\u9009\u62e9\u652f\u6301\u7684\u53d1\u884c\u7248\u3001\u7248\u672c\u548c\u67b6\u6784\u7b49 \u672c\u6848\u4f8b\u662fDebian bullseye(11)\u7684amd64\u67b6\u6784","title":"\u8bbf\u95ee\u5b98\u7f51\u4e0b\u8f7d\u5730\u5740"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEDocker/#_4","text":"wget https://download.docker.com/linux/debian/dists/bullseye/pool/stable/amd64/containerd.io_1.4.6-1_amd64.deb wget https://download.docker.com/linux/debian/dists/bullseye/pool/stable/amd64/docker-ce-cli_20.10.7~3-0~debian-bullseye_amd64.deb wget https://download.docker.com/linux/debian/dists/bullseye/pool/stable/amd64/docker-ce_20.10.7~3-0~debian-bullseye_amd64.deb wget https://download.docker.com/linux/debian/dists/bullseye/pool/stable/amd64/docker-ce-rootless-extras_20.10.7~3-0~debian-bullseye_amd64.deb wget https://download.docker.com/linux/debian/dists/bullseye/pool/stable/amd64/docker-scan-plugin_0.8.0~debian-bullseye_amd64.deb","title":"\u4e0b\u8f7d\u79bb\u7ebf\u5b89\u88c5\u5305"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEDocker/#_5","text":"dpkg -i containerd.io_1.4.6-1_amd64.deb dpkg -i docker-ce-cli_20.10.7~3-0~debian-bullseye_amd64.deb dpkg -i docker-ce_20.10.7~3-0~debian-bullseye_amd64.deb dpkg -i docker-ce-rootless-extras_20.10.7~3-0~debian-bullseye_amd64.deb dpkg -i docker-scan-plugin_0.8.0~debian-bullseye_amd64.deb","title":"\u79bb\u7ebf\u5b89\u88c5"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEMariaDB/","text":"Debian\u5b89\u88c5\u548c\u914d\u7f6eMariaDB \u5b89\u88c5 apt install -y mariadb-server mariadb-client \u914d\u7f6e \u6570\u636e\u5e93\u914d\u7f6e # \u6267\u884c\u4e0b\u65b9\u547d\u4ee4\u914d\u7f6emysql mysql_secure_installation # \u6267\u884c\u4e0a\u65b9\u547d\u4ee4\u51fa\u73b0\u4ea4\u4e92\u5f0f\u4f1a\u8bdd Enter current password for root (enter for none): # \u6b64\u5904\u76f4\u63a5\u6309\u4e0b\u56de\u8f66 Switch to unix_socket authentication [Y/n] # \u8f93\u5165n\u540e\u6309\u4e0b\u56de\u8f66 Change the root password? [Y/n] # \u8f93\u5165y\u540e\u6309\u4e0b\u56de\u8f66 New password: # \u8bbe\u7f6e\u5bc6\u7801 Re-enter new password: # \u91cd\u590d\u521a\u521a\u8bbe\u7f6e\u7684\u5bc6\u7801 Remove anonymous users? [Y/n] # \u8f93\u5165y\u540e\u6309\u4e0b\u56de\u8f66 Disallow root login remotely? [Y/n] # \u8f93\u5165n\u540e\u6309\u4e0b\u56de\u8f66 Remove test database and access to it? [Y/n] # \u8f93\u5165y\u540e\u6309\u4e0b\u56de\u8f66 Reload privilege tables now? [Y/n] # \u8f93\u5165y\u540e\u6309\u4e0b\u56de\u8f66 # \u767b\u5f55mysql\u7ee7\u7eed\u914d\u7f6e\uff0c\u6ce8\u610f\uff1a\u5efa\u8bae\u628a\u7b2c\u4e09\u6761\u547d\u4ee4\u4e2d\u7684\"password\"\u6539\u6210\u4e0a\u9762\u8bbe\u7f6e\u7684\u5bc6\u7801\uff0c\u4fdd\u6301\u4e00\u81f4 mysql -uroot -p use mysql grant all privileges on *.* to 'root'@'%' identified by 'password' with grant option; flush privileges; exit \u6570\u636e\u5e93\u6587\u4ef6\u914d\u7f6e nano /etc/mysql/mariadb.conf.d/50-server.cnf \u627e\u5230 bind-address = 127.0.0.1 \u6539\u4e3a bind-address = 0.0.0.0 \u91cd\u542f\u670d\u52a1 service mariadb restart \u6216 systemctl restart mariadb","title":"Debian\u5b89\u88c5\u548c\u914d\u7f6eMariaDB"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEMariaDB/#debianmariadb","text":"","title":"Debian\u5b89\u88c5\u548c\u914d\u7f6eMariaDB"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEMariaDB/#_1","text":"apt install -y mariadb-server mariadb-client","title":"\u5b89\u88c5"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEMariaDB/#_2","text":"","title":"\u914d\u7f6e"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEMariaDB/#_3","text":"# \u6267\u884c\u4e0b\u65b9\u547d\u4ee4\u914d\u7f6emysql mysql_secure_installation # \u6267\u884c\u4e0a\u65b9\u547d\u4ee4\u51fa\u73b0\u4ea4\u4e92\u5f0f\u4f1a\u8bdd Enter current password for root (enter for none): # \u6b64\u5904\u76f4\u63a5\u6309\u4e0b\u56de\u8f66 Switch to unix_socket authentication [Y/n] # \u8f93\u5165n\u540e\u6309\u4e0b\u56de\u8f66 Change the root password? [Y/n] # \u8f93\u5165y\u540e\u6309\u4e0b\u56de\u8f66 New password: # \u8bbe\u7f6e\u5bc6\u7801 Re-enter new password: # \u91cd\u590d\u521a\u521a\u8bbe\u7f6e\u7684\u5bc6\u7801 Remove anonymous users? [Y/n] # \u8f93\u5165y\u540e\u6309\u4e0b\u56de\u8f66 Disallow root login remotely? [Y/n] # \u8f93\u5165n\u540e\u6309\u4e0b\u56de\u8f66 Remove test database and access to it? [Y/n] # \u8f93\u5165y\u540e\u6309\u4e0b\u56de\u8f66 Reload privilege tables now? [Y/n] # \u8f93\u5165y\u540e\u6309\u4e0b\u56de\u8f66 # \u767b\u5f55mysql\u7ee7\u7eed\u914d\u7f6e\uff0c\u6ce8\u610f\uff1a\u5efa\u8bae\u628a\u7b2c\u4e09\u6761\u547d\u4ee4\u4e2d\u7684\"password\"\u6539\u6210\u4e0a\u9762\u8bbe\u7f6e\u7684\u5bc6\u7801\uff0c\u4fdd\u6301\u4e00\u81f4 mysql -uroot -p use mysql grant all privileges on *.* to 'root'@'%' identified by 'password' with grant option; flush privileges; exit","title":"\u6570\u636e\u5e93\u914d\u7f6e"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEMariaDB/#_4","text":"nano /etc/mysql/mariadb.conf.d/50-server.cnf \u627e\u5230 bind-address = 127.0.0.1 \u6539\u4e3a bind-address = 0.0.0.0","title":"\u6570\u636e\u5e93\u6587\u4ef6\u914d\u7f6e"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEMariaDB/#_5","text":"service mariadb restart \u6216 systemctl restart mariadb","title":"\u91cd\u542f\u670d\u52a1"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEPostgreSQL/","text":"Debian\u5b89\u88c5\u548c\u914d\u7f6ePostgreSQL \u5b89\u88c5 \u53c2\u8003\uff1a PostgreSQL: Linux downloads (Debian) sudo sh -c 'echo \"deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main\" > /etc/apt/sources.list.d/pgdg.list' wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add - sudo apt-get update sudo apt-get -y install postgresql \u914d\u7f6e \u5141\u8bb8\u4efb\u4f55IP\u8bbf\u95ee \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6pg_hba.conf vim /etc/postgresql/13/main/pg_hba.conf \u6ce8\u610f\uff0c\u4e0a\u8ff0\u547d\u4ee4\u4e2d\u768413\u662f\u7248\u672c\uff0c\u9700\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u66f4\u6539 \u627e\u5230 host all all 127.0.0.1/32 md5 \u6539\u4e3a host all all 0.0.0.0/0 md5 \u76d1\u542c\u4efb\u4f55IP \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6postgresql.conf vim /etc/postgresql/13/main/postgresql.conf \u627e\u5230 #listen_addresses = 'localhost' \u6539\u4e3a listen_addresses = '*' \u4fee\u6539Linux\u7528\u6237postgres\u5bc6\u7801 passwd postgres \u8f93\u5165\u4e24\u6b21\u5bc6\u7801\u786e\u8ba4\u5373\u53ef \u5207\u6362\u81f3Linux\u7528\u6237postgres su - postgres \u8f93\u5165\u4e0a\u9762\u8bbe\u7f6e\u7684\u5bc6\u7801\u56de\u8f66\u5373\u53ef \u4fee\u6539\u6570\u636e\u5e93\u7528\u6237postgres\u5bc6\u7801 psql alter user postgres with password 'postgres'; \\q exit \u4e0a\u8ff0\u7b2c2\u6761\u547d\u4ee4\u4e2d\u6700\u540e\u7684'postgres'\u5373\u662f\u5bc6\u7801\uff0c\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8bbe\u7f6e\u5373\u53ef \u91cd\u542f\u670d\u52a1 service postgresql restart \u6216 systemctl restart postgresql","title":"Debian\u5b89\u88c5\u548c\u914d\u7f6ePostgreSQL"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEPostgreSQL/#debianpostgresql","text":"","title":"Debian\u5b89\u88c5\u548c\u914d\u7f6ePostgreSQL"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEPostgreSQL/#_1","text":"\u53c2\u8003\uff1a PostgreSQL: Linux downloads (Debian) sudo sh -c 'echo \"deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main\" > /etc/apt/sources.list.d/pgdg.list' wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add - sudo apt-get update sudo apt-get -y install postgresql","title":"\u5b89\u88c5"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEPostgreSQL/#_2","text":"","title":"\u914d\u7f6e"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEPostgreSQL/#ip","text":"\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6pg_hba.conf vim /etc/postgresql/13/main/pg_hba.conf \u6ce8\u610f\uff0c\u4e0a\u8ff0\u547d\u4ee4\u4e2d\u768413\u662f\u7248\u672c\uff0c\u9700\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u66f4\u6539 \u627e\u5230 host all all 127.0.0.1/32 md5 \u6539\u4e3a host all all 0.0.0.0/0 md5","title":"\u5141\u8bb8\u4efb\u4f55IP\u8bbf\u95ee"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEPostgreSQL/#ip_1","text":"\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6postgresql.conf vim /etc/postgresql/13/main/postgresql.conf \u627e\u5230 #listen_addresses = 'localhost' \u6539\u4e3a listen_addresses = '*'","title":"\u76d1\u542c\u4efb\u4f55IP"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEPostgreSQL/#linuxpostgres","text":"passwd postgres \u8f93\u5165\u4e24\u6b21\u5bc6\u7801\u786e\u8ba4\u5373\u53ef","title":"\u4fee\u6539Linux\u7528\u6237postgres\u5bc6\u7801"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEPostgreSQL/#linuxpostgres_1","text":"su - postgres \u8f93\u5165\u4e0a\u9762\u8bbe\u7f6e\u7684\u5bc6\u7801\u56de\u8f66\u5373\u53ef","title":"\u5207\u6362\u81f3Linux\u7528\u6237postgres"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEPostgreSQL/#postgres","text":"psql alter user postgres with password 'postgres'; \\q exit \u4e0a\u8ff0\u7b2c2\u6761\u547d\u4ee4\u4e2d\u6700\u540e\u7684'postgres'\u5373\u662f\u5bc6\u7801\uff0c\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8bbe\u7f6e\u5373\u53ef","title":"\u4fee\u6539\u6570\u636e\u5e93\u7528\u6237postgres\u5bc6\u7801"},{"location":"linux/Debian%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEPostgreSQL/#_3","text":"service postgresql restart \u6216 systemctl restart postgresql","title":"\u91cd\u542f\u670d\u52a1"},{"location":"linux/Debian%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/","text":"Debian\u7f51\u7edc\u7ba1\u7406 Debian\u4e2d\u5b58\u5728\u4e24\u5957\u7ba1\u7406\u7f51\u7edc\u7684\u65b9\u6848\uff1a 1\u3001/etc/network/interfaces 2\u3001Network-Manager \u65b9\u68481\u9ed8\u8ba4\u5b58\u5728\uff0c\u5f53\u5b89\u88c5DE\u65f6\uff0c\u6bd4\u5982Gnome\uff0c\u4f1a\u4ea7\u751f\u65b9\u68482\uff0c\u4e24\u5957\u65b9\u6848\u662f\u51b2\u7a81\u7684\u3002 \u65e2\u80fd\u907f\u514d\u65b9\u6848\u51b2\u7a81\u53c8\u80fd\u5171\u4eab\u914d\u7f6e\u7684\u89e3\u51b3\u65b9\u6848\uff1a 1\u3001\u5f53Network-Manager\u53d1\u73b0/etc/network/interfaces\u88ab\u6539\u52a8\u7684\u65f6\u5019\uff0c\u5219\u5173\u95ed\u81ea\u5df1\uff08\u663e\u793a\u4e3a\u672a\u6258\u7ba1\uff09\uff0c\u9664\u975emanaged\u8bbe\u7f6e\u6210\u771f\u3002 2\u3001\u5f53managed\u8bbe\u7f6e\u6210\u771f\u65f6\uff0c/etc/network/interfaces\uff0c\u5219\u4e0d\u751f\u6548\u3002 \u5bf9\u4e8e\u5b89\u88c5\u684c\u9762\u73af\u5883\u7684\u7528\u6237\u5efa\u8bae \u7f16\u8f91/etc/NetworkManager/NetworkManager.conf \u628a\u6700\u540e\u4e00\u884c\u7684\u201cmanaged=false\u201d\u6539\u4e3a\u201cmanaged=true\u201d \u7136\u540e\u91cd\u542fNetworkManager\u6216\u7cfb\u7edf\u5373\u53ef","title":"Debian\u7f51\u7edc\u7ba1\u7406"},{"location":"linux/Debian%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/#debian","text":"Debian\u4e2d\u5b58\u5728\u4e24\u5957\u7ba1\u7406\u7f51\u7edc\u7684\u65b9\u6848\uff1a 1\u3001/etc/network/interfaces 2\u3001Network-Manager \u65b9\u68481\u9ed8\u8ba4\u5b58\u5728\uff0c\u5f53\u5b89\u88c5DE\u65f6\uff0c\u6bd4\u5982Gnome\uff0c\u4f1a\u4ea7\u751f\u65b9\u68482\uff0c\u4e24\u5957\u65b9\u6848\u662f\u51b2\u7a81\u7684\u3002 \u65e2\u80fd\u907f\u514d\u65b9\u6848\u51b2\u7a81\u53c8\u80fd\u5171\u4eab\u914d\u7f6e\u7684\u89e3\u51b3\u65b9\u6848\uff1a 1\u3001\u5f53Network-Manager\u53d1\u73b0/etc/network/interfaces\u88ab\u6539\u52a8\u7684\u65f6\u5019\uff0c\u5219\u5173\u95ed\u81ea\u5df1\uff08\u663e\u793a\u4e3a\u672a\u6258\u7ba1\uff09\uff0c\u9664\u975emanaged\u8bbe\u7f6e\u6210\u771f\u3002 2\u3001\u5f53managed\u8bbe\u7f6e\u6210\u771f\u65f6\uff0c/etc/network/interfaces\uff0c\u5219\u4e0d\u751f\u6548\u3002 \u5bf9\u4e8e\u5b89\u88c5\u684c\u9762\u73af\u5883\u7684\u7528\u6237\u5efa\u8bae \u7f16\u8f91/etc/NetworkManager/NetworkManager.conf \u628a\u6700\u540e\u4e00\u884c\u7684\u201cmanaged=false\u201d\u6539\u4e3a\u201cmanaged=true\u201d \u7136\u540e\u91cd\u542fNetworkManager\u6216\u7cfb\u7edf\u5373\u53ef","title":"Debian\u7f51\u7edc\u7ba1\u7406"},{"location":"linux/Linux%E4%B8%8B%E6%A0%BC%E5%BC%8F%E5%8C%96U%E7%9B%98%E5%8F%8A%E9%87%8D%E5%BB%BA%E5%88%86%E5%8C%BA/","text":"Linux\u4e0b\u683c\u5f0f\u5316U\u76d8\u53ca\u91cd\u5efa\u5206\u533a 1\u3001\u67e5\u627eU\u76d8 fdisk -l \u5047\u8bbe\u627e\u5230U\u76d8 /dev/sda 2\u3001\u683c\u5f0f\u5316ext4\u6587\u4ef6\u7cfb\u7edf mkfs.ext4 /dev/sda \u8f93\u5165 y \u56de\u8f66, \u7b49\u5f85\u547d\u4ee4\u6267\u884c\u5b8c\u6bd5 3\u3001\u521b\u5efa\u5206\u533a fdisk /dev/sda \u8f93\u5165 n \u65b0\u5efa\u5206\u533a \u8f93\u5165 p \u521b\u5efa\u4e3b\u5206\u533a \u8f93\u5165 1 \u8bbe\u7f6e\u4e3b\u5206\u533a\u5e8f\u53f7 \u8bbe\u7f6e\u5206\u533a\u8d77\u59cb\u5730\u5740, \u4fdd\u6301\u9ed8\u8ba4, \u76f4\u63a5\u56de\u8f66 \u8bbe\u7f6e\u5206\u533a\u7ed3\u675f\u5730\u5740, \u4fdd\u6301\u9ed8\u8ba4, \u76f4\u63a5\u56de\u8f66 \u8f93\u5165 w \u4fdd\u5b58\u5e76\u5199\u5165\u5206\u533a\u8868 \u6b64\u65f6, \u901a\u8fc7\u547d\u4ee4 fdisk -l \u53ef\u770b\u5230\u5206\u533a /dev/sda1 \u521b\u5efa\u5b8c\u6bd5 4\u3001\u683c\u5f0f\u5316\u5206\u533a mkfs.ext4 /dev/sda1 5\u3001\u66f4\u6539U\u76d8Label e2label /dev/sda1 \"mydiskname\"","title":"Linux\u4e0b\u683c\u5f0f\u5316U\u76d8\u53ca\u91cd\u5efa\u5206\u533a"},{"location":"linux/Linux%E4%B8%8B%E6%A0%BC%E5%BC%8F%E5%8C%96U%E7%9B%98%E5%8F%8A%E9%87%8D%E5%BB%BA%E5%88%86%E5%8C%BA/#linuxu","text":"","title":"Linux\u4e0b\u683c\u5f0f\u5316U\u76d8\u53ca\u91cd\u5efa\u5206\u533a"},{"location":"linux/Linux%E4%B8%8B%E6%A0%BC%E5%BC%8F%E5%8C%96U%E7%9B%98%E5%8F%8A%E9%87%8D%E5%BB%BA%E5%88%86%E5%8C%BA/#1u","text":"fdisk -l \u5047\u8bbe\u627e\u5230U\u76d8 /dev/sda","title":"1\u3001\u67e5\u627eU\u76d8"},{"location":"linux/Linux%E4%B8%8B%E6%A0%BC%E5%BC%8F%E5%8C%96U%E7%9B%98%E5%8F%8A%E9%87%8D%E5%BB%BA%E5%88%86%E5%8C%BA/#2ext4","text":"mkfs.ext4 /dev/sda \u8f93\u5165 y \u56de\u8f66, \u7b49\u5f85\u547d\u4ee4\u6267\u884c\u5b8c\u6bd5","title":"2\u3001\u683c\u5f0f\u5316ext4\u6587\u4ef6\u7cfb\u7edf"},{"location":"linux/Linux%E4%B8%8B%E6%A0%BC%E5%BC%8F%E5%8C%96U%E7%9B%98%E5%8F%8A%E9%87%8D%E5%BB%BA%E5%88%86%E5%8C%BA/#3","text":"fdisk /dev/sda \u8f93\u5165 n \u65b0\u5efa\u5206\u533a \u8f93\u5165 p \u521b\u5efa\u4e3b\u5206\u533a \u8f93\u5165 1 \u8bbe\u7f6e\u4e3b\u5206\u533a\u5e8f\u53f7 \u8bbe\u7f6e\u5206\u533a\u8d77\u59cb\u5730\u5740, \u4fdd\u6301\u9ed8\u8ba4, \u76f4\u63a5\u56de\u8f66 \u8bbe\u7f6e\u5206\u533a\u7ed3\u675f\u5730\u5740, \u4fdd\u6301\u9ed8\u8ba4, \u76f4\u63a5\u56de\u8f66 \u8f93\u5165 w \u4fdd\u5b58\u5e76\u5199\u5165\u5206\u533a\u8868 \u6b64\u65f6, \u901a\u8fc7\u547d\u4ee4 fdisk -l \u53ef\u770b\u5230\u5206\u533a /dev/sda1 \u521b\u5efa\u5b8c\u6bd5","title":"3\u3001\u521b\u5efa\u5206\u533a"},{"location":"linux/Linux%E4%B8%8B%E6%A0%BC%E5%BC%8F%E5%8C%96U%E7%9B%98%E5%8F%8A%E9%87%8D%E5%BB%BA%E5%88%86%E5%8C%BA/#4","text":"mkfs.ext4 /dev/sda1","title":"4\u3001\u683c\u5f0f\u5316\u5206\u533a"},{"location":"linux/Linux%E4%B8%8B%E6%A0%BC%E5%BC%8F%E5%8C%96U%E7%9B%98%E5%8F%8A%E9%87%8D%E5%BB%BA%E5%88%86%E5%8C%BA/#5ulabel","text":"e2label /dev/sda1 \"mydiskname\"","title":"5\u3001\u66f4\u6539U\u76d8Label"},{"location":"linux/Linux%E4%B8%8B%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BDU%E7%9B%98/","text":"Linux\u4e0b\u81ea\u52a8\u6302\u8f7dU\u76d8 1\u3001\u67e5\u770bU\u76d8UUID blkid|grep -i sda \u5f97\u5230\u7c7b\u4f3c\u8fd9\u6837\u7684\u5185\u5bb9: UUID=\"6f17b453-511e-4cb0-8655-ed487c51c54b\" 2\u3001\u81ea\u52a8\u6302\u8f7d echo \"UUID=6f17b453-511e-4cb0-8655-ed487c51c54b /mnt/sda1 ext4 defaults 0 0\" >> /etc/fstab \u89e3\u91ca: /etc/fstab\u6587\u4ef6\u4e3b\u8981\u5305\u62ec6\u6bb5\uff0c\u4f9d\u6b21\u662f\uff1a device\u3000\u3000mount point\u3000\u3000filesystem\u3000\u3000options\u3000\u3000dump\u3000\u3000pass device: \u8bbe\u5907\u6587\u4ef6\u7684UUID mount point: \u6302\u8f7d\u70b9, \u5373\u6587\u4ef6\u5939, \u9700\u8981\u63d0\u524d\u521b\u5efa filesystem: \u6587\u4ef6\u7cfb\u7edf\u7684\u683c\u5f0f\uff0c\u5305\u62ecext2\u3001ext3\u3001zfs\u3001nfs\u3001vfat\u7b49 options: \u5982\u4e0b Defaults \u540c\u65f6\u5177\u6709rw,suid,dev,exec,auto,nouser,async\u7b49\u9ed8\u8ba4\u53c2\u6570\u7684\u8bbe\u7f6e Async/sync \u8bbe\u7f6e\u662f\u5426\u4e3a\u540c\u6b65\u65b9\u5f0f\u8fd0\u884c\uff0c\u9ed8\u8ba4\u4e3aasync auto/noauto \u5f53\u4e0b\u8f7dmount -a \u7684\u547d\u4ee4\u65f6\uff0c\u6b64\u6587\u4ef6\u7cfb\u7edf\u662f\u5426\u88ab\u4e3b\u52a8\u6302\u8f7d\u3002\u9ed8\u8ba4\u4e3aauto rw/ro \u662f\u5426\u4ee5\u4ee5\u53ea\u8bfb\u6216\u8005\u8bfb\u5199\u6a21\u5f0f\u6302\u8f7d exec/noexec \u9650\u5236\u6b64\u6587\u4ef6\u7cfb\u7edf\u5185\u662f\u5426\u80fd\u591f\u8fdb\u884c\"\u6267\u884c\"\u7684\u64cd\u4f5c user/nouser \u662f\u5426\u5141\u8bb8\u7528\u6237\u4f7f\u7528mount\u547d\u4ee4\u6302\u8f7d suid/nosuid \u662f\u5426\u5141\u8bb8SUID\u7684\u5b58\u5728 Usrquota \u542f\u52a8\u6587\u4ef6\u7cfb\u7edf\u652f\u6301\u78c1\u76d8\u914d\u989d\u6a21\u5f0f Grpquota \u542f\u52a8\u6587\u4ef6\u7cfb\u7edf\u5bf9\u7fa4\u7ec4\u78c1\u76d8\u914d\u989d\u6a21\u5f0f\u7684\u652f\u6301 dump: dump\u5de5\u5177\u5907\u4efd\u6587\u4ef6\u7cfb\u7edf\u7684\u8bbe\u7f6e, 0\u8868\u793a\u5ffd\u7565, 1\u8868\u793a\u5907\u4efd Pass: fsck\u5de5\u5177\u68c0\u67e5\u6587\u4ef6\u7cfb\u7edf\u7684\u8bbe\u7f6e, 0\u8868\u793a\u5ffd\u7565,1\u8868\u793a\u83b7\u5f97\u6700\u9ad8\u4f18\u5148\u6743, \u5176\u4ed6\u6240\u6709\u9700\u8981\u88ab\u68c0\u67e5\u7684\u8bbe\u5907\u8bbe\u7f6e\u4e3a2 3\u3001\u6269\u5c55 \u624b\u52a8\u6302\u8f7d: mount /dev/sda1 /mnt/usb \u624b\u52a8\u5378\u8f7d: umount /dev/sda1","title":"Linux\u4e0b\u81ea\u52a8\u6302\u8f7dU\u76d8"},{"location":"linux/Linux%E4%B8%8B%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BDU%E7%9B%98/#linuxu","text":"","title":"Linux\u4e0b\u81ea\u52a8\u6302\u8f7dU\u76d8"},{"location":"linux/Linux%E4%B8%8B%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BDU%E7%9B%98/#1uuuid","text":"blkid|grep -i sda \u5f97\u5230\u7c7b\u4f3c\u8fd9\u6837\u7684\u5185\u5bb9: UUID=\"6f17b453-511e-4cb0-8655-ed487c51c54b\"","title":"1\u3001\u67e5\u770bU\u76d8UUID"},{"location":"linux/Linux%E4%B8%8B%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BDU%E7%9B%98/#2","text":"echo \"UUID=6f17b453-511e-4cb0-8655-ed487c51c54b /mnt/sda1 ext4 defaults 0 0\" >> /etc/fstab \u89e3\u91ca: /etc/fstab\u6587\u4ef6\u4e3b\u8981\u5305\u62ec6\u6bb5\uff0c\u4f9d\u6b21\u662f\uff1a device\u3000\u3000mount point\u3000\u3000filesystem\u3000\u3000options\u3000\u3000dump\u3000\u3000pass device: \u8bbe\u5907\u6587\u4ef6\u7684UUID mount point: \u6302\u8f7d\u70b9, \u5373\u6587\u4ef6\u5939, \u9700\u8981\u63d0\u524d\u521b\u5efa filesystem: \u6587\u4ef6\u7cfb\u7edf\u7684\u683c\u5f0f\uff0c\u5305\u62ecext2\u3001ext3\u3001zfs\u3001nfs\u3001vfat\u7b49 options: \u5982\u4e0b Defaults \u540c\u65f6\u5177\u6709rw,suid,dev,exec,auto,nouser,async\u7b49\u9ed8\u8ba4\u53c2\u6570\u7684\u8bbe\u7f6e Async/sync \u8bbe\u7f6e\u662f\u5426\u4e3a\u540c\u6b65\u65b9\u5f0f\u8fd0\u884c\uff0c\u9ed8\u8ba4\u4e3aasync auto/noauto \u5f53\u4e0b\u8f7dmount -a \u7684\u547d\u4ee4\u65f6\uff0c\u6b64\u6587\u4ef6\u7cfb\u7edf\u662f\u5426\u88ab\u4e3b\u52a8\u6302\u8f7d\u3002\u9ed8\u8ba4\u4e3aauto rw/ro \u662f\u5426\u4ee5\u4ee5\u53ea\u8bfb\u6216\u8005\u8bfb\u5199\u6a21\u5f0f\u6302\u8f7d exec/noexec \u9650\u5236\u6b64\u6587\u4ef6\u7cfb\u7edf\u5185\u662f\u5426\u80fd\u591f\u8fdb\u884c\"\u6267\u884c\"\u7684\u64cd\u4f5c user/nouser \u662f\u5426\u5141\u8bb8\u7528\u6237\u4f7f\u7528mount\u547d\u4ee4\u6302\u8f7d suid/nosuid \u662f\u5426\u5141\u8bb8SUID\u7684\u5b58\u5728 Usrquota \u542f\u52a8\u6587\u4ef6\u7cfb\u7edf\u652f\u6301\u78c1\u76d8\u914d\u989d\u6a21\u5f0f Grpquota \u542f\u52a8\u6587\u4ef6\u7cfb\u7edf\u5bf9\u7fa4\u7ec4\u78c1\u76d8\u914d\u989d\u6a21\u5f0f\u7684\u652f\u6301 dump: dump\u5de5\u5177\u5907\u4efd\u6587\u4ef6\u7cfb\u7edf\u7684\u8bbe\u7f6e, 0\u8868\u793a\u5ffd\u7565, 1\u8868\u793a\u5907\u4efd Pass: fsck\u5de5\u5177\u68c0\u67e5\u6587\u4ef6\u7cfb\u7edf\u7684\u8bbe\u7f6e, 0\u8868\u793a\u5ffd\u7565,1\u8868\u793a\u83b7\u5f97\u6700\u9ad8\u4f18\u5148\u6743, \u5176\u4ed6\u6240\u6709\u9700\u8981\u88ab\u68c0\u67e5\u7684\u8bbe\u5907\u8bbe\u7f6e\u4e3a2","title":"2\u3001\u81ea\u52a8\u6302\u8f7d"},{"location":"linux/Linux%E4%B8%8B%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BDU%E7%9B%98/#3","text":"\u624b\u52a8\u6302\u8f7d: mount /dev/sda1 /mnt/usb \u624b\u52a8\u5378\u8f7d: umount /dev/sda1","title":"3\u3001\u6269\u5c55"},{"location":"linux/Linux%E4%B8%8B%E8%A7%A3%E5%8E%8BWindows%E5%8E%8B%E7%BC%A9%E7%9A%84ZIP%E6%96%87%E4%BB%B6%E5%90%8E%E4%B9%B1%E7%A0%81%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/","text":"Linux\u4e0b\u89e3\u538bWindows\u538b\u7f29\u7684ZIP\u6587\u4ef6\u540e\u4e71\u7801\u7684\u89e3\u51b3\u529e\u6cd5 \u95ee\u9898\u539f\u56e0 Windows\u4e0b\u538b\u7f29zip\u6587\u4ef6\u4f7f\u7528\u7684\u662fCP936\u7f16\u7801 CP936\u7f16\u7801\u5c31\u662fGBK\uff0c\u5f53IBM\u53d1\u660e\u4ee3\u7801\u9875\u65f6\uff0c\u628aGBK\u653e\u5728\u4e86\u7b2c936\u9875\uff0c\u6240\u4ee5GBK\u53c8\u88ab\u79f0\u4e3aCP936\u3002 \u89e3\u51b3\u529e\u6cd5 unzip -O CP936 xxx.zip","title":"Linux\u89e3\u538bZIP\u4e71\u7801"},{"location":"linux/Linux%E4%B8%8B%E8%A7%A3%E5%8E%8BWindows%E5%8E%8B%E7%BC%A9%E7%9A%84ZIP%E6%96%87%E4%BB%B6%E5%90%8E%E4%B9%B1%E7%A0%81%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/#linuxwindowszip","text":"\u95ee\u9898\u539f\u56e0 Windows\u4e0b\u538b\u7f29zip\u6587\u4ef6\u4f7f\u7528\u7684\u662fCP936\u7f16\u7801 CP936\u7f16\u7801\u5c31\u662fGBK\uff0c\u5f53IBM\u53d1\u660e\u4ee3\u7801\u9875\u65f6\uff0c\u628aGBK\u653e\u5728\u4e86\u7b2c936\u9875\uff0c\u6240\u4ee5GBK\u53c8\u88ab\u79f0\u4e3aCP936\u3002 \u89e3\u51b3\u529e\u6cd5 unzip -O CP936 xxx.zip","title":"Linux\u4e0b\u89e3\u538bWindows\u538b\u7f29\u7684ZIP\u6587\u4ef6\u540e\u4e71\u7801\u7684\u89e3\u51b3\u529e\u6cd5"},{"location":"linux/Linux%E6%9D%82%E8%AE%B0/","text":"Linux\u6742\u8bb0 \u67e5\u770b\u7f51\u5361\u578b\u53f7\uff1a lspci -vv | grep Network Debian\u914d\u7f6e\u533a\u57df dpkg-reconfigure locales \u914d\u7f6e\u4e2d\u56fd\u65f6\u533a cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \u4e0b\u8f7dRMP\u5b89\u88c5\u5305\u5230\u6307\u5b9a\u76ee\u5f55\u5e76\u5f3a\u5236\u5b89\u88c5\uff08\u5ffd\u7565\u4f9d\u8d56\u5173\u7cfb\uff09 dnf install -y --downloadonly --destdir /src/rpm python3 nginx rpm -ivh --nodeps --force /src/rpm/*.rpm","title":"Linux\u6742\u8bb0"},{"location":"linux/Linux%E6%9D%82%E8%AE%B0/#linux","text":"","title":"Linux\u6742\u8bb0"},{"location":"linux/Linux%E6%9D%82%E8%AE%B0/#_1","text":"lspci -vv | grep Network","title":"\u67e5\u770b\u7f51\u5361\u578b\u53f7\uff1a"},{"location":"linux/Linux%E6%9D%82%E8%AE%B0/#debian","text":"dpkg-reconfigure locales","title":"Debian\u914d\u7f6e\u533a\u57df"},{"location":"linux/Linux%E6%9D%82%E8%AE%B0/#_2","text":"cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime","title":"\u914d\u7f6e\u4e2d\u56fd\u65f6\u533a"},{"location":"linux/Linux%E6%9D%82%E8%AE%B0/#rmp","text":"dnf install -y --downloadonly --destdir /src/rpm python3 nginx rpm -ivh --nodeps --force /src/rpm/*.rpm","title":"\u4e0b\u8f7dRMP\u5b89\u88c5\u5305\u5230\u6307\u5b9a\u76ee\u5f55\u5e76\u5f3a\u5236\u5b89\u88c5\uff08\u5ffd\u7565\u4f9d\u8d56\u5173\u7cfb\uff09"},{"location":"linux/Linux%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/","text":"Linux\u914d\u7f6eIP\u548cDNS \u4e00\u3001\u914d\u7f6eIP Debian \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6 vim /etc/network/interfaces \u8ffd\u52a0\u914d\u7f6e\u5185\u5bb9 \u52a8\u6001IP auto eth1 iface eth1 inet dhcp \u9759\u6001IP auto eth1 iface eth1 inet static address 192.168.1.2 netmask 255.255.255.0 gateway 192.168.1.1 # dns-nameservers 223.5.5.5 223.6.6.6 # \u6b64\u5904\u53ef\u914d\u7f6eDNS # hwaddress 00:22:6D:50:42:A9 # \u6b64\u5904\u53ef\u914d\u7f6eMAC\u5730\u5740 \u91cd\u542f\u7f51\u7edc\u670d\u52a1 # \u65b9\u6cd51 /etc/init.d/networking restart # \u65b9\u6cd52 service networking restart # \u65b9\u6cd53 systemctl restart networking \u914d\u7f6eDNS \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6 vim /etc/resolv.conf \u4fee\u6539\u914d\u7f6e\u5185\u5bb9 nameserver 223.5.5.5 nameserver 223.6.6.6 CentOS \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6 vi /etc/sysconfig/network-scripts/ifcfg-eth0 \u4fee\u6539\u914d\u7f6e\u5185\u5bb9 \u52a8\u6001IP\u548cDNS BOOTPROTO=dhcp # \u8bbe\u7f6e\u4e3adhcp\u5f00\u542fDHCP\u670d\u52a1\uff0c\u8bbe\u7f6e\u4e3astatic\u542f\u7528\u9759\u6001IP\u5730\u5740 MM_Controlled=no # network mamager\u7684\u53c2\u6570\uff0c\u5b9e\u65f6\u751f\u6548\uff0c\u4e0d\u9700\u8981\u91cd\u542f ONBOOT=yes # \u8bbe\u7f6e\u4e3ayes\uff0c\u5f00\u673a\u81ea\u52a8\u542f\u7528\u7f51\u7edc\u8fde\u63a5 USERCTL=yes # \u662f\u5426\u5141\u8bb8\u975eroot\u7528\u6237\u63a7\u5236\u8be5\u8bbe\u5907 DNS1=223.5.5.5 DNS2=223.6.6.6 \u9759\u6001IP\u548cDNS ONBOOT=yes BOOTPROTO=static MM_Controlled=no USERCTL=yes IPADDR=192.168.254.1 NETMASK=255.255.255.0 GATEWAY=192.168.254.254 DNS1=114.114.114.114 DNS2=8.8.8.8 \u91cd\u542f\u7f51\u7edc\u670d\u52a1 systemctl restart network","title":"Linux\u914d\u7f6eIP\u548cDNS"},{"location":"linux/Linux%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#linuxipdns","text":"","title":"Linux\u914d\u7f6eIP\u548cDNS"},{"location":"linux/Linux%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#ip","text":"","title":"\u4e00\u3001\u914d\u7f6eIP"},{"location":"linux/Linux%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#debian","text":"","title":"Debian"},{"location":"linux/Linux%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#_1","text":"vim /etc/network/interfaces","title":"\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6"},{"location":"linux/Linux%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#_2","text":"","title":"\u8ffd\u52a0\u914d\u7f6e\u5185\u5bb9"},{"location":"linux/Linux%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#ip_1","text":"auto eth1 iface eth1 inet dhcp","title":"\u52a8\u6001IP"},{"location":"linux/Linux%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#ip_2","text":"auto eth1 iface eth1 inet static address 192.168.1.2 netmask 255.255.255.0 gateway 192.168.1.1 # dns-nameservers 223.5.5.5 223.6.6.6 # \u6b64\u5904\u53ef\u914d\u7f6eDNS # hwaddress 00:22:6D:50:42:A9 # \u6b64\u5904\u53ef\u914d\u7f6eMAC\u5730\u5740 \u91cd\u542f\u7f51\u7edc\u670d\u52a1 # \u65b9\u6cd51 /etc/init.d/networking restart # \u65b9\u6cd52 service networking restart # \u65b9\u6cd53 systemctl restart networking","title":"\u9759\u6001IP"},{"location":"linux/Linux%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#dns","text":"\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6 vim /etc/resolv.conf \u4fee\u6539\u914d\u7f6e\u5185\u5bb9 nameserver 223.5.5.5 nameserver 223.6.6.6","title":"\u914d\u7f6eDNS"},{"location":"linux/Linux%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#centos","text":"","title":"CentOS"},{"location":"linux/Linux%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#_3","text":"vi /etc/sysconfig/network-scripts/ifcfg-eth0","title":"\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6"},{"location":"linux/Linux%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#_4","text":"","title":"\u4fee\u6539\u914d\u7f6e\u5185\u5bb9"},{"location":"linux/Linux%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#ipdns","text":"BOOTPROTO=dhcp # \u8bbe\u7f6e\u4e3adhcp\u5f00\u542fDHCP\u670d\u52a1\uff0c\u8bbe\u7f6e\u4e3astatic\u542f\u7528\u9759\u6001IP\u5730\u5740 MM_Controlled=no # network mamager\u7684\u53c2\u6570\uff0c\u5b9e\u65f6\u751f\u6548\uff0c\u4e0d\u9700\u8981\u91cd\u542f ONBOOT=yes # \u8bbe\u7f6e\u4e3ayes\uff0c\u5f00\u673a\u81ea\u52a8\u542f\u7528\u7f51\u7edc\u8fde\u63a5 USERCTL=yes # \u662f\u5426\u5141\u8bb8\u975eroot\u7528\u6237\u63a7\u5236\u8be5\u8bbe\u5907 DNS1=223.5.5.5 DNS2=223.6.6.6","title":"\u52a8\u6001IP\u548cDNS"},{"location":"linux/Linux%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#ipdns_1","text":"ONBOOT=yes BOOTPROTO=static MM_Controlled=no USERCTL=yes IPADDR=192.168.254.1 NETMASK=255.255.255.0 GATEWAY=192.168.254.254 DNS1=114.114.114.114 DNS2=8.8.8.8","title":"\u9759\u6001IP\u548cDNS"},{"location":"linux/Linux%E9%85%8D%E7%BD%AEIP%E5%92%8CDNS/#_5","text":"systemctl restart network","title":"\u91cd\u542f\u7f51\u7edc\u670d\u52a1"},{"location":"linux/RHEL7.3%E7%9A%84Jira%E5%AE%89%E8%A3%85%E4%B8%8E%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B/","text":"RHEL7.3\u7684Jira\u5b89\u88c5\u4e0e\u7834\u89e3\u6559\u7a0b \u4e00\u3001\u4e0b\u8f7d\u5e76\u5b89\u88c5Jira \u8bbf\u95ee Jira \u5b98\u65b9\u4e0b\u8f7d\u5730\u5740\uff1a https://www.atlassian.com/software/jira/download \u4e0b\u8f7d Enterprise release (\u4f01\u4e1a\u7248)\uff0c\u76ee\u524d\u7248\u672c\u4e3a Jira Software 8.5.4\uff0c\u9009\u62e9\u4e0b\u8f7d Linux 64 Bit \u5f97\u5230\u4e8c\u8fdb\u5236\u5b89\u88c5\u6587\u4ef6\uff1aatlassian-jira-software-8.5.4-x64.bin 1.1\u3001\u6267\u884c\u547d\u4ee4\u8d4b\u4e88\u5b89\u88c5\u5305\u6267\u884c\u6743\u9650\uff1a chmod a+x atlassian-jira-software-8.5.4-x64.bin 1.2\u3001\u6839\u636e\u5b98\u65b9\u6587\u6863\u63d0\u793a\u5b89\u88c5\u4f9d\u8d56\uff1a https://confluence.atlassian.com/jirakb/jira-server-7-13-or-later-fails-with-fontconfiguration-error-when-installing-on-linux-operating-systems-964956221.html sudo yum install -y dejavu-sans-fonts (\u5df2\u5b89\u88c5\u7684\u8bf7\u8df3\u8fc7\uff0c\u672a\u5b89\u88c5\u7684\u8bf7\u5b89\u88c5\uff0c\u5426\u5219\u4e0b\u4e00\u6b65\u547d\u4ee4\u62a5\u9519) 1.3\u3001\u5f00\u59cb\u5b89\u88c5\uff1a ./atlassian-jira-software-8.5.4-x64.bin 1.4\u3001\u4e00\u8def\u56de\u8f66\u9ed8\u8ba4\u5373\u53ef\uff0c\u4f46\u662f\u6700\u540e\u4e00\u6b65\u9009\u62e9no\uff08\u5148\u4e0d\u542f\u52a8 Jira\uff09 \u4e8c\u3001\u67e5\u9605Jira\u5b89\u88c5\u8981\u6c42 2.1\u3001\u67e5\u9605 Jira \u5b98\u65b9\u6587\u6863\uff1a https://confluence.atlassian.com/adminjiraserver085/supported-platforms-981154553.html \u5f97\u77e5\u652f\u6301\u7684 PostgreSQL \u7248\u672c\u4e3a 9.4-10 2.2\u3001RHEL7.3\u4ed3\u5e93\u4e2d PostgreSQL \u7684\u7248\u672c\u4e3a9.2\uff0c\u65e0\u6cd5\u88ab Jira \u652f\u6301 \u4e09\u3001\u5b89\u88c5\u53ca\u914d\u7f6e\u6570\u636e\u5e93 3.1\u3001\u67e5\u9605 PostgreSQL \u5b98\u65b9\u6587\u6863\uff1a https://www.postgresql.org/download/linux/redhat/ \u6839\u636e\u9875\u9762\u6307\u5f15\u7248\u672c\u9009\u62e9\"10\"\uff0c\u5e73\u53f0\u9009\u62e9\"RedHat Enterprise, CentOS, Scientific or Oracle version 7\"\uff0c\u67b6\u6784\u9009\u62e9\"x86_64\" 3.2\u3001\u7136\u540e\u4f9d\u6b21\u6267\u884c\u5b89\u88c5\u547d\u4ee4\uff1a yum install https://download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm yum install postgresql10 yum install postgresql10-server 3.3\u3001\u5b89\u88c5\u6210\u529f\u540e\u8fdb\u884c\u521d\u59cb\u5316\u8bbe\u7f6e\u53ca\u8bbe\u7f6e\u4e3a\u5f00\u673a\u81ea\u542f /usr/pgsql-10/bin/postgresql-10-setup initdb systemctl enable postgresql-10 systemctl start postgresql-10 PS1\uff1a\u5982\u679c\u4e4b\u524d\u5df2\u7ecf\u5b89\u88c5\u4e86\u4f4e\u7248\u672c\u7684 PostgreSQL\uff0c\u8bf7\u5907\u4efd\u6570\u636e\u5e93\u540e\u5378\u8f7d \u5217\u51fa\u5df2\u5b89\u88c5\u5305\u540d\uff1arpm -qa | grep postgres \u5220\u9664\u5df2\u5b89\u88c5\u5305\uff1arpm -e \u5305\u540d \u68c0\u67e5\u6b8b\u7559\u6587\u4ef6\u5e76\u5220\u9664\uff08\u53ef\u9009\uff09\uff1arpm -qal | grep postgres PS2\uff1a\u8bb0\u5f97\u53bb\u76ee\u5f55 /var/lib/pgsql/10/data \u4e0b\u4fee\u6539\u8fde\u63a5\u53c2\u6570\u4ee5\u4fbf\u53ef\u4ee5\u8fdc\u7a0b\u767b\u5f55pg PS3\uff1a\u4e5f\u53ef\u81ea\u884c\u5b89\u88c5\u5176\u4ed6\u53d7\u652f\u6301\u7684\u6570\u636e\u5e93 \u56db\u3001\u7834\u89e3Jira 4.1\u3001\u6253\u5f00\u7f51\u5740\uff1a https://gitee.com/pengzhile/atlassian-agent/releases \u4e0b\u8f7d\u7834\u89e3\u8865\u4e01 atlassian-agent-v1.2.3.tar.gz \u5e76\u89e3\u538b\u5f97\u5230jar\u5305 atlassian-agent.jar \u548c\u4f7f\u7528\u5e2e\u52a9\u6587\u4ef6 README.pdf 4.2\u3001\u6839\u636e README.pdf \u6587\u4ef6\u6307\u5f15\uff0c\u590d\u5236\u7834\u89e3\u5de5\u5177\u5230\u6307\u5b9a\u76ee\u5f55\uff1a cp atlassian-agent.jar /opt/atlassian 4.3\u3001\u7f16\u8f91\u6587\u4ef6 /opt/atlassian/jira/bin/setenv.sh\uff0c\u5728\u6587\u4ef6\u6700\u540e\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a export JAVA_OPTS=\"-javaagent:/opt/atlassian/atlassian-agent.jar ${JAVA_OPTS}\" \u4e94\u3001\u521d\u59cb\u5316\u914d\u7f6eJira 5.1\u3001\u542f\u52a8 Jira\uff1a /opt/atlassian/jira/bin/start-jira.sh 5.2\u3001\u901a\u8fc7 IP:Port \u65b9\u5f0f\u6253\u5f00 Jira\u914d\u7f6e\u9875\u9762\uff0c\u4f8b\u5982\u672c\u793a\u4f8b\u4e2d\u4e3a http://10.10.10.40:8080/ 5.3\u3001\u9009\u62e9\u7b2c\u4e8c\u9879 I'll set it up myself \u5e76\u70b9\u51fb\u4e0b\u4e00\u6b65 5.4\u3001\u9009\u62e9\u7b2c\u4e8c\u9879 My Own Database\uff0c\u914d\u7f6e\u6570\u636e\u5e93\u4fe1\u606f\u5e76\u70b9\u51fb\u4e0b\u4e00\u6b65 5.5\u3001\u914d\u7f6e Jira \u5c5e\u6027\uff0c\u53ef\u7f16\u8f91 Application Title \u548c Mode,\u5efa\u8bae\u4fee\u6539 Title\u540e\u76f4\u63a5\u70b9\u51fb\u4e0b\u4e00\u6b65 5.6\u3001\u6b64\u65f6\u5230\u4e86\u6fc0\u6d3b\u9875\u9762\uff0c\u8bb0\u5f55\u4e0b Server ID\uff0c\u5229\u7528\u524d\u9762\u7684\u7834\u89e3\u5de5\u5177\u751f\u6210License\uff1a /opt/atlassian/jira/jre/bin/java -jar /opt/atlassian/atlassian-agent.jar -p jira -m wanglong@wntime.com -n WNTIMEJIRA -o http://www.wntime.com/ -s BNEV-U8I4-P1DW-AJNK 5.7\u3001\u5c06\u751f\u6210\u7684License\u7c98\u8d34\u8fdb\u53bb\u5e76\u70b9\u51fb\u4e0b\u4e00\u6b65 5.8\u3001\u521b\u5efa\u8d26\u6237\u4fe1\u606f\u5e76\u70b9\u51fb\u4e0b\u4e00\u6b65 5.9\u3001\u90ae\u4ef6\u901a\u77e5\u9ed8\u8ba4\u7a0d\u540e\u914d\u7f6e\uff0c\u76f4\u63a5\u70b9\u51fb\u5b8c\u6210 5.10\u3001\u9009\u62e9\u4e2d\u6587\uff0c\u70b9\u51fb\u7ee7\u7eed\u518d\u70b9\u51fb\u4e0b\u4e00\u6b65\uff0c\u81f3\u6b64 Jira\u5b89\u88c5\u7834\u89e3\u5b8c\u6210 \u516d\u3001\u7834\u89e3 Jira \u63d2\u4ef6 \u76f4\u63a5\u6267\u884c\u547d\u4ee4\uff08\u540c5.6\uff09\uff0c\u53ea\u9700\u4fee\u6539 -p \u540e\u9762\u7684\u53c2\u6570\uff0c\u5177\u4f53\u8bf7\u53c2\u8003\u7834\u89e3\u5de5\u5177\u7684\u5e2e\u52a9\u6587\u4ef6 README.pdf\uff0c\u6b64\u5904\u4e0d\u518d\u8d58\u8ff0\uff01","title":"JIRA\u5b89\u88c5\u4e0e\u7834\u89e3"},{"location":"linux/RHEL7.3%E7%9A%84Jira%E5%AE%89%E8%A3%85%E4%B8%8E%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B/#rhel73jira","text":"","title":"RHEL7.3\u7684Jira\u5b89\u88c5\u4e0e\u7834\u89e3\u6559\u7a0b"},{"location":"linux/RHEL7.3%E7%9A%84Jira%E5%AE%89%E8%A3%85%E4%B8%8E%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B/#jira","text":"\u8bbf\u95ee Jira \u5b98\u65b9\u4e0b\u8f7d\u5730\u5740\uff1a https://www.atlassian.com/software/jira/download \u4e0b\u8f7d Enterprise release (\u4f01\u4e1a\u7248)\uff0c\u76ee\u524d\u7248\u672c\u4e3a Jira Software 8.5.4\uff0c\u9009\u62e9\u4e0b\u8f7d Linux 64 Bit \u5f97\u5230\u4e8c\u8fdb\u5236\u5b89\u88c5\u6587\u4ef6\uff1aatlassian-jira-software-8.5.4-x64.bin 1.1\u3001\u6267\u884c\u547d\u4ee4\u8d4b\u4e88\u5b89\u88c5\u5305\u6267\u884c\u6743\u9650\uff1a chmod a+x atlassian-jira-software-8.5.4-x64.bin 1.2\u3001\u6839\u636e\u5b98\u65b9\u6587\u6863\u63d0\u793a\u5b89\u88c5\u4f9d\u8d56\uff1a https://confluence.atlassian.com/jirakb/jira-server-7-13-or-later-fails-with-fontconfiguration-error-when-installing-on-linux-operating-systems-964956221.html sudo yum install -y dejavu-sans-fonts (\u5df2\u5b89\u88c5\u7684\u8bf7\u8df3\u8fc7\uff0c\u672a\u5b89\u88c5\u7684\u8bf7\u5b89\u88c5\uff0c\u5426\u5219\u4e0b\u4e00\u6b65\u547d\u4ee4\u62a5\u9519) 1.3\u3001\u5f00\u59cb\u5b89\u88c5\uff1a ./atlassian-jira-software-8.5.4-x64.bin 1.4\u3001\u4e00\u8def\u56de\u8f66\u9ed8\u8ba4\u5373\u53ef\uff0c\u4f46\u662f\u6700\u540e\u4e00\u6b65\u9009\u62e9no\uff08\u5148\u4e0d\u542f\u52a8 Jira\uff09","title":"\u4e00\u3001\u4e0b\u8f7d\u5e76\u5b89\u88c5Jira"},{"location":"linux/RHEL7.3%E7%9A%84Jira%E5%AE%89%E8%A3%85%E4%B8%8E%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B/#jira_1","text":"2.1\u3001\u67e5\u9605 Jira \u5b98\u65b9\u6587\u6863\uff1a https://confluence.atlassian.com/adminjiraserver085/supported-platforms-981154553.html \u5f97\u77e5\u652f\u6301\u7684 PostgreSQL \u7248\u672c\u4e3a 9.4-10 2.2\u3001RHEL7.3\u4ed3\u5e93\u4e2d PostgreSQL \u7684\u7248\u672c\u4e3a9.2\uff0c\u65e0\u6cd5\u88ab Jira \u652f\u6301","title":"\u4e8c\u3001\u67e5\u9605Jira\u5b89\u88c5\u8981\u6c42"},{"location":"linux/RHEL7.3%E7%9A%84Jira%E5%AE%89%E8%A3%85%E4%B8%8E%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B/#_1","text":"3.1\u3001\u67e5\u9605 PostgreSQL \u5b98\u65b9\u6587\u6863\uff1a https://www.postgresql.org/download/linux/redhat/ \u6839\u636e\u9875\u9762\u6307\u5f15\u7248\u672c\u9009\u62e9\"10\"\uff0c\u5e73\u53f0\u9009\u62e9\"RedHat Enterprise, CentOS, Scientific or Oracle version 7\"\uff0c\u67b6\u6784\u9009\u62e9\"x86_64\" 3.2\u3001\u7136\u540e\u4f9d\u6b21\u6267\u884c\u5b89\u88c5\u547d\u4ee4\uff1a yum install https://download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm yum install postgresql10 yum install postgresql10-server 3.3\u3001\u5b89\u88c5\u6210\u529f\u540e\u8fdb\u884c\u521d\u59cb\u5316\u8bbe\u7f6e\u53ca\u8bbe\u7f6e\u4e3a\u5f00\u673a\u81ea\u542f /usr/pgsql-10/bin/postgresql-10-setup initdb systemctl enable postgresql-10 systemctl start postgresql-10 PS1\uff1a\u5982\u679c\u4e4b\u524d\u5df2\u7ecf\u5b89\u88c5\u4e86\u4f4e\u7248\u672c\u7684 PostgreSQL\uff0c\u8bf7\u5907\u4efd\u6570\u636e\u5e93\u540e\u5378\u8f7d \u5217\u51fa\u5df2\u5b89\u88c5\u5305\u540d\uff1arpm -qa | grep postgres \u5220\u9664\u5df2\u5b89\u88c5\u5305\uff1arpm -e \u5305\u540d \u68c0\u67e5\u6b8b\u7559\u6587\u4ef6\u5e76\u5220\u9664\uff08\u53ef\u9009\uff09\uff1arpm -qal | grep postgres PS2\uff1a\u8bb0\u5f97\u53bb\u76ee\u5f55 /var/lib/pgsql/10/data \u4e0b\u4fee\u6539\u8fde\u63a5\u53c2\u6570\u4ee5\u4fbf\u53ef\u4ee5\u8fdc\u7a0b\u767b\u5f55pg PS3\uff1a\u4e5f\u53ef\u81ea\u884c\u5b89\u88c5\u5176\u4ed6\u53d7\u652f\u6301\u7684\u6570\u636e\u5e93","title":"\u4e09\u3001\u5b89\u88c5\u53ca\u914d\u7f6e\u6570\u636e\u5e93"},{"location":"linux/RHEL7.3%E7%9A%84Jira%E5%AE%89%E8%A3%85%E4%B8%8E%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B/#jira_2","text":"4.1\u3001\u6253\u5f00\u7f51\u5740\uff1a https://gitee.com/pengzhile/atlassian-agent/releases \u4e0b\u8f7d\u7834\u89e3\u8865\u4e01 atlassian-agent-v1.2.3.tar.gz \u5e76\u89e3\u538b\u5f97\u5230jar\u5305 atlassian-agent.jar \u548c\u4f7f\u7528\u5e2e\u52a9\u6587\u4ef6 README.pdf 4.2\u3001\u6839\u636e README.pdf \u6587\u4ef6\u6307\u5f15\uff0c\u590d\u5236\u7834\u89e3\u5de5\u5177\u5230\u6307\u5b9a\u76ee\u5f55\uff1a cp atlassian-agent.jar /opt/atlassian 4.3\u3001\u7f16\u8f91\u6587\u4ef6 /opt/atlassian/jira/bin/setenv.sh\uff0c\u5728\u6587\u4ef6\u6700\u540e\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a export JAVA_OPTS=\"-javaagent:/opt/atlassian/atlassian-agent.jar ${JAVA_OPTS}\"","title":"\u56db\u3001\u7834\u89e3Jira"},{"location":"linux/RHEL7.3%E7%9A%84Jira%E5%AE%89%E8%A3%85%E4%B8%8E%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B/#jira_3","text":"5.1\u3001\u542f\u52a8 Jira\uff1a /opt/atlassian/jira/bin/start-jira.sh 5.2\u3001\u901a\u8fc7 IP:Port \u65b9\u5f0f\u6253\u5f00 Jira\u914d\u7f6e\u9875\u9762\uff0c\u4f8b\u5982\u672c\u793a\u4f8b\u4e2d\u4e3a http://10.10.10.40:8080/ 5.3\u3001\u9009\u62e9\u7b2c\u4e8c\u9879 I'll set it up myself \u5e76\u70b9\u51fb\u4e0b\u4e00\u6b65 5.4\u3001\u9009\u62e9\u7b2c\u4e8c\u9879 My Own Database\uff0c\u914d\u7f6e\u6570\u636e\u5e93\u4fe1\u606f\u5e76\u70b9\u51fb\u4e0b\u4e00\u6b65 5.5\u3001\u914d\u7f6e Jira \u5c5e\u6027\uff0c\u53ef\u7f16\u8f91 Application Title \u548c Mode,\u5efa\u8bae\u4fee\u6539 Title\u540e\u76f4\u63a5\u70b9\u51fb\u4e0b\u4e00\u6b65 5.6\u3001\u6b64\u65f6\u5230\u4e86\u6fc0\u6d3b\u9875\u9762\uff0c\u8bb0\u5f55\u4e0b Server ID\uff0c\u5229\u7528\u524d\u9762\u7684\u7834\u89e3\u5de5\u5177\u751f\u6210License\uff1a /opt/atlassian/jira/jre/bin/java -jar /opt/atlassian/atlassian-agent.jar -p jira -m wanglong@wntime.com -n WNTIMEJIRA -o http://www.wntime.com/ -s BNEV-U8I4-P1DW-AJNK 5.7\u3001\u5c06\u751f\u6210\u7684License\u7c98\u8d34\u8fdb\u53bb\u5e76\u70b9\u51fb\u4e0b\u4e00\u6b65 5.8\u3001\u521b\u5efa\u8d26\u6237\u4fe1\u606f\u5e76\u70b9\u51fb\u4e0b\u4e00\u6b65 5.9\u3001\u90ae\u4ef6\u901a\u77e5\u9ed8\u8ba4\u7a0d\u540e\u914d\u7f6e\uff0c\u76f4\u63a5\u70b9\u51fb\u5b8c\u6210 5.10\u3001\u9009\u62e9\u4e2d\u6587\uff0c\u70b9\u51fb\u7ee7\u7eed\u518d\u70b9\u51fb\u4e0b\u4e00\u6b65\uff0c\u81f3\u6b64 Jira\u5b89\u88c5\u7834\u89e3\u5b8c\u6210","title":"\u4e94\u3001\u521d\u59cb\u5316\u914d\u7f6eJira"},{"location":"linux/RHEL7.3%E7%9A%84Jira%E5%AE%89%E8%A3%85%E4%B8%8E%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B/#jira_4","text":"\u76f4\u63a5\u6267\u884c\u547d\u4ee4\uff08\u540c5.6\uff09\uff0c\u53ea\u9700\u4fee\u6539 -p \u540e\u9762\u7684\u53c2\u6570\uff0c\u5177\u4f53\u8bf7\u53c2\u8003\u7834\u89e3\u5de5\u5177\u7684\u5e2e\u52a9\u6587\u4ef6 README.pdf\uff0c\u6b64\u5904\u4e0d\u518d\u8d58\u8ff0\uff01","title":"\u516d\u3001\u7834\u89e3 Jira \u63d2\u4ef6"},{"location":"linux/%E5%AE%89%E8%A3%85mysqlclient%E5%92%8Cpsycopg2%E6%8A%A5%E9%94%99/","text":"\u5b89\u88c5mysqlclient\u548cpsycopg2\u62a5\u9519 \u6ce8\uff1a\u4ec5\u9002\u7528\u4e8eDebian\u7cfb\u5217\u53d1\u884c\u7248 \u5b89\u88c5mysqlclient\u62a5\u9519\u8bf7\u5b89\u88c5\u4f9d\u8d56 apt install -y libmariadb-dev \u5982\u679c\u6ca1\u6709\u4f9d\u8d56libmariadb-dev\u5219\u5b89\u88c5libmysqlclient-dev \u5b89\u88c5psycopg2\u62a5\u9519\u8bf7\u5b89\u88c5\u4f9d\u8d56 apt install -y libpq-dev \u5982\u679c\u4f9d\u65e7\u62a5\u9519\uff0c\u8fd8\u9700\u8981\u5b89\u88c5\u4ee5\u4e0b\u4f9d\u8d56 apt-get install -y python3-dev build-essential","title":"\u5b89\u88c5mysqlclient\u548cpsycopg2\u62a5\u9519"},{"location":"linux/%E5%AE%89%E8%A3%85mysqlclient%E5%92%8Cpsycopg2%E6%8A%A5%E9%94%99/#mysqlclientpsycopg2","text":"\u6ce8\uff1a\u4ec5\u9002\u7528\u4e8eDebian\u7cfb\u5217\u53d1\u884c\u7248 \u5b89\u88c5mysqlclient\u62a5\u9519\u8bf7\u5b89\u88c5\u4f9d\u8d56 apt install -y libmariadb-dev \u5982\u679c\u6ca1\u6709\u4f9d\u8d56libmariadb-dev\u5219\u5b89\u88c5libmysqlclient-dev \u5b89\u88c5psycopg2\u62a5\u9519\u8bf7\u5b89\u88c5\u4f9d\u8d56 apt install -y libpq-dev \u5982\u679c\u4f9d\u65e7\u62a5\u9519\uff0c\u8fd8\u9700\u8981\u5b89\u88c5\u4ee5\u4e0b\u4f9d\u8d56 apt-get install -y python3-dev build-essential","title":"\u5b89\u88c5mysqlclient\u548cpsycopg2\u62a5\u9519"},{"location":"linux/%E6%8C%82%E8%BD%BDISO%E9%95%9C%E5%83%8F%E5%81%9A%E6%9C%AC%E5%9C%B0%E6%BA%90/","text":"\u6302\u8f7dISO\u955c\u50cf\u505a\u672c\u5730\u6e90 \u521b\u5efa\u6302\u8f7d\u76ee\u5f55 mkdir /mnt/iso \u6302\u8f7dISO mount /dev/cdrom /mnt/iso \u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539 /dev/cdrom \u5907\u4efd\u539f\u6587\u4ef6 CentOS mv /etc/yum.repos.d /etc/yum.repos.d.bak Debian mv /etc/apt/sources.list /etc/apt/sources.list.bak \u7f16\u8f91\u6e90\u6587\u4ef6 CentOS vim /etc/yum.repos.d/iso.repo Debian vim /etc/apt/sources.list \u5199\u5165\u4ee5\u4e0b\u5185\u5bb9 CentOS [local] name=CentOS_ISO baseurl=file:///mnt/iso enabled=1 gpgkey=file://mnt/iso/RPM-GPG-KEY-CentOS-7 Debian deb file:///mnt/iso bullseye main contrib non-free \u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539 bullseye \u4e3a\u6b63\u786e\u7684\u53d1\u884c\u7248\u540d\u79f0","title":"\u6302\u8f7dISO\u955c\u50cf\u505a\u672c\u5730\u6e90"},{"location":"linux/%E6%8C%82%E8%BD%BDISO%E9%95%9C%E5%83%8F%E5%81%9A%E6%9C%AC%E5%9C%B0%E6%BA%90/#iso","text":"","title":"\u6302\u8f7dISO\u955c\u50cf\u505a\u672c\u5730\u6e90"},{"location":"linux/%E6%8C%82%E8%BD%BDISO%E9%95%9C%E5%83%8F%E5%81%9A%E6%9C%AC%E5%9C%B0%E6%BA%90/#_1","text":"mkdir /mnt/iso","title":"\u521b\u5efa\u6302\u8f7d\u76ee\u5f55"},{"location":"linux/%E6%8C%82%E8%BD%BDISO%E9%95%9C%E5%83%8F%E5%81%9A%E6%9C%AC%E5%9C%B0%E6%BA%90/#iso_1","text":"mount /dev/cdrom /mnt/iso \u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539 /dev/cdrom","title":"\u6302\u8f7dISO"},{"location":"linux/%E6%8C%82%E8%BD%BDISO%E9%95%9C%E5%83%8F%E5%81%9A%E6%9C%AC%E5%9C%B0%E6%BA%90/#_2","text":"","title":"\u5907\u4efd\u539f\u6587\u4ef6"},{"location":"linux/%E6%8C%82%E8%BD%BDISO%E9%95%9C%E5%83%8F%E5%81%9A%E6%9C%AC%E5%9C%B0%E6%BA%90/#centos","text":"mv /etc/yum.repos.d /etc/yum.repos.d.bak","title":"CentOS"},{"location":"linux/%E6%8C%82%E8%BD%BDISO%E9%95%9C%E5%83%8F%E5%81%9A%E6%9C%AC%E5%9C%B0%E6%BA%90/#debian","text":"mv /etc/apt/sources.list /etc/apt/sources.list.bak","title":"Debian"},{"location":"linux/%E6%8C%82%E8%BD%BDISO%E9%95%9C%E5%83%8F%E5%81%9A%E6%9C%AC%E5%9C%B0%E6%BA%90/#_3","text":"","title":"\u7f16\u8f91\u6e90\u6587\u4ef6"},{"location":"linux/%E6%8C%82%E8%BD%BDISO%E9%95%9C%E5%83%8F%E5%81%9A%E6%9C%AC%E5%9C%B0%E6%BA%90/#centos_1","text":"vim /etc/yum.repos.d/iso.repo","title":"CentOS"},{"location":"linux/%E6%8C%82%E8%BD%BDISO%E9%95%9C%E5%83%8F%E5%81%9A%E6%9C%AC%E5%9C%B0%E6%BA%90/#debian_1","text":"vim /etc/apt/sources.list","title":"Debian"},{"location":"linux/%E6%8C%82%E8%BD%BDISO%E9%95%9C%E5%83%8F%E5%81%9A%E6%9C%AC%E5%9C%B0%E6%BA%90/#_4","text":"","title":"\u5199\u5165\u4ee5\u4e0b\u5185\u5bb9"},{"location":"linux/%E6%8C%82%E8%BD%BDISO%E9%95%9C%E5%83%8F%E5%81%9A%E6%9C%AC%E5%9C%B0%E6%BA%90/#centos_2","text":"[local] name=CentOS_ISO baseurl=file:///mnt/iso enabled=1 gpgkey=file://mnt/iso/RPM-GPG-KEY-CentOS-7","title":"CentOS"},{"location":"linux/%E6%8C%82%E8%BD%BDISO%E9%95%9C%E5%83%8F%E5%81%9A%E6%9C%AC%E5%9C%B0%E6%BA%90/#debian_2","text":"deb file:///mnt/iso bullseye main contrib non-free \u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539 bullseye \u4e3a\u6b63\u786e\u7684\u53d1\u884c\u7248\u540d\u79f0","title":"Debian"},{"location":"linux/%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91MySQL5.7%E8%AE%B0%E5%BD%95/","text":"\u6e90\u7801\u7f16\u8bd1MySQL5.7\u8bb0\u5f55 Mac M1 Pro \u82af\u7247 \u5b89\u88c5Docker\u540e\u60f3\u62c9\u53d6MySQL5.7\u955c\u50cf, \u5948\u4f55\u5b98\u65b9\u955c\u50cf\u4e2d5.7\u7248\u672c\u53ea\u6709amd64\u67b6\u6784, \u4e8e\u662f\u62c9\u53d6\u4e86CentOS7.9.2009\u955c\u50cf, \u5728\u6b64\u73af\u5883\u4e0b\u7f16\u8bd1MySQL5.7, \u505a\u6b64\u8bb0\u5f55 \u7eaf\u7cb9\u7684\u6e90\u7801: wget https://downloads.mysql.com/archives/get/p/23/file/mysql-boost-5.7.38.tar.gz Red Hat\u4f7f\u7528\u7684\u6e90\u7801: wget https://downloads.mysql.com/archives/get/p/23/file/mysql-community-5.7.38-1.el7.src.rpm \u7eaf\u6e90\u7801\u5b89\u88c5--\u5931\u8d25 cd groupadd mysql useradd -r -g mysql -s /bin/false mysql yum install -y wget make cmake gcc gcc-c++ git \\ openssl-devel ncurses-devel bison curl-devel \\ wget https://downloads.mysql.com/archives/get/p/23/file/mysql-boost-5.7.38.tar.gz tar -xf mysql-boost-5.7.38.tar.gz cd mysql-5.7.38 mkdir bld cd bld cmake .. -DWITH_BOOST=../boost/boost_1_59_0 \\ -CMAKE_INSTALL_PREFIX=/opt/mysql \\ -DMYSQL_DATADIR=/opt/mysql/data \\ -DSYSCONFDIR=/opt/mysql \\ -DDEFAULT_CHARSET=utf8mb4 \\ -DDEFAULT_COLLATION=utf8mb4_general_ci \\ -DWITH_CURL=system \\ -DENABLE_DOWNLOADS=1 \u6ce8: -DWITH_CURL=system \u89e3\u51b3 You need to set WITH_CURL \u95ee\u9898 -DENABLE_DOWNLOADS=1 \u89e3\u51b3 Googletest was not found \u95ee\u9898 rpmbuild\u5b89\u88c5--\u6210\u529f docker rm -f mysql docker run -dit --name mysql --network host centos:7.9.2009 bash docker cp mysql-community-5.7.38-1.el7.src.rpm mysql:/root docker exec -it mysql bash useradd pb2user groupadd common yum install -y rpm-build cmake perl-Env perl-Data-Dumper \\ perl-JSON time libaio-devel ncurses-devel numactl-devel \\ openssl-devel zlib-devel cyrus-sasl-devel openldap-devel \\ git make gcc gcc-c++ rpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql # rpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2022 rpmbuild --rebuild --clean /root/mysql-community-5.7.38-1.el7.src.rpm \u51fa\u73b0\u62a5\u95191: /root/rpmbuild/BUILD/mysql-5.7.38/mysql-5.7.38/sql/mysqld.cc:1565:36: error: 'prctl' was not declared in this scope \u5219: cp /usr/include/sys/prctl.h /root/rpmbuild/BUILD/mysql-5.7.38/mysql-5.7.38/include vi /root/rpmbuild/BUILD/mysql-5.7.38/mysql-5.7.38/sql/mysqld.cc \u5728 #include \"mysqld.h\" #include \"mysqld_daemon.h\" \u4e0b\u9762\u6dfb\u52a0: #include \"prctl.h\" cd /root/rpmbuild/BUILD/mysql-5.7.38/mysql-5.7.38 cmake . -DWITH_BOOST=../boost_1_59_0 make \u51fa\u73b0\u62a5\u95192: could not split insn \u5219: yum -y remove gcc yum install centos-release-scl yum install devtoolset-7 scl enable devtoolset-7 bash ln -s /opt/rh/devtoolset-7/root/usr/bin/c++ /usr/bin/c++ make \u53c8\u51fa\u73b0\u62a5\u95191: \u6309\u7167\u4e0a\u9762\u7684\u65b9\u6cd5\u89e3\u51b3 make make install DESTDIR=/opt/mysql \u7f16\u8bd1\u5b89\u88c5\u6210\u529f \u521d\u59cb\u5316 groupadd mysql useradd -r -g mysql -s /bin/false mysql cd /opt/mysql/usr/local/mysql mkdir data chown mysql:mysql data chmod 750 data mkdir etc vi etc/my.cnf \u5199\u5165: [mysqld] basedir=/opt/mysql/usr/local/mysql datadir=/opt/mysql/usr/local/mysql/data bin/mysqld --defaults-file=/opt/mysql/usr/local/mysql/etc/my.cnf \\ --initialize --user=mysql \u6ce8\u610f1: \u4e0a\u9762\u547d\u4ee4\u6267\u884c\u540e\u8f93\u51fa\u7684\u5185\u5bb9\u6709\u4e00\u884c\u7c7b\u4f3c\u8fd9\u6837\u7684: [Note] A temporary password is generated for root@localhost: a!mD0etq9!Mf \u5176\u4e2d a!mD0etq9!Mf \u5c31\u662froot\u7528\u6237\u7684\u968f\u673a\u7801\u5c3a\u7801 \u6ce8\u610f2: --initialize \u53ef\u4ee5\u66ff\u6362\u6210 --initialize-insecure, \u8fd9\u6837\u4e0d\u4f1a\u751f\u6210\u5bc6\u7801 PS: \u5982\u679c\u4e0d\u60f3\u521b\u5efa etc/my.cnf \u5219\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4 bin/mysqld --initialize --user=mysql \\ --basedir=/opt/mysql/usr/local/mysql \\ --datadir=/opt/mysql/usr/local/mysql/data \u542f\u52a8\u670d\u52a1: bin/mysqld_safe --user=mysql & \u6216 bin/mysqld --defaults-file=/opt/mysql/usr/local/mysql/etc/my.cnf --user=mysql & \u767b\u5f55 bin/mysql -u root -p \u5982\u679c\u4e0a\u9762\u7528\u7684\u662f --initialize-insecure, \u5219\u767b\u5f55\u547d\u4ee4\u662f mysql -u root --skip-password \u4fee\u6539\u5bc6\u7801: ALTER USER 'root'@'localhost' IDENTIFIED BY 'mysql'; \u67e5\u770b\u7528\u6237\u4fe1\u606f: select host, user, authentication_string, plugin from mysql.user; \u6ce8\u610f: \u9ad8\u7248\u672c\u4e2dauthentication_string\u6362\u6210\u4e86password \u5173\u95ed\u670d\u52a1: bin/mysqladmin -u root -p shutdown \u641e\u5b9a! \u8f6c\u79fb\u5230\u5176\u4ed6centos7\u4e0a\u662f\u4f7f\u7528? 1\u3001\u6253\u5305\u62f7\u8d1d cd /opt tar -czvf mysql5.7.38.tgz mysql 2\u3001\u89e3\u538b \u5c06\u538b\u7f29\u5305\u62f7\u8d1d\u5230\u5176\u4ed6\u673a\u5668\u4e0a\u5e76\u89e3\u538b\u5230/opt\u76ee\u5f55\u4e0b 3\u3001\u5b89\u88c5\u4f9d\u8d56: yum install -y libaio-devel numactl-devel 4\u3001\u914d\u7f6e\u7528\u6237\u548c\u7ec4: groupadd mysql && useradd -r -g mysql -s /bin/false mysql 5\u3001\u542f\u52a8: cd /opt/mysql/usr/local/mysql , bin/mysqld_safe --user=mysql &","title":"\u6e90\u7801\u7f16\u8bd1MySQL5.7\u8bb0\u5f55"},{"location":"linux/%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91MySQL5.7%E8%AE%B0%E5%BD%95/#mysql57","text":"Mac M1 Pro \u82af\u7247 \u5b89\u88c5Docker\u540e\u60f3\u62c9\u53d6MySQL5.7\u955c\u50cf, \u5948\u4f55\u5b98\u65b9\u955c\u50cf\u4e2d5.7\u7248\u672c\u53ea\u6709amd64\u67b6\u6784, \u4e8e\u662f\u62c9\u53d6\u4e86CentOS7.9.2009\u955c\u50cf, \u5728\u6b64\u73af\u5883\u4e0b\u7f16\u8bd1MySQL5.7, \u505a\u6b64\u8bb0\u5f55 \u7eaf\u7cb9\u7684\u6e90\u7801: wget https://downloads.mysql.com/archives/get/p/23/file/mysql-boost-5.7.38.tar.gz Red Hat\u4f7f\u7528\u7684\u6e90\u7801: wget https://downloads.mysql.com/archives/get/p/23/file/mysql-community-5.7.38-1.el7.src.rpm \u7eaf\u6e90\u7801\u5b89\u88c5--\u5931\u8d25 cd groupadd mysql useradd -r -g mysql -s /bin/false mysql yum install -y wget make cmake gcc gcc-c++ git \\ openssl-devel ncurses-devel bison curl-devel \\ wget https://downloads.mysql.com/archives/get/p/23/file/mysql-boost-5.7.38.tar.gz tar -xf mysql-boost-5.7.38.tar.gz cd mysql-5.7.38 mkdir bld cd bld cmake .. -DWITH_BOOST=../boost/boost_1_59_0 \\ -CMAKE_INSTALL_PREFIX=/opt/mysql \\ -DMYSQL_DATADIR=/opt/mysql/data \\ -DSYSCONFDIR=/opt/mysql \\ -DDEFAULT_CHARSET=utf8mb4 \\ -DDEFAULT_COLLATION=utf8mb4_general_ci \\ -DWITH_CURL=system \\ -DENABLE_DOWNLOADS=1 \u6ce8: -DWITH_CURL=system \u89e3\u51b3 You need to set WITH_CURL \u95ee\u9898 -DENABLE_DOWNLOADS=1 \u89e3\u51b3 Googletest was not found \u95ee\u9898 rpmbuild\u5b89\u88c5--\u6210\u529f docker rm -f mysql docker run -dit --name mysql --network host centos:7.9.2009 bash docker cp mysql-community-5.7.38-1.el7.src.rpm mysql:/root docker exec -it mysql bash useradd pb2user groupadd common yum install -y rpm-build cmake perl-Env perl-Data-Dumper \\ perl-JSON time libaio-devel ncurses-devel numactl-devel \\ openssl-devel zlib-devel cyrus-sasl-devel openldap-devel \\ git make gcc gcc-c++ rpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql # rpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2022 rpmbuild --rebuild --clean /root/mysql-community-5.7.38-1.el7.src.rpm \u51fa\u73b0\u62a5\u95191: /root/rpmbuild/BUILD/mysql-5.7.38/mysql-5.7.38/sql/mysqld.cc:1565:36: error: 'prctl' was not declared in this scope \u5219: cp /usr/include/sys/prctl.h /root/rpmbuild/BUILD/mysql-5.7.38/mysql-5.7.38/include vi /root/rpmbuild/BUILD/mysql-5.7.38/mysql-5.7.38/sql/mysqld.cc \u5728 #include \"mysqld.h\" #include \"mysqld_daemon.h\" \u4e0b\u9762\u6dfb\u52a0: #include \"prctl.h\" cd /root/rpmbuild/BUILD/mysql-5.7.38/mysql-5.7.38 cmake . -DWITH_BOOST=../boost_1_59_0 make \u51fa\u73b0\u62a5\u95192: could not split insn \u5219: yum -y remove gcc yum install centos-release-scl yum install devtoolset-7 scl enable devtoolset-7 bash ln -s /opt/rh/devtoolset-7/root/usr/bin/c++ /usr/bin/c++ make \u53c8\u51fa\u73b0\u62a5\u95191: \u6309\u7167\u4e0a\u9762\u7684\u65b9\u6cd5\u89e3\u51b3 make make install DESTDIR=/opt/mysql \u7f16\u8bd1\u5b89\u88c5\u6210\u529f \u521d\u59cb\u5316 groupadd mysql useradd -r -g mysql -s /bin/false mysql cd /opt/mysql/usr/local/mysql mkdir data chown mysql:mysql data chmod 750 data mkdir etc vi etc/my.cnf \u5199\u5165: [mysqld] basedir=/opt/mysql/usr/local/mysql datadir=/opt/mysql/usr/local/mysql/data bin/mysqld --defaults-file=/opt/mysql/usr/local/mysql/etc/my.cnf \\ --initialize --user=mysql \u6ce8\u610f1: \u4e0a\u9762\u547d\u4ee4\u6267\u884c\u540e\u8f93\u51fa\u7684\u5185\u5bb9\u6709\u4e00\u884c\u7c7b\u4f3c\u8fd9\u6837\u7684: [Note] A temporary password is generated for root@localhost: a!mD0etq9!Mf \u5176\u4e2d a!mD0etq9!Mf \u5c31\u662froot\u7528\u6237\u7684\u968f\u673a\u7801\u5c3a\u7801 \u6ce8\u610f2: --initialize \u53ef\u4ee5\u66ff\u6362\u6210 --initialize-insecure, \u8fd9\u6837\u4e0d\u4f1a\u751f\u6210\u5bc6\u7801 PS: \u5982\u679c\u4e0d\u60f3\u521b\u5efa etc/my.cnf \u5219\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4 bin/mysqld --initialize --user=mysql \\ --basedir=/opt/mysql/usr/local/mysql \\ --datadir=/opt/mysql/usr/local/mysql/data \u542f\u52a8\u670d\u52a1: bin/mysqld_safe --user=mysql & \u6216 bin/mysqld --defaults-file=/opt/mysql/usr/local/mysql/etc/my.cnf --user=mysql & \u767b\u5f55 bin/mysql -u root -p \u5982\u679c\u4e0a\u9762\u7528\u7684\u662f --initialize-insecure, \u5219\u767b\u5f55\u547d\u4ee4\u662f mysql -u root --skip-password \u4fee\u6539\u5bc6\u7801: ALTER USER 'root'@'localhost' IDENTIFIED BY 'mysql'; \u67e5\u770b\u7528\u6237\u4fe1\u606f: select host, user, authentication_string, plugin from mysql.user; \u6ce8\u610f: \u9ad8\u7248\u672c\u4e2dauthentication_string\u6362\u6210\u4e86password \u5173\u95ed\u670d\u52a1: bin/mysqladmin -u root -p shutdown \u641e\u5b9a! \u8f6c\u79fb\u5230\u5176\u4ed6centos7\u4e0a\u662f\u4f7f\u7528? 1\u3001\u6253\u5305\u62f7\u8d1d cd /opt tar -czvf mysql5.7.38.tgz mysql 2\u3001\u89e3\u538b \u5c06\u538b\u7f29\u5305\u62f7\u8d1d\u5230\u5176\u4ed6\u673a\u5668\u4e0a\u5e76\u89e3\u538b\u5230/opt\u76ee\u5f55\u4e0b 3\u3001\u5b89\u88c5\u4f9d\u8d56: yum install -y libaio-devel numactl-devel 4\u3001\u914d\u7f6e\u7528\u6237\u548c\u7ec4: groupadd mysql && useradd -r -g mysql -s /bin/false mysql 5\u3001\u542f\u52a8: cd /opt/mysql/usr/local/mysql , bin/mysqld_safe --user=mysql &","title":"\u6e90\u7801\u7f16\u8bd1MySQL5.7\u8bb0\u5f55"},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/","text":"\u73a9\u5ba2\u4e91 \u4e00\u3001\u5237\u673a \u5237\u673a\u5305: https://github.com/hzyitc/armbian-onecloud/releases \u53c2\u8003\uff1a \u73a9\u5ba2\u4e91-Armbian22.08-\u76f4\u5237\u5305-\u5185\u68385.18-\u5404\u79cd\u5e01\uff0c\u8b6c\u5982\u8fc5\u96f7\u73a9\u5ba2\u4e91 \u73a9\u5ba2\u5e01 \u777f\u667a\u6fc0\u6d3b\u7801\u7b49-\u6069\u5c71\u65e0\u7ebf\u8bba\u575b (right.com.cn) \u5237\u673a\u6210\u529f\u4e4b\u540e\u6309\u7167\u5f15\u5bfc\u8fdb\u5165\u7cfb\u7edf\u5373\u53ef\u3002 \u4e8c\u3001\u914d\u7f6e 1\u3001\u914d\u7f6e\u9759\u6001IP\u548cDNS nano /etc/network/interfaces # \u5c06\u4ee5\u4e0b\u5185\u5bb9\u8ffd\u52a0\u5230\u6587\u4ef6\u6700\u540e\uff1a auto eth0 iface eth0 inet static address 192.168.1.254 netmask 255.255.255.0 gateway 192.168.1.1 dns-nameservers 223.5.5.5 223.6.6.6 # hwaddress 00:22:6D:50:42:A9 # PS\uff1a\u4ee5\u4e0a\u7684address\u3001netmask\u548cgateway\u6839\u636e\u4f60\u7684\u5b9e\u9645\u60c5\u51b5\u4fee\u6539, hwaddress\u662fmac\u5730\u5740(\u975e\u5fc5\u8981\u4e0d\u6dfb\u52a0) 2\u3001\u914d\u7f6e\u8f6f\u4ef6\u6e90\u5e76\u66f4\u65b0 a\u3001\u5c06\u9ed8\u8ba4\u6e90\u4e2d\u7684http\u6539\u6210https # \u628ahttp\u6539\u6210https nano /etc/apt/sources.list.d/armbian.list # \u628ahttp\u6539\u6210https nano /etc/apt/sources.list.d/nala.list b\u3001\u6dfb\u52a0\u6e05\u534e\u6e90 mv /etc/apt/sources.list /etc/apt/sources.list.bak nano /etc/apt/sources.list # \u5c06\u4ee5\u4e0b\u5185\u5bb9\u590d\u5236\u5230sources.list\u4e2d\uff1a deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free deb https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free c\u3001\u66f4\u65b0\u6e90\u548c\u5305 apt update && apt upgrade -y d\u3001\u8865\u5168python\u73af\u5883\u548c\u8bbe\u7f6epip\u6e90\uff08\u53ef\u9009\uff09 apt install -y python3-pip python3-venv pip3 config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple 3\u3001\u914d\u7f6e\u65f6\u533a ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime 4\u3001\u5b89\u88c5Docker curl -fsSL https://get.docker.com -o get-docker.sh sh get-docker.sh && rm get-docker.sh # \u4ee5\u4e0b\u547d\u4ee4\u662f\u4e00\u4e2a\u6574\u4f53, \u5176\u4e2d: # registry-mirrors\u662f\u8bbe\u7f6e\u955c\u50cf\u52a0\u901f # bip\u662f\u8bbe\u7f6eDocker\u521b\u5efa\u7684\u7f51\u7edc\u7684\u5730\u5740\u6bb5 # dns\u662f\u8bbe\u7f6eDocker\u7684DNS\u670d\u52a1\u5668 # data-root\u662f\u8bbe\u7f6eDocker\u8fd0\u884c\u65f6\u4f7f\u7528\u7684\u6839\u8def\u5f84\uff0c\u9ed8\u8ba4/var/lib/docker tee /etc/docker/daemon.json <<-'EOF' { \"registry-mirrors\": [\"https://t6wp3k6n.mirror.aliyuncs.com\"], \"dns\": [\"223.5.5.5\", \"223.6.6.6\"], \"bip\": \"192.168.255.1/24\", # \"data-root\": \"/path/to/docke-data\" } EOF 5\u3001\u5b89\u88c5Mariadb a\u3001\u6570\u636e\u5e93\u5b89\u88c5 apt install -y mariadb-server mariadb-client b\u3001\u6570\u636e\u5e93\u914d\u7f6e # \u6267\u884c\u4e0b\u65b9\u547d\u4ee4\u51fa\u73b0\u4ea4\u4e92\u5f0f\u4f1a\u8bdd\u914d\u7f6emysql mysql_secure_installation # \u767b\u5f55mysql\u7ee7\u7eed\u914d\u7f6e mysql use mysql grant all privileges on *.* to 'root'@'%' identified by 'mariadb' with grant option; flush privileges; exit c\u3001\u6570\u636e\u5e93\u6587\u4ef6\u914d\u7f6e nano /etc/mysql/mariadb.conf.d/50-server.cnf # \u627e\u5230\u8fd9\u4e00\u884c bind-address = 127.0.0.1 # \u6539\u6210 bind-address = 0.0.0.0 d\u3001\u91cd\u542f\u6570\u636e\u5e93 service mariadb restart 6\u3001\u5b89\u88c5ZeroTier curl -s https://install.zerotier.com | bash # \u5b89\u88c5\u6210\u529f\u540e\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u52a0\u5165\u7f51\u7edc zerotier-cli join \"network id\" 7\u3001\u5b89\u88c5aria2 a\u3001\u62c9\u53d6\u955c\u50cf docker pull p3terx/aria2-pro docker pull p3terx/ariang b\u3001\u521b\u5efa\u6587\u4ef6\u914d\u7f6e\u76ee\u5f55\u548c\u6587\u4ef6\u4e0b\u8f7d\u76ee\u5f55 mkdir /etc/aria2 mkdir -p /mnt/mmcblk0p1/aria2 c\u3001\u8fd0\u884c\u5bb9\u5668 # \u6ce8\u610f3\u70b9: # 1\u3001RPC_SECRET=onecloud \u662frpc\u8ba4\u8bc1token, \u53ef\u81ea\u884c\u8bbe\u5b9a # 2\u3001-v /etc/aria2 \u662f\u6b65\u9aa4b\u4e2d\u521b\u5efa\u7684\u6587\u4ef6\u914d\u7f6e\u76ee\u5f55 # 3\u3001 -v /mnt/mmcblk0p1/aria2 \u662f\u6b65\u9aa4b\u4e2d\u521b\u5efa\u7684\u6587\u4ef6\u4e0b\u8f7d\u76ee\u5f55 docker run -d \\ --name aria2-pro \\ --restart unless-stopped \\ --log-opt max-size=1m \\ -e PUID=$UID \\ -e PGID=$GID \\ -e UMASK_SET=022 \\ -e RPC_SECRET=onecloud \\ -e RPC_PORT=6800 \\ -p 6800:6800 \\ -e LISTEN_PORT=6888 \\ -p 6888:6888 \\ -p 6888:6888/udp \\ -v /etc/aria2:/config \\ -v /mnt/mmcblk0p1/aria2:/downloads \\ p3terx/aria2-pro docker run -d \\ --name ariang \\ --log-opt max-size=1m \\ --restart unless-stopped \\ -p 6880:6880 \\ p3terx/ariang d\u3001\u8bbf\u95ee http://ip:6880 8\u3001\u5b89\u88c5samba a\u3001\u5b89\u88c5 apt install -y samba b\u3001\u914d\u7f6e # \u521b\u5efa\u4e00\u4e2a\u5206\u914d\u5230sambashare\u7ec4\u4e14\u4e0d\u53ef\u767b\u5f55shell\u7684\u7528\u6237 useradd -s /usr/sbin/nologin -g sambashare samba # \u8bbe\u7f6e\u5bc6\u7801 smbpasswd -a samba # \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6 nano /etc/samba/smb.conf # \u5728\u6587\u4ef6\u6700\u540e\u5199\u5165\u914d\u7f6e [samba] comment = Files Share path = /mnt/mmcblk0p1/aria2 browseable = yes read only = yes # \u91cd\u542f\u670d\u52a1 service smbd restart","title":"\u73a9\u5ba2\u4e91"},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/#_1","text":"","title":"\u73a9\u5ba2\u4e91"},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/#_2","text":"\u5237\u673a\u5305: https://github.com/hzyitc/armbian-onecloud/releases \u53c2\u8003\uff1a \u73a9\u5ba2\u4e91-Armbian22.08-\u76f4\u5237\u5305-\u5185\u68385.18-\u5404\u79cd\u5e01\uff0c\u8b6c\u5982\u8fc5\u96f7\u73a9\u5ba2\u4e91 \u73a9\u5ba2\u5e01 \u777f\u667a\u6fc0\u6d3b\u7801\u7b49-\u6069\u5c71\u65e0\u7ebf\u8bba\u575b (right.com.cn) \u5237\u673a\u6210\u529f\u4e4b\u540e\u6309\u7167\u5f15\u5bfc\u8fdb\u5165\u7cfb\u7edf\u5373\u53ef\u3002","title":"\u4e00\u3001\u5237\u673a"},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/#_3","text":"","title":"\u4e8c\u3001\u914d\u7f6e"},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/#1ipdns","text":"nano /etc/network/interfaces # \u5c06\u4ee5\u4e0b\u5185\u5bb9\u8ffd\u52a0\u5230\u6587\u4ef6\u6700\u540e\uff1a auto eth0 iface eth0 inet static address 192.168.1.254 netmask 255.255.255.0 gateway 192.168.1.1 dns-nameservers 223.5.5.5 223.6.6.6 # hwaddress 00:22:6D:50:42:A9 # PS\uff1a\u4ee5\u4e0a\u7684address\u3001netmask\u548cgateway\u6839\u636e\u4f60\u7684\u5b9e\u9645\u60c5\u51b5\u4fee\u6539, hwaddress\u662fmac\u5730\u5740(\u975e\u5fc5\u8981\u4e0d\u6dfb\u52a0)","title":"1\u3001\u914d\u7f6e\u9759\u6001IP\u548cDNS"},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/#2","text":"a\u3001\u5c06\u9ed8\u8ba4\u6e90\u4e2d\u7684http\u6539\u6210https # \u628ahttp\u6539\u6210https nano /etc/apt/sources.list.d/armbian.list # \u628ahttp\u6539\u6210https nano /etc/apt/sources.list.d/nala.list b\u3001\u6dfb\u52a0\u6e05\u534e\u6e90 mv /etc/apt/sources.list /etc/apt/sources.list.bak nano /etc/apt/sources.list # \u5c06\u4ee5\u4e0b\u5185\u5bb9\u590d\u5236\u5230sources.list\u4e2d\uff1a deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free deb https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free c\u3001\u66f4\u65b0\u6e90\u548c\u5305 apt update && apt upgrade -y d\u3001\u8865\u5168python\u73af\u5883\u548c\u8bbe\u7f6epip\u6e90\uff08\u53ef\u9009\uff09 apt install -y python3-pip python3-venv pip3 config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple","title":"2\u3001\u914d\u7f6e\u8f6f\u4ef6\u6e90\u5e76\u66f4\u65b0"},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/#3","text":"ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime","title":"3\u3001\u914d\u7f6e\u65f6\u533a"},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/#4docker","text":"curl -fsSL https://get.docker.com -o get-docker.sh sh get-docker.sh && rm get-docker.sh # \u4ee5\u4e0b\u547d\u4ee4\u662f\u4e00\u4e2a\u6574\u4f53, \u5176\u4e2d: # registry-mirrors\u662f\u8bbe\u7f6e\u955c\u50cf\u52a0\u901f # bip\u662f\u8bbe\u7f6eDocker\u521b\u5efa\u7684\u7f51\u7edc\u7684\u5730\u5740\u6bb5 # dns\u662f\u8bbe\u7f6eDocker\u7684DNS\u670d\u52a1\u5668 # data-root\u662f\u8bbe\u7f6eDocker\u8fd0\u884c\u65f6\u4f7f\u7528\u7684\u6839\u8def\u5f84\uff0c\u9ed8\u8ba4/var/lib/docker tee /etc/docker/daemon.json <<-'EOF' { \"registry-mirrors\": [\"https://t6wp3k6n.mirror.aliyuncs.com\"], \"dns\": [\"223.5.5.5\", \"223.6.6.6\"], \"bip\": \"192.168.255.1/24\", # \"data-root\": \"/path/to/docke-data\" } EOF","title":"4\u3001\u5b89\u88c5Docker"},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/#5mariadb","text":"a\u3001\u6570\u636e\u5e93\u5b89\u88c5 apt install -y mariadb-server mariadb-client b\u3001\u6570\u636e\u5e93\u914d\u7f6e # \u6267\u884c\u4e0b\u65b9\u547d\u4ee4\u51fa\u73b0\u4ea4\u4e92\u5f0f\u4f1a\u8bdd\u914d\u7f6emysql mysql_secure_installation # \u767b\u5f55mysql\u7ee7\u7eed\u914d\u7f6e mysql use mysql grant all privileges on *.* to 'root'@'%' identified by 'mariadb' with grant option; flush privileges; exit c\u3001\u6570\u636e\u5e93\u6587\u4ef6\u914d\u7f6e nano /etc/mysql/mariadb.conf.d/50-server.cnf # \u627e\u5230\u8fd9\u4e00\u884c bind-address = 127.0.0.1 # \u6539\u6210 bind-address = 0.0.0.0 d\u3001\u91cd\u542f\u6570\u636e\u5e93 service mariadb restart","title":"5\u3001\u5b89\u88c5Mariadb"},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/#6zerotier","text":"curl -s https://install.zerotier.com | bash # \u5b89\u88c5\u6210\u529f\u540e\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u52a0\u5165\u7f51\u7edc zerotier-cli join \"network id\"","title":"6\u3001\u5b89\u88c5ZeroTier"},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/#7aria2","text":"a\u3001\u62c9\u53d6\u955c\u50cf docker pull p3terx/aria2-pro docker pull p3terx/ariang b\u3001\u521b\u5efa\u6587\u4ef6\u914d\u7f6e\u76ee\u5f55\u548c\u6587\u4ef6\u4e0b\u8f7d\u76ee\u5f55 mkdir /etc/aria2 mkdir -p /mnt/mmcblk0p1/aria2 c\u3001\u8fd0\u884c\u5bb9\u5668 # \u6ce8\u610f3\u70b9: # 1\u3001RPC_SECRET=onecloud \u662frpc\u8ba4\u8bc1token, \u53ef\u81ea\u884c\u8bbe\u5b9a # 2\u3001-v /etc/aria2 \u662f\u6b65\u9aa4b\u4e2d\u521b\u5efa\u7684\u6587\u4ef6\u914d\u7f6e\u76ee\u5f55 # 3\u3001 -v /mnt/mmcblk0p1/aria2 \u662f\u6b65\u9aa4b\u4e2d\u521b\u5efa\u7684\u6587\u4ef6\u4e0b\u8f7d\u76ee\u5f55 docker run -d \\ --name aria2-pro \\ --restart unless-stopped \\ --log-opt max-size=1m \\ -e PUID=$UID \\ -e PGID=$GID \\ -e UMASK_SET=022 \\ -e RPC_SECRET=onecloud \\ -e RPC_PORT=6800 \\ -p 6800:6800 \\ -e LISTEN_PORT=6888 \\ -p 6888:6888 \\ -p 6888:6888/udp \\ -v /etc/aria2:/config \\ -v /mnt/mmcblk0p1/aria2:/downloads \\ p3terx/aria2-pro docker run -d \\ --name ariang \\ --log-opt max-size=1m \\ --restart unless-stopped \\ -p 6880:6880 \\ p3terx/ariang d\u3001\u8bbf\u95ee http://ip:6880","title":"7\u3001\u5b89\u88c5aria2"},{"location":"linux/%E7%8E%A9%E5%AE%A2%E4%BA%91/#8samba","text":"a\u3001\u5b89\u88c5 apt install -y samba b\u3001\u914d\u7f6e # \u521b\u5efa\u4e00\u4e2a\u5206\u914d\u5230sambashare\u7ec4\u4e14\u4e0d\u53ef\u767b\u5f55shell\u7684\u7528\u6237 useradd -s /usr/sbin/nologin -g sambashare samba # \u8bbe\u7f6e\u5bc6\u7801 smbpasswd -a samba # \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6 nano /etc/samba/smb.conf # \u5728\u6587\u4ef6\u6700\u540e\u5199\u5165\u914d\u7f6e [samba] comment = Files Share path = /mnt/mmcblk0p1/aria2 browseable = yes read only = yes # \u91cd\u542f\u670d\u52a1 service smbd restart","title":"8\u3001\u5b89\u88c5samba"},{"location":"mac/MacOS%E8%BD%AF%E4%BB%B6/","text":"Mac\u8f6f\u4ef6 \u5f00\u6e90 \u5212\u8bcd\u7ffb\u8bd1: Bob \u5feb\u6377\u5206\u5c4f: Rectangle \u6587\u672c\u7f16\u8f91\u5668: CotEditor , MacVim \u6570\u636e\u5e93\u5de5\u5177: DBeaver \u914d\u7f6e\u4e0d\u540cApp\u4f7f\u7528\u4e0d\u540c\u8f93\u5165\u6cd5: KeyboardHolder \u68af\u5b50: clashX , v2ray-core \u4e0b\u8f7d\u5de5\u5177: Motrix \u89e3\u51b3\u9f20\u6807\u5361\u987f\u548c\u914d\u7f6e\u6eda\u8f6e\u65b9\u5411: Mos \u8c03\u6574\u5916\u63a5\u663e\u793a\u4eae\u5ea6\u4e0e\u58f0\u97f3: MonitorControl \u952e\u76d8\u6309\u952e\u6620\u5c04\u8c03\u6574: Karabiner-Elements Mp3Tag\u7f16\u8f91: MusicBrainz Picard \u9759\u6001\u535a\u5ba2\u5199\u4f5c\u5ba2\u6237\u7aef: Gridea Gridea\u4e3b\u9898: Pure \u89c6\u9891\u64ad\u653e\u5668: IINA IINA\u63d2\u4ef6(B\u7ad9\u3001\u5f39\u5e55\u7b49): IINA+ \u865a\u62df\u673a: UTM UTM\u5de5\u5177\u5305: SPICE Guest Tools \u95ed\u6e90 \u7ec8\u7aef\u81ea\u52a8\u8865\u5168: Fig \u622a\u56fe: Snipaste \u5feb\u901f\u67e5\u770b\u5feb\u6377\u952e: CheatSheet \u5fae\u8f6f\u8fdc\u7a0b\u684c\u9762: Microsoft Remote Desktop \u5185\u7f51\u7a7f\u900f: ZeroTier Android\u6587\u4ef6\u4f20\u8f93: Android File Transfer Parallels Desktop\u542f\u52a8\u5668: PD Runner Markdown\u5de5\u5177: Typora \u65b0\u7248\u5f00\u59cb\u6536\u8d39, \u5b98\u7f51\u9875\u9762\u4e0a\u5df2\u7ecf\u4e0b\u8f7d\u65e7\u7248, \u4f46\u65e7\u7248\u7684\u4e0b\u8f7d\u5730\u5740\u8fd8\u53ef\u4ee5\u7528 https://download.typora.io/windows/typora-setup-x64-0.11.18.exe https://download.typora.io/windows/typora-setup-ia32-0.11.18.exe https://download.typora.io/linux/typora_0.11.18_amd64.deb https://download.typora.io/mac/Typora-0.11.18.dmg \u4ee3\u7801\u8865\u5168: Kite \u5b98\u7f51\u65e0\u6cd5\u4e0b\u8f7d, \u53c2\u8003: Kite is temporarily unavailable https://linux.kite.com/dls/linux/current https://release.kite.com/dls/windows/current https://release.kite.com/dls/mac/current \u89c6\u9891\u683c\u5f0f\u8f6c\u6362: HandBrake \u82f1\u8bed\u5355\u8bcd\u5b66\u4e60: Anki \u4e0b\u8f7d\u7ad9 MacBL Xclient Better365 Oka Apps","title":"Mac\u8f6f\u4ef6"},{"location":"mac/MacOS%E8%BD%AF%E4%BB%B6/#mac","text":"","title":"Mac\u8f6f\u4ef6"},{"location":"mac/MacOS%E8%BD%AF%E4%BB%B6/#_1","text":"\u5212\u8bcd\u7ffb\u8bd1: Bob \u5feb\u6377\u5206\u5c4f: Rectangle \u6587\u672c\u7f16\u8f91\u5668: CotEditor , MacVim \u6570\u636e\u5e93\u5de5\u5177: DBeaver \u914d\u7f6e\u4e0d\u540cApp\u4f7f\u7528\u4e0d\u540c\u8f93\u5165\u6cd5: KeyboardHolder \u68af\u5b50: clashX , v2ray-core \u4e0b\u8f7d\u5de5\u5177: Motrix \u89e3\u51b3\u9f20\u6807\u5361\u987f\u548c\u914d\u7f6e\u6eda\u8f6e\u65b9\u5411: Mos \u8c03\u6574\u5916\u63a5\u663e\u793a\u4eae\u5ea6\u4e0e\u58f0\u97f3: MonitorControl \u952e\u76d8\u6309\u952e\u6620\u5c04\u8c03\u6574: Karabiner-Elements Mp3Tag\u7f16\u8f91: MusicBrainz Picard \u9759\u6001\u535a\u5ba2\u5199\u4f5c\u5ba2\u6237\u7aef: Gridea Gridea\u4e3b\u9898: Pure \u89c6\u9891\u64ad\u653e\u5668: IINA IINA\u63d2\u4ef6(B\u7ad9\u3001\u5f39\u5e55\u7b49): IINA+ \u865a\u62df\u673a: UTM UTM\u5de5\u5177\u5305: SPICE Guest Tools","title":"\u5f00\u6e90"},{"location":"mac/MacOS%E8%BD%AF%E4%BB%B6/#_2","text":"\u7ec8\u7aef\u81ea\u52a8\u8865\u5168: Fig \u622a\u56fe: Snipaste \u5feb\u901f\u67e5\u770b\u5feb\u6377\u952e: CheatSheet \u5fae\u8f6f\u8fdc\u7a0b\u684c\u9762: Microsoft Remote Desktop \u5185\u7f51\u7a7f\u900f: ZeroTier Android\u6587\u4ef6\u4f20\u8f93: Android File Transfer Parallels Desktop\u542f\u52a8\u5668: PD Runner Markdown\u5de5\u5177: Typora \u65b0\u7248\u5f00\u59cb\u6536\u8d39, \u5b98\u7f51\u9875\u9762\u4e0a\u5df2\u7ecf\u4e0b\u8f7d\u65e7\u7248, \u4f46\u65e7\u7248\u7684\u4e0b\u8f7d\u5730\u5740\u8fd8\u53ef\u4ee5\u7528 https://download.typora.io/windows/typora-setup-x64-0.11.18.exe https://download.typora.io/windows/typora-setup-ia32-0.11.18.exe https://download.typora.io/linux/typora_0.11.18_amd64.deb https://download.typora.io/mac/Typora-0.11.18.dmg \u4ee3\u7801\u8865\u5168: Kite \u5b98\u7f51\u65e0\u6cd5\u4e0b\u8f7d, \u53c2\u8003: Kite is temporarily unavailable https://linux.kite.com/dls/linux/current https://release.kite.com/dls/windows/current https://release.kite.com/dls/mac/current \u89c6\u9891\u683c\u5f0f\u8f6c\u6362: HandBrake \u82f1\u8bed\u5355\u8bcd\u5b66\u4e60: Anki","title":"\u95ed\u6e90"},{"location":"mac/MacOS%E8%BD%AF%E4%BB%B6/#_3","text":"MacBL Xclient Better365 Oka Apps","title":"\u4e0b\u8f7d\u7ad9"},{"location":"mac/Mac%E5%AE%89%E8%A3%85Office%E5%B9%B6%E6%BF%80%E6%B4%BB/","text":"Mac\u5b89\u88c5Office\u5e76\u6fc0\u6d3b \u53c2\u8003 Office for Mac Microsoft-Office-For-MacOS \u79bb\u7ebf\u5b89\u88c5\u5305 \u5bf9\u4e8emac\u6765\u8bb2, Office for Mac(Office 365)\u3001Office LTSC for Mac 2021 \u548c Office 2019 for Mac\u90fd\u662f\u540c\u4e00\u4e2a\u5b89\u88c5\u5305, \u5982\u4f55\u6fc0\u6d3b\u4ea7\u54c1\u51b3\u5b9a\u4e86\u54ea\u4e9b\u529f\u80fd\u53ef\u4f9b\u7528\u6237\u4f7f\u7528 \u5305\u542b Microsoft Teams \u7684\u79bb\u7ebf\u5b89\u88c5\u5305: https://go.microsoft.com/fwlink/p/?linkid=2009112 \u4e0d\u5305\u542b Microsoft Teams \u7684\u79bb\u7ebf\u5b89\u88c5\u5305: https://go.microsoft.com/fwlink/p/?linkid=525133 \u9664\u4e86Teams\u5916, Office\u5957\u4ef6\u4e2d\u5305\u542b Word\u3001Excel\u3001PowerPoint\u3001OneNote\u3001Outlook\u548cOneDrive, \u5b89\u88c5\u65f6\u53ef\u81ea\u5df1\u51b3\u5b9a\u5b89\u88c5\u54ea\u4e9b\u5957\u4ef6 \u540c\u65f6, \u8fd8\u63d0\u4f9b\u4e86\u5957\u4ef6\u7684\u72ec\u7acb\u5b89\u88c5\u5305: https://docs.microsoft.com/zh-cn/officeupdates/update-history-office-for-mac#most-current-packages-for-office-for-mac VOL\u6fc0\u6d3b Microsoft Office 2021 LTSC Volume License Serializer Microsoft Office 2019 Volume License Serializer","title":"Mac\u5b89\u88c5Office\u5e76\u6fc0\u6d3b"},{"location":"mac/Mac%E5%AE%89%E8%A3%85Office%E5%B9%B6%E6%BF%80%E6%B4%BB/#macoffice","text":"","title":"Mac\u5b89\u88c5Office\u5e76\u6fc0\u6d3b"},{"location":"mac/Mac%E5%AE%89%E8%A3%85Office%E5%B9%B6%E6%BF%80%E6%B4%BB/#_1","text":"Office for Mac Microsoft-Office-For-MacOS","title":"\u53c2\u8003"},{"location":"mac/Mac%E5%AE%89%E8%A3%85Office%E5%B9%B6%E6%BF%80%E6%B4%BB/#_2","text":"\u5bf9\u4e8emac\u6765\u8bb2, Office for Mac(Office 365)\u3001Office LTSC for Mac 2021 \u548c Office 2019 for Mac\u90fd\u662f\u540c\u4e00\u4e2a\u5b89\u88c5\u5305, \u5982\u4f55\u6fc0\u6d3b\u4ea7\u54c1\u51b3\u5b9a\u4e86\u54ea\u4e9b\u529f\u80fd\u53ef\u4f9b\u7528\u6237\u4f7f\u7528 \u5305\u542b Microsoft Teams \u7684\u79bb\u7ebf\u5b89\u88c5\u5305: https://go.microsoft.com/fwlink/p/?linkid=2009112 \u4e0d\u5305\u542b Microsoft Teams \u7684\u79bb\u7ebf\u5b89\u88c5\u5305: https://go.microsoft.com/fwlink/p/?linkid=525133 \u9664\u4e86Teams\u5916, Office\u5957\u4ef6\u4e2d\u5305\u542b Word\u3001Excel\u3001PowerPoint\u3001OneNote\u3001Outlook\u548cOneDrive, \u5b89\u88c5\u65f6\u53ef\u81ea\u5df1\u51b3\u5b9a\u5b89\u88c5\u54ea\u4e9b\u5957\u4ef6 \u540c\u65f6, \u8fd8\u63d0\u4f9b\u4e86\u5957\u4ef6\u7684\u72ec\u7acb\u5b89\u88c5\u5305: https://docs.microsoft.com/zh-cn/officeupdates/update-history-office-for-mac#most-current-packages-for-office-for-mac","title":"\u79bb\u7ebf\u5b89\u88c5\u5305"},{"location":"mac/Mac%E5%AE%89%E8%A3%85Office%E5%B9%B6%E6%BF%80%E6%B4%BB/#vol","text":"Microsoft Office 2021 LTSC Volume License Serializer Microsoft Office 2019 Volume License Serializer","title":"VOL\u6fc0\u6d3b"},{"location":"mac/UTM%E5%AE%89%E8%A3%85Windows/","text":"UTM\u5b89\u88c5Windows \u4e3a\u4ec0\u4e48\u7528UTM\u4e0d\u7528Parallels Desktop? \u770b\u4e0d\u60efPD\u6536\u8d39\u6a21\u5f0f, \u800c\u4e14\u603b\u662f\u78b0\u5230Windows\u65f6\u95f4\u53d8\u62102018\u5e74\u5bfc\u81f4Mac\u65f6\u95f4\u4e5f\u53d8\u62102018\u5e74\u7684\u95ee\u9898 \u90fd\u662f\u57fa\u4e8eQEMU, \u4f46\u662fUTM\u514d\u8d39, \u4e14\u63d0\u4f9b\u4e24\u79cd\u6a21\u5f0f \u865a\u62df\u5316 \u548c \u6a21\u62df , \u5176\u4e2d\u6a21\u62df\u65b9\u5f0f\u4e0d\u53d7CPU\u67b6\u6784\u7684\u9650\u5236 \u4e00\u3001\u4e0b\u8f7d\u8f6f\u4ef6\u548c\u955c\u50cf UTM \u662f\u865a\u62df\u673a\u8f6f\u4ef6 spice-guest-tools-0.164.3.iso \u63d0\u4f9b\u4e3b\u673a\u548c\u865a\u62df\u673a\u4e4b\u95f4\u590d\u5236\u3001\u7c98\u8d34\u548c\u5171\u4eab\u7b49, \u4ee5\u53ca\u865a\u62df\u673a\u5c4f\u5e55\u81ea\u9002\u5e94\u5206\u8fa8\u7387\u7b49\u529f\u80fd virtio-win-0.1.221.iso \u63d0\u4f9bWindows\u5bf9VirtIO\u78c1\u76d8\u7684\u652f\u6301 UUP dump \u7f51\u7ad9\u63d0\u4f9bWindows\u955c\u50cf\u4e0b\u8f7d \u6ce8\u610f, UTM\u5bf9\u7cfb\u7edf\u7248\u672c\u6709\u8981\u6c42, \u8981\u6c42build number( \u5185\u90e8\u7248\u672c )\u7b49\u4e8e\u6216\u9ad8\u4e8e21390, \u5426\u5219\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u62a5\u9519 \u70b9\u51fb\u6b64\u5904 \u53ef\u83b7\u53d6\u6700\u65b0\u7684Window\u7248\u672c\u4fe1\u606f, \u76f4\u63a5\u83b7\u53d6Windows11\u7684\u6700\u65b0\u6b63\u5f0f\u7248\u7684\u5185\u90e8\u7248\u672c\u540e\u53bb UUP dump \u4e2d\u641c\u7d22\u5e76\u4e0b\u8f7d \u8bf4\u660e\u4e00\u4e0b, \u6b63\u5f0f\u7248\u7684Windows 10\u7684\u5185\u90e8\u7248\u672c\u5747\u4f4e\u4e8e21390 \u60f3\u8981\u5b89\u88c5Windows 10\u53ea\u80fd\u4f7f\u7528Insider Preview\u4e2d\u7684Beta\u901a\u9053\u6216Dev\u901a\u9053\u7684\u7248\u672c(\u70e6\u4eba\u7684\u66f4\u65b0) \u4e8c\u3001\u5b89\u88c5Windows11 \u6b65\u9aa41 \u6253\u5f00UTM -> \u65b0\u5efa\u865a\u62df\u673a -> \u865a\u62df\u5316 -> Windows -> \u53d6\u6d88\u52fe\u9009\"\u5bfc\u5165 VHDX \u78c1\u76d8\u955c\u50cf\" -> \u70b9\u51fb\u4e0b\u65b9\u6309\u94ae\"\u6d4f\u89c8\" -> \u9009\u62e9Windows11 ISO\u955c\u50cf\u6587\u4ef6 -> \u4e0b\u4e00\u6b65 -> \u4e0b\u4e00\u6b65 -> \u4e0b\u4e00\u6b65 -> \u4e0b\u4e00\u6b65 -> \u52fe\u9009\"\u6253\u5f00 VM \u8bbe\u7f6e\" -> \u5b8c\u6210 \u4e0a\u8ff04\u4e2a\u4e0b\u4e00\u6b65\u4e4b\u95f4\u76843\u4e2a\u8fc7\u7a0b\u4e2d, \u53ef\u914d\u7f6e\u914d\u7f6e\u5185\u5b58\u548cCPU\u3001\u786c\u76d8\u5927\u5c0f\u548c\u5171\u4eab\u6587\u4ef6\u5939\u529f\u80fd, \u9ed8\u8ba4\u6216\u81ea\u5b9a\u4e49\u5747\u53ef \u6b65\u9aa42 \u627e\u5230 \u9a71\u52a8\u5668 \u5206\u7c7b\u4e0b\u7684 NVMe Deive -> \u5355\u51fb -> \u63a5\u53e3 -> \u9009\u62e9\"VirtIO\" -> \u4fdd\u5b58 \u622a\u6b62\u52302022\u5e748\u670823\u65e5, UTM\u7a33\u5b9a\u72483.2.4\u4e0d\u652f\u6301 \u6682\u505c \u5bf9\u4e00\u4e2a\u6216\u591a\u4e2a\u9a71\u52a8\u5668\u4f7f\u7528NVMe\u63a5\u53e3\u7684\u865a\u62df\u673a \u5177\u4f53\u60c5\u51b5\u53c2\u89c1 Windows 11 Mac M1 Pro - Pause Error \u00b7 Issue #3918 \u00b7 utmapp/UTM (github.com) ) \u4e5f\u5c31\u662f\u8bf4\u5982\u679c\u4e0d\u6539\u6210VirtIO, \u90a3\u4e48\u6bcf\u6b21\u7528\u5b8c\u865a\u62df\u673a\u540e\u5173\u95ed\u865a\u62df\u673a\u7cfb\u7edf, \u6bd4\u8f83\u9ebb\u70e6, \u800cVirtIO\u5219\u652f\u6301 \u6682\u505c \u529f\u80fd \u6b65\u9aa43 1\u3001\u6839\u636e\u5f15\u5bfc\u4e00\u6b65\u4e00\u6b65\u7684\u5b89\u88c5Windows, \u7136\u540e\u9047\u5230\u95ee\u9898\"\u8fd9\u53f0\u7535\u8111\u65e0\u6cd5\u8fd0\u884c Windows 11\" 2\u3001\u6b64\u65f6, \u6309\u4e0b Shift+F10 , \u5728\u5f39\u51fa\u7684CMD\u7a97\u53e3\u4e2d\u8f93\u5165regedit\u5e76\u56de\u8f66, \u5b9a\u4f4d\u5230 HKEY_LOCAL_MACHINE\\SYSTEM\\Setup 3\u3001\u5728 Setup \u4e0a\u53f3\u952e > \u65b0\u5efa > \u9879 > \u547d\u540d\u4e3a LabConfig 4\u3001\u5728 LabConfig \u4e0a\u53f3\u952e > \u65b0\u5efa > DWORD (32 \u4f4d)\u503c > \u547d\u540d\u4e3a BypassTPMCheck > \u6253\u51fb\u6253\u5f00\u8be5\u952e\u503c\u5e76\u8f93\u5165 1 > \u70b9\u51fb\u786e\u5b9a 5\u3001\u5728 LabConfig \u4e0a\u53f3\u952e > \u65b0\u5efa > DWORD (32 \u4f4d)\u503c > \u547d\u540d\u4e3a BypassSecureBootCheck > \u6253\u51fb\u6253\u5f00\u8be5\u952e\u503c\u5e76\u8f93\u5165 1 > \u70b9\u51fb\u786e\u5b9a 6\u3001\u5173\u95ed\u6ce8\u518c\u8868 >\u5173\u95edCMD >\u56de\u5230Windows\u5b89\u88c5\u9875\u9762 >\u70b9\u51fb\u5de6\u4e0a\u89d2\u7684\u8fd4\u56de\u7bad\u5934\u7684\u6309\u94ae > \u70b9\u51fb\u6211\u6ca1\u6709\u4ea7\u54c1\u5bc6\u94a5 > \u52fe\u9009\u63a5\u53d7\u6761\u6b3e > \u4e0b\u4e00\u6b65 7\u3001\u9009\u62e9\u7b2c\u4e8c\u9879(\u4ee5\"\u81ea\u5b9a\u4e49:\"\u5f00\u5934), \u53d1\u73b0\u6ca1\u6709\u53ef\u4f9bWindows\u5b89\u88c5\u7684\u786c\u76d8 8\u3001\u70b9\u51fbUTM\u8f6f\u4ef6\u53f3\u4e0a\u89d2\u5012\u6570\u7b2c\u4e8c\u4e2a\u56fe\u6807, \u66f4\u6362\u6302\u8f7d\u7684\u955c\u50cf\u4e3a\u5148\u524d\u4e0b\u8f7d\u7684 virtio-win-0.1.221.iso , \u7136\u540e\u56de\u5230Windows\u5b89\u88c5\u754c\u9762 9\u3001\u70b9\u51fb\u5de6\u4e0b\u89d2\u7684\" \u52a0\u8f7d\u9a71\u52a8\u7a0b\u5e8f \" > \u6d4f\u89c8 > CD\u9a71\u52a8\u5668 > \u627e\u5230\u6700\u4e0b\u9762\u7684\" viostor \" > \u627e\u5230\u6700\u4e0b\u9762\u7684\" w11 \" > \u70b9\u51fb\" ARM64 \" > \u70b9\u51fb \u786e\u5b9a > \u70b9 \u51fb\" \u4e0b\u4e00\u9875 \" > \u7b49\u5f85\u9a71\u52a8\u52a0\u8f7d\u5b8c\u6bd5\u4f1a, \u81ea\u52a8\u56de\u5230\u5b89\u88c5\u754c\u9762 10\u3001\u70b9\u51fbUTM\u8f6f\u4ef6\u53f3\u4e0a\u89d2\u5012\u6570\u7b2c\u4e8c\u4e2a\u56fe\u6807, \u66f4\u6362\u6302\u8f7d\u7684\u955c\u50cf\u4e3a\u5148\u524d\u4e0b\u8f7d\u7684 Window 11 ISO\u5b89\u88c5\u955c\u50cf > \u70b9\u51fb\u5de6\u4e0b\u89d2\u7684\" \u5237\u65b0 \" > \u70b9\u51fb\" \u4e0b\u4e00\u9875 \" > \u81f3\u6b64, \u5df2\u7ecf\u5f00\u59cb\u88c5\u5b89Windows 11 11\u3001\u5b89\u88c5\u6210\u529f\u540e, \u7ecf\u8fc7\u8bbe\u7f6e\u8fdb\u5165Windows 11\u684c\u9762\u540e, \u70b9\u51fbUTM\u8f6f\u4ef6\u53f3\u4e0a\u89d2\u5012\u6570\u7b2c\u4e8c\u4e2a\u56fe\u6807, \u66f4\u6362\u6302\u8f7d\u7684\u955c\u50cf\u4e3a\u5148\u524d\u4e0b\u8f7d\u7684 spice-guest-tools-0.164.3.iso , \u5b89\u88c5 12\u3001\u641e\u5b9a!","title":"UTM\u5b89\u88c5Windows"},{"location":"mac/UTM%E5%AE%89%E8%A3%85Windows/#utmwindows","text":"\u4e3a\u4ec0\u4e48\u7528UTM\u4e0d\u7528Parallels Desktop? \u770b\u4e0d\u60efPD\u6536\u8d39\u6a21\u5f0f, \u800c\u4e14\u603b\u662f\u78b0\u5230Windows\u65f6\u95f4\u53d8\u62102018\u5e74\u5bfc\u81f4Mac\u65f6\u95f4\u4e5f\u53d8\u62102018\u5e74\u7684\u95ee\u9898 \u90fd\u662f\u57fa\u4e8eQEMU, \u4f46\u662fUTM\u514d\u8d39, \u4e14\u63d0\u4f9b\u4e24\u79cd\u6a21\u5f0f \u865a\u62df\u5316 \u548c \u6a21\u62df , \u5176\u4e2d\u6a21\u62df\u65b9\u5f0f\u4e0d\u53d7CPU\u67b6\u6784\u7684\u9650\u5236","title":"UTM\u5b89\u88c5Windows"},{"location":"mac/UTM%E5%AE%89%E8%A3%85Windows/#_1","text":"UTM \u662f\u865a\u62df\u673a\u8f6f\u4ef6 spice-guest-tools-0.164.3.iso \u63d0\u4f9b\u4e3b\u673a\u548c\u865a\u62df\u673a\u4e4b\u95f4\u590d\u5236\u3001\u7c98\u8d34\u548c\u5171\u4eab\u7b49, \u4ee5\u53ca\u865a\u62df\u673a\u5c4f\u5e55\u81ea\u9002\u5e94\u5206\u8fa8\u7387\u7b49\u529f\u80fd virtio-win-0.1.221.iso \u63d0\u4f9bWindows\u5bf9VirtIO\u78c1\u76d8\u7684\u652f\u6301 UUP dump \u7f51\u7ad9\u63d0\u4f9bWindows\u955c\u50cf\u4e0b\u8f7d \u6ce8\u610f, UTM\u5bf9\u7cfb\u7edf\u7248\u672c\u6709\u8981\u6c42, \u8981\u6c42build number( \u5185\u90e8\u7248\u672c )\u7b49\u4e8e\u6216\u9ad8\u4e8e21390, \u5426\u5219\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u62a5\u9519 \u70b9\u51fb\u6b64\u5904 \u53ef\u83b7\u53d6\u6700\u65b0\u7684Window\u7248\u672c\u4fe1\u606f, \u76f4\u63a5\u83b7\u53d6Windows11\u7684\u6700\u65b0\u6b63\u5f0f\u7248\u7684\u5185\u90e8\u7248\u672c\u540e\u53bb UUP dump \u4e2d\u641c\u7d22\u5e76\u4e0b\u8f7d \u8bf4\u660e\u4e00\u4e0b, \u6b63\u5f0f\u7248\u7684Windows 10\u7684\u5185\u90e8\u7248\u672c\u5747\u4f4e\u4e8e21390 \u60f3\u8981\u5b89\u88c5Windows 10\u53ea\u80fd\u4f7f\u7528Insider Preview\u4e2d\u7684Beta\u901a\u9053\u6216Dev\u901a\u9053\u7684\u7248\u672c(\u70e6\u4eba\u7684\u66f4\u65b0)","title":"\u4e00\u3001\u4e0b\u8f7d\u8f6f\u4ef6\u548c\u955c\u50cf"},{"location":"mac/UTM%E5%AE%89%E8%A3%85Windows/#windows11","text":"","title":"\u4e8c\u3001\u5b89\u88c5Windows11"},{"location":"mac/UTM%E5%AE%89%E8%A3%85Windows/#1","text":"\u6253\u5f00UTM -> \u65b0\u5efa\u865a\u62df\u673a -> \u865a\u62df\u5316 -> Windows -> \u53d6\u6d88\u52fe\u9009\"\u5bfc\u5165 VHDX \u78c1\u76d8\u955c\u50cf\" -> \u70b9\u51fb\u4e0b\u65b9\u6309\u94ae\"\u6d4f\u89c8\" -> \u9009\u62e9Windows11 ISO\u955c\u50cf\u6587\u4ef6 -> \u4e0b\u4e00\u6b65 -> \u4e0b\u4e00\u6b65 -> \u4e0b\u4e00\u6b65 -> \u4e0b\u4e00\u6b65 -> \u52fe\u9009\"\u6253\u5f00 VM \u8bbe\u7f6e\" -> \u5b8c\u6210 \u4e0a\u8ff04\u4e2a\u4e0b\u4e00\u6b65\u4e4b\u95f4\u76843\u4e2a\u8fc7\u7a0b\u4e2d, \u53ef\u914d\u7f6e\u914d\u7f6e\u5185\u5b58\u548cCPU\u3001\u786c\u76d8\u5927\u5c0f\u548c\u5171\u4eab\u6587\u4ef6\u5939\u529f\u80fd, \u9ed8\u8ba4\u6216\u81ea\u5b9a\u4e49\u5747\u53ef","title":"\u6b65\u9aa41"},{"location":"mac/UTM%E5%AE%89%E8%A3%85Windows/#2","text":"\u627e\u5230 \u9a71\u52a8\u5668 \u5206\u7c7b\u4e0b\u7684 NVMe Deive -> \u5355\u51fb -> \u63a5\u53e3 -> \u9009\u62e9\"VirtIO\" -> \u4fdd\u5b58 \u622a\u6b62\u52302022\u5e748\u670823\u65e5, UTM\u7a33\u5b9a\u72483.2.4\u4e0d\u652f\u6301 \u6682\u505c \u5bf9\u4e00\u4e2a\u6216\u591a\u4e2a\u9a71\u52a8\u5668\u4f7f\u7528NVMe\u63a5\u53e3\u7684\u865a\u62df\u673a \u5177\u4f53\u60c5\u51b5\u53c2\u89c1 Windows 11 Mac M1 Pro - Pause Error \u00b7 Issue #3918 \u00b7 utmapp/UTM (github.com) ) \u4e5f\u5c31\u662f\u8bf4\u5982\u679c\u4e0d\u6539\u6210VirtIO, \u90a3\u4e48\u6bcf\u6b21\u7528\u5b8c\u865a\u62df\u673a\u540e\u5173\u95ed\u865a\u62df\u673a\u7cfb\u7edf, \u6bd4\u8f83\u9ebb\u70e6, \u800cVirtIO\u5219\u652f\u6301 \u6682\u505c \u529f\u80fd","title":"\u6b65\u9aa42"},{"location":"mac/UTM%E5%AE%89%E8%A3%85Windows/#3","text":"1\u3001\u6839\u636e\u5f15\u5bfc\u4e00\u6b65\u4e00\u6b65\u7684\u5b89\u88c5Windows, \u7136\u540e\u9047\u5230\u95ee\u9898\"\u8fd9\u53f0\u7535\u8111\u65e0\u6cd5\u8fd0\u884c Windows 11\" 2\u3001\u6b64\u65f6, \u6309\u4e0b Shift+F10 , \u5728\u5f39\u51fa\u7684CMD\u7a97\u53e3\u4e2d\u8f93\u5165regedit\u5e76\u56de\u8f66, \u5b9a\u4f4d\u5230 HKEY_LOCAL_MACHINE\\SYSTEM\\Setup 3\u3001\u5728 Setup \u4e0a\u53f3\u952e > \u65b0\u5efa > \u9879 > \u547d\u540d\u4e3a LabConfig 4\u3001\u5728 LabConfig \u4e0a\u53f3\u952e > \u65b0\u5efa > DWORD (32 \u4f4d)\u503c > \u547d\u540d\u4e3a BypassTPMCheck > \u6253\u51fb\u6253\u5f00\u8be5\u952e\u503c\u5e76\u8f93\u5165 1 > \u70b9\u51fb\u786e\u5b9a 5\u3001\u5728 LabConfig \u4e0a\u53f3\u952e > \u65b0\u5efa > DWORD (32 \u4f4d)\u503c > \u547d\u540d\u4e3a BypassSecureBootCheck > \u6253\u51fb\u6253\u5f00\u8be5\u952e\u503c\u5e76\u8f93\u5165 1 > \u70b9\u51fb\u786e\u5b9a 6\u3001\u5173\u95ed\u6ce8\u518c\u8868 >\u5173\u95edCMD >\u56de\u5230Windows\u5b89\u88c5\u9875\u9762 >\u70b9\u51fb\u5de6\u4e0a\u89d2\u7684\u8fd4\u56de\u7bad\u5934\u7684\u6309\u94ae > \u70b9\u51fb\u6211\u6ca1\u6709\u4ea7\u54c1\u5bc6\u94a5 > \u52fe\u9009\u63a5\u53d7\u6761\u6b3e > \u4e0b\u4e00\u6b65 7\u3001\u9009\u62e9\u7b2c\u4e8c\u9879(\u4ee5\"\u81ea\u5b9a\u4e49:\"\u5f00\u5934), \u53d1\u73b0\u6ca1\u6709\u53ef\u4f9bWindows\u5b89\u88c5\u7684\u786c\u76d8 8\u3001\u70b9\u51fbUTM\u8f6f\u4ef6\u53f3\u4e0a\u89d2\u5012\u6570\u7b2c\u4e8c\u4e2a\u56fe\u6807, \u66f4\u6362\u6302\u8f7d\u7684\u955c\u50cf\u4e3a\u5148\u524d\u4e0b\u8f7d\u7684 virtio-win-0.1.221.iso , \u7136\u540e\u56de\u5230Windows\u5b89\u88c5\u754c\u9762 9\u3001\u70b9\u51fb\u5de6\u4e0b\u89d2\u7684\" \u52a0\u8f7d\u9a71\u52a8\u7a0b\u5e8f \" > \u6d4f\u89c8 > CD\u9a71\u52a8\u5668 > \u627e\u5230\u6700\u4e0b\u9762\u7684\" viostor \" > \u627e\u5230\u6700\u4e0b\u9762\u7684\" w11 \" > \u70b9\u51fb\" ARM64 \" > \u70b9\u51fb \u786e\u5b9a > \u70b9 \u51fb\" \u4e0b\u4e00\u9875 \" > \u7b49\u5f85\u9a71\u52a8\u52a0\u8f7d\u5b8c\u6bd5\u4f1a, \u81ea\u52a8\u56de\u5230\u5b89\u88c5\u754c\u9762 10\u3001\u70b9\u51fbUTM\u8f6f\u4ef6\u53f3\u4e0a\u89d2\u5012\u6570\u7b2c\u4e8c\u4e2a\u56fe\u6807, \u66f4\u6362\u6302\u8f7d\u7684\u955c\u50cf\u4e3a\u5148\u524d\u4e0b\u8f7d\u7684 Window 11 ISO\u5b89\u88c5\u955c\u50cf > \u70b9\u51fb\u5de6\u4e0b\u89d2\u7684\" \u5237\u65b0 \" > \u70b9\u51fb\" \u4e0b\u4e00\u9875 \" > \u81f3\u6b64, \u5df2\u7ecf\u5f00\u59cb\u88c5\u5b89Windows 11 11\u3001\u5b89\u88c5\u6210\u529f\u540e, \u7ecf\u8fc7\u8bbe\u7f6e\u8fdb\u5165Windows 11\u684c\u9762\u540e, \u70b9\u51fbUTM\u8f6f\u4ef6\u53f3\u4e0a\u89d2\u5012\u6570\u7b2c\u4e8c\u4e2a\u56fe\u6807, \u66f4\u6362\u6302\u8f7d\u7684\u955c\u50cf\u4e3a\u5148\u524d\u4e0b\u8f7d\u7684 spice-guest-tools-0.164.3.iso , \u5b89\u88c5 12\u3001\u641e\u5b9a!","title":"\u6b65\u9aa43"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/","text":"\u547d\u4ee4\u884c\u914d\u7f6eMac\u4ee3\u7406 \u67e5\u770b\u4ee3\u7406 HTTP\u4ee3\u7406 \u8bed\u6cd5: networksetup -getwebproxy <networkservice> \u793a\u4f8b: networksetup -getwebproxy WI-FI HTTPS\u4ee3\u7406 \u8bed\u6cd5: networksetup -getsecurewebproxy <networkservice> \u793a\u4f8b: networksetup -getsecurewebproxy WI-FI SOCKS\u4ee3\u7406 \u8bed\u6cd5: networksetup -getsocksfirewallproxy <networkservice> \u793a\u4f8b: networksetup -getsocksfirewallproxy WI-FI \u67e5\u770b\u6240\u6709\u4ee3\u7406 # \u65b9\u6cd51 scutil --proxy # \u65b9\u6cd52 system_profiler SPNetworkDataType|grep Proxy \u8bbe\u7f6e\u4ee3\u7406 HTTP\u4ee3\u7406 \u8bed\u6cd5: networksetup -setwebproxy <networkservice> <domain> <port number> <authenticated> <username> <password> \u793a\u4f8b: # \u914d\u7f6e \u4ee3\u7406 networksetup -setwebproxy WI-FI 127.0.0.1 8080 # \u914d\u7f6e \u4ee3\u7406 + \u8ba4\u8bc1 networksetup -setwebproxy WI-FI 127.0.0.1 8080 on username password HTTPS\u4ee3\u7406 \u8bed\u6cd5: networksetup -setsecurewebproxystate <networkservice> <domain> <port number> <authenticated> <username> <password> \u793a\u4f8b: # \u914d\u7f6e \u4ee3\u7406 networksetup -setsecurewebproxy WI-FI 127.0.0.1 8080 # \u914d\u7f6e \u4ee3\u7406 + \u8ba4\u8bc1 networksetup -setsecurewebproxy WI-FI 127.0.0.1 8080 on username password SOCKS\u4ee3\u7406 \u8bed\u6cd5: networksetup -getsocksfirewallproxy <networkservice> <domain> <port number> <authenticated> <username> <password> \u793a\u4f8b: # \u914d\u7f6e \u4ee3\u7406 networksetup -setsocksfirewallproxy WI-FI 127.0.0.1 1080 # \u914d\u7f6e \u4ee3\u7406 + \u8ba4\u8bc1 networksetup -setsocksfirewallproxy WI-FI 127.0.0.1 1080 on username password \u542f\u7528|\u5173\u95ed \u4ee3\u7406 HTTP\u4ee3\u7406 \u8bed\u6cd5: networksetup -setwebproxystate <networkservice> <on off> \u793a\u4f8b: # \u542f\u7528\u4ee3\u7406 networksetup -setwebproxystate WI-FI on # \u5173\u95ed\u4ee3\u7406 networksetup -setwebproxystate WI-FI off HTTPS\u4ee3\u7406 \u8bed\u6cd5: networksetup -setsecurewebproxystate <networkservice> <on off> \u793a\u4f8b # \u542f\u7528\u4ee3\u7406 networksetup -setsecurewebproxystate WI-FI on # \u5173\u95ed\u4ee3\u7406 networksetup -setsecurewebproxystate WI-FI off SOCKS\u4ee3\u7406 \u8bed\u6cd5: networksetup -setsocksfirewallproxystate <networkservice> <on off> \u793a\u4f8b: # \u542f\u7528\u4ee3\u7406 networksetup -setsocksfirewallproxystate WI-FI on # \u5173\u95ed\u4ee3\u7406 networksetup -setsocksfirewallproxystate WI-FI off","title":"\u547d\u4ee4\u884c\u914d\u7f6eMac\u4ee3\u7406"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#mac","text":"","title":"\u547d\u4ee4\u884c\u914d\u7f6eMac\u4ee3\u7406"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#_1","text":"","title":"\u67e5\u770b\u4ee3\u7406"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#http","text":"\u8bed\u6cd5: networksetup -getwebproxy <networkservice> \u793a\u4f8b: networksetup -getwebproxy WI-FI","title":"HTTP\u4ee3\u7406"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#https","text":"\u8bed\u6cd5: networksetup -getsecurewebproxy <networkservice> \u793a\u4f8b: networksetup -getsecurewebproxy WI-FI","title":"HTTPS\u4ee3\u7406"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#socks","text":"\u8bed\u6cd5: networksetup -getsocksfirewallproxy <networkservice> \u793a\u4f8b: networksetup -getsocksfirewallproxy WI-FI","title":"SOCKS\u4ee3\u7406"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#_2","text":"# \u65b9\u6cd51 scutil --proxy # \u65b9\u6cd52 system_profiler SPNetworkDataType|grep Proxy","title":"\u67e5\u770b\u6240\u6709\u4ee3\u7406"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#_3","text":"","title":"\u8bbe\u7f6e\u4ee3\u7406"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#http_1","text":"\u8bed\u6cd5: networksetup -setwebproxy <networkservice> <domain> <port number> <authenticated> <username> <password> \u793a\u4f8b: # \u914d\u7f6e \u4ee3\u7406 networksetup -setwebproxy WI-FI 127.0.0.1 8080 # \u914d\u7f6e \u4ee3\u7406 + \u8ba4\u8bc1 networksetup -setwebproxy WI-FI 127.0.0.1 8080 on username password","title":"HTTP\u4ee3\u7406"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#https_1","text":"\u8bed\u6cd5: networksetup -setsecurewebproxystate <networkservice> <domain> <port number> <authenticated> <username> <password> \u793a\u4f8b: # \u914d\u7f6e \u4ee3\u7406 networksetup -setsecurewebproxy WI-FI 127.0.0.1 8080 # \u914d\u7f6e \u4ee3\u7406 + \u8ba4\u8bc1 networksetup -setsecurewebproxy WI-FI 127.0.0.1 8080 on username password","title":"HTTPS\u4ee3\u7406"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#socks_1","text":"\u8bed\u6cd5: networksetup -getsocksfirewallproxy <networkservice> <domain> <port number> <authenticated> <username> <password> \u793a\u4f8b: # \u914d\u7f6e \u4ee3\u7406 networksetup -setsocksfirewallproxy WI-FI 127.0.0.1 1080 # \u914d\u7f6e \u4ee3\u7406 + \u8ba4\u8bc1 networksetup -setsocksfirewallproxy WI-FI 127.0.0.1 1080 on username password","title":"SOCKS\u4ee3\u7406"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#_4","text":"","title":"\u542f\u7528|\u5173\u95ed \u4ee3\u7406"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#http_2","text":"\u8bed\u6cd5: networksetup -setwebproxystate <networkservice> <on off> \u793a\u4f8b: # \u542f\u7528\u4ee3\u7406 networksetup -setwebproxystate WI-FI on # \u5173\u95ed\u4ee3\u7406 networksetup -setwebproxystate WI-FI off","title":"HTTP\u4ee3\u7406"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#https_2","text":"\u8bed\u6cd5: networksetup -setsecurewebproxystate <networkservice> <on off> \u793a\u4f8b # \u542f\u7528\u4ee3\u7406 networksetup -setsecurewebproxystate WI-FI on # \u5173\u95ed\u4ee3\u7406 networksetup -setsecurewebproxystate WI-FI off","title":"HTTPS\u4ee3\u7406"},{"location":"mac/%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AEMac%E4%BB%A3%E7%90%86/#socks_2","text":"\u8bed\u6cd5: networksetup -setsocksfirewallproxystate <networkservice> <on off> \u793a\u4f8b: # \u542f\u7528\u4ee3\u7406 networksetup -setsocksfirewallproxystate WI-FI on # \u5173\u95ed\u4ee3\u7406 networksetup -setsocksfirewallproxystate WI-FI off","title":"SOCKS\u4ee3\u7406"},{"location":"mac/%E8%AE%BE%E7%BD%AEMac%E7%9A%84Hostname/","text":"\u8bbe\u7f6eMac\u7684Hostname \u540d\u8bcd Mac\u4e2d\u4e0e\u4e4b\u76f8\u5173\u7684\u67093\u4e2a: ComputerName LocalHostName HostName \u8bbe\u7f6e ComputerName\u548cLocalHostName\u53ef\u4ee5\u901a\u8fc7 \u7cfb\u7edf\u504f\u597d\u8bbe\u7f6e -> \u5206\u4eab \u8bbe\u7f6e HostName\u53ea\u80fd\u901a\u8fc7\u547d\u4ee4\u8bbe\u7f6e, \u53ef\u8bbe\u7f6e\u4e34\u65f6\u751f\u6548(\u91cd\u542f\u540e\u5931\u6548)\u6216\u6c38\u4e45\u751f\u6548 \u4e34\u65f6: hostname MyMBP \u6c38\u4e45: scutil --set HostName MyMBP \u67e5\u770b $ sudo scutil --get ComputerName MyMacBookPro $ sudo scutil --get LocalHostName MyMBP $ sudo scutil --get HostName MBP","title":"\u8bbe\u7f6eMac\u7684Hostname"},{"location":"mac/%E8%AE%BE%E7%BD%AEMac%E7%9A%84Hostname/#machostname","text":"","title":"\u8bbe\u7f6eMac\u7684Hostname"},{"location":"mac/%E8%AE%BE%E7%BD%AEMac%E7%9A%84Hostname/#_1","text":"Mac\u4e2d\u4e0e\u4e4b\u76f8\u5173\u7684\u67093\u4e2a: ComputerName LocalHostName HostName","title":"\u540d\u8bcd"},{"location":"mac/%E8%AE%BE%E7%BD%AEMac%E7%9A%84Hostname/#_2","text":"ComputerName\u548cLocalHostName\u53ef\u4ee5\u901a\u8fc7 \u7cfb\u7edf\u504f\u597d\u8bbe\u7f6e -> \u5206\u4eab \u8bbe\u7f6e HostName\u53ea\u80fd\u901a\u8fc7\u547d\u4ee4\u8bbe\u7f6e, \u53ef\u8bbe\u7f6e\u4e34\u65f6\u751f\u6548(\u91cd\u542f\u540e\u5931\u6548)\u6216\u6c38\u4e45\u751f\u6548 \u4e34\u65f6: hostname MyMBP \u6c38\u4e45: scutil --set HostName MyMBP","title":"\u8bbe\u7f6e"},{"location":"mac/%E8%AE%BE%E7%BD%AEMac%E7%9A%84Hostname/#_3","text":"$ sudo scutil --get ComputerName MyMacBookPro $ sudo scutil --get LocalHostName MyMBP $ sudo scutil --get HostName MBP","title":"\u67e5\u770b"},{"location":"mysql/MySQL%E4%B9%8BExplain/","text":"MySQL\u4e4bExplain \u7528\u6cd5 \u57fa\u672c\u7528\u6cd5: explain yoursql; \u4e24\u4e2a\u53d8\u79cd: explain extended yoursql; explain partitions yoursql; \u533a\u522b: explain \u8f93\u51fa\u4e2d\u5305\u542b partitions \u548c filtered \u4e24\u4e2a\u5b57\u6bb5, \u65e9\u671f mysql \u7248\u672c\u7684 explain \u5de5\u5177\u4e0d\u4f1a\u8f93\u51fa\u8fd9\u4e24\u4e2a\u5b57\u6bb5 \u4f7f\u7528 explain extended \u4f1a\u5728 explain \u7684\u57fa\u7840\u4e0a\u989d\u5916\u63d0\u4f9b\u4e00\u4e9b\u67e5\u8be2\u4f18\u5316\u4fe1\u606f, \u7136\u540e\u901a\u8fc7 show warnings \u547d\u4ee4\u53ef\u4ee5\u5f97\u5230\u4f18\u5316\u540e\u7684\u67e5\u8be2\u8bed\u53e5, \u4ece\u800c\u770b\u51fa\u4f18\u5316\u5668\u4f18\u5316\u4e86\u54ea\u4e9b, \u5176\u4e2d\u5305\u62ec filtered \u5217, \u662f\u4e00\u4e2a\u534a\u5206\u6bd4\u7684\u503c, rows * filtered / 100 \u53ef\u4ee5\u4f30\u7b97\u51fa\u5c06\u8981\u548c explain \u4e2d\u524d\u4e00\u4e2a\u8868\u8fdb\u884c\u8fde\u63a5\u7684\u884c\u6570(\u524d\u4e00\u4e2a\u8868\u6307 explain \u4e2d\u7684 id \u503c\u6bd4\u5f53\u524d\u8868 id \u503c\u5c0f\u7684\u8868) show warnings \u4f1a\u8f93\u51fa\u4f18\u5316\u8fc7\u540e\u7684\u4f2asql, \u6709\u53ef\u80fd\u80fd\u76f4\u63a5\u6267\u884c, \u4e5f\u6709\u53ef\u80fd\u65e0\u6cd5\u6267\u884c, \u53c2\u8003\u5373\u53ef show warnings \u8f93\u51fa\u663e\u793a extended \u4f1a\u5728\u672a\u6765\u7248\u672c\u4e2d\u79fb\u9664 \u4f7f\u7528 explain partitions \u53ef\u663e\u793a partitions \u5217, partitions \u662f\u5206\u533a, \u4f46\u57fa\u672c\u4e0a\u90fd\u662f\u7528\u5206\u5e93\u5206\u8868\u5f88\u5c11\u7528\u5230\u8868\u5206\u533a \u6ce8\u610f: \u81f3\u5c11\u4eceMySQL5.7\u7248\u672c\u4ee5\u4e0a, explain \u5df2\u7ecf\u5305\u542b partitions \u548c filtered \u4e24\u4e2a\u5b57\u6bb5, \u4e0d\u9700\u8981\u7528\u5176\u4ed6\u4e24\u4e2a\u53d8\u79cd \u5b57\u6bb5\u89e3\u91ca \u7ed3\u679c\u793a\u4f8b: explain\u8f93\u51fa\u5185\u5bb9\u5982\u4e0b: id : \u6267\u884c\u4f18\u5148\u7ea7, id \u8d8a\u5927, \u8d8a\u5148\u6267\u884c; \u5982\u679c id \u76f8\u540c, \u5219\u6839\u636e sql \u8bed\u53e5\u4e2d\u7684\u4e66\u5199\u987a\u5e8f\u6267\u884c; select_type : \u67e5\u8be2\u7c7b\u578b, \u5e38\u89c1\u7684\u6709: simple: \u7b80\u5355\u67e5\u8be2, \u4f8b\u5982 select * from a_table; primary: \u590d\u6742\u67e5\u8be2\u6700\u5916\u5c42\u7684 select subquery: \u5305\u542b\u5728 select \u4e2d\u7684\u5b50\u67e5\u8be2, \u4f46\u4e0d\u5728 from \u5b50\u53e5\u4e2d derived: \u5305\u542b\u5728 from \u5b50\u53e5\u4e2d\u7684\u5b50\u67e5\u8be2, MySQL\u4f1a\u5c06\u7ed3\u679c\u5b58\u653e\u5728\u4e00\u4e2a\u4e34\u65f6\u8868\u4e2d, \u4e5f\u79f0\u4e3a\u6d3e\u751f\u8868(derived \u5c31\u662f\u6d3e\u751f\u7684\u610f\u601d) table : \u67e5\u8be2\u7684\u8868, \u4f8b\u5982\u4e0a\u56fe\u793a\u4f8b\u4e2d\u7684 film \u548c actor, \u5f53 from \u540e\u9762\u6709\u5b50\u67e5\u8be2\u65f6, \u5176\u683c\u5f0f\u4e3a deveriedN , \u5176\u4e2d\u7684N\u8868\u793aid, \u8868\u793a\u5f53\u524d\u7684\u67e5\u8be2\u4f9d\u8d56 id=N \u7684\u67e5\u8be2 partiion : \u8868\u5206\u533a, \u57fa\u672c\u7528\u4e0d\u5230 type : \u8868\u793a\u5173\u8054\u7c7b\u578b\u6216\u8bbf\u95ee\u7c7b\u578b, MySQL\u7528\u4e8e\u51b3\u5b9a\u5982\u4f55\u67e5\u8be2\u8868\u4e2d\u7684\u884c\u3001\u67e5\u8be2\u6570\u636e\u8bb0\u5f55\u7684\u6253\u5f00\u8303\u56f4, \u4f18\u5148\u7ea7\u662f: system > const > eq_ref > ref > range > index > ALL , \u5373\u8868\u793a\u4e86\u5927\u6982\u626b\u63cf\u4e86\u591a\u5c11\u884c, ALL\u8868\u793a\u5168\u8868\u626b\u63cf(\u6700\u6162) sql \u4f18\u5316\u8981\u4fdd\u8bc1\u67e5\u8be2\u8fbe\u5230 range \u7ea7\u522b, \u6700\u597d\u662f ref \u4ee5\u4e0a \u67d0\u4e9b\u60c5\u51b5\u662f Null, \u56e0\u4e3a MySQL\u5728\u6709\u4e9b\u60c5\u51b5\u662f\u4e0d\u7528\u67e5\u8868\u7684(\u5927\u90e8\u5206\u662f\u4f7f\u7528\u5185\u7f6e\u51fd\u6570\u7684\u65f6\u5019), \u4f8b\u5982 explain select min(id) from a_table , \u76f4\u63a5\u53d6B+\u6811\u7684\u7b2c\u4e00\u4e2a\u8282\u70b9, \u5c31\u662f\u6700\u5c0fID system \u662fconst\u7684\u7279\u4f8b, \u8868\u793a\u67e5\u8be2\u7684\u8868\u672c\u8eab\u53ea\u6709\u4e00\u884c\u8bb0\u5f55 const \u8868\u793a where \u540e\u9762\u7684\u6761\u4ef6\u662f\u4e3b\u952e(primary key)\u6216\u8005\u552f\u4e00\u7d22\u5f15(unique key) eq_ref \u8868\u793a\u5173\u8054\u67e5\u8be2\u4e2d (\u4f8b\u5982 explain select * from table1 left join tabl2 on table2.pid = table1.id , \u9700\u8981\u6ce8\u610f\u7684\u662f, explain \u8f93\u51fa\u7684\u4e24\u5f20\u8868\u7684 id \u90fd\u662f1, \u5373\u4f7f\u7528\u5173\u8054\u67e5\u8be2\u7684\u4e24\u5f20\u8868\u7684\u4f18\u5148\u7ea7\u662f\u4e00\u6837\u7684) on \u6761\u4ef6 table1.id \u662f\u4e3b\u952e, \u5373 primary key \u6216 unique key\u7d22\u5f15\u88ab\u8fde\u63a5\u4f7f\u7528, \u6b64\u65f6\u7684 type \u5c31\u662feq_ref ref \u8868\u793a\u4f7f\u7528\u975e\u552f\u4e00\u7d22\u5f15\u6216\u552f\u4e00\u7d22\u5f15\u7684\u90e8\u5206\u524d\u7f00(\u591a\u5b57\u6bb5\u8054\u5408\u7d22\u5f15\u7684\u90e8\u5206\u524d\u7f00)\u7684\u67e5\u8be2 , \u4f8b\u5982 select * from table1 where name='xxx' , \u5176\u4e2dname \u5b57\u6bb5\u5141\u8bb8\u91cd\u590d\u4e14\u5efa\u7acb\u4e86\u7d22\u5f15, \u6b64\u65f6\u7684 type \u5c31\u662f ref range \u8868\u793a\u8303\u56f4\u626b\u63cf, \u901a\u5e38\u51fa\u73b0\u5728 in()\u3001brtween\u3001<\u3001>\u3001>= \u7b49\u64cd\u4f5c\u4e2d, \u4f8b\u5982 select * from a_table where id > 1; index \u6bd4\u8f83\u7279\u6b8a, \u5148\u770b\u793a\u4f8b, \u4f8b\u5982 table1 \u5305\u542b\u4e24\u4e2a\u5b57\u6bb5 id\u3001name \u548c age \u4e14 name \u5efa\u7acb\u4e86\u7d22\u5f15, \u90a3\u4e48\u6267\u884c select name from table1 \u5c31\u4f7f\u7528\u975e\u805a\u96c6\u7d22\u5f15(nam\u7684\u7d22\u5f15), \u6b64\u65f6\u5c31\u662f type \u5c31\u662f index, \u539f\u56e0\u89e3\u91ca: \u805a\u96c6\u7d22\u5f15\u4fdd\u5b58\u7d22\u5f15\u548c\u6240\u6709\u5b57\u6bb5\u7684\u503c, \u5360\u7528\u7a7a\u95f4\u5927, \u975e\u805a\u96c6\u7d22\u5f15\u4fdd\u5b58\u7d22\u5f15\u7684\u5b57\u6bb5\u548c\u4e3b\u952e, \u5360\u7528\u7a7a\u95f4\u5c0f, \u5bf9\u4e8e\u672c\u6848\u4f8b\u4e2d\u7684table1, \u4f7f\u7528\u975e\u805a\u96c6\u7d22\u5f15(name)\u626b\u63cf\u5c31\u80fd\u62ff\u5230\u6240\u9700\u6570\u636e(\u626b\u63cf\u7a7a\u95f4\u5c0f\u4e14\u4e0d\u9700\u8981\u56de\u8868), \u6240\u4ee5MySQL\u4f18\u5148\u4f7f\u7528\u975e\u805a\u96c6\u7d22\u5f15 all \u5373\u5168\u8868\u626b\u63cf, \u626b\u63cf\u805a\u96c6\u7d22\u5f15(\u6bd4\u5982\u4e3b\u952e, \u793a\u4f8b: select * from a_table; )\u7684\u6240\u6709\u53f6\u5b50\u8282\u70b9, \u6bd4\u8f83\u6162, \u8fd9\u79cd\u60c5\u51b5\u9700\u8981\u4f18\u5316 type \u662f index \u6216\u8005 all \u7684\u90fd\u9700\u8981\u4f18\u5316 possible_keys : \u5b58\u653e\u7d22\u5f15\u540d\u79f0, \u8868\u793a\u67e5\u8be2\u65f6\u53ef\u80fd\u7528\u5230\u7684\u7d22\u5f15, \u6709\u65f6\u5019\u51fa\u73b0\u6b64\u5217\u6709\u503c\u800c key \u663e\u793a Null \u7684\u60c5\u51b5, \u5373\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15, \u53ef\u80fd\u662f\u56e0\u4e3a\u8868\u4e2d\u6570\u636e\u4e0d\u591a, MySQL\u8ba4\u4e3a\u7d22\u5f15\u7528\u5904\u4e0d\u5927\u6240\u4ee5\u76f4\u63a5\u5168\u8868\u626b\u63cf key : \u5b58\u653e\u7d22\u5f15\u540d\u79f0, \u8868\u793a\u67e5\u8be2\u65f6\u771f\u6b63\u7528\u5230\u7684\u7d22\u5f15 key_len : \u663e\u793a MySQL \u5728\u7d22\u5f15\u91cc\u4f7f\u7528\u7684\u5b57\u8282, \u901a\u8fc7\u6b64\u503c\u53ef\u7b97\u51fa\u5177\u4f53\u4f7f\u7528\u4e86\u7d22\u5f15\u7684\u54ea\u4e9b\u5217, \u4f8b\u5982\u8868 table1 \u4e2d\u6709 age \u548c score \u4e24\u4e2a\u5b57\u6bb5\u4e14\u7c7b\u578b\u662f int(4\u4e2a\u5b57\u8282), \u5e76\u521b\u5efa\u4e86\u8054\u5408\u7d22\u5f15, \u90a3\u4e48 key_len \u7b49\u4e8e4\u8868\u793a\u4f7f\u7528\u4e86 age \u7d22\u5f15\u5c31\u67e5\u5230\u4e86\u7ed3\u679c, \u4f8b\u5982 select * from table1 where age=20 \u7684 key_lan \u662f4, select * from table1 where age=20 and score=100 \u7684 key_lan \u662f8; key_lan\u8ba1\u7b97\u89c4\u5219\u5982\u4e0b: char(n): n\u5b57\u8282\u957f\u5ea6 varchar(n): \u5bf9\u4e8e utf-8 \u7f16\u7801\u6765\u8bf4\u662f\u957f\u5ea6\u662f 3n+2, \u5176\u4e2d\u52a0\u76842\u5b57\u8282\u7528\u6765\u5b58\u50a8\u5b57\u7b26\u4e32\u5b9e\u9645\u957f\u5ea6 tinyint: 1\u5b57\u8282 smallint: 2\u5b57\u8282 int: 4\u5b57\u8282 bigint: 8\u5b57\u8282 date: 3\u5b57\u8282 timestamp: 4\u5b57\u8282 datetime: 8\u5b57\u8282 \u5982\u679c\u5b57\u6bb5\u5141\u8bb8\u4e3aNull, \u8fd8\u9700\u89811\u4e2a\u5b57\u8282\u8bb0\u5f55\u662f\u5426\u4e3aNull ref : \u663e\u793a\u5728 key \u5217\u8bb0\u5f55\u7684\u7d22\u5f15\u4e2d\u5728\u626b\u63cf\u8868\u662f\u7528\u5230\u7684\u5217(\u5b57\u6bb5\u540d)\u6216\u5e38\u91cf, \u5e38\u89c1\u7684\u6709 const, \u4f8b\u5982 select name from a_table where id = 1 , \u6b64\u65f6\u56e0\u4e3a where id=1 \u7684\u7f18\u6545, \u5c31\u662f\u5e38\u91cf const, \u5982\u679c\u662f\u8fde\u8868\u67e5\u8be2\u5c31\u80fd\u662f on \u6761\u4ef6\u540e\u9762\u7684\u5b57\u6bb5 rows : \u4e00\u4e2a\u9884\u4f30\u503c, MySQL\u4f30\u8ba1\u8981\u626b\u63cf\u5e76\u68c0\u6d4b\u7684\u884c\u6570, \u6ce8\u610f\u8fd9\u4e2a\u4e0d\u662f\u7ed3\u679c\u96c6\u91cc\u7684\u884c\u6570 filtered : \u662f\u4e00\u4e2a\u534a\u5206\u6bd4\u7684\u503c, rows * filtered / 100 \u53ef\u4ee5\u4f30\u7b97\u51fa\u5c06\u8981\u548c explain \u4e2d\u524d\u4e00\u4e2a\u8868\u8fdb\u884c\u8fde\u63a5\u7684\u884c\u6570(\u524d\u4e00\u4e2a\u8868\u6307 explain \u4e2d\u7684 id \u503c\u6bd4\u5f53\u524d\u8868 id \u503c\u5c0f\u7684\u8868) Extra : \u5c55\u793a\u989d\u5916\u4fe1\u606f, \u6709\u5f88\u591a, \u5e38\u89c1\u7684\u4e3b\u8981\u503c\u5982\u4e0b: Using index: \u4f7f\u7528\u4e86\u8986\u76d6\u7d22\u5f15, \u6ce8\u610f\u8986\u76d6\u7d22\u5f15\u4e0d\u662f\u7d22\u5f15, \u662f\u4e00\u79cd\u67e5\u8be2\u65b9\u5f0f, \u8868\u793a\u67e5\u8be2\u7684\u5b57\u6bb5\u90fd\u88ab\u8054\u5408\u7d22\u5f15\u8986\u76d6\u4e86 \u5176\u5b9a\u4e49\u662f MySQL \u6267\u884c\u8ba1\u5212 explain \u7ed3\u679c\u4e2d key \u4e2d\u4f7f\u7528\u7d22\u5f15\u5305\u542b\u4e86\u4f60\u8981\u67e5\u8be2\u7684\u6240\u6709\u5b57\u6bb5, \u4f8b\u5982 select \u540e\u9762\u67e5\u8be2\u7684\u5b57\u6bb5\u90fd\u53ef\u4ee5\u4ece\u8fd9\u4e2a\u7d22\u5f15\u7684\u6811\u4e2d\u83b7\u53d6, \u4e00\u822c\u6765\u8bb2\u8fd9\u5c31\u662f\u8986\u76d6\u7d22\u5f15; \u8986\u76d6\u7d22\u5f15\u4e00\u822c\u9488\u5bf9\u8f85\u52a9\u7d22\u5f15(\u975e\u805a\u96c6\u7d22\u5f15), \u6574\u4e2a\u67e5\u8be2\u7ed3\u679c\u53ea\u901a\u8fc7\u8f85\u52a9\u7d22\u5f15\u5c31\u80fd\u62ff\u5230\u7ed3\u679c, \u4e0d\u9700\u8981\u56de\u8868\u518d\u67e5 Using where: \u4f7f\u7528 where \u8bed\u53e5\u5904\u7406\u7ed3\u679c\u5e76\u4e14\u67e5\u8be2\u7684\u5217\u672a\u88ab\u7d22\u5f15\u8986\u76d6, \u7b80\u5355\u8bf4\u5c31\u662f where \u6761\u4ef6\u540e\u9762\u7684\u5b57\u6bb5\u6ca1\u6709\u7d22\u5f15, \u8fd9\u79cd\u60c5\u51b5\u4e0b Extra \u5c31\u53ef\u80fd\u662f Using where Using index condition: \u67e5\u8be2\u7684\u5217\u4e0d\u5b8c\u5168\u88ab\u7d22\u5f15\u8986\u76d6, where \u6761\u4ef6\u4e2d\u662f\u4e00\u4e2a\u524d\u5bfc\u5217\u7684\u8303\u56f4, \u4f8b\u5982 name \u548c age \u6709\u7d22\u5f15, \u7136\u540e where \u6761\u4ef6\u662f age > 20, \u8fd9\u79cd\u60c5\u51b5\u4e0b Extra \u5c31\u53ef\u80fd\u662f Using index condition Using temporary: MySQL \u9700\u8981\u521b\u5efa\u4e00\u5f20\u4e34\u65f6\u8868\u6765\u5904\u7406\u67e5\u8be2, \u6bd4\u5982 select distinct name , \u8fd9\u4e2d\u60c5\u51b5\u9700\u8981\u521b\u5efa\u4e00\u5f20\u4e34\u65f6\u8868, \u5728\u4e34\u65f6\u8868\u9010\u884c\u626b\u63cf\u5e76\u53bb\u91cd, \u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\u4e00\u822c\u9700\u8981\u4f18\u5316, \u6bd4\u5982\u521b\u5efa\u7d22\u5f15, \u56e0\u4e3a\u7d22\u5f15\u5c31\u6392\u597d\u5e8f\u7684, \u5728\u626b\u63cf\u7684\u8fc7\u7a0b\u4e2d\u5c31\u78b0\u5230\u91cd\u590d\u7684\u5c31\u4e22\u5f03, \u6240\u4ee5\u4e0d\u9700\u8981\u4e34\u65f6\u8868 Using filesort: \u4f7f\u7528 order by \u8bed\u53e5\u65f6\u53d1\u751f, \u4f7f\u7528\u5916\u90e8\u6392\u5e8f\u800c\u4e0d\u662f\u7d22\u5f15\u6392\u5e8f, \u6570\u636e\u8f83\u5c0f\u65f6\u4ece\u5185\u5b58\u6392\u5e8f, \u5426\u5219\u5148\u653e\u5230\u78c1\u76d8\u518d\u6392\u5e8f, \u8fd9\u79cd\u60c5\u51b5\u6548\u7387\u4e5f\u5f88\u4f4e, \u89e3\u51b3\u529e\u6cd5\u4e5f\u662f\u5efa\u7acb\u7d22\u5f15\u6216\u8054\u5408\u7d22\u5f15 \u6709\u4e9b\u60c5\u51b5\u5916(\u4f8b\u5982\u8bed\u53e5\u4e2d\u4f7f\u7528\u4e86order by), \u901a\u8fc7key\u6216key_lan\u770b, \u53ea\u4f7f\u7528\u4e86\u8054\u5408\u7d22\u5f15\u4e2d\u7684\u90e8\u5206\u5b57\u6bb5, \u4f46extra\u4e2d\u663e\u793a\u7684\u662f Using index, \u8868\u793a\u5176\u4ed6\u5176\u4ed6\u4e5f\u8d70\u4e86\u7d22\u5f15 \u4f8b\u5982, name\u3001age\u548cgender\u662f\u8054\u5408\u7d22\u5f15, \u8bed\u53e5\u4e3a select * from tale1 wher name=1 and gender=1 order by age \u901a\u8fc7key_lan\u53ef\u4ee5\u770b\u5230\u4f7f\u7528\u4e86\u5b57\u6bb5name\u7684\u7d22\u5f15, \u4f46\u662fextra\u4e2d\u663e\u793a\u7684\u662f Using index, \u8868\u793a\u6392\u5e8f\u8fc7\u7a0b\u4e2d\u7528\u5230\u4e86age\u5b57\u6bb5\u7684\u7d22\u5f15 PS: select * from tale1 wher name=1 order by gender \u5c31\u4e0d\u4f1a\u8d70\u7d22\u5f15, \u56e0\u4e3a\u8df3\u8fc7\u4e86age, \u4e0d\u7b26\u5408\u6700\u5de6\u524d\u7f00\u539f\u5219 \u540c\u7406 order by age, gender \u4f1a\u8d70\u7d22\u5f15, order by gender, age \u4e0d\u4f1a\u8d70\u7d22\u5f15 \u6ce8\u610f wher name=1 and age =18 order by gender, age \u5c31\u4f1a\u8d70\u7d22\u5f15, \u8054\u60f3B+\u6811, \u7ecf\u8fc7 name=1 and age =18 \u7d22\u5f15\u540e\u6570\u636e\u6709\u5e8f(\u6392\u5e8f\u91cc\u9762\u7684age\u5176\u5b9e\u6ca1\u7528\u4e86), \u6b64\u65f6\u6392\u5e8f\u53ef\u4ee5\u8d70\u7d22\u5f15 \u6269\u5c55: order by \u5b57\u6bb5 desc, 8.0\u4ee5\u524d\u7248\u672c, \u964d\u5e8f\u662f\u4e0d\u4f1a\u8d70\u7d22\u5f15\u7684, 8.0\u4ee5\u540e\u7248\u672c\u4f1a\u4f7f\u7528\u7d22\u5f15 \u6ce8\u610f, \u4e0d\u540c\u7248\u672c\u7684 MySQL \u7684 Extra \u7684\u5c55\u793a\u60c5\u51b5\u53ef\u80fd\u662f\u4e0d\u540c\u7684, \u505a\u53c2\u8003\u5c31\u884c","title":"MySQL\u4e4bExplain"},{"location":"mysql/MySQL%E4%B9%8BExplain/#mysqlexplain","text":"","title":"MySQL\u4e4bExplain"},{"location":"mysql/MySQL%E4%B9%8BExplain/#_1","text":"\u57fa\u672c\u7528\u6cd5: explain yoursql; \u4e24\u4e2a\u53d8\u79cd: explain extended yoursql; explain partitions yoursql; \u533a\u522b: explain \u8f93\u51fa\u4e2d\u5305\u542b partitions \u548c filtered \u4e24\u4e2a\u5b57\u6bb5, \u65e9\u671f mysql \u7248\u672c\u7684 explain \u5de5\u5177\u4e0d\u4f1a\u8f93\u51fa\u8fd9\u4e24\u4e2a\u5b57\u6bb5 \u4f7f\u7528 explain extended \u4f1a\u5728 explain \u7684\u57fa\u7840\u4e0a\u989d\u5916\u63d0\u4f9b\u4e00\u4e9b\u67e5\u8be2\u4f18\u5316\u4fe1\u606f, \u7136\u540e\u901a\u8fc7 show warnings \u547d\u4ee4\u53ef\u4ee5\u5f97\u5230\u4f18\u5316\u540e\u7684\u67e5\u8be2\u8bed\u53e5, \u4ece\u800c\u770b\u51fa\u4f18\u5316\u5668\u4f18\u5316\u4e86\u54ea\u4e9b, \u5176\u4e2d\u5305\u62ec filtered \u5217, \u662f\u4e00\u4e2a\u534a\u5206\u6bd4\u7684\u503c, rows * filtered / 100 \u53ef\u4ee5\u4f30\u7b97\u51fa\u5c06\u8981\u548c explain \u4e2d\u524d\u4e00\u4e2a\u8868\u8fdb\u884c\u8fde\u63a5\u7684\u884c\u6570(\u524d\u4e00\u4e2a\u8868\u6307 explain \u4e2d\u7684 id \u503c\u6bd4\u5f53\u524d\u8868 id \u503c\u5c0f\u7684\u8868) show warnings \u4f1a\u8f93\u51fa\u4f18\u5316\u8fc7\u540e\u7684\u4f2asql, \u6709\u53ef\u80fd\u80fd\u76f4\u63a5\u6267\u884c, \u4e5f\u6709\u53ef\u80fd\u65e0\u6cd5\u6267\u884c, \u53c2\u8003\u5373\u53ef show warnings \u8f93\u51fa\u663e\u793a extended \u4f1a\u5728\u672a\u6765\u7248\u672c\u4e2d\u79fb\u9664 \u4f7f\u7528 explain partitions \u53ef\u663e\u793a partitions \u5217, partitions \u662f\u5206\u533a, \u4f46\u57fa\u672c\u4e0a\u90fd\u662f\u7528\u5206\u5e93\u5206\u8868\u5f88\u5c11\u7528\u5230\u8868\u5206\u533a \u6ce8\u610f: \u81f3\u5c11\u4eceMySQL5.7\u7248\u672c\u4ee5\u4e0a, explain \u5df2\u7ecf\u5305\u542b partitions \u548c filtered \u4e24\u4e2a\u5b57\u6bb5, \u4e0d\u9700\u8981\u7528\u5176\u4ed6\u4e24\u4e2a\u53d8\u79cd","title":"\u7528\u6cd5"},{"location":"mysql/MySQL%E4%B9%8BExplain/#_2","text":"\u7ed3\u679c\u793a\u4f8b: explain\u8f93\u51fa\u5185\u5bb9\u5982\u4e0b: id : \u6267\u884c\u4f18\u5148\u7ea7, id \u8d8a\u5927, \u8d8a\u5148\u6267\u884c; \u5982\u679c id \u76f8\u540c, \u5219\u6839\u636e sql \u8bed\u53e5\u4e2d\u7684\u4e66\u5199\u987a\u5e8f\u6267\u884c; select_type : \u67e5\u8be2\u7c7b\u578b, \u5e38\u89c1\u7684\u6709: simple: \u7b80\u5355\u67e5\u8be2, \u4f8b\u5982 select * from a_table; primary: \u590d\u6742\u67e5\u8be2\u6700\u5916\u5c42\u7684 select subquery: \u5305\u542b\u5728 select \u4e2d\u7684\u5b50\u67e5\u8be2, \u4f46\u4e0d\u5728 from \u5b50\u53e5\u4e2d derived: \u5305\u542b\u5728 from \u5b50\u53e5\u4e2d\u7684\u5b50\u67e5\u8be2, MySQL\u4f1a\u5c06\u7ed3\u679c\u5b58\u653e\u5728\u4e00\u4e2a\u4e34\u65f6\u8868\u4e2d, \u4e5f\u79f0\u4e3a\u6d3e\u751f\u8868(derived \u5c31\u662f\u6d3e\u751f\u7684\u610f\u601d) table : \u67e5\u8be2\u7684\u8868, \u4f8b\u5982\u4e0a\u56fe\u793a\u4f8b\u4e2d\u7684 film \u548c actor, \u5f53 from \u540e\u9762\u6709\u5b50\u67e5\u8be2\u65f6, \u5176\u683c\u5f0f\u4e3a deveriedN , \u5176\u4e2d\u7684N\u8868\u793aid, \u8868\u793a\u5f53\u524d\u7684\u67e5\u8be2\u4f9d\u8d56 id=N \u7684\u67e5\u8be2 partiion : \u8868\u5206\u533a, \u57fa\u672c\u7528\u4e0d\u5230 type : \u8868\u793a\u5173\u8054\u7c7b\u578b\u6216\u8bbf\u95ee\u7c7b\u578b, MySQL\u7528\u4e8e\u51b3\u5b9a\u5982\u4f55\u67e5\u8be2\u8868\u4e2d\u7684\u884c\u3001\u67e5\u8be2\u6570\u636e\u8bb0\u5f55\u7684\u6253\u5f00\u8303\u56f4, \u4f18\u5148\u7ea7\u662f: system > const > eq_ref > ref > range > index > ALL , \u5373\u8868\u793a\u4e86\u5927\u6982\u626b\u63cf\u4e86\u591a\u5c11\u884c, ALL\u8868\u793a\u5168\u8868\u626b\u63cf(\u6700\u6162) sql \u4f18\u5316\u8981\u4fdd\u8bc1\u67e5\u8be2\u8fbe\u5230 range \u7ea7\u522b, \u6700\u597d\u662f ref \u4ee5\u4e0a \u67d0\u4e9b\u60c5\u51b5\u662f Null, \u56e0\u4e3a MySQL\u5728\u6709\u4e9b\u60c5\u51b5\u662f\u4e0d\u7528\u67e5\u8868\u7684(\u5927\u90e8\u5206\u662f\u4f7f\u7528\u5185\u7f6e\u51fd\u6570\u7684\u65f6\u5019), \u4f8b\u5982 explain select min(id) from a_table , \u76f4\u63a5\u53d6B+\u6811\u7684\u7b2c\u4e00\u4e2a\u8282\u70b9, \u5c31\u662f\u6700\u5c0fID system \u662fconst\u7684\u7279\u4f8b, \u8868\u793a\u67e5\u8be2\u7684\u8868\u672c\u8eab\u53ea\u6709\u4e00\u884c\u8bb0\u5f55 const \u8868\u793a where \u540e\u9762\u7684\u6761\u4ef6\u662f\u4e3b\u952e(primary key)\u6216\u8005\u552f\u4e00\u7d22\u5f15(unique key) eq_ref \u8868\u793a\u5173\u8054\u67e5\u8be2\u4e2d (\u4f8b\u5982 explain select * from table1 left join tabl2 on table2.pid = table1.id , \u9700\u8981\u6ce8\u610f\u7684\u662f, explain \u8f93\u51fa\u7684\u4e24\u5f20\u8868\u7684 id \u90fd\u662f1, \u5373\u4f7f\u7528\u5173\u8054\u67e5\u8be2\u7684\u4e24\u5f20\u8868\u7684\u4f18\u5148\u7ea7\u662f\u4e00\u6837\u7684) on \u6761\u4ef6 table1.id \u662f\u4e3b\u952e, \u5373 primary key \u6216 unique key\u7d22\u5f15\u88ab\u8fde\u63a5\u4f7f\u7528, \u6b64\u65f6\u7684 type \u5c31\u662feq_ref ref \u8868\u793a\u4f7f\u7528\u975e\u552f\u4e00\u7d22\u5f15\u6216\u552f\u4e00\u7d22\u5f15\u7684\u90e8\u5206\u524d\u7f00(\u591a\u5b57\u6bb5\u8054\u5408\u7d22\u5f15\u7684\u90e8\u5206\u524d\u7f00)\u7684\u67e5\u8be2 , \u4f8b\u5982 select * from table1 where name='xxx' , \u5176\u4e2dname \u5b57\u6bb5\u5141\u8bb8\u91cd\u590d\u4e14\u5efa\u7acb\u4e86\u7d22\u5f15, \u6b64\u65f6\u7684 type \u5c31\u662f ref range \u8868\u793a\u8303\u56f4\u626b\u63cf, \u901a\u5e38\u51fa\u73b0\u5728 in()\u3001brtween\u3001<\u3001>\u3001>= \u7b49\u64cd\u4f5c\u4e2d, \u4f8b\u5982 select * from a_table where id > 1; index \u6bd4\u8f83\u7279\u6b8a, \u5148\u770b\u793a\u4f8b, \u4f8b\u5982 table1 \u5305\u542b\u4e24\u4e2a\u5b57\u6bb5 id\u3001name \u548c age \u4e14 name \u5efa\u7acb\u4e86\u7d22\u5f15, \u90a3\u4e48\u6267\u884c select name from table1 \u5c31\u4f7f\u7528\u975e\u805a\u96c6\u7d22\u5f15(nam\u7684\u7d22\u5f15), \u6b64\u65f6\u5c31\u662f type \u5c31\u662f index, \u539f\u56e0\u89e3\u91ca: \u805a\u96c6\u7d22\u5f15\u4fdd\u5b58\u7d22\u5f15\u548c\u6240\u6709\u5b57\u6bb5\u7684\u503c, \u5360\u7528\u7a7a\u95f4\u5927, \u975e\u805a\u96c6\u7d22\u5f15\u4fdd\u5b58\u7d22\u5f15\u7684\u5b57\u6bb5\u548c\u4e3b\u952e, \u5360\u7528\u7a7a\u95f4\u5c0f, \u5bf9\u4e8e\u672c\u6848\u4f8b\u4e2d\u7684table1, \u4f7f\u7528\u975e\u805a\u96c6\u7d22\u5f15(name)\u626b\u63cf\u5c31\u80fd\u62ff\u5230\u6240\u9700\u6570\u636e(\u626b\u63cf\u7a7a\u95f4\u5c0f\u4e14\u4e0d\u9700\u8981\u56de\u8868), \u6240\u4ee5MySQL\u4f18\u5148\u4f7f\u7528\u975e\u805a\u96c6\u7d22\u5f15 all \u5373\u5168\u8868\u626b\u63cf, \u626b\u63cf\u805a\u96c6\u7d22\u5f15(\u6bd4\u5982\u4e3b\u952e, \u793a\u4f8b: select * from a_table; )\u7684\u6240\u6709\u53f6\u5b50\u8282\u70b9, \u6bd4\u8f83\u6162, \u8fd9\u79cd\u60c5\u51b5\u9700\u8981\u4f18\u5316 type \u662f index \u6216\u8005 all \u7684\u90fd\u9700\u8981\u4f18\u5316 possible_keys : \u5b58\u653e\u7d22\u5f15\u540d\u79f0, \u8868\u793a\u67e5\u8be2\u65f6\u53ef\u80fd\u7528\u5230\u7684\u7d22\u5f15, \u6709\u65f6\u5019\u51fa\u73b0\u6b64\u5217\u6709\u503c\u800c key \u663e\u793a Null \u7684\u60c5\u51b5, \u5373\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15, \u53ef\u80fd\u662f\u56e0\u4e3a\u8868\u4e2d\u6570\u636e\u4e0d\u591a, MySQL\u8ba4\u4e3a\u7d22\u5f15\u7528\u5904\u4e0d\u5927\u6240\u4ee5\u76f4\u63a5\u5168\u8868\u626b\u63cf key : \u5b58\u653e\u7d22\u5f15\u540d\u79f0, \u8868\u793a\u67e5\u8be2\u65f6\u771f\u6b63\u7528\u5230\u7684\u7d22\u5f15 key_len : \u663e\u793a MySQL \u5728\u7d22\u5f15\u91cc\u4f7f\u7528\u7684\u5b57\u8282, \u901a\u8fc7\u6b64\u503c\u53ef\u7b97\u51fa\u5177\u4f53\u4f7f\u7528\u4e86\u7d22\u5f15\u7684\u54ea\u4e9b\u5217, \u4f8b\u5982\u8868 table1 \u4e2d\u6709 age \u548c score \u4e24\u4e2a\u5b57\u6bb5\u4e14\u7c7b\u578b\u662f int(4\u4e2a\u5b57\u8282), \u5e76\u521b\u5efa\u4e86\u8054\u5408\u7d22\u5f15, \u90a3\u4e48 key_len \u7b49\u4e8e4\u8868\u793a\u4f7f\u7528\u4e86 age \u7d22\u5f15\u5c31\u67e5\u5230\u4e86\u7ed3\u679c, \u4f8b\u5982 select * from table1 where age=20 \u7684 key_lan \u662f4, select * from table1 where age=20 and score=100 \u7684 key_lan \u662f8; key_lan\u8ba1\u7b97\u89c4\u5219\u5982\u4e0b: char(n): n\u5b57\u8282\u957f\u5ea6 varchar(n): \u5bf9\u4e8e utf-8 \u7f16\u7801\u6765\u8bf4\u662f\u957f\u5ea6\u662f 3n+2, \u5176\u4e2d\u52a0\u76842\u5b57\u8282\u7528\u6765\u5b58\u50a8\u5b57\u7b26\u4e32\u5b9e\u9645\u957f\u5ea6 tinyint: 1\u5b57\u8282 smallint: 2\u5b57\u8282 int: 4\u5b57\u8282 bigint: 8\u5b57\u8282 date: 3\u5b57\u8282 timestamp: 4\u5b57\u8282 datetime: 8\u5b57\u8282 \u5982\u679c\u5b57\u6bb5\u5141\u8bb8\u4e3aNull, \u8fd8\u9700\u89811\u4e2a\u5b57\u8282\u8bb0\u5f55\u662f\u5426\u4e3aNull ref : \u663e\u793a\u5728 key \u5217\u8bb0\u5f55\u7684\u7d22\u5f15\u4e2d\u5728\u626b\u63cf\u8868\u662f\u7528\u5230\u7684\u5217(\u5b57\u6bb5\u540d)\u6216\u5e38\u91cf, \u5e38\u89c1\u7684\u6709 const, \u4f8b\u5982 select name from a_table where id = 1 , \u6b64\u65f6\u56e0\u4e3a where id=1 \u7684\u7f18\u6545, \u5c31\u662f\u5e38\u91cf const, \u5982\u679c\u662f\u8fde\u8868\u67e5\u8be2\u5c31\u80fd\u662f on \u6761\u4ef6\u540e\u9762\u7684\u5b57\u6bb5 rows : \u4e00\u4e2a\u9884\u4f30\u503c, MySQL\u4f30\u8ba1\u8981\u626b\u63cf\u5e76\u68c0\u6d4b\u7684\u884c\u6570, \u6ce8\u610f\u8fd9\u4e2a\u4e0d\u662f\u7ed3\u679c\u96c6\u91cc\u7684\u884c\u6570 filtered : \u662f\u4e00\u4e2a\u534a\u5206\u6bd4\u7684\u503c, rows * filtered / 100 \u53ef\u4ee5\u4f30\u7b97\u51fa\u5c06\u8981\u548c explain \u4e2d\u524d\u4e00\u4e2a\u8868\u8fdb\u884c\u8fde\u63a5\u7684\u884c\u6570(\u524d\u4e00\u4e2a\u8868\u6307 explain \u4e2d\u7684 id \u503c\u6bd4\u5f53\u524d\u8868 id \u503c\u5c0f\u7684\u8868) Extra : \u5c55\u793a\u989d\u5916\u4fe1\u606f, \u6709\u5f88\u591a, \u5e38\u89c1\u7684\u4e3b\u8981\u503c\u5982\u4e0b: Using index: \u4f7f\u7528\u4e86\u8986\u76d6\u7d22\u5f15, \u6ce8\u610f\u8986\u76d6\u7d22\u5f15\u4e0d\u662f\u7d22\u5f15, \u662f\u4e00\u79cd\u67e5\u8be2\u65b9\u5f0f, \u8868\u793a\u67e5\u8be2\u7684\u5b57\u6bb5\u90fd\u88ab\u8054\u5408\u7d22\u5f15\u8986\u76d6\u4e86 \u5176\u5b9a\u4e49\u662f MySQL \u6267\u884c\u8ba1\u5212 explain \u7ed3\u679c\u4e2d key \u4e2d\u4f7f\u7528\u7d22\u5f15\u5305\u542b\u4e86\u4f60\u8981\u67e5\u8be2\u7684\u6240\u6709\u5b57\u6bb5, \u4f8b\u5982 select \u540e\u9762\u67e5\u8be2\u7684\u5b57\u6bb5\u90fd\u53ef\u4ee5\u4ece\u8fd9\u4e2a\u7d22\u5f15\u7684\u6811\u4e2d\u83b7\u53d6, \u4e00\u822c\u6765\u8bb2\u8fd9\u5c31\u662f\u8986\u76d6\u7d22\u5f15; \u8986\u76d6\u7d22\u5f15\u4e00\u822c\u9488\u5bf9\u8f85\u52a9\u7d22\u5f15(\u975e\u805a\u96c6\u7d22\u5f15), \u6574\u4e2a\u67e5\u8be2\u7ed3\u679c\u53ea\u901a\u8fc7\u8f85\u52a9\u7d22\u5f15\u5c31\u80fd\u62ff\u5230\u7ed3\u679c, \u4e0d\u9700\u8981\u56de\u8868\u518d\u67e5 Using where: \u4f7f\u7528 where \u8bed\u53e5\u5904\u7406\u7ed3\u679c\u5e76\u4e14\u67e5\u8be2\u7684\u5217\u672a\u88ab\u7d22\u5f15\u8986\u76d6, \u7b80\u5355\u8bf4\u5c31\u662f where \u6761\u4ef6\u540e\u9762\u7684\u5b57\u6bb5\u6ca1\u6709\u7d22\u5f15, \u8fd9\u79cd\u60c5\u51b5\u4e0b Extra \u5c31\u53ef\u80fd\u662f Using where Using index condition: \u67e5\u8be2\u7684\u5217\u4e0d\u5b8c\u5168\u88ab\u7d22\u5f15\u8986\u76d6, where \u6761\u4ef6\u4e2d\u662f\u4e00\u4e2a\u524d\u5bfc\u5217\u7684\u8303\u56f4, \u4f8b\u5982 name \u548c age \u6709\u7d22\u5f15, \u7136\u540e where \u6761\u4ef6\u662f age > 20, \u8fd9\u79cd\u60c5\u51b5\u4e0b Extra \u5c31\u53ef\u80fd\u662f Using index condition Using temporary: MySQL \u9700\u8981\u521b\u5efa\u4e00\u5f20\u4e34\u65f6\u8868\u6765\u5904\u7406\u67e5\u8be2, \u6bd4\u5982 select distinct name , \u8fd9\u4e2d\u60c5\u51b5\u9700\u8981\u521b\u5efa\u4e00\u5f20\u4e34\u65f6\u8868, \u5728\u4e34\u65f6\u8868\u9010\u884c\u626b\u63cf\u5e76\u53bb\u91cd, \u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\u4e00\u822c\u9700\u8981\u4f18\u5316, \u6bd4\u5982\u521b\u5efa\u7d22\u5f15, \u56e0\u4e3a\u7d22\u5f15\u5c31\u6392\u597d\u5e8f\u7684, \u5728\u626b\u63cf\u7684\u8fc7\u7a0b\u4e2d\u5c31\u78b0\u5230\u91cd\u590d\u7684\u5c31\u4e22\u5f03, \u6240\u4ee5\u4e0d\u9700\u8981\u4e34\u65f6\u8868 Using filesort: \u4f7f\u7528 order by \u8bed\u53e5\u65f6\u53d1\u751f, \u4f7f\u7528\u5916\u90e8\u6392\u5e8f\u800c\u4e0d\u662f\u7d22\u5f15\u6392\u5e8f, \u6570\u636e\u8f83\u5c0f\u65f6\u4ece\u5185\u5b58\u6392\u5e8f, \u5426\u5219\u5148\u653e\u5230\u78c1\u76d8\u518d\u6392\u5e8f, \u8fd9\u79cd\u60c5\u51b5\u6548\u7387\u4e5f\u5f88\u4f4e, \u89e3\u51b3\u529e\u6cd5\u4e5f\u662f\u5efa\u7acb\u7d22\u5f15\u6216\u8054\u5408\u7d22\u5f15 \u6709\u4e9b\u60c5\u51b5\u5916(\u4f8b\u5982\u8bed\u53e5\u4e2d\u4f7f\u7528\u4e86order by), \u901a\u8fc7key\u6216key_lan\u770b, \u53ea\u4f7f\u7528\u4e86\u8054\u5408\u7d22\u5f15\u4e2d\u7684\u90e8\u5206\u5b57\u6bb5, \u4f46extra\u4e2d\u663e\u793a\u7684\u662f Using index, \u8868\u793a\u5176\u4ed6\u5176\u4ed6\u4e5f\u8d70\u4e86\u7d22\u5f15 \u4f8b\u5982, name\u3001age\u548cgender\u662f\u8054\u5408\u7d22\u5f15, \u8bed\u53e5\u4e3a select * from tale1 wher name=1 and gender=1 order by age \u901a\u8fc7key_lan\u53ef\u4ee5\u770b\u5230\u4f7f\u7528\u4e86\u5b57\u6bb5name\u7684\u7d22\u5f15, \u4f46\u662fextra\u4e2d\u663e\u793a\u7684\u662f Using index, \u8868\u793a\u6392\u5e8f\u8fc7\u7a0b\u4e2d\u7528\u5230\u4e86age\u5b57\u6bb5\u7684\u7d22\u5f15 PS: select * from tale1 wher name=1 order by gender \u5c31\u4e0d\u4f1a\u8d70\u7d22\u5f15, \u56e0\u4e3a\u8df3\u8fc7\u4e86age, \u4e0d\u7b26\u5408\u6700\u5de6\u524d\u7f00\u539f\u5219 \u540c\u7406 order by age, gender \u4f1a\u8d70\u7d22\u5f15, order by gender, age \u4e0d\u4f1a\u8d70\u7d22\u5f15 \u6ce8\u610f wher name=1 and age =18 order by gender, age \u5c31\u4f1a\u8d70\u7d22\u5f15, \u8054\u60f3B+\u6811, \u7ecf\u8fc7 name=1 and age =18 \u7d22\u5f15\u540e\u6570\u636e\u6709\u5e8f(\u6392\u5e8f\u91cc\u9762\u7684age\u5176\u5b9e\u6ca1\u7528\u4e86), \u6b64\u65f6\u6392\u5e8f\u53ef\u4ee5\u8d70\u7d22\u5f15 \u6269\u5c55: order by \u5b57\u6bb5 desc, 8.0\u4ee5\u524d\u7248\u672c, \u964d\u5e8f\u662f\u4e0d\u4f1a\u8d70\u7d22\u5f15\u7684, 8.0\u4ee5\u540e\u7248\u672c\u4f1a\u4f7f\u7528\u7d22\u5f15 \u6ce8\u610f, \u4e0d\u540c\u7248\u672c\u7684 MySQL \u7684 Extra \u7684\u5c55\u793a\u60c5\u51b5\u53ef\u80fd\u662f\u4e0d\u540c\u7684, \u505a\u53c2\u8003\u5c31\u884c","title":"\u5b57\u6bb5\u89e3\u91ca"},{"location":"mysql/MySQL%E4%B9%8BExplain%E8%AF%A6%E8%A7%A3/","text":"MySQL\u4e4bExplain\u8be6\u89e3 \u521b\u5efa\u8868 CREATE TABLE ` table1 ` ( ` id ` int ( 11 ) NOT NULL AUTO_INCREMENT , ` name ` varchar ( 32 ) NOT NULL , ` age ` int ( 11 ) NOT NULL , ` gender ` bit ( 1 ) DEFAULT b '1' , ` birthday ` datetime DEFAULT NULL , ` location ` varchar ( 64 ) DEFAULT NULL , PRIMARY KEY ( ` id ` ), KEY ` idx_name_age_gender ` ( ` name ` , ` age ` , ` gender ` ) USING BTREE ) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4 ; \u63d2\u5165\u6570\u636e INSERT INTO db1 . table1 ( name , age , gender , birthday , location ) VALUES ( 'aa' , 20 , b '1' , '2001-1-1' , 'beijing' ), ( 'ab' , 21 , b '1' , '2001-1-2' , 'beijing' ), ( 'ac' , 22 , b '1' , '2001-1-3' , 'beijing' ), ( 'aa' , 10 , b '0' , '2011-1-1' , 'beijing' ), ( 'ba' , 30 , b '1' , '1991-1-1' , 'tianjin' ), ( 'ba' , 30 , b '1' , '1991-12-12' , 'shanghai' ), ( 'ba' , 40 , b '0' , '1981-6-6' , 'chongqing' ), ( 'ca' , 20 , b '1' , '2001-1-1' , 'shandong' ), ( 'cb' , 20 , b '0' , '2021-1-1' , 'henan' ), ( 'cd' , 20 , b '1' , '2001-1-1' , 'shanxi' ), ( 'ce' , 20 , b '1' , '2001-1-1' , 'hebei' ), ( 'de' , 20 , b '0' , '1981-1-1' , 'guangdong' ), ( 'db' , 20 , b '0' , '2001-1-1' , 'taiwan' ); \u6d4b\u8bd5 \u6d4b\u8bd51 -- \u5168\u503c\u5339\u914d explain select * from table1 where name = 'x' ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ref idx_name_age_gender idx_name_age_gender 130 const 1 Using index condition name\u662fvarchar, \u957f\u5ea632, 4*32+2=130, \u4f7f\u7528\u4e86\u7d22\u5f15 idx_name_age_gender \u4e2d\u7684 name \u5b57\u6bb5 explain select * from table1 where name = 'x' and age = 18 ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ref idx_name_age_gender idx_name_age_gender 134 const,const 1 Using index condition \u540c\u4e0a, \u540c\u65f6 int \u662f 4 \u4e2a\u5b57\u8282, \u6240\u4ee5130+4=134, \u4f7f\u7528\u4e86\u7d22\u5f15 idx_name_age_gender \u4e2d\u7684 name \u548c age \u5b57\u6bb5 explain select * from table1 where name = 'x' and age = 18 and gender = b '0' ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ref idx_name_age_gender idx_name_age_gender 136 const,const,const 1 Using index condition \u540c\u4e0a, bit \u662f 2 \u4e2a\u5b57\u8282, \u6240\u4ee5 134+2=136, \u4f7f\u7528\u4e86\u7d22\u5f15 idx_name_age_gender \u4e2d\u7684 name\u3001 age \u548c gender \u5b57\u6bb5 \u6ce8\u610f: 1\u3001\u4e0d\u540c\u7248\u672c\u7684MySQL\u8ba1\u7b97key_lan\u7684\u516c\u5f0f\u53ef\u80fd\u4e0d\u4e00\u6837, \u4e0d\u540c\u7f16\u7801\u7684\u6781\u7aef\u516c\u5f0f\u4e5f\u53ef\u80fd\u4e0d\u4e00\u6837, \u672c\u4f8b\u4e2d\u7528\u7684\u662f\u7528\u7684\u7f16\u7801\u662futf8mb4(4\u4e2a\u5b57\u8282), \u6240\u4ee5\u662f\u8ba1\u7b97\u516c\u5f0f\u662f 4n*2, \u5982\u679c\u7528utf8\u7f16\u7801\u5c31\u662f3n+2 2\u3001\u4e0a\u97623\u4e2a\u8f93\u51fa\u4e2d rows \u90fd\u662f1, \u662f\u56e0\u4e3a\u5f53\u524d\u8868\u4e2d\u6570\u636e\u8f83\u5c11, \u5f53\u6570\u636e\u91cf\u5f88\u5927\u65f6, \u4e0a\u65b9\u4e09\u4e2a\u8f93\u51fa\u4e2d\u7684 rows \u4f1a\u4f9d\u6b21\u9012\u51cf, \u5373\u4f7f\u7528\u8054\u5408\u7d22\u5f15\u65f6\u5c3d\u91cf\u5168\u503c(\u5b57\u6bb5)\u5339\u914d, \u8fd9\u6837\u6548\u7387\u9ad8 \u6d4b\u8bd52 -- \u5141\u8bb8\u4e3a\u7a7a ALTER TABLE db1 . table1 MODIFY COLUMN age int ( 11 ) NULL ; explain select * from table1 where name = 'x' and age = 18 and gender = b '0' ; ALTER TABLE db1 . table1 MODIFY COLUMN age int ( 11 ) NOT NULL ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ref idx_name_age_gender idx_name_age_gender 137 const,const,const 1 Using index condition \u5f53\u8bbe\u7f6e age \u5141\u8bb8\u4e3a\u7a7a\u65f6, key_lan \u53d8\u6210 137, \u591a\u51fa\u6765\u7684\u4e00\u4e2a\u5b57\u8282\u5c31\u662f\u7528\u6765\u8bb0\u5f55 age \u662f\u5426\u4e3a\u7a7a\u7684 \u6d4b\u8bd53 -- \u5b57\u7b26\u4e32\u4e0d\u52a0\u5f15\u53f7 explain select * from table1 where name = 0 ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ALL idx_name_age_gender 13 Using where name \u672c\u8eab\u7c7b\u578b\u662f varchar, where \u6761\u4ef6\u4e2d\u4f7f\u7528\u65f6\u4e0d\u6dfb\u52a0\u5f15\u53f7, \u5c31\u4e0d\u4f1a\u8d70\u7d22\u5f15 \u6d4b\u8bd54 -- \u987a\u5e8f\u4e0d\u4e00\u81f4 explain select * from table1 where age = 'xx' and name = 'x' ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ref idx_name_age_gender idx_name_age_gender 134 const,const 1 Using index condition explain select * from table1 where age = 'xx' and name = 'x' and gender = b '0' ; explain select * from table1 where gender = b '0' and age = 'xx' and name = 'x' ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ref idx_name_age_gender idx_name_age_gender 136 const,const,const 1 Using index condition MySQL\u5185\u90e8\u4f1a\u4f18\u5316where\u6761\u4ef6\u540e\u9762\u7684\u8bed\u53e5, \u4f7f\u5176\u7b26\u5408\u6700\u5de6\u524d\u7f00\u539f\u5219, \u4ece\u800c\u53ef\u4ee5\u4f7f\u7528\u7d22\u5f15 \u6d4b\u8bd55 -- \u8df3\u8fc7\u7d22\u5f15\u5b57\u6bb5 explain select * from table1 where name = 'xx' and gender = b '0' ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ref idx_name_age_gender idx_name_age_gender 130 const 1 Using index condition \u4f7f\u7528 name \u540e\u8df3\u8fc7\u4e86 age \u76f4\u63a5\u4f7f\u7528 gender, \u672a\u88ab\u6700\u5de6\u524d\u7f00\u539f\u5219, \u6240\u4ee5 key_len=130, \u5373\u53ea\u4f7f\u7528\u4e86\u7d22\u5f15\u4e2d\u7684 name \u5b57\u6bb5 explain select * from table1 where age = 18 and gender = b '0' ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ALL 13 Using where \u7531\u4e8e\u8df3\u8fc7\u4e86 name, \u6240\u4ee5\u5b8c\u5168\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15 \u6d4b\u8bd55 -- \u5bf9\u7d22\u5f15\u505a\u5176\u4ed6\u64cd\u4f5c explain select * from table1 where left ( name , 4 ) = 'xx' ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ALL 13 Using where \u7531\u4e8e\u5bf9\u7d22\u5f15\u4f7f\u7528\u4e86\u51fd\u6570, \u6240\u6709\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15 CREATE INDEX idx_birthday USING BTREE ON table1 ( birthday ); explain select * from table1 where date ( birthday ) = '2020-01-01' ; explain select * from table1 where birthday >= '2020-01-01 00:00:00' and birthday <= '2020-01-01 23:59:59' ; ALTER TABLE db1 . table1 DROP INDEX idx_birthday ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ALL 13 Using where id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 range idx_birthday idx_birthday 6 1 Using index condition \u7531\u4e8e\u5bf9\u7d22\u5f15\u4f7f\u7528\u4e86\u51fd\u6570, \u6240\u6709\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15; \u4f46\u8f6c\u6362\u6210\u6bd4\u5927\u5c0f, \u5c31\u4f7f\u7528\u4e86\u7d22\u5f15, \u8fd9\u5c31\u662f\u7d22\u5f15\u4f18\u5316 \u5bf9\u7d22\u5f15\u8fdb\u884c\u8ba1\u7b97\u3001\u51fd\u6570\u3001\u624b\u52a8\u6216\u81ea\u52a8\u7684\u7c7b\u578b\u8f6c\u6362\u90fd\u53ef\u80fd\u5bfc\u81f4\u65e0\u6cd5\u4f7f\u7528\u7d22\u5f15 \u6d4b\u8bd55 -- !=\u3001<>\u3001in\u3001not\u3001is null\u3001is not null \u6761\u4ef6 explain select * from table1 where name != 'aa' ; explain select * from table1 where name <> 'aa' ; explain select * from table1 where name not in ( 'aa' , 'ab' ); id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ALL idx_name_age_gender 13 Using where explain select * from table1 where birthday is null ; explain select * from table1 where birthday is not null ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ALL 13 Using where \u4e00\u822c\u60c5\u51b5\u4e0b\u8fd9\u4e9b\u90fd\u8d70\u4e0d\u4e86\u7d22\u5f15 \u6709\u65f6\u5019\u4e0d\u7b49\u4e8e\u4e5f\u80fd\u8d70\u7d22\u5f15 in\u3001or \u6709\u65f6\u5019\u4f1a\u8d70\u7d22\u5f15, \u6709\u65f6\u5019\u4e0d\u4f1a\u8d70\u7d22\u5f15, MySQL\u5185\u90e8\u4f18\u5316\u5668\u4f1a\u6839\u636e\u68c0\u7d22\u6bd4\u4f8b\u3001\u8868\u5927\u5c0f\u7b49\u56e0\u7d20\u5224\u65ad\u662f\u5426\u4f7f\u7528\u7d22\u5f15 \u5176\u4ed6: \u4f7f\u7528 like \u901a\u914d\u7b26, \u53ea\u8981\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e0d\u662f\u901a\u914d\u7b26\u5c31\u80fd\u8d70\u7d22\u5f15, \u4f8b\u5982: 'a%', \u53ef\u4ee5\u4f7f\u7528\u7d22\u5f15 '%a', \u65e0\u6cd5\u4f7f\u7528\u6240\u6709 '%a%', \u65e0\u6cd5\u4f7f\u7528\u6240\u6709 'a%b', \u53ef\u4ee5\u4f7f\u7528\u7d22\u5f15 \u65e0\u8bba\u8868\u91cc\u6709\u591a\u5c11\u6761\u6570\u636e, like \u2018a%\u2019 \u90fd\u4f1a\u8d70\u6240\u6709, in \u6216\u8005 or \u5728\u8868\u5927\u7684\u65f6\u5019\u8d70\u7d22\u5f15, \u8868\u5c0f\u7684\u65f6\u5019\u4e0d\u8d70\u7d22\u5f15 name > 'a' and age > 20 \u4e0d\u4f1a\u8d70\u7d22\u5f15 (\u4e2a\u4eba\u731c\u6d4b\u4f7f\u7528 > \u5bfc\u81f4\u7ed3\u679c\u96c6\u8303\u56f4\u6bd4\u8f83\u5927, \u6240\u4ee5\u9ed8\u8ba4\u4e0d\u4f7f\u7528\u7d22\u5f15) name like 'a%' and age > 20 \u5c31\u4f1a\u8d70\u7d22\u5f15 \u4e4b\u6240\u4ee5\u8fd9\u6837, \u662f\u56e0\u4e3a\u4eceMySQL5.6\u7248\u672c\u5f00\u59cb\u5f15\u5165\u4e86 \u7d22\u5f15\u4e0b\u63a8\u539f\u5219 (\u9002\u7528\u4e8elike\u67e5\u8be2): \u5728\u904d\u5386\u7d22\u5f15\u7684\u8fc7\u7a0b\u4e2d\u4f18\u5148\u5224\u65ad\u7d22\u5f15\u5305\u542b\u7684\u5b57\u6bb5, \u8fc7\u6ee4\u6389\u4e0d\u7b26\u5408\u8981\u6c42\u7684\u8bb0\u5f55\u540e\u518d\u56de\u8868, \u53ef\u51cf\u5c11\u56de\u8868\u6b21\u6570, \u63d0\u9ad8\u67e5\u8be2\u6548\u7387 \u7b80\u5355\u8bf4\u5c31\u662f like \u5b8c\u4e4b\u540e\u7ee7\u7eed\u5339\u914d age \u4f7f\u8303\u56f4\u7f29\u5c0f, \u800c \u8054\u5408\u7d22\u5f15\u4e2d\u7b2c\u4e00\u4e2a\u5b57\u6bb5 \u4f7f\u7528 > \u4e0d\u4e00\u5b9a \u4f1a\u4f7f\u7528\u7d22\u5f15(\u4f30\u8ba1\u548c\u7ed3\u679c\u96c6\u5927\u5c0f\u6709\u5173, like\u76f8\u5bf9\u6765\u8bf4\u6bd4\u8f83\u5c0f), \u4e5f\u4e0d\u4f1a\u4f7f\u7528\u7d22\u5f15\u4e0b\u63a8 \u7d22\u5f15\u4e0b\u63a8\u4f1a\u51cf\u5c11\u56de\u8868\u6b21\u6570, \u4ec5\u9650\u4e8e\u4f7f\u7528innodb\u7684\u4e8c\u7ea7\u7d22\u5f15, \u56e0\u4e3a\u4e3b\u952e\u7d22\u5f15\u662f\u805a\u7c07\u7d22\u5f15, \u53f6\u5b50\u8282\u70b9\u5305\u542b\u6240\u6709\u6570\u636e, \u7d22\u5f15\u4e0b\u63a8\u4e0d\u4f1a\u8d77\u5230\u51cf\u5c11\u67e5\u8be2\u5168\u884c\u6570\u636e\u7684\u6548\u679c \u5bf9\u7d22\u5f15\u4f7f\u7528\u8303\u56f4\u6761\u4ef6\u662f, \u6839\u636e\u6761\u4ef6\u7684\u5927\u5c0f, \u53ef\u80fd\u4f1a\u6709\u4e0d\u540c\u7684\u7ed3\u679c, \u4f8b\u5982: where 100 < speed < 100000000 \u5c31\u6709\u53ef\u80fd\u4e0d\u8d70\u7d22\u5f15 where 100 < speed < 200 \u5c31\u6709\u53ef\u80fd\u8d70\u7d22\u5f15 \u8fd9\u79cd\u60c5\u51b5\u5c31\u597d\u6bd4, \u8868\u4e2d\u7684\u6570\u636e\u91cf\u5c11, \u5982\u679c\u4f7f\u7528\u975e\u4e3b\u952e\u7d22\u5f15, \u8fd8\u8981\u56de\u8868, \u4e0d\u5982\u76f4\u63a5\u5168\u8868\u626b\u63cf\u6765\u7684\u5feb","title":"MySQL\u4e4bExplain\u8be6\u89e3"},{"location":"mysql/MySQL%E4%B9%8BExplain%E8%AF%A6%E8%A7%A3/#mysqlexplain","text":"","title":"MySQL\u4e4bExplain\u8be6\u89e3"},{"location":"mysql/MySQL%E4%B9%8BExplain%E8%AF%A6%E8%A7%A3/#_1","text":"CREATE TABLE ` table1 ` ( ` id ` int ( 11 ) NOT NULL AUTO_INCREMENT , ` name ` varchar ( 32 ) NOT NULL , ` age ` int ( 11 ) NOT NULL , ` gender ` bit ( 1 ) DEFAULT b '1' , ` birthday ` datetime DEFAULT NULL , ` location ` varchar ( 64 ) DEFAULT NULL , PRIMARY KEY ( ` id ` ), KEY ` idx_name_age_gender ` ( ` name ` , ` age ` , ` gender ` ) USING BTREE ) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4 ;","title":"\u521b\u5efa\u8868"},{"location":"mysql/MySQL%E4%B9%8BExplain%E8%AF%A6%E8%A7%A3/#_2","text":"INSERT INTO db1 . table1 ( name , age , gender , birthday , location ) VALUES ( 'aa' , 20 , b '1' , '2001-1-1' , 'beijing' ), ( 'ab' , 21 , b '1' , '2001-1-2' , 'beijing' ), ( 'ac' , 22 , b '1' , '2001-1-3' , 'beijing' ), ( 'aa' , 10 , b '0' , '2011-1-1' , 'beijing' ), ( 'ba' , 30 , b '1' , '1991-1-1' , 'tianjin' ), ( 'ba' , 30 , b '1' , '1991-12-12' , 'shanghai' ), ( 'ba' , 40 , b '0' , '1981-6-6' , 'chongqing' ), ( 'ca' , 20 , b '1' , '2001-1-1' , 'shandong' ), ( 'cb' , 20 , b '0' , '2021-1-1' , 'henan' ), ( 'cd' , 20 , b '1' , '2001-1-1' , 'shanxi' ), ( 'ce' , 20 , b '1' , '2001-1-1' , 'hebei' ), ( 'de' , 20 , b '0' , '1981-1-1' , 'guangdong' ), ( 'db' , 20 , b '0' , '2001-1-1' , 'taiwan' );","title":"\u63d2\u5165\u6570\u636e"},{"location":"mysql/MySQL%E4%B9%8BExplain%E8%AF%A6%E8%A7%A3/#_3","text":"\u6d4b\u8bd51 -- \u5168\u503c\u5339\u914d explain select * from table1 where name = 'x' ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ref idx_name_age_gender idx_name_age_gender 130 const 1 Using index condition name\u662fvarchar, \u957f\u5ea632, 4*32+2=130, \u4f7f\u7528\u4e86\u7d22\u5f15 idx_name_age_gender \u4e2d\u7684 name \u5b57\u6bb5 explain select * from table1 where name = 'x' and age = 18 ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ref idx_name_age_gender idx_name_age_gender 134 const,const 1 Using index condition \u540c\u4e0a, \u540c\u65f6 int \u662f 4 \u4e2a\u5b57\u8282, \u6240\u4ee5130+4=134, \u4f7f\u7528\u4e86\u7d22\u5f15 idx_name_age_gender \u4e2d\u7684 name \u548c age \u5b57\u6bb5 explain select * from table1 where name = 'x' and age = 18 and gender = b '0' ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ref idx_name_age_gender idx_name_age_gender 136 const,const,const 1 Using index condition \u540c\u4e0a, bit \u662f 2 \u4e2a\u5b57\u8282, \u6240\u4ee5 134+2=136, \u4f7f\u7528\u4e86\u7d22\u5f15 idx_name_age_gender \u4e2d\u7684 name\u3001 age \u548c gender \u5b57\u6bb5 \u6ce8\u610f: 1\u3001\u4e0d\u540c\u7248\u672c\u7684MySQL\u8ba1\u7b97key_lan\u7684\u516c\u5f0f\u53ef\u80fd\u4e0d\u4e00\u6837, \u4e0d\u540c\u7f16\u7801\u7684\u6781\u7aef\u516c\u5f0f\u4e5f\u53ef\u80fd\u4e0d\u4e00\u6837, \u672c\u4f8b\u4e2d\u7528\u7684\u662f\u7528\u7684\u7f16\u7801\u662futf8mb4(4\u4e2a\u5b57\u8282), \u6240\u4ee5\u662f\u8ba1\u7b97\u516c\u5f0f\u662f 4n*2, \u5982\u679c\u7528utf8\u7f16\u7801\u5c31\u662f3n+2 2\u3001\u4e0a\u97623\u4e2a\u8f93\u51fa\u4e2d rows \u90fd\u662f1, \u662f\u56e0\u4e3a\u5f53\u524d\u8868\u4e2d\u6570\u636e\u8f83\u5c11, \u5f53\u6570\u636e\u91cf\u5f88\u5927\u65f6, \u4e0a\u65b9\u4e09\u4e2a\u8f93\u51fa\u4e2d\u7684 rows \u4f1a\u4f9d\u6b21\u9012\u51cf, \u5373\u4f7f\u7528\u8054\u5408\u7d22\u5f15\u65f6\u5c3d\u91cf\u5168\u503c(\u5b57\u6bb5)\u5339\u914d, \u8fd9\u6837\u6548\u7387\u9ad8 \u6d4b\u8bd52 -- \u5141\u8bb8\u4e3a\u7a7a ALTER TABLE db1 . table1 MODIFY COLUMN age int ( 11 ) NULL ; explain select * from table1 where name = 'x' and age = 18 and gender = b '0' ; ALTER TABLE db1 . table1 MODIFY COLUMN age int ( 11 ) NOT NULL ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ref idx_name_age_gender idx_name_age_gender 137 const,const,const 1 Using index condition \u5f53\u8bbe\u7f6e age \u5141\u8bb8\u4e3a\u7a7a\u65f6, key_lan \u53d8\u6210 137, \u591a\u51fa\u6765\u7684\u4e00\u4e2a\u5b57\u8282\u5c31\u662f\u7528\u6765\u8bb0\u5f55 age \u662f\u5426\u4e3a\u7a7a\u7684 \u6d4b\u8bd53 -- \u5b57\u7b26\u4e32\u4e0d\u52a0\u5f15\u53f7 explain select * from table1 where name = 0 ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ALL idx_name_age_gender 13 Using where name \u672c\u8eab\u7c7b\u578b\u662f varchar, where \u6761\u4ef6\u4e2d\u4f7f\u7528\u65f6\u4e0d\u6dfb\u52a0\u5f15\u53f7, \u5c31\u4e0d\u4f1a\u8d70\u7d22\u5f15 \u6d4b\u8bd54 -- \u987a\u5e8f\u4e0d\u4e00\u81f4 explain select * from table1 where age = 'xx' and name = 'x' ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ref idx_name_age_gender idx_name_age_gender 134 const,const 1 Using index condition explain select * from table1 where age = 'xx' and name = 'x' and gender = b '0' ; explain select * from table1 where gender = b '0' and age = 'xx' and name = 'x' ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ref idx_name_age_gender idx_name_age_gender 136 const,const,const 1 Using index condition MySQL\u5185\u90e8\u4f1a\u4f18\u5316where\u6761\u4ef6\u540e\u9762\u7684\u8bed\u53e5, \u4f7f\u5176\u7b26\u5408\u6700\u5de6\u524d\u7f00\u539f\u5219, \u4ece\u800c\u53ef\u4ee5\u4f7f\u7528\u7d22\u5f15 \u6d4b\u8bd55 -- \u8df3\u8fc7\u7d22\u5f15\u5b57\u6bb5 explain select * from table1 where name = 'xx' and gender = b '0' ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ref idx_name_age_gender idx_name_age_gender 130 const 1 Using index condition \u4f7f\u7528 name \u540e\u8df3\u8fc7\u4e86 age \u76f4\u63a5\u4f7f\u7528 gender, \u672a\u88ab\u6700\u5de6\u524d\u7f00\u539f\u5219, \u6240\u4ee5 key_len=130, \u5373\u53ea\u4f7f\u7528\u4e86\u7d22\u5f15\u4e2d\u7684 name \u5b57\u6bb5 explain select * from table1 where age = 18 and gender = b '0' ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ALL 13 Using where \u7531\u4e8e\u8df3\u8fc7\u4e86 name, \u6240\u4ee5\u5b8c\u5168\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15 \u6d4b\u8bd55 -- \u5bf9\u7d22\u5f15\u505a\u5176\u4ed6\u64cd\u4f5c explain select * from table1 where left ( name , 4 ) = 'xx' ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ALL 13 Using where \u7531\u4e8e\u5bf9\u7d22\u5f15\u4f7f\u7528\u4e86\u51fd\u6570, \u6240\u6709\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15 CREATE INDEX idx_birthday USING BTREE ON table1 ( birthday ); explain select * from table1 where date ( birthday ) = '2020-01-01' ; explain select * from table1 where birthday >= '2020-01-01 00:00:00' and birthday <= '2020-01-01 23:59:59' ; ALTER TABLE db1 . table1 DROP INDEX idx_birthday ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ALL 13 Using where id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 range idx_birthday idx_birthday 6 1 Using index condition \u7531\u4e8e\u5bf9\u7d22\u5f15\u4f7f\u7528\u4e86\u51fd\u6570, \u6240\u6709\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15; \u4f46\u8f6c\u6362\u6210\u6bd4\u5927\u5c0f, \u5c31\u4f7f\u7528\u4e86\u7d22\u5f15, \u8fd9\u5c31\u662f\u7d22\u5f15\u4f18\u5316 \u5bf9\u7d22\u5f15\u8fdb\u884c\u8ba1\u7b97\u3001\u51fd\u6570\u3001\u624b\u52a8\u6216\u81ea\u52a8\u7684\u7c7b\u578b\u8f6c\u6362\u90fd\u53ef\u80fd\u5bfc\u81f4\u65e0\u6cd5\u4f7f\u7528\u7d22\u5f15 \u6d4b\u8bd55 -- !=\u3001<>\u3001in\u3001not\u3001is null\u3001is not null \u6761\u4ef6 explain select * from table1 where name != 'aa' ; explain select * from table1 where name <> 'aa' ; explain select * from table1 where name not in ( 'aa' , 'ab' ); id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ALL idx_name_age_gender 13 Using where explain select * from table1 where birthday is null ; explain select * from table1 where birthday is not null ; id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE table1 ALL 13 Using where \u4e00\u822c\u60c5\u51b5\u4e0b\u8fd9\u4e9b\u90fd\u8d70\u4e0d\u4e86\u7d22\u5f15 \u6709\u65f6\u5019\u4e0d\u7b49\u4e8e\u4e5f\u80fd\u8d70\u7d22\u5f15 in\u3001or \u6709\u65f6\u5019\u4f1a\u8d70\u7d22\u5f15, \u6709\u65f6\u5019\u4e0d\u4f1a\u8d70\u7d22\u5f15, MySQL\u5185\u90e8\u4f18\u5316\u5668\u4f1a\u6839\u636e\u68c0\u7d22\u6bd4\u4f8b\u3001\u8868\u5927\u5c0f\u7b49\u56e0\u7d20\u5224\u65ad\u662f\u5426\u4f7f\u7528\u7d22\u5f15 \u5176\u4ed6: \u4f7f\u7528 like \u901a\u914d\u7b26, \u53ea\u8981\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e0d\u662f\u901a\u914d\u7b26\u5c31\u80fd\u8d70\u7d22\u5f15, \u4f8b\u5982: 'a%', \u53ef\u4ee5\u4f7f\u7528\u7d22\u5f15 '%a', \u65e0\u6cd5\u4f7f\u7528\u6240\u6709 '%a%', \u65e0\u6cd5\u4f7f\u7528\u6240\u6709 'a%b', \u53ef\u4ee5\u4f7f\u7528\u7d22\u5f15 \u65e0\u8bba\u8868\u91cc\u6709\u591a\u5c11\u6761\u6570\u636e, like \u2018a%\u2019 \u90fd\u4f1a\u8d70\u6240\u6709, in \u6216\u8005 or \u5728\u8868\u5927\u7684\u65f6\u5019\u8d70\u7d22\u5f15, \u8868\u5c0f\u7684\u65f6\u5019\u4e0d\u8d70\u7d22\u5f15 name > 'a' and age > 20 \u4e0d\u4f1a\u8d70\u7d22\u5f15 (\u4e2a\u4eba\u731c\u6d4b\u4f7f\u7528 > \u5bfc\u81f4\u7ed3\u679c\u96c6\u8303\u56f4\u6bd4\u8f83\u5927, \u6240\u4ee5\u9ed8\u8ba4\u4e0d\u4f7f\u7528\u7d22\u5f15) name like 'a%' and age > 20 \u5c31\u4f1a\u8d70\u7d22\u5f15 \u4e4b\u6240\u4ee5\u8fd9\u6837, \u662f\u56e0\u4e3a\u4eceMySQL5.6\u7248\u672c\u5f00\u59cb\u5f15\u5165\u4e86 \u7d22\u5f15\u4e0b\u63a8\u539f\u5219 (\u9002\u7528\u4e8elike\u67e5\u8be2): \u5728\u904d\u5386\u7d22\u5f15\u7684\u8fc7\u7a0b\u4e2d\u4f18\u5148\u5224\u65ad\u7d22\u5f15\u5305\u542b\u7684\u5b57\u6bb5, \u8fc7\u6ee4\u6389\u4e0d\u7b26\u5408\u8981\u6c42\u7684\u8bb0\u5f55\u540e\u518d\u56de\u8868, \u53ef\u51cf\u5c11\u56de\u8868\u6b21\u6570, \u63d0\u9ad8\u67e5\u8be2\u6548\u7387 \u7b80\u5355\u8bf4\u5c31\u662f like \u5b8c\u4e4b\u540e\u7ee7\u7eed\u5339\u914d age \u4f7f\u8303\u56f4\u7f29\u5c0f, \u800c \u8054\u5408\u7d22\u5f15\u4e2d\u7b2c\u4e00\u4e2a\u5b57\u6bb5 \u4f7f\u7528 > \u4e0d\u4e00\u5b9a \u4f1a\u4f7f\u7528\u7d22\u5f15(\u4f30\u8ba1\u548c\u7ed3\u679c\u96c6\u5927\u5c0f\u6709\u5173, like\u76f8\u5bf9\u6765\u8bf4\u6bd4\u8f83\u5c0f), \u4e5f\u4e0d\u4f1a\u4f7f\u7528\u7d22\u5f15\u4e0b\u63a8 \u7d22\u5f15\u4e0b\u63a8\u4f1a\u51cf\u5c11\u56de\u8868\u6b21\u6570, \u4ec5\u9650\u4e8e\u4f7f\u7528innodb\u7684\u4e8c\u7ea7\u7d22\u5f15, \u56e0\u4e3a\u4e3b\u952e\u7d22\u5f15\u662f\u805a\u7c07\u7d22\u5f15, \u53f6\u5b50\u8282\u70b9\u5305\u542b\u6240\u6709\u6570\u636e, \u7d22\u5f15\u4e0b\u63a8\u4e0d\u4f1a\u8d77\u5230\u51cf\u5c11\u67e5\u8be2\u5168\u884c\u6570\u636e\u7684\u6548\u679c \u5bf9\u7d22\u5f15\u4f7f\u7528\u8303\u56f4\u6761\u4ef6\u662f, \u6839\u636e\u6761\u4ef6\u7684\u5927\u5c0f, \u53ef\u80fd\u4f1a\u6709\u4e0d\u540c\u7684\u7ed3\u679c, \u4f8b\u5982: where 100 < speed < 100000000 \u5c31\u6709\u53ef\u80fd\u4e0d\u8d70\u7d22\u5f15 where 100 < speed < 200 \u5c31\u6709\u53ef\u80fd\u8d70\u7d22\u5f15 \u8fd9\u79cd\u60c5\u51b5\u5c31\u597d\u6bd4, \u8868\u4e2d\u7684\u6570\u636e\u91cf\u5c11, \u5982\u679c\u4f7f\u7528\u975e\u4e3b\u952e\u7d22\u5f15, \u8fd8\u8981\u56de\u8868, \u4e0d\u5982\u76f4\u63a5\u5168\u8868\u626b\u63cf\u6765\u7684\u5feb","title":"\u6d4b\u8bd5"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/","text":"MySQL\u4e4b\u4f18\u5316 \u6392\u5e8f\u4f18\u5316\u603b\u7ed3 MySQL\u652f\u6301filesort\u548cindex\u4e24\u79cd\u6392\u5e8f\u65b9\u5f0f, Using index\u76f4\u63a5\u626b\u63cf\u7d22\u5f15\u672c\u8eab\u5b8c\u6210\u6392\u5e8f, \u6548\u7387\u9ad8, Using filesort\u662f\u6587\u4ef6\u6392\u5e8f, \u6548\u7387\u6162 order by\u6ee1\u8db3\u4f7f\u7528 Using index \u7684\u6761\u4ef6: \u7b26\u5408\u7d22\u5f15\u6700\u5de6\u524d\u7f00\u539f\u5219 where\u8bed\u53e5\u540e\u9762\u6761\u4ef6\u548corder by\u8bed\u53e5\u540e\u9762\u6761\u4ef6\u548c\u5728\u4e00\u8d77\u7b26\u5408\u6700\u5de6\u524d\u7f00\u539f\u5219 \u5c3d\u91cf\u4f7f\u7528\u7d22\u5f15\u6392\u5e8f, \u5373\u7b26\u5408\u5efa\u7acb\u7d22\u5f15\u65f6\u7684\u6700\u5de6\u524d\u7f00\u539f\u5219 order by \u7684\u6761\u4ef6\u4e0d\u5728\u7d22\u5f15\u5217\u4e0a, \u4f1a\u4f7f\u7528filesort\u6392\u5e8f, \u7d22\u5f15\u5c3d\u91cf\u4f7f\u7528\u8986\u76d6\u7d22\u5f15\u7684\u5217\u6392\u5e8f group by \u4e0e order by \u975e\u5e38\u7c7b\u4f3c, \u5b9e\u8d28\u662f\u5148\u6392\u5e8f\u540e\u5206\u7ec4, \u6309\u7167\u7d22\u5f15\u6700\u5de6\u524d\u7f00\u539f\u5219, \u5982\u679c group by \u7684\u7ed3\u679c\u4e0d\u9700\u8981\u6392\u5e8f, \u5219\u6dfb\u52a0 order by null \u7981\u6b62\u6392\u5e8f, \u4e5f\u80fd\u63d0\u9ad8\u67e5\u8be2\u6548\u7387 where \u6761\u4ef6\u9ad8\u4e8e having, \u5c3d\u91cf\u5728 where \u4e2d\u9650\u5b9a\u6761\u4ef6\u800c\u975e\u5728 having \u4e2d \u6269\u5c551: Using index \u662f\u626b\u63cf\u4e8c\u7ea7\u7d22\u5f15\u6216\u8054\u5408\u7d22\u5f15, \u4e5f\u5c31\u662f\u975e\u805a\u7c07\u7d22\u5f15 Using filesort \u662f\u626b\u63cf\u4e3b\u952e\u7d22\u5f15, \u4e5f\u5c31\u662f\u805a\u7c07\u7d22\u5f15 \u56e0\u4e3a\u805a\u7c07\u7d22\u5f15\u7d22\u5f15\u5305\u542b\u6240\u6709\u6570\u636e, \u6240\u4ee5\u4ece\u78c1\u76d8\u8bfb\u53d6ibd\u6587\u4ef6\u65f6\u52a0\u8f7d\u7684\u6570\u636e\u5927, \u6548\u7387\u4e0d\u5982\u975e\u805a\u7c07\u7d22\u5f15, \u4e5f\u5c31\u662f\u8bf4Using index \u6bd4 Using filesort \u7684\u6548\u7387\u9ad8 \u6269\u5c552: \u6392\u5e8f\u5206\u4e3a\u5355\u8def\u6392\u5e8f\u548c\u53cc\u8def\u6392\u5e8f \u5355\u8def\u6392\u5e8f\u5c31\u662f\u76f4\u63a5\u628aselect\u51fa\u6765\u7684\u7ed3\u679c\u96c6load\u5230\u5185\u5b58\u4e2d, \u7136\u540e\u6392\u5e8f, \u6392\u5e8f\u4e4b\u540e\u7684\u7ed3\u679c\u5c31\u662f\u6700\u7ec8\u7ed3\u679c \u53cc\u8def\u6392\u5e8f\u4ec5\u4ec5\u662f\u5c06 id \u548c\u6392\u5e8f\u7684\u5b57\u6bb5load\u5230\u5185\u5b58\u4e2d(\u5360\u7528\u7a7a\u95f4\u5c0f), \u7136\u540e\u6392\u5e8f, \u6392\u5e8f\u5b8c\u6210\u540e\u6839\u636e id \u518d\u6b21\u56de\u8868\u62ff\u5230\u6700\u7ec8\u7684\u7ed3\u679c \u4e24\u8005\u4f18\u70b9\u7c7b\u4f3c\u65f6\u95f4\u6362\u7a7a\u95f4, \u7a7a\u95f4\u6362\u65f6\u95f4\u7684\u610f\u601d MySQL\u901a\u8fc7\u7cfb\u7edf\u7cfb\u7edf\u53d8\u91cf max_length_for_short_data(\u9ed8\u8ba41048576\u5b57\u8282, 1M)\u7684\u5927\u5c0f\u786e\u5b9a\u4f7f\u7528\u54ea\u79cd\u6392\u5e8f\u65b9\u5f0f\u00b7 \u6240\u6709\u5b57\u6bb5\u603b\u957f\u5ea6\u5c0f\u4e8e max_length_for_short_data \u5c31\u4f7f\u7528\u5355\u8def\u6392\u5e8f, \u5426\u5219\u4f7f\u7528\u53cc\u8def\u6392\u5e8f, \u6bd4\u5982\u8868\u91cc\u5b57\u6bb5\u6bd4\u8f83\u591a, \u52a0\u8d77\u6765\u8d85\u8fc71024\u5b57\u8282, \u5c31\u4f7f\u7528\u53cc\u8def\u6392\u5e8f \u6269\u5c553: MySQL\u4f1a\u81ea\u52a8\u5206\u914d\u4e00\u5757\u5185\u5b58\u7a7a\u95f4(sort_buffer), \u5982\u679c\u6392\u5e8f\u6570\u636e\u91cf\u8f83\u5c0f, \u4f1a\u5728\u5185\u5b58\u4e2d\u4e5f\u5c31\u662fsort_buffer\u4e2d\u5b8c\u6210, \u5426\u5219\u4f1a\u5728\u78c1\u76d8\u4e2d\u751f\u6210\u4e34\u65f6\u6587\u4ef6, \u5728\u8bfb\u5230\u5185\u5b58\u4e2d\u8fdb\u884c\u6392\u5e8f, \u4e5f\u5c31\u662f\u8bf4\u6392\u5e8f\u6570\u636e\u8f83\u5927\u65f6, \u67e5\u8be2\u6548\u7387\u964d\u4f4e\u67e5\u8be2\u65f6\u95f4\u589e\u957f \u5c3d\u91cf\u4f7f\u7528limit\u9650\u5236\u7ed3\u679c\u96c6\u5927\u5c0f, \u8fd9\u6837\u6392\u5e8f\u6548\u7387\u4e5f\u4f1a\u9ad8 \u7d22\u5f15\u8bbe\u8ba1\u539f\u5219 \u5efa\u8868\u4e4b\u521d\u4e0d\u5efa\u7d22\u5f15, \u540e\u7eed\u6839\u636e\u5b9e\u9645\u4e1a\u52a1, \u628a\u6d89\u53ca\u5230\u76f8\u5173\u8868\u7684\u76f8\u5173sql\u62ff\u51fa\u6765\u5206\u6790, \u518d\u6839\u636e\u5206\u6790\u7ed3\u679c\u5efa\u7acb\u7d22\u5f15, \u6bd4\u5982\u5efa\u7acb\u8054\u5408\u7d22\u5f15\u65f6\u5c3d\u91cf\u8986\u76d6\u4ee3\u7801\u4e2d\u5e38\u7528\u7684\u8986\u76d6\u6761\u4ef6(where\u540e\u9762\u7684\u6761\u4ef6), \u9488\u5bf9\u4e0d\u540c\u7684\u60c5\u51b5\u8fd8\u53ef\u5efa\u7acb\u4e00\u4e2a\u6216\u591a\u4e2a\u8054\u5408\u7d22\u5f15 \u5bf9\u4e8e\u5dee\u5f02\u8f83\u5c0f\u7684\u5b57\u6bb5(\u5373\u5c0f\u57fa\u6570\u5b57\u6bb5), \u4e0d\u8981\u5efa\u7acb\u7d22\u5f15, \u610f\u4e49\u4e0d\u5927, \u6bd4\u5982gender, \u4e0d\u662f0\u5c31\u662f1, \u65e0\u6cd5\u4f53\u73b0\u4e8c\u5206\u67e5\u627e\u7684\u4f18\u52bf, \u6240\u4ee5\u901a\u8fc7distinct\u67e5\u770b\u5b57\u6bb5\u7684\u503c\u5360\u7528\u603b\u6761\u6570\u7684\u6bd4\u4f8b, \u9ad8\u7684\u5efa\u8bae\u5efa\u7acb\u7d22\u5f15, \u4f4e\u7684\u4e0d\u5efa\u8bae \u5c3d\u91cf\u5bf9\u5360\u7528\u7a7a\u95f4\u8f83\u5c0f\u5b57\u6bb5\u7c7b\u578b\u8bbe\u7f6e\u7d22\u5f15, \u4f8b\u5982 tinyint, \u56e0\u4e3a\u5360\u7528\u78c1\u76d8\u7a7a\u95f4\u5c0f, \u67e5\u8d77\u6765\u6548\u7387\u9ad8 \u5bf9\u4e8e\u5360\u7528\u7a7a\u95f4\u8f83\u5927\u7684\u5b57\u6bb5, \u4f8b\u5982vachar(255), \u4f7f\u7528\u524d\u51e0\u4e2a\u5b57\u6bb5\u5efa\u7acb\u7d22\u5f15, \u7c7b\u4f3c key index(name(20), age, birthday) , \u4f46\u8fd9\u6837\u505a\u7684\u7f3a\u70b9\u662f order by \u548c group by \u8be5\u5b57\u6bb5\u65f6\u65e0\u6cd5\u4f7f\u7528\u7d22\u5f15 where\u548corder by\u51b2\u7a81\u65f6, \u4f18\u5148\u9488\u5bf9where\u6761\u4ef6\u7684\u5b57\u6bb5\u5efa\u7acb\u7d22\u5f15(\u6bd4\u5982key index(name(20), \u5426\u5219\u5c31\u662f(key index(name)) \u5bf9\u4e8e\u6162sql\u9488\u5bf9\u6027\u4f18\u5316(\u9ed8\u8ba4\u5b9a\u4e49\u67e5\u8be2\u65f6\u95f4\u8d85\u8fc710s\u7684\u662f\u6162sql, MySQL\u4f1a\u8bb0\u5f55\u8fd9\u4e9bsql\u5230\u4e00\u4e2a\u7279\u5b9a\u7684\u6587\u4ef6\u4e2d), \u6ce8\u610f, \u9ed8\u8ba4\u6ca1\u6709\u5f00\u542f\u8fd9\u9879\u529f\u80fd, \u56e0\u4e3a\u4f1a\u5f71\u54cd\u6027\u80fd, \u5982\u679c\u662f\u4e3b\u4ece\u8bbe\u8ba1, \u53ef\u4ee5\u5728\u5907\u5e93\u5f00\u542f \u5bf9\u4e8e\u5927\u6982\u7387\u4f7f\u7528\u8303\u56f4\u4f5c\u4e3a\u6761\u4ef6\u7684\u5b57\u6bb5, \u5efa\u7acb\u8054\u5408\u7d22\u5f15\u65f6\u8981\u653e\u5230\u6700\u540e, \u4f8b\u5982age, \u90a3\u4e48\u5c31\u5e94\u8be5 key (name, gender, age), \u56e0\u4e3awhere\u6761\u4ef6\u540e\u5b57\u6bb5\u4f7f\u7528 > \u7b49\u8303\u56f4\u6761\u4ef6\u540e, and \u540e\u9762\u7684\u5b57\u6bb5\u4fbf\u65e0\u6cd5\u4f7f\u7528\u7d22\u5f15\u4e86 \u6838\u5fc3\u601d\u8def\u5c31\u662f\u5c3d\u91cf\u5229\u7528\u4e00\u4e24\u4e2a\u590d\u6742\u7684\u591a\u5b57\u6bb5\u8054\u5408\u7d22\u5f15, \u8986\u76d680%\u7684\u4e1a\u52a1\u573a\u666f, \u7136\u540e\u4f7f\u7528\u4e00\u4e24\u4e2a\u8f85\u52a9\u7d22\u5f15(\u8054\u5408\u7d22\u5f15\u6216\u5355\u5b57\u6bb5\u7d22\u5f15)\u89e3\u51b3\u5269\u4e0b\u7684\u4e1a\u52a1\u573a\u666f, \u4fdd\u8bc1\u5927\u6570\u91cf\u7ea7\u522b\u7684\u67e5\u8be2\u90fd\u80fd\u4f7f\u7528\u7d22\u5f15, \u8fd9\u6837\u65e2\u53ef\u4fdd\u8bc1\u67e5\u8be2\u901f\u5ea6\u548c\u6027\u80fd\u4e0d\u4f4e Limit\u4f18\u5316 \u793a\u4f8b1: select * from a_table limit 10000 , 10 ; \u5b9e\u9645\u4e0aMySQL\u67e5\u8be2\u4e8610010\u6761\u6570\u636e, \u7136\u540e\u820d\u5f03\u524d10000\u6761, \u53ea\u5c55\u793a\u6700\u540e10\u6761, \u6548\u7387\u4f4e\u4e0b \u4f18\u5316: select * from a_table where id > 10000 limit 10 ; \u4f7f\u7528\u524d\u63d0, \u81ea\u589e\u4e14\u8fde\u7eed \u7684\u4e3b\u952e\u6392\u5e8f\u5206\u9875\u67e5\u8be2 \u5047\u8bbe\u4e2d\u95f4\u5220\u9664\u4e86\u67d0\u4e9b\u6570\u636e, \u4e0a\u8ff0\u4e24\u6761\u8bed\u53e5\u67e5\u8be2\u7684\u7ed3\u679c\u4f1a\u4e0d\u4e00\u6837, \u539f\u56e0\u5c31\u662f limit \u672c\u8d28\u4f9d\u7136\u662f\u4ece\u7b2c\u4e00\u6761\u6570\u636e\u5f00\u59cb\u67e5\u8be2\u8ba1\u7b97 \u793a\u4f8b2: select * from a_tble order by name limit 10000 , 10 ; \u5047\u8bbe a_table \u8868\u4e2d\u6709\u8054\u5408\u7d22\u5f15(name, age, job), \u7406\u8bba\u4e0a order by name \u4f1a\u8d70\u7d22\u5f15, \u4f46\u5b9e\u9645\u4e0a\u4e0d\u4f1a, \u539f\u56e0\u5c31\u662f\u524d\u9762\u591a\u6b21\u63d0\u5230\u7684, MySQL \u8ba4\u4e3a\u6570\u636e\u91cf\u8f83\u5927, \u4f7f\u7528\u8054\u5408\u7d22\u5f15\u626b\u63cf\u6570\u636e\u540e\u8fd8\u9700\u8981\u56de\u8868, \u4e0d\u5982\u76f4\u63a5\u5168\u8868\u626b\u63cf \u4f7f\u7528 Explain \u53ef\u4ee5\u770b\u5230 type \u662f ALL, key \u4e3a\u7a7a, extra \u662f Using filesort, \u8bc1\u660e\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15 \u4f18\u5316: select * from a_table as a inner join ( select id from a_table order by name limit 10000 , 10 ) as b on a . id = b . id ; \u89e3\u91ca: \u56e0\u4e3a, select id from a_table order by name limit 10000, 10 \u4e0d\u4f7f\u7528 select * \u800c\u662f select id , \u5373\u4f7f\u7528\u4e86\u8986\u76d6\u7d22\u5f15, \u6b64\u65f6 order by name \u8d70\u4e86\u7d22\u5f15, \u4f7f\u7528 explain \u53ef\u4ee5\u770b\u5230 type \u662f index, extra \u662f Using index, \u800c\u4e14\u6700\u7ec8\u751f\u6210\u7684\u8fd9\u5f20\u4e34\u65f6\u8868\u53ea\u670910\u6761\u6570\u636e \u800c\u4e14, inner join \u7684\u6761\u4ef6\u662f on a.id = b.id \u662f\u4e3b\u952e\u5173\u8054, \u5176 type \u662f eq_rf, key \u662f PRIMARY, \u6240\u4ee5\u548c\u4e0a\u9762\u7684\u4e34\u65f6\u8868\u8054\u8868\u67e5\u8be2\u7684\u6700\u7ec8\u6548\u7387\u5f88\u9ad8 Join\u4f18\u5316 \u5148\u8bf4\u4e24\u4e2a\u7b97\u6cd5 \u5d4c\u5957\u5faa\u73af\u8fde\u63a5\u7b97\u6cd5 \u5373 Nested-Loop Join(NLJ) \u7b97\u6cd5 \u524d\u63d0: \u4e24\u5f20\u8868 a \u548c b, \u6570\u636e\u7ed3\u6784\u4e00\u6a21\u4e00\u6837, \u5176\u4e2d name \u5b57\u6bb5\u5efa\u7acb\u7d22\u5f15, a\u8868\u4e00\u4e07\u6761\u6570\u636e, b\u8868100\u6761\u6570\u636e \u8bed\u53e5: select * from a inner join b on a . name = b . name ; \u6267\u884c: 1\u3001\u5168\u8868\u626b\u63cf b \u8868, \u62ff\u5230\u4e00\u6761\u8bb0\u5f55 2\u3001\u62ff\u5230 1 \u4e2d\u7684\u7ed3\u679c, \u901a\u8fc7 name \u7d22\u5f15\u53bb a \u8868\u4e2d\u5b9a\u4f4d 3\u3001\u91cd\u590d\u6b65\u9aa4 1 \u548c 2, \u62ff\u5230\u6700\u7ec8\u7ed3\u679c \u671f\u95f4, b \u8868\u626b\u63cf100\u6b21, \u7531\u4e8e\u4f7f\u7528\u4e86\u6761\u4ef6 on a.name = b.name \u4f7f\u7528\u4e86\u7d22\u5f15, \u4e5f\u53ea\u626b\u63cf\u4e86100\u6b21 \u7b97\u6cd5\u89e3\u91ca: MySQL\u7684\u4f18\u5316\u5668\u4e00\u822c\u4f1a\u9009\u62e9 \u5c0f\u8868\u505a\u9a71\u52a8\u8868 , \u5927\u8868\u505a\u88ab\u9a71\u52a8\u8868 , \u5373 a \u662f\u88ab\u9a71\u52a8\u8868, b \u662f\u9a71\u52a8\u8868, \u6267\u884c\u8fc7\u7a0b\u4e2d\u5148\u6267\u884c\u9a71\u52a8\u8868 \u5bf9\u4e8e left join, \u5de6\u8868\u662f\u9a71\u52a8\u8868, \u53f3\u8868\u662f\u88ab\u9a71\u52a8\u8868 \u5bf9\u4e8e right join, \u6b63\u597d\u548c left join \u76f8\u53cd \u5c0f\u8868\u7684\u5b9a\u4e49\u662f \u7ecf\u8fc7\u6ee4\u6761\u4ef6\u7b5b\u9009\u540e\u6570\u636e\u91cf\u5c0f\u7684\u8868 \u662f\u5c0f\u8868, \u4e0d\u662f\u5355\u7eaf\u7684\u6307\u6574\u4e2a\u8868\u6570\u636e\u91cf\u5c0f, \u5982\u679c\u6ca1\u6709\u8fc7\u6ee4\u6761\u4ef6\u90a3\u5c31\u6307\u6574\u4e2a\u8868 \u4f7f\u7528 explain \u6ca1\u6709\u5728\u7ed3\u679c\u7684 extra \u4e2d\u770b\u5230 Using join buffer, \u5219\u8868\u793a\u5f53\u524d jon \u8bed\u53e5\u4f7f\u7528\u4e86 NLJ \u7b97\u6cd5 \u5982\u679c\u88ab\u9a71\u52a8\u8868\u5173\u8054\u7684\u5b57\u6bb5\u6ca1\u6709\u7d22\u5f15, NLJ \u7b97\u6cd5\u6548\u7387\u4f4e\u4e0b, MySQL\u4f1a\u9009\u62e9 BNL \u7b97\u6cd5 \u57fa\u4e8e\u5757\u7684\u5d4c\u5957\u5faa\u73af\u94fe\u63a5\u7b97\u6cd5 \u5373 Block Nested-Loop Join(BNL) \u7b97\u6cd5 \u8bed\u53e5: select * from a inner join b on a . age = b . age ; \u7531\u4e8e age \u5b57\u6bb5\u6ca1\u6709\u7d22\u5f15, \u6240\u4ee5\u4e0d\u4f1a\u4f7f\u7528 NLJ \u7b97\u6cd5, \u800c\u662f BNL\u7b97\u6cd5 \u6267\u884c: \u8868\u5c0f\u8868 b, \u5373\u9a71\u52a8\u8868\u7684\u6570\u636e\u653e\u5230 join_buffer \u4e2d \u628a\u5927\u8868 a, \u5373\u88ab\u9a71\u52a8\u8868\u4e2d\u7684\u6bcf\u4e00\u884c, \u5355\u72ec\u53d6\u51fa\u6765\u548c join_buffer \u4e2d\u7684\u6570\u636e\u6bd4\u5bf9 \u8fd4\u56de\u6ee1\u8db3 join \u6761\u4ef6\u7684\u6570\u636e \u671f\u95f4, \u4e24\u5f20\u8868\u90fd\u662f\u5168\u8868\u626b\u63cf, \u5171\u626b\u63cf 10000 + 100 = 10100 \u6b21, \u540c\u65f6 \u7531\u4e8e join_buffer \u8868\u4e2d\u7684 \u6570\u636e\u5728\u5185\u5b58\u4e2d\u4e14\u662f\u65e0\u5e8f\u7684 , \u4ece\u8868 a \u4e2d\u53d6\u51fa\u6765\u7684\u6570\u636e\u6700\u591a\u8981\u5728\u8868 b \u4e2d\u5224\u65ad 100 \u6b21, \u6700\u540e\u5185\u5b58\u4e2d\u5224\u65ad\u7684\u6570\u91cf\u7ea7\u662f 10000 * 100 , \u5373\u767e\u4e07\u7ea7 PS: join_buffer \u6570\u636e\u5728\u5185\u5b58\u4e2d, \u5185\u5b58\u7a7a\u95f4\u5927\u5c0f\u7531\u53c2\u6570 join_buffer_size \u51b3\u5b9a, \u9ed8\u8ba4\u503c\u597d\u50cf\u662f256K, \u5982\u679c\u6b64\u503c\u8f83\u5c0f\u653e\u4e0d\u4e0b b \u8868\u6570\u636e, \u5219\u4f1a\u5206\u6bb5\u653e, \u5373\u5148\u628a b \u8868\u7684\u4e00\u90e8\u5206\u6570\u636e\u653e\u5230 join_buffer \u5224\u65ad, \u5b8c\u6210\u4e4b\u540e\u518d\u653e\u4e00\u90e8\u5206\u6570\u636e, \u76f4\u5230\u653e\u5b8c, \u65e0\u5f62\u4e2d\u589e\u52a0\u4e86\u8ba1\u7b97\u65f6\u95f4 \u6211\u731c BNL \u7b97\u6cd5\u7684\u4e2d\u7684 B, \u5373 block \u5c31\u662f\u6307\u5185\u5b58\u4e2d\u8fd9\u4e00\u5757\u5757\u7684 join_buffer \u73b0\u5728\u8bf4\u8bf4\u4e3a\u5565\u8bf4 \u8fd9\u79cd\u60c5\u51b5(\u5373 on \u7684\u6761\u4ef6\u7684\u5b57\u6bb5\u6ca1\u6709\u7d22\u5f15)\u4e0b, NLJ\u6548\u7387\u4f4e, BNL\u6548\u7387\u9ad8, \u56e0\u4e3aNLJ\u662f\u626b\u63cf\u7d22\u5f15, \u6240\u7d22\u5f15\u6587\u4ef6\u5728\u78c1\u76d8\u4e0a, NLJ\u662f\u78c1\u76d8\u626b\u63cf, \u800cBNL\u51fa\u5185\u5b58 \u6240\u4ee5, \u6709\u7d22\u5f15\u7684\u60c5\u51b5\u4e0b\u4e00\u822c\u7528NLJ(\u6548\u7387\u9ad8), \u6ca1\u7d22\u5f15\u7684\u60c5\u51b5\u4e0b\u4e00\u822c\u5206BNL(\u6548\u7387\u9ad8) \u4f18\u5316 \u901a\u8fc7\u5bf9NLJ\u548cBNL\u7684\u4e86\u89e3, \u603b\u7ed3\u4eae\u70b9\u4f18\u5316\u539f\u5219: \u5173\u8054\u5b57\u6bb5\u52a0\u7d22\u5f15 \u5c0f\u8868\u9a71\u52a8\u5927\u8868 \u6269\u5c55: \u7f16\u5199inner join\u8bed\u53e5\u65f6, \u5982\u679c\u660e\u786e\u77e5\u9053\u54ea\u4e2a\u8868\u5c0f, \u53ef\u4f7f\u7528 straight_join \u8bed\u6cd5\u6307\u5b9a\u524d\u9762\u7684\u8868\u4f5c\u4e3a\u9a71\u52a8\u8868, \u7701\u53bbMySQL\u4f18\u5316\u5668\u5224\u65ad\u7684\u8fc7\u7a0b, \u4e5f\u53ef\u63d0\u9ad8\u6548\u7387, \u5176\u8bed\u6cd5\u683c\u5f0f\u4e3a: \u5c0f\u8868 straight_join \u5927\u8868 , \u4f8b\u5982: select * from b straight_join a on b . name = a . name ; \u6ce8\u610f: straight_join \u53ea\u9002\u7528\u4e8e inner join (\u56e0\u4e3a left join \u548c right join \u5df2\u7ecf\u6307\u5b9a\u4e86\u9a71\u52a8\u8868\u548c\u88ab\u9a71\u52a8\u8868, \u5373\u6267\u884c\u987a\u5e8f) IN\u548cEXISTS\u4f18\u5316 \u539f\u5219: \u5c0f\u8868\u9a71\u52a8\u5927\u8868, \u5c0f\u8868\u7684\u5b9a\u4e49\u540cjoin 1\u3001\u5f53A\u8868\u6570\u636e\u96c6\u5927\u4e8eB\u6570\u636e\u96c6\u65f6, IN \u4f18\u4e8eEXISTS, \u4f8b\u5982: a \u8868 100 \u4e07, b \u8868 100, \u4f18\u5148\u4f7f\u7528 in: select * from a where id in ( select id from b ); \u89e3\u91ca: in \u7684\u8bed\u6cd5\u89c4\u5219\u662f\u5148\u6267\u884c in \u540e\u9762\u7684\u5b50\u67e5\u8be2, \u518d\u6267\u884c in \u524d\u9762\u7684\u8bed\u53e5, \u5373\u5148\u6267\u884c b \u540e\u6267\u884c a, \u7136\u540e\u904d\u5386 b \u627e\u5230\u6700\u7ec8\u7684\u7ed3\u679c\u96c6, \u6240\u4ee5\u5148\u6267\u884c\u7684 b \u662f\u9a71\u52a8\u8868, \u6ee1\u8db3\u5c0f\u8868\u9a71\u52a8\u5927\u8868 2\u3001\u5f53A\u8868\u6570\u636e\u96c6\u5c0f\u4e8eB\u8868\u6570\u636e\u96c6\u65f6, EXISTS\u4f18\u4e8eIN, \u4f8b\u5982: a \u8868 100, b \u8868100 \u4e07, \u4f18\u5148\u4f7f\u7528 exists: select * from a where exists ( select 1 from b where b . id = a . id ); \u89e3\u91ca: exists \u7684\u8bed\u6cd5\u89c4\u5219\u662f\u5148\u6267\u884c exists \u524d\u9762\u7684\u8bed\u53e5, \u518d\u6267\u884c\u540e\u9762\u7684\u5b50\u67e5\u8be2, \u5373\u5148\u6267\u884c a \u540e\u6267\u884c b, \u7136\u540e\u5c06 a \u653e\u5230 b \u4e2d\u9a8c\u8bc1\u6761\u4ef6, \u6240\u4ee5\u5148\u6267\u884c\u7684 a \u662f\u9a71\u52a8\u8868, \u6ee1\u8db3\u5c0f\u8868\u9a71\u52a8\u5927\u8868 \u6ce8\u610f: exists(subquery) \u53ea\u8fd4\u56de True \u6216 False, \u56e0\u6b64\u5b57\u67e5\u8be2\u4e2d\u7684 select * \u53ef\u4ee5\u7528 select 1\u4ee3\u66ff, \u5b98\u65b9\u6587\u6863\u663e\u793aexists(subquery) \u4f1a\u5ffd\u7565 select *, \u56e0\u6b64\u6ca1\u533a\u522b \u5982\u679c where \u6761\u4ef6\u7528\u7684\u4e0d\u662f\u4e3b\u952e\u5b57\u6bb5, \u5219\u8be5\u5b57\u6bb5\u5e94\u5efa\u7acb\u7d22\u5f15\u63d0\u9ad8\u67e5\u8be2\u901f\u5ea6 exists \u5f80\u5f80\u53ef\u4ee5\u7528 join \u6765\u4ee3\u66ff, \u4f55\u79cd\u65b9\u5f0f\u6700\u4f18\u9700\u5177\u4f53\u95ee\u9898\u5177\u4f53\u5206\u6790, \u4f46\u662f\u4e00\u822c\u60c5\u51b5\u4e0b\u5c3d\u91cf\u662f\u7528 join \u5c11\u7528 exists COUNT\u4f18\u5316 \u5148\u8bf4\u4e00\u4e0b\u5404\u79cdcount\u7684\u6548\u7387 \u5b57\u6bb5\u6709\u7d22\u5f15 count(*) \u2248 count(1) > count(\u5b57\u6bb5) > count(\u4e3b\u952e) \u5b57\u6bb5\u6ca1\u6709\u7d22\u5f15 count(*) \u2248 count(1) > count(\u4e3b\u952e) > count(\u5b57\u6bb5) \u6ce8\u610f: \u9488\u5bf9MySQL5.6\u30015.7\u7248\u672c\u53ca\u4ee5\u540e \u89e3\u91ca: MySQL\u5bf9count(*)\u505a\u4e86\u4f18\u5316, \u4e0d\u53d6\u5b57\u6bb5\u503c, \u6309\u884c\u7d2f\u52a0, \u6548\u7387\u6700\u9ad8 count(1), \u4e0d\u53d6\u5b57\u6bb5\u503c, \u4f7f\u7528\u5e38\u91cf1\u505a\u7edf\u8ba1(\u8ba1\u7b971\u7684\u6570\u91cf), \u6548\u7387\u5f88\u9ad8 count(\u5b57\u6bb5), \u56e0\u4e3a\u8981\u53d6\u503c(\u8ba1\u7b97\u5b57\u6bb5\u7684\u6570\u91cf), \u6240\u4ee5\u6bd4count(1)\u6548\u7387\u7565\u4f4e \u5b9e\u9645\u4e0aMySQL\u5bf9count(\u4e3b\u952e)\u4e5f\u505a\u4e86\u4f18\u5316, \u5f53\u5b58\u5728\u4e8c\u7ea7\u7d22\u5f15\u65f6, \u4f18\u5148\u4f7f\u7528\u4e8c\u7ea7\u7d22\u5f15, \u5426\u5219\u5c31\u662f\u4e3b\u952e\u7d22\u5f15 \u56e0\u4e3a\u4e3b\u952e\u7d22\u5f15\u662f\u805a\u7c07\u7d22\u5f15, \u50a8\u5b58\u7684\u6570\u636e\u91cf\u5927, \u76f8\u5bf9\u50a8\u5b58\u90e8\u5206\u6570\u636e\u7684\u4e8c\u7ea7\u7d22\u5f15\u6765\u8bb2, \u626b\u63cf\u6548\u7387\u4f4e\u4e00\u4e9b \u8fd9\u4e5f\u5c31\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u5f53\u5b57\u6bb5\u5b58\u5728\u7d22\u5f15\u65f6 count(\u5b57\u6bb5) > count(\u4e3b\u952e) \u6269\u5c55: count( )\u662fSQL92\u5b9a\u4e49\u7684\u6807\u51c6\u7edf\u8ba1\u884c\u6570\u7684\u8bed\u6cd5, \u8ddf\u6570\u636e\u5e93\u65e0\u5173, \u8ddfNUll\u548cNot Null\u65e0\u5173, \u5c31\u662f\u8bf4 count(*) \u4f1a\u7edf\u8ba1\u503c\u4e3aNull\u7684\u884c , count(\u5b57\u6bb5) \u4e0d\u4f1a\u7edf\u8ba1Null\u503c\u7684\u884c * \u4f46\u662f, \u5982\u679c\u8868\u7684\u6570\u636e\u91cf\u5f88\u5927, count\u4f9d\u7136\u4f1a\u5f88\u6162 \u4e00\u4e9b\u4e0d\u592a\u9760\u8c31\u6216\u65b9\u4fbf\u7684\u4f18\u5316\u65b9\u5f0f: \u5bf9\u4e8e myisam \u5f15\u64ce, \u81ea\u52a8\u6709\u4e00\u5f20\u8868\u81ea\u52a8\u7ef4\u62a4\u6570\u91cf, \u76f4\u63a5 select count(*) \u5c31\u884c \u5bf9\u4e8e innodb \u5f15\u64ce, \u7531\u4e8eMVCC\u673a\u5236, \u6ca1\u6709\u7ef4\u62a4\u6570\u91cf\u8868, \u53ea\u80fd\u786c\u67e5 \u5982\u679c\u5bf9\u603b\u6570\u7684\u7cbe\u5ea6\u8981\u6c42\u4e0d\u9ad8, \u53ea\u9700\u8981\u4e00\u4e2a\u5927\u7ea6\u503c, \u53ef\u4ee5\u4f7f\u7528 show table status like 'a_table' \u7684\u65b9\u5f0f\u67e5\u8be2, \u8fd9\u4e2a\u6027\u80fd\u5f88\u9ad8 \u4eba\u5de5\u5c06\u603b\u6570\u7ef4\u62a4\u5230redis\u4e2d, \u6bcf\u6b21\u5bf9\u6570\u636e\u5e93\u8fdb\u884c\u63d2\u5165\u6216\u5220\u9664\u64cd\u4f5c\u65f6\u5bf9\u5e94\u7684\u5728redis\u4e2d\u505aincr\u548cdecr\u547d\u4ee4\u7684\u64cd\u4f5c, \u7f3a\u70b9\u662f\u5f88\u96be\u4fdd\u8bc1\u4e00\u6267\u884c, \u7ed3\u679c\u53ef\u80fd\u6709\u51fa\u5165 \u63d2\u5165\u6216\u5220\u9664\u6570\u636e\u7684\u540c\u65f6\u7ef4\u62a4\u8ba1\u6570\u8868, \u4e14\u5728\u540c\u4e00\u4e2a\u4e8b\u52a1\u91cc\u64cd\u4f5c \u5982\u679c\u4e1a\u52a1\u573a\u666f\u4e2d count \u7684\u6b21\u6570\u6bd4\u8f83\u591a, \u4e14\u8868\u7684\u6570\u636e\u91cf\u5f88\u5927, \u53c8\u6709\u51c6\u786e\u7387\u7684\u8981\u6c42, \u5efa\u8bae\u4f7f\u7528\u6700\u540e\u4e00\u4e2a\u65b9\u5f0f\u7ef4\u62a4\u6570\u91cf","title":"MySQL\u4e4b\u4f18\u5316"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#mysql","text":"","title":"MySQL\u4e4b\u4f18\u5316"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#_1","text":"MySQL\u652f\u6301filesort\u548cindex\u4e24\u79cd\u6392\u5e8f\u65b9\u5f0f, Using index\u76f4\u63a5\u626b\u63cf\u7d22\u5f15\u672c\u8eab\u5b8c\u6210\u6392\u5e8f, \u6548\u7387\u9ad8, Using filesort\u662f\u6587\u4ef6\u6392\u5e8f, \u6548\u7387\u6162 order by\u6ee1\u8db3\u4f7f\u7528 Using index \u7684\u6761\u4ef6: \u7b26\u5408\u7d22\u5f15\u6700\u5de6\u524d\u7f00\u539f\u5219 where\u8bed\u53e5\u540e\u9762\u6761\u4ef6\u548corder by\u8bed\u53e5\u540e\u9762\u6761\u4ef6\u548c\u5728\u4e00\u8d77\u7b26\u5408\u6700\u5de6\u524d\u7f00\u539f\u5219 \u5c3d\u91cf\u4f7f\u7528\u7d22\u5f15\u6392\u5e8f, \u5373\u7b26\u5408\u5efa\u7acb\u7d22\u5f15\u65f6\u7684\u6700\u5de6\u524d\u7f00\u539f\u5219 order by \u7684\u6761\u4ef6\u4e0d\u5728\u7d22\u5f15\u5217\u4e0a, \u4f1a\u4f7f\u7528filesort\u6392\u5e8f, \u7d22\u5f15\u5c3d\u91cf\u4f7f\u7528\u8986\u76d6\u7d22\u5f15\u7684\u5217\u6392\u5e8f group by \u4e0e order by \u975e\u5e38\u7c7b\u4f3c, \u5b9e\u8d28\u662f\u5148\u6392\u5e8f\u540e\u5206\u7ec4, \u6309\u7167\u7d22\u5f15\u6700\u5de6\u524d\u7f00\u539f\u5219, \u5982\u679c group by \u7684\u7ed3\u679c\u4e0d\u9700\u8981\u6392\u5e8f, \u5219\u6dfb\u52a0 order by null \u7981\u6b62\u6392\u5e8f, \u4e5f\u80fd\u63d0\u9ad8\u67e5\u8be2\u6548\u7387 where \u6761\u4ef6\u9ad8\u4e8e having, \u5c3d\u91cf\u5728 where \u4e2d\u9650\u5b9a\u6761\u4ef6\u800c\u975e\u5728 having \u4e2d \u6269\u5c551: Using index \u662f\u626b\u63cf\u4e8c\u7ea7\u7d22\u5f15\u6216\u8054\u5408\u7d22\u5f15, \u4e5f\u5c31\u662f\u975e\u805a\u7c07\u7d22\u5f15 Using filesort \u662f\u626b\u63cf\u4e3b\u952e\u7d22\u5f15, \u4e5f\u5c31\u662f\u805a\u7c07\u7d22\u5f15 \u56e0\u4e3a\u805a\u7c07\u7d22\u5f15\u7d22\u5f15\u5305\u542b\u6240\u6709\u6570\u636e, \u6240\u4ee5\u4ece\u78c1\u76d8\u8bfb\u53d6ibd\u6587\u4ef6\u65f6\u52a0\u8f7d\u7684\u6570\u636e\u5927, \u6548\u7387\u4e0d\u5982\u975e\u805a\u7c07\u7d22\u5f15, \u4e5f\u5c31\u662f\u8bf4Using index \u6bd4 Using filesort \u7684\u6548\u7387\u9ad8 \u6269\u5c552: \u6392\u5e8f\u5206\u4e3a\u5355\u8def\u6392\u5e8f\u548c\u53cc\u8def\u6392\u5e8f \u5355\u8def\u6392\u5e8f\u5c31\u662f\u76f4\u63a5\u628aselect\u51fa\u6765\u7684\u7ed3\u679c\u96c6load\u5230\u5185\u5b58\u4e2d, \u7136\u540e\u6392\u5e8f, \u6392\u5e8f\u4e4b\u540e\u7684\u7ed3\u679c\u5c31\u662f\u6700\u7ec8\u7ed3\u679c \u53cc\u8def\u6392\u5e8f\u4ec5\u4ec5\u662f\u5c06 id \u548c\u6392\u5e8f\u7684\u5b57\u6bb5load\u5230\u5185\u5b58\u4e2d(\u5360\u7528\u7a7a\u95f4\u5c0f), \u7136\u540e\u6392\u5e8f, \u6392\u5e8f\u5b8c\u6210\u540e\u6839\u636e id \u518d\u6b21\u56de\u8868\u62ff\u5230\u6700\u7ec8\u7684\u7ed3\u679c \u4e24\u8005\u4f18\u70b9\u7c7b\u4f3c\u65f6\u95f4\u6362\u7a7a\u95f4, \u7a7a\u95f4\u6362\u65f6\u95f4\u7684\u610f\u601d MySQL\u901a\u8fc7\u7cfb\u7edf\u7cfb\u7edf\u53d8\u91cf max_length_for_short_data(\u9ed8\u8ba41048576\u5b57\u8282, 1M)\u7684\u5927\u5c0f\u786e\u5b9a\u4f7f\u7528\u54ea\u79cd\u6392\u5e8f\u65b9\u5f0f\u00b7 \u6240\u6709\u5b57\u6bb5\u603b\u957f\u5ea6\u5c0f\u4e8e max_length_for_short_data \u5c31\u4f7f\u7528\u5355\u8def\u6392\u5e8f, \u5426\u5219\u4f7f\u7528\u53cc\u8def\u6392\u5e8f, \u6bd4\u5982\u8868\u91cc\u5b57\u6bb5\u6bd4\u8f83\u591a, \u52a0\u8d77\u6765\u8d85\u8fc71024\u5b57\u8282, \u5c31\u4f7f\u7528\u53cc\u8def\u6392\u5e8f \u6269\u5c553: MySQL\u4f1a\u81ea\u52a8\u5206\u914d\u4e00\u5757\u5185\u5b58\u7a7a\u95f4(sort_buffer), \u5982\u679c\u6392\u5e8f\u6570\u636e\u91cf\u8f83\u5c0f, \u4f1a\u5728\u5185\u5b58\u4e2d\u4e5f\u5c31\u662fsort_buffer\u4e2d\u5b8c\u6210, \u5426\u5219\u4f1a\u5728\u78c1\u76d8\u4e2d\u751f\u6210\u4e34\u65f6\u6587\u4ef6, \u5728\u8bfb\u5230\u5185\u5b58\u4e2d\u8fdb\u884c\u6392\u5e8f, \u4e5f\u5c31\u662f\u8bf4\u6392\u5e8f\u6570\u636e\u8f83\u5927\u65f6, \u67e5\u8be2\u6548\u7387\u964d\u4f4e\u67e5\u8be2\u65f6\u95f4\u589e\u957f \u5c3d\u91cf\u4f7f\u7528limit\u9650\u5236\u7ed3\u679c\u96c6\u5927\u5c0f, \u8fd9\u6837\u6392\u5e8f\u6548\u7387\u4e5f\u4f1a\u9ad8","title":"\u6392\u5e8f\u4f18\u5316\u603b\u7ed3"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#_2","text":"\u5efa\u8868\u4e4b\u521d\u4e0d\u5efa\u7d22\u5f15, \u540e\u7eed\u6839\u636e\u5b9e\u9645\u4e1a\u52a1, \u628a\u6d89\u53ca\u5230\u76f8\u5173\u8868\u7684\u76f8\u5173sql\u62ff\u51fa\u6765\u5206\u6790, \u518d\u6839\u636e\u5206\u6790\u7ed3\u679c\u5efa\u7acb\u7d22\u5f15, \u6bd4\u5982\u5efa\u7acb\u8054\u5408\u7d22\u5f15\u65f6\u5c3d\u91cf\u8986\u76d6\u4ee3\u7801\u4e2d\u5e38\u7528\u7684\u8986\u76d6\u6761\u4ef6(where\u540e\u9762\u7684\u6761\u4ef6), \u9488\u5bf9\u4e0d\u540c\u7684\u60c5\u51b5\u8fd8\u53ef\u5efa\u7acb\u4e00\u4e2a\u6216\u591a\u4e2a\u8054\u5408\u7d22\u5f15 \u5bf9\u4e8e\u5dee\u5f02\u8f83\u5c0f\u7684\u5b57\u6bb5(\u5373\u5c0f\u57fa\u6570\u5b57\u6bb5), \u4e0d\u8981\u5efa\u7acb\u7d22\u5f15, \u610f\u4e49\u4e0d\u5927, \u6bd4\u5982gender, \u4e0d\u662f0\u5c31\u662f1, \u65e0\u6cd5\u4f53\u73b0\u4e8c\u5206\u67e5\u627e\u7684\u4f18\u52bf, \u6240\u4ee5\u901a\u8fc7distinct\u67e5\u770b\u5b57\u6bb5\u7684\u503c\u5360\u7528\u603b\u6761\u6570\u7684\u6bd4\u4f8b, \u9ad8\u7684\u5efa\u8bae\u5efa\u7acb\u7d22\u5f15, \u4f4e\u7684\u4e0d\u5efa\u8bae \u5c3d\u91cf\u5bf9\u5360\u7528\u7a7a\u95f4\u8f83\u5c0f\u5b57\u6bb5\u7c7b\u578b\u8bbe\u7f6e\u7d22\u5f15, \u4f8b\u5982 tinyint, \u56e0\u4e3a\u5360\u7528\u78c1\u76d8\u7a7a\u95f4\u5c0f, \u67e5\u8d77\u6765\u6548\u7387\u9ad8 \u5bf9\u4e8e\u5360\u7528\u7a7a\u95f4\u8f83\u5927\u7684\u5b57\u6bb5, \u4f8b\u5982vachar(255), \u4f7f\u7528\u524d\u51e0\u4e2a\u5b57\u6bb5\u5efa\u7acb\u7d22\u5f15, \u7c7b\u4f3c key index(name(20), age, birthday) , \u4f46\u8fd9\u6837\u505a\u7684\u7f3a\u70b9\u662f order by \u548c group by \u8be5\u5b57\u6bb5\u65f6\u65e0\u6cd5\u4f7f\u7528\u7d22\u5f15 where\u548corder by\u51b2\u7a81\u65f6, \u4f18\u5148\u9488\u5bf9where\u6761\u4ef6\u7684\u5b57\u6bb5\u5efa\u7acb\u7d22\u5f15(\u6bd4\u5982key index(name(20), \u5426\u5219\u5c31\u662f(key index(name)) \u5bf9\u4e8e\u6162sql\u9488\u5bf9\u6027\u4f18\u5316(\u9ed8\u8ba4\u5b9a\u4e49\u67e5\u8be2\u65f6\u95f4\u8d85\u8fc710s\u7684\u662f\u6162sql, MySQL\u4f1a\u8bb0\u5f55\u8fd9\u4e9bsql\u5230\u4e00\u4e2a\u7279\u5b9a\u7684\u6587\u4ef6\u4e2d), \u6ce8\u610f, \u9ed8\u8ba4\u6ca1\u6709\u5f00\u542f\u8fd9\u9879\u529f\u80fd, \u56e0\u4e3a\u4f1a\u5f71\u54cd\u6027\u80fd, \u5982\u679c\u662f\u4e3b\u4ece\u8bbe\u8ba1, \u53ef\u4ee5\u5728\u5907\u5e93\u5f00\u542f \u5bf9\u4e8e\u5927\u6982\u7387\u4f7f\u7528\u8303\u56f4\u4f5c\u4e3a\u6761\u4ef6\u7684\u5b57\u6bb5, \u5efa\u7acb\u8054\u5408\u7d22\u5f15\u65f6\u8981\u653e\u5230\u6700\u540e, \u4f8b\u5982age, \u90a3\u4e48\u5c31\u5e94\u8be5 key (name, gender, age), \u56e0\u4e3awhere\u6761\u4ef6\u540e\u5b57\u6bb5\u4f7f\u7528 > \u7b49\u8303\u56f4\u6761\u4ef6\u540e, and \u540e\u9762\u7684\u5b57\u6bb5\u4fbf\u65e0\u6cd5\u4f7f\u7528\u7d22\u5f15\u4e86 \u6838\u5fc3\u601d\u8def\u5c31\u662f\u5c3d\u91cf\u5229\u7528\u4e00\u4e24\u4e2a\u590d\u6742\u7684\u591a\u5b57\u6bb5\u8054\u5408\u7d22\u5f15, \u8986\u76d680%\u7684\u4e1a\u52a1\u573a\u666f, \u7136\u540e\u4f7f\u7528\u4e00\u4e24\u4e2a\u8f85\u52a9\u7d22\u5f15(\u8054\u5408\u7d22\u5f15\u6216\u5355\u5b57\u6bb5\u7d22\u5f15)\u89e3\u51b3\u5269\u4e0b\u7684\u4e1a\u52a1\u573a\u666f, \u4fdd\u8bc1\u5927\u6570\u91cf\u7ea7\u522b\u7684\u67e5\u8be2\u90fd\u80fd\u4f7f\u7528\u7d22\u5f15, \u8fd9\u6837\u65e2\u53ef\u4fdd\u8bc1\u67e5\u8be2\u901f\u5ea6\u548c\u6027\u80fd\u4e0d\u4f4e","title":"\u7d22\u5f15\u8bbe\u8ba1\u539f\u5219"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#limit","text":"","title":"Limit\u4f18\u5316"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#1","text":"select * from a_table limit 10000 , 10 ; \u5b9e\u9645\u4e0aMySQL\u67e5\u8be2\u4e8610010\u6761\u6570\u636e, \u7136\u540e\u820d\u5f03\u524d10000\u6761, \u53ea\u5c55\u793a\u6700\u540e10\u6761, \u6548\u7387\u4f4e\u4e0b \u4f18\u5316: select * from a_table where id > 10000 limit 10 ; \u4f7f\u7528\u524d\u63d0, \u81ea\u589e\u4e14\u8fde\u7eed \u7684\u4e3b\u952e\u6392\u5e8f\u5206\u9875\u67e5\u8be2 \u5047\u8bbe\u4e2d\u95f4\u5220\u9664\u4e86\u67d0\u4e9b\u6570\u636e, \u4e0a\u8ff0\u4e24\u6761\u8bed\u53e5\u67e5\u8be2\u7684\u7ed3\u679c\u4f1a\u4e0d\u4e00\u6837, \u539f\u56e0\u5c31\u662f limit \u672c\u8d28\u4f9d\u7136\u662f\u4ece\u7b2c\u4e00\u6761\u6570\u636e\u5f00\u59cb\u67e5\u8be2\u8ba1\u7b97","title":"\u793a\u4f8b1:"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#2","text":"select * from a_tble order by name limit 10000 , 10 ; \u5047\u8bbe a_table \u8868\u4e2d\u6709\u8054\u5408\u7d22\u5f15(name, age, job), \u7406\u8bba\u4e0a order by name \u4f1a\u8d70\u7d22\u5f15, \u4f46\u5b9e\u9645\u4e0a\u4e0d\u4f1a, \u539f\u56e0\u5c31\u662f\u524d\u9762\u591a\u6b21\u63d0\u5230\u7684, MySQL \u8ba4\u4e3a\u6570\u636e\u91cf\u8f83\u5927, \u4f7f\u7528\u8054\u5408\u7d22\u5f15\u626b\u63cf\u6570\u636e\u540e\u8fd8\u9700\u8981\u56de\u8868, \u4e0d\u5982\u76f4\u63a5\u5168\u8868\u626b\u63cf \u4f7f\u7528 Explain \u53ef\u4ee5\u770b\u5230 type \u662f ALL, key \u4e3a\u7a7a, extra \u662f Using filesort, \u8bc1\u660e\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15 \u4f18\u5316: select * from a_table as a inner join ( select id from a_table order by name limit 10000 , 10 ) as b on a . id = b . id ; \u89e3\u91ca: \u56e0\u4e3a, select id from a_table order by name limit 10000, 10 \u4e0d\u4f7f\u7528 select * \u800c\u662f select id , \u5373\u4f7f\u7528\u4e86\u8986\u76d6\u7d22\u5f15, \u6b64\u65f6 order by name \u8d70\u4e86\u7d22\u5f15, \u4f7f\u7528 explain \u53ef\u4ee5\u770b\u5230 type \u662f index, extra \u662f Using index, \u800c\u4e14\u6700\u7ec8\u751f\u6210\u7684\u8fd9\u5f20\u4e34\u65f6\u8868\u53ea\u670910\u6761\u6570\u636e \u800c\u4e14, inner join \u7684\u6761\u4ef6\u662f on a.id = b.id \u662f\u4e3b\u952e\u5173\u8054, \u5176 type \u662f eq_rf, key \u662f PRIMARY, \u6240\u4ee5\u548c\u4e0a\u9762\u7684\u4e34\u65f6\u8868\u8054\u8868\u67e5\u8be2\u7684\u6700\u7ec8\u6548\u7387\u5f88\u9ad8","title":"\u793a\u4f8b2:"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#join","text":"\u5148\u8bf4\u4e24\u4e2a\u7b97\u6cd5","title":"Join\u4f18\u5316"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#_3","text":"\u5373 Nested-Loop Join(NLJ) \u7b97\u6cd5 \u524d\u63d0: \u4e24\u5f20\u8868 a \u548c b, \u6570\u636e\u7ed3\u6784\u4e00\u6a21\u4e00\u6837, \u5176\u4e2d name \u5b57\u6bb5\u5efa\u7acb\u7d22\u5f15, a\u8868\u4e00\u4e07\u6761\u6570\u636e, b\u8868100\u6761\u6570\u636e \u8bed\u53e5: select * from a inner join b on a . name = b . name ; \u6267\u884c: 1\u3001\u5168\u8868\u626b\u63cf b \u8868, \u62ff\u5230\u4e00\u6761\u8bb0\u5f55 2\u3001\u62ff\u5230 1 \u4e2d\u7684\u7ed3\u679c, \u901a\u8fc7 name \u7d22\u5f15\u53bb a \u8868\u4e2d\u5b9a\u4f4d 3\u3001\u91cd\u590d\u6b65\u9aa4 1 \u548c 2, \u62ff\u5230\u6700\u7ec8\u7ed3\u679c \u671f\u95f4, b \u8868\u626b\u63cf100\u6b21, \u7531\u4e8e\u4f7f\u7528\u4e86\u6761\u4ef6 on a.name = b.name \u4f7f\u7528\u4e86\u7d22\u5f15, \u4e5f\u53ea\u626b\u63cf\u4e86100\u6b21 \u7b97\u6cd5\u89e3\u91ca: MySQL\u7684\u4f18\u5316\u5668\u4e00\u822c\u4f1a\u9009\u62e9 \u5c0f\u8868\u505a\u9a71\u52a8\u8868 , \u5927\u8868\u505a\u88ab\u9a71\u52a8\u8868 , \u5373 a \u662f\u88ab\u9a71\u52a8\u8868, b \u662f\u9a71\u52a8\u8868, \u6267\u884c\u8fc7\u7a0b\u4e2d\u5148\u6267\u884c\u9a71\u52a8\u8868 \u5bf9\u4e8e left join, \u5de6\u8868\u662f\u9a71\u52a8\u8868, \u53f3\u8868\u662f\u88ab\u9a71\u52a8\u8868 \u5bf9\u4e8e right join, \u6b63\u597d\u548c left join \u76f8\u53cd \u5c0f\u8868\u7684\u5b9a\u4e49\u662f \u7ecf\u8fc7\u6ee4\u6761\u4ef6\u7b5b\u9009\u540e\u6570\u636e\u91cf\u5c0f\u7684\u8868 \u662f\u5c0f\u8868, \u4e0d\u662f\u5355\u7eaf\u7684\u6307\u6574\u4e2a\u8868\u6570\u636e\u91cf\u5c0f, \u5982\u679c\u6ca1\u6709\u8fc7\u6ee4\u6761\u4ef6\u90a3\u5c31\u6307\u6574\u4e2a\u8868 \u4f7f\u7528 explain \u6ca1\u6709\u5728\u7ed3\u679c\u7684 extra \u4e2d\u770b\u5230 Using join buffer, \u5219\u8868\u793a\u5f53\u524d jon \u8bed\u53e5\u4f7f\u7528\u4e86 NLJ \u7b97\u6cd5 \u5982\u679c\u88ab\u9a71\u52a8\u8868\u5173\u8054\u7684\u5b57\u6bb5\u6ca1\u6709\u7d22\u5f15, NLJ \u7b97\u6cd5\u6548\u7387\u4f4e\u4e0b, MySQL\u4f1a\u9009\u62e9 BNL \u7b97\u6cd5","title":"\u5d4c\u5957\u5faa\u73af\u8fde\u63a5\u7b97\u6cd5"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#_4","text":"\u5373 Block Nested-Loop Join(BNL) \u7b97\u6cd5 \u8bed\u53e5: select * from a inner join b on a . age = b . age ; \u7531\u4e8e age \u5b57\u6bb5\u6ca1\u6709\u7d22\u5f15, \u6240\u4ee5\u4e0d\u4f1a\u4f7f\u7528 NLJ \u7b97\u6cd5, \u800c\u662f BNL\u7b97\u6cd5 \u6267\u884c: \u8868\u5c0f\u8868 b, \u5373\u9a71\u52a8\u8868\u7684\u6570\u636e\u653e\u5230 join_buffer \u4e2d \u628a\u5927\u8868 a, \u5373\u88ab\u9a71\u52a8\u8868\u4e2d\u7684\u6bcf\u4e00\u884c, \u5355\u72ec\u53d6\u51fa\u6765\u548c join_buffer \u4e2d\u7684\u6570\u636e\u6bd4\u5bf9 \u8fd4\u56de\u6ee1\u8db3 join \u6761\u4ef6\u7684\u6570\u636e \u671f\u95f4, \u4e24\u5f20\u8868\u90fd\u662f\u5168\u8868\u626b\u63cf, \u5171\u626b\u63cf 10000 + 100 = 10100 \u6b21, \u540c\u65f6 \u7531\u4e8e join_buffer \u8868\u4e2d\u7684 \u6570\u636e\u5728\u5185\u5b58\u4e2d\u4e14\u662f\u65e0\u5e8f\u7684 , \u4ece\u8868 a \u4e2d\u53d6\u51fa\u6765\u7684\u6570\u636e\u6700\u591a\u8981\u5728\u8868 b \u4e2d\u5224\u65ad 100 \u6b21, \u6700\u540e\u5185\u5b58\u4e2d\u5224\u65ad\u7684\u6570\u91cf\u7ea7\u662f 10000 * 100 , \u5373\u767e\u4e07\u7ea7 PS: join_buffer \u6570\u636e\u5728\u5185\u5b58\u4e2d, \u5185\u5b58\u7a7a\u95f4\u5927\u5c0f\u7531\u53c2\u6570 join_buffer_size \u51b3\u5b9a, \u9ed8\u8ba4\u503c\u597d\u50cf\u662f256K, \u5982\u679c\u6b64\u503c\u8f83\u5c0f\u653e\u4e0d\u4e0b b \u8868\u6570\u636e, \u5219\u4f1a\u5206\u6bb5\u653e, \u5373\u5148\u628a b \u8868\u7684\u4e00\u90e8\u5206\u6570\u636e\u653e\u5230 join_buffer \u5224\u65ad, \u5b8c\u6210\u4e4b\u540e\u518d\u653e\u4e00\u90e8\u5206\u6570\u636e, \u76f4\u5230\u653e\u5b8c, \u65e0\u5f62\u4e2d\u589e\u52a0\u4e86\u8ba1\u7b97\u65f6\u95f4 \u6211\u731c BNL \u7b97\u6cd5\u7684\u4e2d\u7684 B, \u5373 block \u5c31\u662f\u6307\u5185\u5b58\u4e2d\u8fd9\u4e00\u5757\u5757\u7684 join_buffer \u73b0\u5728\u8bf4\u8bf4\u4e3a\u5565\u8bf4 \u8fd9\u79cd\u60c5\u51b5(\u5373 on \u7684\u6761\u4ef6\u7684\u5b57\u6bb5\u6ca1\u6709\u7d22\u5f15)\u4e0b, NLJ\u6548\u7387\u4f4e, BNL\u6548\u7387\u9ad8, \u56e0\u4e3aNLJ\u662f\u626b\u63cf\u7d22\u5f15, \u6240\u7d22\u5f15\u6587\u4ef6\u5728\u78c1\u76d8\u4e0a, NLJ\u662f\u78c1\u76d8\u626b\u63cf, \u800cBNL\u51fa\u5185\u5b58 \u6240\u4ee5, \u6709\u7d22\u5f15\u7684\u60c5\u51b5\u4e0b\u4e00\u822c\u7528NLJ(\u6548\u7387\u9ad8), \u6ca1\u7d22\u5f15\u7684\u60c5\u51b5\u4e0b\u4e00\u822c\u5206BNL(\u6548\u7387\u9ad8)","title":"\u57fa\u4e8e\u5757\u7684\u5d4c\u5957\u5faa\u73af\u94fe\u63a5\u7b97\u6cd5"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#_5","text":"\u901a\u8fc7\u5bf9NLJ\u548cBNL\u7684\u4e86\u89e3, \u603b\u7ed3\u4eae\u70b9\u4f18\u5316\u539f\u5219: \u5173\u8054\u5b57\u6bb5\u52a0\u7d22\u5f15 \u5c0f\u8868\u9a71\u52a8\u5927\u8868 \u6269\u5c55: \u7f16\u5199inner join\u8bed\u53e5\u65f6, \u5982\u679c\u660e\u786e\u77e5\u9053\u54ea\u4e2a\u8868\u5c0f, \u53ef\u4f7f\u7528 straight_join \u8bed\u6cd5\u6307\u5b9a\u524d\u9762\u7684\u8868\u4f5c\u4e3a\u9a71\u52a8\u8868, \u7701\u53bbMySQL\u4f18\u5316\u5668\u5224\u65ad\u7684\u8fc7\u7a0b, \u4e5f\u53ef\u63d0\u9ad8\u6548\u7387, \u5176\u8bed\u6cd5\u683c\u5f0f\u4e3a: \u5c0f\u8868 straight_join \u5927\u8868 , \u4f8b\u5982: select * from b straight_join a on b . name = a . name ; \u6ce8\u610f: straight_join \u53ea\u9002\u7528\u4e8e inner join (\u56e0\u4e3a left join \u548c right join \u5df2\u7ecf\u6307\u5b9a\u4e86\u9a71\u52a8\u8868\u548c\u88ab\u9a71\u52a8\u8868, \u5373\u6267\u884c\u987a\u5e8f)","title":"\u4f18\u5316"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#inexists","text":"\u539f\u5219: \u5c0f\u8868\u9a71\u52a8\u5927\u8868, \u5c0f\u8868\u7684\u5b9a\u4e49\u540cjoin 1\u3001\u5f53A\u8868\u6570\u636e\u96c6\u5927\u4e8eB\u6570\u636e\u96c6\u65f6, IN \u4f18\u4e8eEXISTS, \u4f8b\u5982: a \u8868 100 \u4e07, b \u8868 100, \u4f18\u5148\u4f7f\u7528 in: select * from a where id in ( select id from b ); \u89e3\u91ca: in \u7684\u8bed\u6cd5\u89c4\u5219\u662f\u5148\u6267\u884c in \u540e\u9762\u7684\u5b50\u67e5\u8be2, \u518d\u6267\u884c in \u524d\u9762\u7684\u8bed\u53e5, \u5373\u5148\u6267\u884c b \u540e\u6267\u884c a, \u7136\u540e\u904d\u5386 b \u627e\u5230\u6700\u7ec8\u7684\u7ed3\u679c\u96c6, \u6240\u4ee5\u5148\u6267\u884c\u7684 b \u662f\u9a71\u52a8\u8868, \u6ee1\u8db3\u5c0f\u8868\u9a71\u52a8\u5927\u8868 2\u3001\u5f53A\u8868\u6570\u636e\u96c6\u5c0f\u4e8eB\u8868\u6570\u636e\u96c6\u65f6, EXISTS\u4f18\u4e8eIN, \u4f8b\u5982: a \u8868 100, b \u8868100 \u4e07, \u4f18\u5148\u4f7f\u7528 exists: select * from a where exists ( select 1 from b where b . id = a . id ); \u89e3\u91ca: exists \u7684\u8bed\u6cd5\u89c4\u5219\u662f\u5148\u6267\u884c exists \u524d\u9762\u7684\u8bed\u53e5, \u518d\u6267\u884c\u540e\u9762\u7684\u5b50\u67e5\u8be2, \u5373\u5148\u6267\u884c a \u540e\u6267\u884c b, \u7136\u540e\u5c06 a \u653e\u5230 b \u4e2d\u9a8c\u8bc1\u6761\u4ef6, \u6240\u4ee5\u5148\u6267\u884c\u7684 a \u662f\u9a71\u52a8\u8868, \u6ee1\u8db3\u5c0f\u8868\u9a71\u52a8\u5927\u8868 \u6ce8\u610f: exists(subquery) \u53ea\u8fd4\u56de True \u6216 False, \u56e0\u6b64\u5b57\u67e5\u8be2\u4e2d\u7684 select * \u53ef\u4ee5\u7528 select 1\u4ee3\u66ff, \u5b98\u65b9\u6587\u6863\u663e\u793aexists(subquery) \u4f1a\u5ffd\u7565 select *, \u56e0\u6b64\u6ca1\u533a\u522b \u5982\u679c where \u6761\u4ef6\u7528\u7684\u4e0d\u662f\u4e3b\u952e\u5b57\u6bb5, \u5219\u8be5\u5b57\u6bb5\u5e94\u5efa\u7acb\u7d22\u5f15\u63d0\u9ad8\u67e5\u8be2\u901f\u5ea6 exists \u5f80\u5f80\u53ef\u4ee5\u7528 join \u6765\u4ee3\u66ff, \u4f55\u79cd\u65b9\u5f0f\u6700\u4f18\u9700\u5177\u4f53\u95ee\u9898\u5177\u4f53\u5206\u6790, \u4f46\u662f\u4e00\u822c\u60c5\u51b5\u4e0b\u5c3d\u91cf\u662f\u7528 join \u5c11\u7528 exists","title":"IN\u548cEXISTS\u4f18\u5316"},{"location":"mysql/MySQL%E4%B9%8B%E4%BC%98%E5%8C%96/#count","text":"\u5148\u8bf4\u4e00\u4e0b\u5404\u79cdcount\u7684\u6548\u7387 \u5b57\u6bb5\u6709\u7d22\u5f15 count(*) \u2248 count(1) > count(\u5b57\u6bb5) > count(\u4e3b\u952e) \u5b57\u6bb5\u6ca1\u6709\u7d22\u5f15 count(*) \u2248 count(1) > count(\u4e3b\u952e) > count(\u5b57\u6bb5) \u6ce8\u610f: \u9488\u5bf9MySQL5.6\u30015.7\u7248\u672c\u53ca\u4ee5\u540e \u89e3\u91ca: MySQL\u5bf9count(*)\u505a\u4e86\u4f18\u5316, \u4e0d\u53d6\u5b57\u6bb5\u503c, \u6309\u884c\u7d2f\u52a0, \u6548\u7387\u6700\u9ad8 count(1), \u4e0d\u53d6\u5b57\u6bb5\u503c, \u4f7f\u7528\u5e38\u91cf1\u505a\u7edf\u8ba1(\u8ba1\u7b971\u7684\u6570\u91cf), \u6548\u7387\u5f88\u9ad8 count(\u5b57\u6bb5), \u56e0\u4e3a\u8981\u53d6\u503c(\u8ba1\u7b97\u5b57\u6bb5\u7684\u6570\u91cf), \u6240\u4ee5\u6bd4count(1)\u6548\u7387\u7565\u4f4e \u5b9e\u9645\u4e0aMySQL\u5bf9count(\u4e3b\u952e)\u4e5f\u505a\u4e86\u4f18\u5316, \u5f53\u5b58\u5728\u4e8c\u7ea7\u7d22\u5f15\u65f6, \u4f18\u5148\u4f7f\u7528\u4e8c\u7ea7\u7d22\u5f15, \u5426\u5219\u5c31\u662f\u4e3b\u952e\u7d22\u5f15 \u56e0\u4e3a\u4e3b\u952e\u7d22\u5f15\u662f\u805a\u7c07\u7d22\u5f15, \u50a8\u5b58\u7684\u6570\u636e\u91cf\u5927, \u76f8\u5bf9\u50a8\u5b58\u90e8\u5206\u6570\u636e\u7684\u4e8c\u7ea7\u7d22\u5f15\u6765\u8bb2, \u626b\u63cf\u6548\u7387\u4f4e\u4e00\u4e9b \u8fd9\u4e5f\u5c31\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u5f53\u5b57\u6bb5\u5b58\u5728\u7d22\u5f15\u65f6 count(\u5b57\u6bb5) > count(\u4e3b\u952e) \u6269\u5c55: count( )\u662fSQL92\u5b9a\u4e49\u7684\u6807\u51c6\u7edf\u8ba1\u884c\u6570\u7684\u8bed\u6cd5, \u8ddf\u6570\u636e\u5e93\u65e0\u5173, \u8ddfNUll\u548cNot Null\u65e0\u5173, \u5c31\u662f\u8bf4 count(*) \u4f1a\u7edf\u8ba1\u503c\u4e3aNull\u7684\u884c , count(\u5b57\u6bb5) \u4e0d\u4f1a\u7edf\u8ba1Null\u503c\u7684\u884c * \u4f46\u662f, \u5982\u679c\u8868\u7684\u6570\u636e\u91cf\u5f88\u5927, count\u4f9d\u7136\u4f1a\u5f88\u6162 \u4e00\u4e9b\u4e0d\u592a\u9760\u8c31\u6216\u65b9\u4fbf\u7684\u4f18\u5316\u65b9\u5f0f: \u5bf9\u4e8e myisam \u5f15\u64ce, \u81ea\u52a8\u6709\u4e00\u5f20\u8868\u81ea\u52a8\u7ef4\u62a4\u6570\u91cf, \u76f4\u63a5 select count(*) \u5c31\u884c \u5bf9\u4e8e innodb \u5f15\u64ce, \u7531\u4e8eMVCC\u673a\u5236, \u6ca1\u6709\u7ef4\u62a4\u6570\u91cf\u8868, \u53ea\u80fd\u786c\u67e5 \u5982\u679c\u5bf9\u603b\u6570\u7684\u7cbe\u5ea6\u8981\u6c42\u4e0d\u9ad8, \u53ea\u9700\u8981\u4e00\u4e2a\u5927\u7ea6\u503c, \u53ef\u4ee5\u4f7f\u7528 show table status like 'a_table' \u7684\u65b9\u5f0f\u67e5\u8be2, \u8fd9\u4e2a\u6027\u80fd\u5f88\u9ad8 \u4eba\u5de5\u5c06\u603b\u6570\u7ef4\u62a4\u5230redis\u4e2d, \u6bcf\u6b21\u5bf9\u6570\u636e\u5e93\u8fdb\u884c\u63d2\u5165\u6216\u5220\u9664\u64cd\u4f5c\u65f6\u5bf9\u5e94\u7684\u5728redis\u4e2d\u505aincr\u548cdecr\u547d\u4ee4\u7684\u64cd\u4f5c, \u7f3a\u70b9\u662f\u5f88\u96be\u4fdd\u8bc1\u4e00\u6267\u884c, \u7ed3\u679c\u53ef\u80fd\u6709\u51fa\u5165 \u63d2\u5165\u6216\u5220\u9664\u6570\u636e\u7684\u540c\u65f6\u7ef4\u62a4\u8ba1\u6570\u8868, \u4e14\u5728\u540c\u4e00\u4e2a\u4e8b\u52a1\u91cc\u64cd\u4f5c \u5982\u679c\u4e1a\u52a1\u573a\u666f\u4e2d count \u7684\u6b21\u6570\u6bd4\u8f83\u591a, \u4e14\u8868\u7684\u6570\u636e\u91cf\u5f88\u5927, \u53c8\u6709\u51c6\u786e\u7387\u7684\u8981\u6c42, \u5efa\u8bae\u4f7f\u7528\u6700\u540e\u4e00\u4e2a\u65b9\u5f0f\u7ef4\u62a4\u6570\u91cf","title":"COUNT\u4f18\u5316"},{"location":"mysql/MySQL%E4%BA%8B%E5%8A%A1%E5%8F%8A%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E%E9%94%81%E6%9C%BA%E5%88%B6/","text":"MySQL\u4e8b\u52a1\u53ca\u9694\u79bb\u7ea7\u522b\u4e0e\u9501\u673a\u5236 \u4e8b\u52a1ACID\u5c5e\u6027 \u539f\u5b50\u6027(Atomicity) \u4e8b\u52a1\u662f\u4e00\u4e2a\u539f\u5b50\u64cd\u4f5c\u5355\u5143, \u8981\u7b26\u5408\u4e0d\u53ef\u5206\u5272\u539f\u5219, \u5373\u6240\u6709 \u64cd\u4f5c(CURD) \u8981\u4e48\u5168\u90e8\u6210\u529f\u8981\u4e48\u5168\u90e8\u5931\u8d25 \u4e00\u81f4\u6027(Consistent) \u4e8b\u52a1\u4ece\u5f00\u59cb\u5230\u7ed3\u675f, \u6570\u636e\u5fc5\u987b\u4fdd\u6301\u4e00\u81f4\u6027, \u5373\u6240\u6709\u64cd\u4f5c\u90fd\u5fc5\u987b\u5e94\u7528\u4e8e \u6570\u636e , \u4ee5\u4fdd\u6301\u6570\u636e\u7684\u5b8c\u6574\u6027 \u9694\u79bb\u6027(Isolation) \u6bcf\u4e2a\u4e8b\u52a1\u4e92\u76f8\u9694\u79bb, \u6bcf\u4e2a\u4e8b\u52a1\u5185\u90e8\u7684\u6570\u636e\u4e92\u4e0d\u5f71\u54cd, \u5177\u4f53\u662f\u5426\u53d7\u5f71\u54cd\u4ee5\u53ca\u53d7\u5f71\u54cd\u8303\u56f4\u53ef\u901a\u8fc7\u9694\u79bb\u7ea7\u522b\u8c03\u6574 \u6301\u4e45\u6027(Durable) \u4e8b\u52a1\u5b8c\u6210\u540e, \u5e94\u7528\u4e8e\u6570\u636e\u7684\u4fee\u6539\u662f\u6c38\u4e45\u6027\u4e0d\u53ef\u4e22\u5931\u7684 \u5e76\u53d1\u95ee\u9898 \u810f\u5199, \u4e5f\u53eb\u66f4\u65b0\u4e22\u5931(Lost Update) \u591a\u4e2a\u4e8b\u52a1\u5bf9\u540c\u4e00\u4e2a\u6570\u636e\u64cd\u4f5c, \u5373 \u6700\u540e\u7684\u66f4\u65b0\u8986\u76d6\u4e86\u5176\u4ed6\u4e8b\u52a1\u7684\u66f4\u65b0 \u810f\u8bfb(Dirty Reads) \u4e00\u4e2a\u4e8b\u52a1\u5bf9\u6570\u636e\u8fdb\u884c\u4e86\u64cd\u4f5c, \u4f46\u5c1a\u672a\u63d0\u4ea4, \u6b64\u65f6\u8be5\u6570\u636e\u5904\u4e8e\u4e0d\u4e00\u81f4\u72b6\u6001, \u5982\u679c\u4e0d\u52a0\u63a7\u5236\u4efb\u7531\u5176\u4ed6\u4e8b\u52a1\u8bfb\u53d6\u8be5\u6570\u636e, \u8fd9\u79cd\u73b0\u8c61\u5c31\u662f\u810f\u8bfb \u4e0d\u53ef\u91cd\u8bfb(Non- Repeatable Reads) \u4e8b\u52a1\u5f00\u59cb\u540e, \u91cd\u590d\u8bfb\u53d6\u67d0\u4e2a\u6570\u636e, \u53d1\u73b0\u7ed3\u679c\u53d1\u751f\u53d8\u5316, \u5373 \u4e8b\u52a1\u5185\u90e8\u7684\u76f8\u540c\u67e5\u8be2\u8bed\u53e5\u5728\u4e0d\u540c\u65f6\u523b\u8bfb\u53d6\u7684\u6570\u636e\u7ed3\u679c\u4e0d\u4e00\u6837, \u4e0d\u7b26\u5408\u9694\u79bb\u6027 , \u8fd9\u79cd\u73b0\u8c61\u5c31\u662f\u4e0d\u53ef\u91cd\u590d\u8bfb \u5e7b\u8bfb(Phantom Reads) \u4e00\u4e2a\u4e8b\u52a1\u6309\u7167\u76f8\u540c\u7684\u6761\u4ef6\u91cd\u65b0\u8bfb\u53d6\u4e4b\u524d\u68c0\u7d22\u8fc7\u7684\u6570\u636e, \u53d1\u73b0\u4e86\u5176\u4ed6\u4e8b\u52a1\u63d2\u5165\u4e86\u6ee1\u8db3\u5176\u67e5\u8be2\u6761\u4ef6\u7684\u65b0\u6570\u636e, \u5373 \u67d0\u4e8b\u52a1\u8bfb\u53d6\u5230\u4e86\u5176\u4ed6\u4e8b\u52a1\u63d0\u4ea4\u7684\u65b0\u589e\u6570\u636e, \u4e0d\u7b26\u5408\u9694\u79bb\u6027 , \u8fd9\u79cd\u73b0\u8c61\u53eb\u505a\u5e7b\u8bfb \u4e8b\u52a1\u9694\u79bb\u7ea7\u522b \u4e0d\u540c\u7684\u9694\u79bb\u7ea7\u522b\u53ef\u89e3\u51b3\u4e0d\u540c\u7684\u5e76\u53d1\u95ee\u9898, \u5982\u4e0b\u8868 \u9694\u79bb\u7ea7\u522b \u810f\u8bfb \u4e0d\u53ef\u91cd\u590d\u8bfb \u5e7b\u8bfb \u8bfb\u672a\u63d0\u4ea4(Read uncommitted) \u662f \u662f \u662f \u8bfb\u5df2\u63d0\u4ea4(Read committed) \u5426 \u662f \u662f \u53ef\u91cd\u590d\u8bfb(Repeatable read) \u5426 \u5426 \u662f \u53ef\u4e32\u884c\u5316(Serializable) \u5426 \u5426 \u5426 \u56e0\u4e3a\u4e8b\u52a1\u9694\u79bb\u662f\u5b9e\u8d28\u4e0a\u5c31\u662f\u4f7f\u4e8b\u52a1\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u201c\u4e32\u884c\u201d\u800c\u975e\u201c\u5e76\u53d1\u201d, \u6240\u4ee5\u6570\u636e\u5e93\u7684\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b\u8d8a\u4e25\u683c, \u5e76\u53d1\u526f\u4f5c\u7528\u8d8a\u5c0f, \u4ee3\u4ef7\u8d8a\u5927 \u67e5\u770b\u5f53\u524d\u7684\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b : show variables like 'tx_isolation'; \u8bbe\u7f6e\u5f53\u524d\u7684\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b : set tx_isolation='repeatable-read'; \u8bfb\u672a\u63d0\u4ea4\u662f read-uncommitted , \u8bfb\u5df2\u63d0\u4ea4\u662f read-commited , \u53ef\u4e32\u884c\u5316\u662f serializable \u4e0d\u540c\u7684session\u53ef\u4ee5\u8bbe\u7f6e\u4e0d\u540c\u7684\u9694\u79bb\u7ea7\u522b MySQL\u9ed8\u8ba4\u7684\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b\u662f\u53ef\u91cd\u590d\u8bfb \u810f\u8bfb\u89e3\u91ca: \u4ee5\u810f\u8bfb\u4e3a\u4f8b, \u5728\u4e24\u4e2asession\u4e2d\u5747\u8bbe\u7f6e\u9694\u79bb\u7ea7\u522b\u662f\u8bfb\u672a\u63d0\u4ea4, \u5f53session1\u4e2dupdate\u67d0\u4e2a\u6570\u636e, \u4f46\u6ca1\u6709\u63d0\u4ea4\u65f6, session2\u4e2d\u53ef\u4ee5\u770b\u5230session1\u4e2d\u4fee\u6539\u540e\u7684\u6570\u636e; \u6b64\u65f6\u8fd9\u4e2a\u5c31\u662f\u810f\u6570\u636e, \u5982\u679csession2\u4ee5\u8fd9\u4e2a\u810f\u6570\u636e\u4e3a\u57fa\u51c6, \u518d\u6b21\u4fee\u6539\u63d0\u4ea4, \u4f46\u662fsession1\u56de\u6eda\u4e86, \u90a3\u4e48session2\u6700\u7ec8\u63d0\u4ea4\u7684\u6570\u636e\u662f\u4e0d\u5bf9\u7684 \u5982\u679c\u9694\u79bb\u7ea7\u522b\u662f\u8bfb\u5df2\u63d0\u4ea4, \u90a3\u4e48session2\u4e2d\u65e0\u6cd5\u770b\u5230session1\u4e2d\u4fee\u6539\u540e\u7684\u6570\u636e \u5982\u679c\u9694\u79bb\u7ea7\u522b\u662f\u53ef\u91cd\u590d\u8bfb, session1\u8bfb\u51fa\u6765\u6570\u636e\u540e, session2\u4fee\u6539\u6570\u636e(\u5047\u8bbe\u4fee\u6539\u4e86\u5b57\u6bb5number\u7684\u503c)\u5e76\u63d0\u4ea4, \u6b64\u65f6session1\u91cd\u590d\u8bfb\u53d6, \u8bfb\u5230\u4f9d\u65e7\u662fsession2\u4fee\u6539(cud\u64cd\u4f5c)\u524d\u7684\u6570\u636e(MVCC\u673a\u5236), \u4f46session1\u4fee\u6539\u6570\u636e, \u4f8b\u5982 update a_table set number=number-1 where id=1; \u662f\u6b63\u786e\u7684, \u5173\u952e\u5c31\u5728\u4e8e number=number-1 , number-1\u4e2d\u7684number\u4f1a\u8c03\u7528session2\u4e2d\u4fee\u6539\u540e\u7684\u6700\u7ec8\u6570\u636e, \u5177\u4f53\u770b\u4e0b\u9762\u7684\u89e3\u91ca \u4e0d\u53ef\u91cd\u590d\u8bfb\u89e3\u91ca: \u5173\u4e8e \u9694\u79bb\u7ea7\u522b \u8bbe\u7f6e\u6210 \u53ef\u91cd\u590d\u8bfb , \u4e0d\u53ef\u91cd\u590d\u8bfb \u662f \u5426 , \u6bd4\u8f83\u7ed5, \u610f\u601d\u5c31\u662f\u73b0\u5728\u53ef\u4ee5\u91cd\u590d\u8bfb\u4e14\u91cd\u590d\u8bfb\u53d6\u7684\u6570\u636e\u4fdd\u6301\u4e0d\u53d8, \u5177\u4f53\u770b\u4e0b\u9762\u7684\u8bf4\u660e: \u6b64\u65f6session1\u4e2d\u5bf9\u8be5\u6570\u636e\u64cd\u4f5c, \u5e76\u4e0d\u4f1a\u4ee5\u4f60\u770b\u5230(session1\u8bfb\u51fa\u6765)\u7684\u6570\u636e\u4e3a\u57fa\u51c6, \u800c\u662f\u4ee5session2\u63d0\u4ea4\u7684\u6570\u636e\u4e3a\u57fa\u51c6, \u6700\u7ec8\u7ed3\u679c\u53ef\u4ee5\u770b\u5230\u7684\u53ef\u80fd\u4e0d\u592a\u4e00\u6837, \u8fd9\u5374\u662f\u6b63\u786e\u7684** \u5e7b\u8bfb\u89e3\u91ca: \u4f9d\u65e7\u662f\u4e24\u4e2asession, \u4f7f\u7528\u9ed8\u8ba4\u7684\u53ef\u91cd\u590d\u8bfb\u9694\u79bb\u7ea7\u522b, \u6309\u7167\u4ee5\u4e0b\u8fc7\u7a0b\u64cd\u4f5c session1\u4e2d\u5f00\u542f\u4e8b\u52a1 session1\u4e2dselect\u67e5\u52301\u6761\u6570\u636e session2\u4e2d\u5f00\u542f\u4e8b\u52a1\u540einsert\u4e00\u6761\u6570\u636e\u5e76\u63d0\u4ea4 session1\u4e2dselect\u4f9d\u65e7\u662f1\u6761\u6570\u636e(\u8bfb\u53d6\u5386\u53f2\u7248\u672c) session1\u4e2dupdate id=2\u7684\u6570\u636e\u663e\u793a\u6210\u529f(\u8bfb\u53d6\u771f\u6b63\u7684\u7248\u672c, \u5df2\u7ecf\u6709\u7b2c2\u6761\u6570\u636e\u4e86) session1\u4e2d\u518d\u6b21select\u5c31\u67e5\u5230\u4e862\u6761\u6570\u636e \u8bc1\u660e\u4ecd\u672a\u89e3\u51b3\u5e7b\u8bfb\u95ee\u9898 \u60f3\u89e3\u51b3\u8fd9\u4e9b\u5e76\u53d1\u7684\u526f\u4f5c\u7528, \u628a\u9694\u79bb\u7ea7\u522b\u8bbe\u7f6e\u6210\u53ef\u4e32\u884c\u5316, \u5728\u6b64\u7ea7\u522b\u4e0b, select\u64cd\u4f5c\u4e5f\u4f1a\u52a0\u9501 , \u5c31\u89e3\u51b3\u4e86\u5e7b\u8bfb, \u4f46\u8fd9\u4e5f\u5bfc\u81f4\u4e86\u6027\u80fd\u4f4e, \u57fa\u672c\u4e0d\u7528 \u6ce8\u610f, \u53ef\u4e32\u884c\u5316\u53ef\u80fd\u52a0\u8868\u9501\u4e5f\u53ef\u80fd\u52a0\u884c\u9501, \u5177\u4f53\u4ec0\u4e48\u9501\u53d6\u51b3\u4e8e\u4f60\u7684sql\u8bed\u53e5, \u4f8b\u5982 select * from a_table; \u662f\u8868\u9501, select * from a_table where id=1; \u662f\u884c\u9501 \u9501\u5206\u7c7b \u4ece\u6027\u80fd\u5c42\u9762\u4e0a\u5206\u4e3a \u4e50\u89c2\u9501 \u548c \u60b2\u89c2\u9501 \u4ece\u6570\u636e\u5c42\u9762\u4e0a\u5206\u4e3a \u8bfb\u9501 \u548c \u5199\u9501 (\u5747\u5c5e\u4e8e\u60b2\u89c2\u9501) \u8bfb\u9501, \u4e5f\u53eb\u5171\u4eab\u9501\u6216\u8005S\u9501(Shared), \u9488\u5bf9\u540c\u4e00\u4e2a\u6570\u636e\u53ef\u540c\u65f6\u8fdb\u884c\u8bfb\u64cd\u4f5c, \u4e0d\u4f1a\u4e92\u76f8\u5f71\u54cd \u5199\u9501, \u4e5f\u53eb\u6392\u5b83\u9501\u6216\u8005X\u9501(eXclusive), \u5f53\u524d\u4e8b\u52a1\u9488\u5bf9\u67d0\u6570\u636e\u7684\u5199\u64cd\u4f5c\u5b8c\u6210\u4e4b\u524d, \u5176\u4ed6\u4e8b\u52a1\u65e0\u6cd5\u5bf9\u8be5\u6570\u636e \u8bfb \u6216\u8005 \u5199 \u52a0\u8bfb\u9501\u65f6, \u4efb\u4f55session\u90fd\u53ef\u8bfb\u8be5\u8868, \u5f53\u524dsession\u63d2\u5165\u6216\u66f4\u65b0\u88ab\u9501\u7684\u8868\u4f1a\u62a5\u9519, \u5176\u4ed6session\u7684\u63d2\u5165\u6216\u66f4\u65b0\u64cd\u4f5c\u5219\u4f1a\u7b49\u5f85 \u52a0\u5199\u9501\u65f6, \u5f53\u524dsession\u53ef\u5bf9\u8be5\u8868\u8fdb\u884c\u589e\u5220\u6539\u67e5\u64cd\u4f5c, \u5176\u4ed6session\u5bf9\u8be5\u8868\u7684\u4efb\u4f55\u64cd\u4f5c\u90fd\u88ab\u963b\u585e \u603b\u7ed3\u6765\u8bf4, \u8bfb\u9501\u4f1a\u963b\u585e\u5199\u4f46\u4e0d\u4f1a\u963b\u585e\u8bfb, \u5199\u9501\u4f1a\u963b\u585e\u8bfb\u548c\u5199 \u4ece\u9897\u7c92\u5ea6\u5c42\u9762\u4e0a\u5206\u4e3a \u8868\u9501 \u548c \u884c\u9501 \u8868\u9501, \u7ed9\u6574\u5f20\u8868\u52a0\u8bfb\u9501\u6216\u5199\u9501 \u884c\u9501, \u7ed9\u67d0\u5f20\u8868\u7684\u67d0\u4e00\u5f20\u884c\u52a0\u8bfb\u9501\u6216\u5199\u9501 \u4e50\u89c2\u9501\u4ece\u672c\u8d28\u4e0a\u8bb2\u4e0d\u662f\u9501, \u9ed8\u8ba4\u64cd\u4f5c\u4e0d\u4f1a\u6709\u51b2\u7a81\uff0c\u5728update\u7684\u65f6\u5019\u518d\u53bb\u68c0\u67e5\u51b2\u7a81, \u4f8b\u5982: begin ; select number from product where id = 1 ; // number\u7b49\u4e8e100 update product set number = 150 where id = 1 and number = 100 ; commit ; \u5373, \u66f4\u65b0\u65f6\u6bd4\u5bf9\u539f\u5148\u7684\u6570\u636e(\u5224\u65adnumber=100), \u82e5\u6ca1\u6709\u53d1\u751f\u53d8\u5316(\u8868\u793a\u672a\u6536\u5230\u5176\u4ed6\u4e8b\u52a1\u5f71\u54cd), \u5373\u53ef\u8fdb\u884c\u64cd\u4f5c \u8868\u9501\u7684\u5f00\u9500\u5c0f\u52a0\u9501\u5feb, \u4e0d\u4f1a\u51fa\u73b0\u6b7b\u9501, \u9501\u5b9a\u9897\u7c92\u5ea6\u5927, \u53d1\u751f\u9501\u51b2\u7a81\u6982\u7387\u9ad8, \u5e76\u53d1\u7a0b\u5ea6\u4f4e , \u4e00\u822c\u7684\u7528\u9014\u662f, \u8fc1\u79fb\u6570\u636e\u5e93\u65f6, \u5bf9\u6240\u6709\u8868\u589e\u52a0\u4e00\u4e2a\u8bfb\u9501, \u9632\u6b62\u65b0\u6570\u636e\u5199\u5165, \u7136\u540e\u5b89\u5fc3\u8fc1\u79fb \u76f8\u5bf9\u4e8e\u8868\u9501, \u884c\u9501\u7684\u5f00\u9500\u5927\u52a0\u9501\u6162, \u53ef\u80fd\u4f1a\u51fa\u73b0\u6b7b\u9501, \u9501\u5b9a\u9897\u7c92\u5ea6\u5c0f, \u51fa\u73b0\u51b2\u7a81\u6982\u7387\u4f4e, \u5e76\u53d1\u7a0b\u5ea6\u9ad8 \u539f\u56e0\u5c31\u662f\u8868\u9501\u53ea\u9700\u627e\u5230\u8fd9\u5f20\u8868, \u884c\u9501\u8fd8\u9700\u8981\u627e\u5230\u884c, \u6240\u4ee5\u5f00\u9500\u5927\u52a0\u9501\u6162, \u4e14\u8868\u9501\u662f\u9501\u6574\u5f20\u8868, \u6240\u4ee5\u4e0d\u4f1a\u53d1\u751f\u6b7b\u9501 \u5173\u4e8e\u4e0d\u540c\u7684\u5f15\u64ce\u7684\u9501\u7684\u603b\u7ed3: MyISAM\u6267\u884cselect\u524d\u4f1a\u81ea\u52a8\u7ed9\u6d89\u53ca\u7684\u8868\u52a0\u8bfb\u9501 MySIAM\u6267\u884cinsert\u3001update\u548cdelete\u65f6\u4f1a\u81ea\u52a8\u7ed9\u6d89\u53ca\u7684\u8868\u52a0\u5199\u9501 InnoDB\u6267\u884cselect\u65f6, \u4e00\u822c\u60c5\u51b5\u4e0b, \u56e0\u4e3a\u6709mvcc\u673a\u5236(\u53ea\u9488\u5bf9\u8bfb\u5df2\u63d0\u4ea4\u548c\u53ef\u91cd\u590d\u8bfb\u8fd9\u4e24\u4e2a\u9694\u79bb\u7ea7\u522b\u8d77\u4f5c\u7528)\u4e0d\u4f1a\u52a0\u9501 InnoDB\u6267\u884cinsert\u3001update\u548cdelete\u65f6\u4f1a\u81ea\u52a8\u7ed9\u6d89\u53ca\u7684\u8868\u7684\u884c\u52a0\u5199\u9501 \u9501\u7684\u6269\u5c55 \u4e0a\u9762\u63d0\u5230\u8bbe\u7f6e\u9694\u79bb\u7ea7\u522b\u4e3a\u53ef\u4e32\u884c\u5316\u53ef\u89e3\u51b3\u5e7b\u8bfb\u95ee\u9898, \u4f46\u6b64\u9694\u79bb\u7ea7\u522b\u5bfc\u81f4\u6027\u80fd\u4f4e\u4e0b, \u9664\u6b64\u4e4b\u5916, \u5c06 \u9694\u79bb\u7ea7\u522b\u8bbe\u7f6e\u4e3a\u53ef\u91cd\u590d\u8bfb \u65f6\u4f7f\u7528 \u95f4\u9699\u9501(Gap Lock, \u9ed8\u8ba4\u542f\u7528\u65e0\u9700\u4efb\u4f55\u8bed\u6cd5) \u4e5f\u53ef\u89e3\u51b3\u67d0\u4e9b\u60c5\u51b5\u4e0b\u7684\u5e7b\u8bfb\u95ee\u9898 \u4e3a\u5565rr\u9694\u79bb\u7ea7\u522b\u6709\u95f4\u9699\u9501, rc\u548cru\u7ea7\u522b\u6ca1\u6709\u95f4\u9699\u9501? \u56e0\u4e3arr\u7ea7\u522b\u662f\u53ef\u91cd\u590d\u8bfb, \u53ef\u91cd\u590d\u8bfb\u662f\u4ec0\u4e48\u610f\u601d? \u5c31\u662f\u76f8\u540c\u7684sql\u91cd\u590d\u8bfb\u53d6\u4fdd\u8bc1\u6570\u636e\u4e0d\u53d8, \u4f8b\u5982 where id < 10, \u95f4\u9699\u9501\u5c31\u4fdd\u8bc1\u4e0d\u4f1a\u53d1\u751f\u63d2\u5165\u3001\u4fee\u6539\u6216\u5220\u9664\u6570\u636e\u7684\u64cd\u4f5c, \u4fdd\u8bc1\u4e86\u76f8\u540c\u7684sql\u91cd\u590d\u8bfb\u53d6\u6570\u636e\u4e0d\u53d8 rc\u548cru\u7ea7\u522b\u672c\u8eab\u5c31\u662f\u4e0d\u53ef\u91cd\u590d\u8bfb\u7684, \u4e5f\u5c31\u662f\u8bf4\u76f8\u540c\u7684sql\u91cd\u590d\u8bfb\u53d6\u7684\u7ed3\u679c\u53ef\u80fd\u4e0d\u4e00\u6837, \u53cd\u6b63\u6570\u636e\u662f\u4f1a\u53d8\u7684, \u968f\u4fbf\u63d2\u5165\u3001\u4fee\u6539\u6216\u5220\u9664, \u6240\u4ee5\u4e0d\u9700\u8981\u95f4\u9699\u9501 \u95f4\u9699\u9501\u662f\u9501\u4f4f\u4e24\u4e2a\u503c\u4e4b\u95f4\u7684\u7a7a\u95f4, \u4f8b\u5982\u8868\u4e2d\u67095\u6761\u6570\u636e, id\u5206\u522b\u662f1\u30012\u30013\u300110\u3001100 \u90a3\u4e48\u95f4\u9699\u5c31\u662f(3,10), (10,100), (100, \u6b63\u65e0\u7a77) \u6bd4\u5982session1\u4e2d\u6267\u884cupdate\u64cd\u4f5c\u7684\u6761\u4ef6\u662f where id > 5 and id < 50 \u65f6, \u5176\u4ed6session\u65e0\u6cd5\u5728\u8fd9\u4e2a \u8303\u56f4\u6240\u5305\u542b\u7684\u6240\u6709\u884c\u8bb0\u5f55(5~50)\u4ee5\u53ca\u8bb0\u5f55\u6240\u5728\u7684\u95f4\u9699((3, 10)\u548c(10, 100))\u91cc \u63d2\u5165\u6216\u4fee\u6539\u4efb\u4f55\u6570\u636e \u5373\u6b64\u65f6session2\u4e2dinsert id=4 \u6216\u8005 id=30 \u6216\u8005 id=90 \u90fd\u4f1a\u5904\u4e8e\u963b\u585e \u540c\u65f6, \u4e0a\u9762\u5728session2\u4e2d\u63d2\u5165100\u4e5f\u4f1a\u963b\u585e, \u6240\u4ee5\u5b9e\u9645\u4e0a\u963b\u585e\u7684\u4e0d\u662f(3,10)\u548c(10,100), \u800c\u662f(3,10]\u548c(10,100], \u90a3\u4e48\u5b9e\u9645\u52a0\u9501\u7684\u533a\u95f4\u5c31\u662f(3,100], \u8fd9\u4e2a\u4e5f\u53eb \u4e34\u952e\u9501(Next-key Locks) \u9501\u4e3b\u8981\u662f\u52a0\u5728\u7d22\u5f15\u4e0a, \u5982\u679c \u5bf9\u975e\u7d22\u5f15\u5b57\u6bb5\u66f4\u65b0, \u884c\u9501\u53ef\u80fd\u4f1a\u5347\u7ea7\u4e3a\u8868\u9501 \u8bc1\u660e\u7d22\u5f15\u5f88\u91cd\u8981!!! \u9501\u7684\u5206\u6790 \u9501\u8868 // \u5bf9\u8868 table1 \u52a0\u8bfb\u9501 lock table table1 read ; // \u5bf9\u8868 table2 \u52a0\u5199\u9501 lock table table2 write ; \u67e5\u770b\u4e0a\u9501\u7684\u8868 show open tables ; // in_use \u4e3a 1 \u8868\u793a\u8be5\u8868\u88ab\u4e0a\u9501 \u89e3\u9501\u8868 unlock tables ; \u884c\u9501\u5206\u6790 show status like 'innodb_row_lock%' ; Innodb_row_lock_current_watis: \u5f53\u524d\u6b63\u5728\u7b49\u5f85\u9501\u5b9a\u7684\u6570\u91cf Innodb_row_lock_time : \u4ece\u7cfb\u7edf\u542f\u52a8\u5230\u73b0\u5728\u9501\u5b9a\u7684\u603b\u65f6\u957f Innodb_row_lock_time_avg : \u6bcf\u6b21\u7b49\u5f85\u6240\u82b1\u5e73\u5747\u65f6\u95f4 Innodb_row_lock_time_max: \u4ece\u7cfb\u7edf\u542f\u52a8\u5230\u73b0\u5728\u7b49\u5f85\u6700\u957f\u7684\u4e00\u6b21\u6240\u82b1\u65f6\u95f4 Innodb_row_lock_watis : \u7cfb\u7edf\u4ece\u542f\u52a8\u5230\u73b0\u5728\u603b\u5171\u7b49\u5f85\u7684\u6b21\u6570 \u5f53\u7b49\u5f85\u6b64\u65f6\u5f88\u9ad8, \u4e14\u6bcf\u6b21\u7b49\u5f85\u65f6\u95f4\u4e0d\u77ed, \u9700\u8981\u5206\u6790, \u901a\u8fc7\u4ee5\u4e0b\u8bed\u53e5\u5206\u6790: -- \u67e5\u770b\u6240\u6709\u4e8b\u52a1 select * from information_schema . innodb_trx ; -- \u67e5\u770b\u6d89\u53ca\u5230\u9501\u7684\u4e8b\u52a1 select * from information_shcema . innodb_locks ; -- \u67e5\u770b\u7b49\u5f85\u9501\u7684\u4e8b\u52a1 select * from information_shcema . innodb_lock_waits ; -- \u91ca\u653e\u9501, trx_mysql_thread_id\u4eceinnodb_trx\u8868\u4e2d\u5f97\u5230 kill trx_mysql_thread_id -- \u67e5\u770b\u6b7b\u9501\u65e5\u5fd7 show engine innodb status \\ G ; \u9501\u7684\u4f18\u5316 \u5c3d\u53ef\u80fd\u4f7f\u7528\u4f4e\u7ea7\u522b\u4e8b\u52a1\u9694\u79bb \u5c3d\u91cf\u7528\u8fc7\u7d22\u5f15\u68c0\u7d22\u6570\u636e, \u907f\u514d\u65e0\u7d22\u5f15\u884c\u5347\u7ea7\u4e3a\u8868\u9501 \u5408\u7406\u8bbe\u8ba1\u7d22\u5f15, \u5c3d\u91cf\u7f29\u5c0f\u9501\u7684\u8303\u56f4, \u5373\u51cf\u5c11\u68c0\u7d22\u6761\u4ef6\u8303\u56f4, \u907f\u514d\u95f4\u9699\u9501 \u5c3d\u91cf\u63a7\u5236\u4e8b\u52a1\u5927\u5c0f, \u51cf\u5c11\u9501\u5b9a\u8d44\u6e90\u91cf\u548c\u65f6\u95f4\u957f\u5ea6 \u5c3d\u91cf\u5c06\u6d89\u53ca\u4e8b\u52a1\u52a0\u9501\u7684sql\u653e\u5230\u6700\u540e\u6267\u884c MVCC MVCC(multi-version concurrency control, \u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236)\u673a\u5236 , \u4ec5\u5bf9\u8bfb\u5df2\u63d0\u4ea4\u548c\u53ef\u91cd\u590d\u8bfb\u4e24\u4e2a\u9694\u79bb\u7ea7\u522b\u6709\u6548, \u6709\u4ee5\u4e0b\u7279\u6027: \u53ea\u9488\u5bf9innodb\u5f15\u64ce\u7684\u6570\u636e\u5e93\u6709\u6548 \u6bcf\u4e2a\u6570\u636e\u5e93\u53ea\u6709\u4e00\u4e2a \u7248\u672c\u94fe (\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e32\u884c\u8d77\u6765\u7684\u8868\u4e2d\u7684\u6bcf\u4e00\u884c\u7684\u6570\u636e), \u901a\u8fc7 undo\u65e5\u5fd7 \u5b9e\u73b0 \u6bcf\u6761\u94fe\u4e2d\u5305\u542b\u4e00\u4e2a \u4e8b\u52a1ID \u7684\u5b57\u6bb5(\u6bcf\u4e00\u884c\u7684\u6570\u636e+\u4e8b\u52a1ID\u5b57\u6bb5) \u4e8b\u52a1\u5f00\u542f(begin)\u65f6\u4e0d\u4f1a\u751f\u6210\u4e8b\u52a1ID, \u5f53\u6267\u884cCRUD\u4efb\u4e00sql\u65f6\u624d\u751f\u6210\u771f\u6b63\u7684\u4e8b\u52a1ID \u751f\u6210\u4e8b\u52a1ID\u7684\u540c\u65f6\u4f1a\u751f\u6210\u6bcf\u4e2a\u4e8b\u52a1\u81ea\u5df1\u72ec\u6709\u7684 \u4e00\u81f4\u6027\u89c6\u56feread-view \u8bfb\u5df2\u63d0\u4ea4\u9694\u79bb\u7ea7\u522b\u4e0b\u7684read-view\u5728\u6bcf\u6b21\u6267\u884csql\u65f6\u90fd\u4f1a\u91cd\u65b0\u751f\u6210, \u800c\u53ef\u91cd\u590d\u8bfb\u9694\u79bb\u7ea7\u522b\u5728commit\u4e4b\u524d\u4e0d\u4f1a\u91cd\u65b0\u751f\u6210(\u4fdd\u8bc1\u4e86\u53ef\u91cd\u590d\u8bfb) select\u8bed\u53e5\u68c0\u7d22\u7684\u6570\u636e\u5e93\u6765\u6e90\u4e8eread-view, \u662f\u901a\u8fc7\u6bd4\u5bf9\u5f53\u524d\u4e8b\u52a1ID\u4e0e\u7248\u672c\u94fe\u4e2d\u7684ID\u53ca\u4e00\u7cfb\u5217\u89c4\u5219\u83b7\u53d6","title":"MySQL\u4e8b\u52a1\u53ca\u9694\u79bb\u7ea7\u522b\u4e0e\u9501\u673a\u5236"},{"location":"mysql/MySQL%E4%BA%8B%E5%8A%A1%E5%8F%8A%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E%E9%94%81%E6%9C%BA%E5%88%B6/#mysql","text":"","title":"MySQL\u4e8b\u52a1\u53ca\u9694\u79bb\u7ea7\u522b\u4e0e\u9501\u673a\u5236"},{"location":"mysql/MySQL%E4%BA%8B%E5%8A%A1%E5%8F%8A%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E%E9%94%81%E6%9C%BA%E5%88%B6/#acid","text":"\u539f\u5b50\u6027(Atomicity) \u4e8b\u52a1\u662f\u4e00\u4e2a\u539f\u5b50\u64cd\u4f5c\u5355\u5143, \u8981\u7b26\u5408\u4e0d\u53ef\u5206\u5272\u539f\u5219, \u5373\u6240\u6709 \u64cd\u4f5c(CURD) \u8981\u4e48\u5168\u90e8\u6210\u529f\u8981\u4e48\u5168\u90e8\u5931\u8d25 \u4e00\u81f4\u6027(Consistent) \u4e8b\u52a1\u4ece\u5f00\u59cb\u5230\u7ed3\u675f, \u6570\u636e\u5fc5\u987b\u4fdd\u6301\u4e00\u81f4\u6027, \u5373\u6240\u6709\u64cd\u4f5c\u90fd\u5fc5\u987b\u5e94\u7528\u4e8e \u6570\u636e , \u4ee5\u4fdd\u6301\u6570\u636e\u7684\u5b8c\u6574\u6027 \u9694\u79bb\u6027(Isolation) \u6bcf\u4e2a\u4e8b\u52a1\u4e92\u76f8\u9694\u79bb, \u6bcf\u4e2a\u4e8b\u52a1\u5185\u90e8\u7684\u6570\u636e\u4e92\u4e0d\u5f71\u54cd, \u5177\u4f53\u662f\u5426\u53d7\u5f71\u54cd\u4ee5\u53ca\u53d7\u5f71\u54cd\u8303\u56f4\u53ef\u901a\u8fc7\u9694\u79bb\u7ea7\u522b\u8c03\u6574 \u6301\u4e45\u6027(Durable) \u4e8b\u52a1\u5b8c\u6210\u540e, \u5e94\u7528\u4e8e\u6570\u636e\u7684\u4fee\u6539\u662f\u6c38\u4e45\u6027\u4e0d\u53ef\u4e22\u5931\u7684","title":"\u4e8b\u52a1ACID\u5c5e\u6027"},{"location":"mysql/MySQL%E4%BA%8B%E5%8A%A1%E5%8F%8A%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E%E9%94%81%E6%9C%BA%E5%88%B6/#_1","text":"\u810f\u5199, \u4e5f\u53eb\u66f4\u65b0\u4e22\u5931(Lost Update) \u591a\u4e2a\u4e8b\u52a1\u5bf9\u540c\u4e00\u4e2a\u6570\u636e\u64cd\u4f5c, \u5373 \u6700\u540e\u7684\u66f4\u65b0\u8986\u76d6\u4e86\u5176\u4ed6\u4e8b\u52a1\u7684\u66f4\u65b0 \u810f\u8bfb(Dirty Reads) \u4e00\u4e2a\u4e8b\u52a1\u5bf9\u6570\u636e\u8fdb\u884c\u4e86\u64cd\u4f5c, \u4f46\u5c1a\u672a\u63d0\u4ea4, \u6b64\u65f6\u8be5\u6570\u636e\u5904\u4e8e\u4e0d\u4e00\u81f4\u72b6\u6001, \u5982\u679c\u4e0d\u52a0\u63a7\u5236\u4efb\u7531\u5176\u4ed6\u4e8b\u52a1\u8bfb\u53d6\u8be5\u6570\u636e, \u8fd9\u79cd\u73b0\u8c61\u5c31\u662f\u810f\u8bfb \u4e0d\u53ef\u91cd\u8bfb(Non- Repeatable Reads) \u4e8b\u52a1\u5f00\u59cb\u540e, \u91cd\u590d\u8bfb\u53d6\u67d0\u4e2a\u6570\u636e, \u53d1\u73b0\u7ed3\u679c\u53d1\u751f\u53d8\u5316, \u5373 \u4e8b\u52a1\u5185\u90e8\u7684\u76f8\u540c\u67e5\u8be2\u8bed\u53e5\u5728\u4e0d\u540c\u65f6\u523b\u8bfb\u53d6\u7684\u6570\u636e\u7ed3\u679c\u4e0d\u4e00\u6837, \u4e0d\u7b26\u5408\u9694\u79bb\u6027 , \u8fd9\u79cd\u73b0\u8c61\u5c31\u662f\u4e0d\u53ef\u91cd\u590d\u8bfb \u5e7b\u8bfb(Phantom Reads) \u4e00\u4e2a\u4e8b\u52a1\u6309\u7167\u76f8\u540c\u7684\u6761\u4ef6\u91cd\u65b0\u8bfb\u53d6\u4e4b\u524d\u68c0\u7d22\u8fc7\u7684\u6570\u636e, \u53d1\u73b0\u4e86\u5176\u4ed6\u4e8b\u52a1\u63d2\u5165\u4e86\u6ee1\u8db3\u5176\u67e5\u8be2\u6761\u4ef6\u7684\u65b0\u6570\u636e, \u5373 \u67d0\u4e8b\u52a1\u8bfb\u53d6\u5230\u4e86\u5176\u4ed6\u4e8b\u52a1\u63d0\u4ea4\u7684\u65b0\u589e\u6570\u636e, \u4e0d\u7b26\u5408\u9694\u79bb\u6027 , \u8fd9\u79cd\u73b0\u8c61\u53eb\u505a\u5e7b\u8bfb","title":"\u5e76\u53d1\u95ee\u9898"},{"location":"mysql/MySQL%E4%BA%8B%E5%8A%A1%E5%8F%8A%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E%E9%94%81%E6%9C%BA%E5%88%B6/#_2","text":"\u4e0d\u540c\u7684\u9694\u79bb\u7ea7\u522b\u53ef\u89e3\u51b3\u4e0d\u540c\u7684\u5e76\u53d1\u95ee\u9898, \u5982\u4e0b\u8868 \u9694\u79bb\u7ea7\u522b \u810f\u8bfb \u4e0d\u53ef\u91cd\u590d\u8bfb \u5e7b\u8bfb \u8bfb\u672a\u63d0\u4ea4(Read uncommitted) \u662f \u662f \u662f \u8bfb\u5df2\u63d0\u4ea4(Read committed) \u5426 \u662f \u662f \u53ef\u91cd\u590d\u8bfb(Repeatable read) \u5426 \u5426 \u662f \u53ef\u4e32\u884c\u5316(Serializable) \u5426 \u5426 \u5426 \u56e0\u4e3a\u4e8b\u52a1\u9694\u79bb\u662f\u5b9e\u8d28\u4e0a\u5c31\u662f\u4f7f\u4e8b\u52a1\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u201c\u4e32\u884c\u201d\u800c\u975e\u201c\u5e76\u53d1\u201d, \u6240\u4ee5\u6570\u636e\u5e93\u7684\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b\u8d8a\u4e25\u683c, \u5e76\u53d1\u526f\u4f5c\u7528\u8d8a\u5c0f, \u4ee3\u4ef7\u8d8a\u5927 \u67e5\u770b\u5f53\u524d\u7684\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b : show variables like 'tx_isolation'; \u8bbe\u7f6e\u5f53\u524d\u7684\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b : set tx_isolation='repeatable-read'; \u8bfb\u672a\u63d0\u4ea4\u662f read-uncommitted , \u8bfb\u5df2\u63d0\u4ea4\u662f read-commited , \u53ef\u4e32\u884c\u5316\u662f serializable \u4e0d\u540c\u7684session\u53ef\u4ee5\u8bbe\u7f6e\u4e0d\u540c\u7684\u9694\u79bb\u7ea7\u522b MySQL\u9ed8\u8ba4\u7684\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b\u662f\u53ef\u91cd\u590d\u8bfb \u810f\u8bfb\u89e3\u91ca: \u4ee5\u810f\u8bfb\u4e3a\u4f8b, \u5728\u4e24\u4e2asession\u4e2d\u5747\u8bbe\u7f6e\u9694\u79bb\u7ea7\u522b\u662f\u8bfb\u672a\u63d0\u4ea4, \u5f53session1\u4e2dupdate\u67d0\u4e2a\u6570\u636e, \u4f46\u6ca1\u6709\u63d0\u4ea4\u65f6, session2\u4e2d\u53ef\u4ee5\u770b\u5230session1\u4e2d\u4fee\u6539\u540e\u7684\u6570\u636e; \u6b64\u65f6\u8fd9\u4e2a\u5c31\u662f\u810f\u6570\u636e, \u5982\u679csession2\u4ee5\u8fd9\u4e2a\u810f\u6570\u636e\u4e3a\u57fa\u51c6, \u518d\u6b21\u4fee\u6539\u63d0\u4ea4, \u4f46\u662fsession1\u56de\u6eda\u4e86, \u90a3\u4e48session2\u6700\u7ec8\u63d0\u4ea4\u7684\u6570\u636e\u662f\u4e0d\u5bf9\u7684 \u5982\u679c\u9694\u79bb\u7ea7\u522b\u662f\u8bfb\u5df2\u63d0\u4ea4, \u90a3\u4e48session2\u4e2d\u65e0\u6cd5\u770b\u5230session1\u4e2d\u4fee\u6539\u540e\u7684\u6570\u636e \u5982\u679c\u9694\u79bb\u7ea7\u522b\u662f\u53ef\u91cd\u590d\u8bfb, session1\u8bfb\u51fa\u6765\u6570\u636e\u540e, session2\u4fee\u6539\u6570\u636e(\u5047\u8bbe\u4fee\u6539\u4e86\u5b57\u6bb5number\u7684\u503c)\u5e76\u63d0\u4ea4, \u6b64\u65f6session1\u91cd\u590d\u8bfb\u53d6, \u8bfb\u5230\u4f9d\u65e7\u662fsession2\u4fee\u6539(cud\u64cd\u4f5c)\u524d\u7684\u6570\u636e(MVCC\u673a\u5236), \u4f46session1\u4fee\u6539\u6570\u636e, \u4f8b\u5982 update a_table set number=number-1 where id=1; \u662f\u6b63\u786e\u7684, \u5173\u952e\u5c31\u5728\u4e8e number=number-1 , number-1\u4e2d\u7684number\u4f1a\u8c03\u7528session2\u4e2d\u4fee\u6539\u540e\u7684\u6700\u7ec8\u6570\u636e, \u5177\u4f53\u770b\u4e0b\u9762\u7684\u89e3\u91ca \u4e0d\u53ef\u91cd\u590d\u8bfb\u89e3\u91ca: \u5173\u4e8e \u9694\u79bb\u7ea7\u522b \u8bbe\u7f6e\u6210 \u53ef\u91cd\u590d\u8bfb , \u4e0d\u53ef\u91cd\u590d\u8bfb \u662f \u5426 , \u6bd4\u8f83\u7ed5, \u610f\u601d\u5c31\u662f\u73b0\u5728\u53ef\u4ee5\u91cd\u590d\u8bfb\u4e14\u91cd\u590d\u8bfb\u53d6\u7684\u6570\u636e\u4fdd\u6301\u4e0d\u53d8, \u5177\u4f53\u770b\u4e0b\u9762\u7684\u8bf4\u660e: \u6b64\u65f6session1\u4e2d\u5bf9\u8be5\u6570\u636e\u64cd\u4f5c, \u5e76\u4e0d\u4f1a\u4ee5\u4f60\u770b\u5230(session1\u8bfb\u51fa\u6765)\u7684\u6570\u636e\u4e3a\u57fa\u51c6, \u800c\u662f\u4ee5session2\u63d0\u4ea4\u7684\u6570\u636e\u4e3a\u57fa\u51c6, \u6700\u7ec8\u7ed3\u679c\u53ef\u4ee5\u770b\u5230\u7684\u53ef\u80fd\u4e0d\u592a\u4e00\u6837, \u8fd9\u5374\u662f\u6b63\u786e\u7684** \u5e7b\u8bfb\u89e3\u91ca: \u4f9d\u65e7\u662f\u4e24\u4e2asession, \u4f7f\u7528\u9ed8\u8ba4\u7684\u53ef\u91cd\u590d\u8bfb\u9694\u79bb\u7ea7\u522b, \u6309\u7167\u4ee5\u4e0b\u8fc7\u7a0b\u64cd\u4f5c session1\u4e2d\u5f00\u542f\u4e8b\u52a1 session1\u4e2dselect\u67e5\u52301\u6761\u6570\u636e session2\u4e2d\u5f00\u542f\u4e8b\u52a1\u540einsert\u4e00\u6761\u6570\u636e\u5e76\u63d0\u4ea4 session1\u4e2dselect\u4f9d\u65e7\u662f1\u6761\u6570\u636e(\u8bfb\u53d6\u5386\u53f2\u7248\u672c) session1\u4e2dupdate id=2\u7684\u6570\u636e\u663e\u793a\u6210\u529f(\u8bfb\u53d6\u771f\u6b63\u7684\u7248\u672c, \u5df2\u7ecf\u6709\u7b2c2\u6761\u6570\u636e\u4e86) session1\u4e2d\u518d\u6b21select\u5c31\u67e5\u5230\u4e862\u6761\u6570\u636e \u8bc1\u660e\u4ecd\u672a\u89e3\u51b3\u5e7b\u8bfb\u95ee\u9898 \u60f3\u89e3\u51b3\u8fd9\u4e9b\u5e76\u53d1\u7684\u526f\u4f5c\u7528, \u628a\u9694\u79bb\u7ea7\u522b\u8bbe\u7f6e\u6210\u53ef\u4e32\u884c\u5316, \u5728\u6b64\u7ea7\u522b\u4e0b, select\u64cd\u4f5c\u4e5f\u4f1a\u52a0\u9501 , \u5c31\u89e3\u51b3\u4e86\u5e7b\u8bfb, \u4f46\u8fd9\u4e5f\u5bfc\u81f4\u4e86\u6027\u80fd\u4f4e, \u57fa\u672c\u4e0d\u7528 \u6ce8\u610f, \u53ef\u4e32\u884c\u5316\u53ef\u80fd\u52a0\u8868\u9501\u4e5f\u53ef\u80fd\u52a0\u884c\u9501, \u5177\u4f53\u4ec0\u4e48\u9501\u53d6\u51b3\u4e8e\u4f60\u7684sql\u8bed\u53e5, \u4f8b\u5982 select * from a_table; \u662f\u8868\u9501, select * from a_table where id=1; \u662f\u884c\u9501","title":"\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b"},{"location":"mysql/MySQL%E4%BA%8B%E5%8A%A1%E5%8F%8A%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E%E9%94%81%E6%9C%BA%E5%88%B6/#_3","text":"\u4ece\u6027\u80fd\u5c42\u9762\u4e0a\u5206\u4e3a \u4e50\u89c2\u9501 \u548c \u60b2\u89c2\u9501 \u4ece\u6570\u636e\u5c42\u9762\u4e0a\u5206\u4e3a \u8bfb\u9501 \u548c \u5199\u9501 (\u5747\u5c5e\u4e8e\u60b2\u89c2\u9501) \u8bfb\u9501, \u4e5f\u53eb\u5171\u4eab\u9501\u6216\u8005S\u9501(Shared), \u9488\u5bf9\u540c\u4e00\u4e2a\u6570\u636e\u53ef\u540c\u65f6\u8fdb\u884c\u8bfb\u64cd\u4f5c, \u4e0d\u4f1a\u4e92\u76f8\u5f71\u54cd \u5199\u9501, \u4e5f\u53eb\u6392\u5b83\u9501\u6216\u8005X\u9501(eXclusive), \u5f53\u524d\u4e8b\u52a1\u9488\u5bf9\u67d0\u6570\u636e\u7684\u5199\u64cd\u4f5c\u5b8c\u6210\u4e4b\u524d, \u5176\u4ed6\u4e8b\u52a1\u65e0\u6cd5\u5bf9\u8be5\u6570\u636e \u8bfb \u6216\u8005 \u5199 \u52a0\u8bfb\u9501\u65f6, \u4efb\u4f55session\u90fd\u53ef\u8bfb\u8be5\u8868, \u5f53\u524dsession\u63d2\u5165\u6216\u66f4\u65b0\u88ab\u9501\u7684\u8868\u4f1a\u62a5\u9519, \u5176\u4ed6session\u7684\u63d2\u5165\u6216\u66f4\u65b0\u64cd\u4f5c\u5219\u4f1a\u7b49\u5f85 \u52a0\u5199\u9501\u65f6, \u5f53\u524dsession\u53ef\u5bf9\u8be5\u8868\u8fdb\u884c\u589e\u5220\u6539\u67e5\u64cd\u4f5c, \u5176\u4ed6session\u5bf9\u8be5\u8868\u7684\u4efb\u4f55\u64cd\u4f5c\u90fd\u88ab\u963b\u585e \u603b\u7ed3\u6765\u8bf4, \u8bfb\u9501\u4f1a\u963b\u585e\u5199\u4f46\u4e0d\u4f1a\u963b\u585e\u8bfb, \u5199\u9501\u4f1a\u963b\u585e\u8bfb\u548c\u5199 \u4ece\u9897\u7c92\u5ea6\u5c42\u9762\u4e0a\u5206\u4e3a \u8868\u9501 \u548c \u884c\u9501 \u8868\u9501, \u7ed9\u6574\u5f20\u8868\u52a0\u8bfb\u9501\u6216\u5199\u9501 \u884c\u9501, \u7ed9\u67d0\u5f20\u8868\u7684\u67d0\u4e00\u5f20\u884c\u52a0\u8bfb\u9501\u6216\u5199\u9501 \u4e50\u89c2\u9501\u4ece\u672c\u8d28\u4e0a\u8bb2\u4e0d\u662f\u9501, \u9ed8\u8ba4\u64cd\u4f5c\u4e0d\u4f1a\u6709\u51b2\u7a81\uff0c\u5728update\u7684\u65f6\u5019\u518d\u53bb\u68c0\u67e5\u51b2\u7a81, \u4f8b\u5982: begin ; select number from product where id = 1 ; // number\u7b49\u4e8e100 update product set number = 150 where id = 1 and number = 100 ; commit ; \u5373, \u66f4\u65b0\u65f6\u6bd4\u5bf9\u539f\u5148\u7684\u6570\u636e(\u5224\u65adnumber=100), \u82e5\u6ca1\u6709\u53d1\u751f\u53d8\u5316(\u8868\u793a\u672a\u6536\u5230\u5176\u4ed6\u4e8b\u52a1\u5f71\u54cd), \u5373\u53ef\u8fdb\u884c\u64cd\u4f5c \u8868\u9501\u7684\u5f00\u9500\u5c0f\u52a0\u9501\u5feb, \u4e0d\u4f1a\u51fa\u73b0\u6b7b\u9501, \u9501\u5b9a\u9897\u7c92\u5ea6\u5927, \u53d1\u751f\u9501\u51b2\u7a81\u6982\u7387\u9ad8, \u5e76\u53d1\u7a0b\u5ea6\u4f4e , \u4e00\u822c\u7684\u7528\u9014\u662f, \u8fc1\u79fb\u6570\u636e\u5e93\u65f6, \u5bf9\u6240\u6709\u8868\u589e\u52a0\u4e00\u4e2a\u8bfb\u9501, \u9632\u6b62\u65b0\u6570\u636e\u5199\u5165, \u7136\u540e\u5b89\u5fc3\u8fc1\u79fb \u76f8\u5bf9\u4e8e\u8868\u9501, \u884c\u9501\u7684\u5f00\u9500\u5927\u52a0\u9501\u6162, \u53ef\u80fd\u4f1a\u51fa\u73b0\u6b7b\u9501, \u9501\u5b9a\u9897\u7c92\u5ea6\u5c0f, \u51fa\u73b0\u51b2\u7a81\u6982\u7387\u4f4e, \u5e76\u53d1\u7a0b\u5ea6\u9ad8 \u539f\u56e0\u5c31\u662f\u8868\u9501\u53ea\u9700\u627e\u5230\u8fd9\u5f20\u8868, \u884c\u9501\u8fd8\u9700\u8981\u627e\u5230\u884c, \u6240\u4ee5\u5f00\u9500\u5927\u52a0\u9501\u6162, \u4e14\u8868\u9501\u662f\u9501\u6574\u5f20\u8868, \u6240\u4ee5\u4e0d\u4f1a\u53d1\u751f\u6b7b\u9501 \u5173\u4e8e\u4e0d\u540c\u7684\u5f15\u64ce\u7684\u9501\u7684\u603b\u7ed3: MyISAM\u6267\u884cselect\u524d\u4f1a\u81ea\u52a8\u7ed9\u6d89\u53ca\u7684\u8868\u52a0\u8bfb\u9501 MySIAM\u6267\u884cinsert\u3001update\u548cdelete\u65f6\u4f1a\u81ea\u52a8\u7ed9\u6d89\u53ca\u7684\u8868\u52a0\u5199\u9501 InnoDB\u6267\u884cselect\u65f6, \u4e00\u822c\u60c5\u51b5\u4e0b, \u56e0\u4e3a\u6709mvcc\u673a\u5236(\u53ea\u9488\u5bf9\u8bfb\u5df2\u63d0\u4ea4\u548c\u53ef\u91cd\u590d\u8bfb\u8fd9\u4e24\u4e2a\u9694\u79bb\u7ea7\u522b\u8d77\u4f5c\u7528)\u4e0d\u4f1a\u52a0\u9501 InnoDB\u6267\u884cinsert\u3001update\u548cdelete\u65f6\u4f1a\u81ea\u52a8\u7ed9\u6d89\u53ca\u7684\u8868\u7684\u884c\u52a0\u5199\u9501","title":"\u9501\u5206\u7c7b"},{"location":"mysql/MySQL%E4%BA%8B%E5%8A%A1%E5%8F%8A%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E%E9%94%81%E6%9C%BA%E5%88%B6/#_4","text":"\u4e0a\u9762\u63d0\u5230\u8bbe\u7f6e\u9694\u79bb\u7ea7\u522b\u4e3a\u53ef\u4e32\u884c\u5316\u53ef\u89e3\u51b3\u5e7b\u8bfb\u95ee\u9898, \u4f46\u6b64\u9694\u79bb\u7ea7\u522b\u5bfc\u81f4\u6027\u80fd\u4f4e\u4e0b, \u9664\u6b64\u4e4b\u5916, \u5c06 \u9694\u79bb\u7ea7\u522b\u8bbe\u7f6e\u4e3a\u53ef\u91cd\u590d\u8bfb \u65f6\u4f7f\u7528 \u95f4\u9699\u9501(Gap Lock, \u9ed8\u8ba4\u542f\u7528\u65e0\u9700\u4efb\u4f55\u8bed\u6cd5) \u4e5f\u53ef\u89e3\u51b3\u67d0\u4e9b\u60c5\u51b5\u4e0b\u7684\u5e7b\u8bfb\u95ee\u9898 \u4e3a\u5565rr\u9694\u79bb\u7ea7\u522b\u6709\u95f4\u9699\u9501, rc\u548cru\u7ea7\u522b\u6ca1\u6709\u95f4\u9699\u9501? \u56e0\u4e3arr\u7ea7\u522b\u662f\u53ef\u91cd\u590d\u8bfb, \u53ef\u91cd\u590d\u8bfb\u662f\u4ec0\u4e48\u610f\u601d? \u5c31\u662f\u76f8\u540c\u7684sql\u91cd\u590d\u8bfb\u53d6\u4fdd\u8bc1\u6570\u636e\u4e0d\u53d8, \u4f8b\u5982 where id < 10, \u95f4\u9699\u9501\u5c31\u4fdd\u8bc1\u4e0d\u4f1a\u53d1\u751f\u63d2\u5165\u3001\u4fee\u6539\u6216\u5220\u9664\u6570\u636e\u7684\u64cd\u4f5c, \u4fdd\u8bc1\u4e86\u76f8\u540c\u7684sql\u91cd\u590d\u8bfb\u53d6\u6570\u636e\u4e0d\u53d8 rc\u548cru\u7ea7\u522b\u672c\u8eab\u5c31\u662f\u4e0d\u53ef\u91cd\u590d\u8bfb\u7684, \u4e5f\u5c31\u662f\u8bf4\u76f8\u540c\u7684sql\u91cd\u590d\u8bfb\u53d6\u7684\u7ed3\u679c\u53ef\u80fd\u4e0d\u4e00\u6837, \u53cd\u6b63\u6570\u636e\u662f\u4f1a\u53d8\u7684, \u968f\u4fbf\u63d2\u5165\u3001\u4fee\u6539\u6216\u5220\u9664, \u6240\u4ee5\u4e0d\u9700\u8981\u95f4\u9699\u9501 \u95f4\u9699\u9501\u662f\u9501\u4f4f\u4e24\u4e2a\u503c\u4e4b\u95f4\u7684\u7a7a\u95f4, \u4f8b\u5982\u8868\u4e2d\u67095\u6761\u6570\u636e, id\u5206\u522b\u662f1\u30012\u30013\u300110\u3001100 \u90a3\u4e48\u95f4\u9699\u5c31\u662f(3,10), (10,100), (100, \u6b63\u65e0\u7a77) \u6bd4\u5982session1\u4e2d\u6267\u884cupdate\u64cd\u4f5c\u7684\u6761\u4ef6\u662f where id > 5 and id < 50 \u65f6, \u5176\u4ed6session\u65e0\u6cd5\u5728\u8fd9\u4e2a \u8303\u56f4\u6240\u5305\u542b\u7684\u6240\u6709\u884c\u8bb0\u5f55(5~50)\u4ee5\u53ca\u8bb0\u5f55\u6240\u5728\u7684\u95f4\u9699((3, 10)\u548c(10, 100))\u91cc \u63d2\u5165\u6216\u4fee\u6539\u4efb\u4f55\u6570\u636e \u5373\u6b64\u65f6session2\u4e2dinsert id=4 \u6216\u8005 id=30 \u6216\u8005 id=90 \u90fd\u4f1a\u5904\u4e8e\u963b\u585e \u540c\u65f6, \u4e0a\u9762\u5728session2\u4e2d\u63d2\u5165100\u4e5f\u4f1a\u963b\u585e, \u6240\u4ee5\u5b9e\u9645\u4e0a\u963b\u585e\u7684\u4e0d\u662f(3,10)\u548c(10,100), \u800c\u662f(3,10]\u548c(10,100], \u90a3\u4e48\u5b9e\u9645\u52a0\u9501\u7684\u533a\u95f4\u5c31\u662f(3,100], \u8fd9\u4e2a\u4e5f\u53eb \u4e34\u952e\u9501(Next-key Locks) \u9501\u4e3b\u8981\u662f\u52a0\u5728\u7d22\u5f15\u4e0a, \u5982\u679c \u5bf9\u975e\u7d22\u5f15\u5b57\u6bb5\u66f4\u65b0, \u884c\u9501\u53ef\u80fd\u4f1a\u5347\u7ea7\u4e3a\u8868\u9501 \u8bc1\u660e\u7d22\u5f15\u5f88\u91cd\u8981!!!","title":"\u9501\u7684\u6269\u5c55"},{"location":"mysql/MySQL%E4%BA%8B%E5%8A%A1%E5%8F%8A%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E%E9%94%81%E6%9C%BA%E5%88%B6/#_5","text":"\u9501\u8868 // \u5bf9\u8868 table1 \u52a0\u8bfb\u9501 lock table table1 read ; // \u5bf9\u8868 table2 \u52a0\u5199\u9501 lock table table2 write ; \u67e5\u770b\u4e0a\u9501\u7684\u8868 show open tables ; // in_use \u4e3a 1 \u8868\u793a\u8be5\u8868\u88ab\u4e0a\u9501 \u89e3\u9501\u8868 unlock tables ; \u884c\u9501\u5206\u6790 show status like 'innodb_row_lock%' ; Innodb_row_lock_current_watis: \u5f53\u524d\u6b63\u5728\u7b49\u5f85\u9501\u5b9a\u7684\u6570\u91cf Innodb_row_lock_time : \u4ece\u7cfb\u7edf\u542f\u52a8\u5230\u73b0\u5728\u9501\u5b9a\u7684\u603b\u65f6\u957f Innodb_row_lock_time_avg : \u6bcf\u6b21\u7b49\u5f85\u6240\u82b1\u5e73\u5747\u65f6\u95f4 Innodb_row_lock_time_max: \u4ece\u7cfb\u7edf\u542f\u52a8\u5230\u73b0\u5728\u7b49\u5f85\u6700\u957f\u7684\u4e00\u6b21\u6240\u82b1\u65f6\u95f4 Innodb_row_lock_watis : \u7cfb\u7edf\u4ece\u542f\u52a8\u5230\u73b0\u5728\u603b\u5171\u7b49\u5f85\u7684\u6b21\u6570 \u5f53\u7b49\u5f85\u6b64\u65f6\u5f88\u9ad8, \u4e14\u6bcf\u6b21\u7b49\u5f85\u65f6\u95f4\u4e0d\u77ed, \u9700\u8981\u5206\u6790, \u901a\u8fc7\u4ee5\u4e0b\u8bed\u53e5\u5206\u6790: -- \u67e5\u770b\u6240\u6709\u4e8b\u52a1 select * from information_schema . innodb_trx ; -- \u67e5\u770b\u6d89\u53ca\u5230\u9501\u7684\u4e8b\u52a1 select * from information_shcema . innodb_locks ; -- \u67e5\u770b\u7b49\u5f85\u9501\u7684\u4e8b\u52a1 select * from information_shcema . innodb_lock_waits ; -- \u91ca\u653e\u9501, trx_mysql_thread_id\u4eceinnodb_trx\u8868\u4e2d\u5f97\u5230 kill trx_mysql_thread_id -- \u67e5\u770b\u6b7b\u9501\u65e5\u5fd7 show engine innodb status \\ G ;","title":"\u9501\u7684\u5206\u6790"},{"location":"mysql/MySQL%E4%BA%8B%E5%8A%A1%E5%8F%8A%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E%E9%94%81%E6%9C%BA%E5%88%B6/#_6","text":"\u5c3d\u53ef\u80fd\u4f7f\u7528\u4f4e\u7ea7\u522b\u4e8b\u52a1\u9694\u79bb \u5c3d\u91cf\u7528\u8fc7\u7d22\u5f15\u68c0\u7d22\u6570\u636e, \u907f\u514d\u65e0\u7d22\u5f15\u884c\u5347\u7ea7\u4e3a\u8868\u9501 \u5408\u7406\u8bbe\u8ba1\u7d22\u5f15, \u5c3d\u91cf\u7f29\u5c0f\u9501\u7684\u8303\u56f4, \u5373\u51cf\u5c11\u68c0\u7d22\u6761\u4ef6\u8303\u56f4, \u907f\u514d\u95f4\u9699\u9501 \u5c3d\u91cf\u63a7\u5236\u4e8b\u52a1\u5927\u5c0f, \u51cf\u5c11\u9501\u5b9a\u8d44\u6e90\u91cf\u548c\u65f6\u95f4\u957f\u5ea6 \u5c3d\u91cf\u5c06\u6d89\u53ca\u4e8b\u52a1\u52a0\u9501\u7684sql\u653e\u5230\u6700\u540e\u6267\u884c","title":"\u9501\u7684\u4f18\u5316"},{"location":"mysql/MySQL%E4%BA%8B%E5%8A%A1%E5%8F%8A%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E%E9%94%81%E6%9C%BA%E5%88%B6/#mvcc","text":"MVCC(multi-version concurrency control, \u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236)\u673a\u5236 , \u4ec5\u5bf9\u8bfb\u5df2\u63d0\u4ea4\u548c\u53ef\u91cd\u590d\u8bfb\u4e24\u4e2a\u9694\u79bb\u7ea7\u522b\u6709\u6548, \u6709\u4ee5\u4e0b\u7279\u6027: \u53ea\u9488\u5bf9innodb\u5f15\u64ce\u7684\u6570\u636e\u5e93\u6709\u6548 \u6bcf\u4e2a\u6570\u636e\u5e93\u53ea\u6709\u4e00\u4e2a \u7248\u672c\u94fe (\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e32\u884c\u8d77\u6765\u7684\u8868\u4e2d\u7684\u6bcf\u4e00\u884c\u7684\u6570\u636e), \u901a\u8fc7 undo\u65e5\u5fd7 \u5b9e\u73b0 \u6bcf\u6761\u94fe\u4e2d\u5305\u542b\u4e00\u4e2a \u4e8b\u52a1ID \u7684\u5b57\u6bb5(\u6bcf\u4e00\u884c\u7684\u6570\u636e+\u4e8b\u52a1ID\u5b57\u6bb5) \u4e8b\u52a1\u5f00\u542f(begin)\u65f6\u4e0d\u4f1a\u751f\u6210\u4e8b\u52a1ID, \u5f53\u6267\u884cCRUD\u4efb\u4e00sql\u65f6\u624d\u751f\u6210\u771f\u6b63\u7684\u4e8b\u52a1ID \u751f\u6210\u4e8b\u52a1ID\u7684\u540c\u65f6\u4f1a\u751f\u6210\u6bcf\u4e2a\u4e8b\u52a1\u81ea\u5df1\u72ec\u6709\u7684 \u4e00\u81f4\u6027\u89c6\u56feread-view \u8bfb\u5df2\u63d0\u4ea4\u9694\u79bb\u7ea7\u522b\u4e0b\u7684read-view\u5728\u6bcf\u6b21\u6267\u884csql\u65f6\u90fd\u4f1a\u91cd\u65b0\u751f\u6210, \u800c\u53ef\u91cd\u590d\u8bfb\u9694\u79bb\u7ea7\u522b\u5728commit\u4e4b\u524d\u4e0d\u4f1a\u91cd\u65b0\u751f\u6210(\u4fdd\u8bc1\u4e86\u53ef\u91cd\u590d\u8bfb) select\u8bed\u53e5\u68c0\u7d22\u7684\u6570\u636e\u5e93\u6765\u6e90\u4e8eread-view, \u662f\u901a\u8fc7\u6bd4\u5bf9\u5f53\u524d\u4e8b\u52a1ID\u4e0e\u7248\u672c\u94fe\u4e2d\u7684ID\u53ca\u4e00\u7cfb\u5217\u89c4\u5219\u83b7\u53d6","title":"MVCC"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/","text":"MySQL\u5e38\u7528\u8bed\u53e5\u548c\u547d\u4ee4 DDL\u76f8\u5173\u57fa\u7840\u8bed\u53e5 DDL \u5373\u6570\u636e\u5e93\u5b9a\u4e49\u8bed\u8a00(data definition language) \u663e\u793a\u6570\u636e\u5e93 show databases ; \u521b\u5efa\u6570\u636e\u5e93 create database ` db ` character set 'utf8mb4' collate 'utf8mb4_general_ci' ; \u5220\u9664\u6570\u636e\u5e93 drop database ` db ` ; \u5207\u6362\u6570\u636e\u5e93 use ` db ` ; \u67e5\u770b\u5f53\u524d\u9009\u62e9\u7684\u6570\u636e\u5e93 select database (); DML\u76f8\u5173\u57fa\u7840\u8bed\u53e5 DML \u5373\u6570\u636e\u64cd\u7eb5\u8bed\u8a00(data manipulation language) \u67e5\u770b\u8868 show tables ; \u521b\u5efa\u8868 \u8bed\u6cd5: create table \u8868\u540d(\u5b57\u6bb5\u3001\u7c7b\u578b\u3001\u7ea6\u675f); , \u4f8b\u5982: create table students ( id int auto_increment primary key not null , name varchar ( 10 ) not null , sex bit default 1 , birthday datetime ); \u6269\u5c55: \u67e5\u770b\u8868\u7684\u521b\u5efa\u8bed\u53e5 - show create table \u8868\u540d ; \u67e5\u770b\u8868\u7ed3\u6784\uff1a desc \u8868\u540d; \u4fee\u6539\u5b57\u6bb5 \u8bed\u6cd5: alter table \u8868\u540d add|change|drop \u5217\u540d \u7c7b\u578b; , \u4f8b\u5982\uff1a -- \u65b0\u589e\u5b57\u6bb5is_delete, bit\u7c7b\u578b, \u9ed8\u8ba40 alter table students add is_delete bit default 0 ; -- \u4fee\u6539\u5b57\u6bb5 alter table students change is_delete delete_flag smallint default 0 ; -- \u5220\u9664\u5b57\u6bb5 alter table students drop delete_flag ; \u4fee\u6539\u8868\u540d \u8bed\u6cd5: rename table \u539f\u8868\u540d to \u65b0\u8868\u540d; , \u4f8b\u5982: rename table students to person ; \u5220\u9664\u8868 \u8bed\u6cd5: drop talbe \u8868\u540d1,\u8868\u540d2,\u8868\u540d3; , \u4f8b\u5982: drop table person ; \u67e5\u8be2\u6570\u636e \u8bed\u6cd5: select * from \u8868\u540d where \u6761\u4ef6; \u6216 select \u52171,\u52172,...\u5217n from \u8868\u540d where \u6761\u4ef6 , where\u6761\u4ef6\u53ef\u7701\u7565, \u4f8b\u5982: select * from students ; select name from students ; select * from students where birthday < '2000-01-01' ; \u63d2\u5165\u6570\u636e \u5168\u90e8\u5217\u63d2\u5165 \u8bed\u6cd5: insert into \u8868\u540d values(\u52171, \u52172, ... \u5217n); , \u4f8b\u5982: /* 0 \u4ee3\u6307\u4e3b\u952e, \u4e3b\u952e\u81ea\u589e, \u6b64\u5904\u75280, \u7cfb\u7edf\u81ea\u52a8\u5206\u914d\u4e3b\u952e \u5982\u679c\u8f93\u5165\u7684\u4e0d\u662f0, \u5219\u63d2\u5165, \u4f46\u4e4b\u540e\u4e3b\u952e\u4ee5\u6b64\u63d2\u5165\u7684\u503c\u4e3a\u57fa\u6570\u9012\u589e(\u4e0d\u5efa\u8bae\u624b\u52a8\u6307\u5b9a, \u53ef\u80fd\u4f1a\u51fa\u73b0\u8df3\u53f7) values \u4e5f\u53ef\u4ee5\u5199\u6210 value, \u540c\u65f6\u62ec\u53f7\u5185\u7684\u6570\u636e\u8981\u548c\u5b57\u6bb5\u4e00\u4e00\u5bf9\u5e94 */ insert into students values ( 0 , '\u5f20\u4e09' , 1 , '2001-01-01' ); \u90e8\u5206\u5217\u63d2\u5165 insert into students ( name , birthday ) values ( '\u674e\u56db' , '2001-01-01 01:02:03.456789' ); \u591a\u8bb0\u5f55\u63d2\u5165 -- \u7528\u9017\u53f7\u9694\u5f00\u591a\u6761\u8bb0\u5f55\u5373\u53ef insert into students value ( 0 , '\u738b\u671d' , 1 , '2001-01-01' ),( 0 , '\u9a6c\u6c49' , 1 , '2001-01-01' ); \u4fee\u6539\u6570\u636e \u8bed\u6cd5: update \u8868\u540d set \u52171=\u503c1,\u52172=\u503c2... where \u6761\u4ef6; , where\u6761\u4ef6\u53ef\u7701\u7565, \u4f8b\u5982: update students set name = '\u738b\u4e94' where name = '\u5f20\u4e09' ; update students set name = '\u8d75\u516d' , sex = 0 where name = '\u738b\u4e94' ; update students set birthday = '2022-01-01' where birthday > '2022-12-31' ; \u5220\u9664\u6570\u636e \u8bed\u6cd5: delete from \u8868\u540d where \u6761\u4ef6; , where\u6761\u4ef6\u53ef\u7701\u7565, \u4f8b\u5982: delete from students where name = '\u674e\u56db' ; delete from students ; DCL\u76f8\u5173\u57fa\u7840\u8bed\u53e5 DCL \u5373\u6570\u636e\u5e93\u63a7\u5236\u8bed\u8a00(Data Control Language) \u6761\u4ef6\u8bed\u53e5\u548c\u5176\u4ed6\u5e38\u89c1\u8bed\u53e5 -- \u8303\u56f4 select * from students where age >= 20 ; delete from students where '2000-01-01' < birthday <= '2000-12-31' ; select * from students where sex in ( 0 , 1 , 2 ); select * from students where id between 3 and 5 ; -- \u4e0e\u6216\u975e -- \u6ce8\u610f != \u7684\u53e6\u4e00\u79cd\u5199\u6cd5\u662f <> select * from students where name = '\u738b\u671d' and age != 20 or sex not in ( 1 , 2 , 3 ); -- \u4f18\u5148\u7ea7 -- \u901a\u8fc7\u62ec\u53f7\u6539\u53d8and or \u7684\u4f18\u5148\u7ea7 select * from students where name = '\u738b\u671d' and ( age != 20 or sex not in ( 1 , 2 , 3 )); -- \u7a7a\u5224\u65ad select * from students where birthday is null ; select * from students where sex is not null ; -- \u6a21\u7cca\u67e5\u8be2 -- % \u8868\u793a0\u4e2a\u6216\u591a\u4e2a\u4efb\u610f\u5b57\u7b26, _ \u8868\u793a\u4e00\u4e2a\u4efb\u610f\u5b57\u7b26 select * from students where name like '%\u4e09' ; select * from students where name like '_\u4e09' ; select * from students where name like '_\u4e09%' -- \u5206\u7ec4\u4e0e\u805a\u5408 select count ( * ) from students ; -- \u7edf\u8ba1\u6709\u591a\u5c11\u884c select max ( age ) from students group by sex ; -- \u67e5\u8be2\u7537\u5973\u4e2d\u6700\u5927\u7684\u5e74\u9f84 select min ( age ) from students group by sex ; -- \u67e5\u8be2\u7537\u5973\u4e2d\u6700\u5c0f\u7684\u5e74\u9f84 select avg ( id ) from students ; -- \u67e5\u8be2id\u7684\u5e73\u5747\u6570 select sum ( id ) from students ; -- \u67e5\u8be2id\u7684\u603b\u548c -- as \u522b\u540d select sex as gender from students ; -- having -- having \u7528\u4e8ewhere\u6761\u4ef6\u540e, \u7528\u4e8e\u8fdb\u4e00\u6b65\u8fc7\u6ee4\u7b5b\u9009 select * from students where birthday >= '2001-1-2' having name = 'b' ; select * from students where birthday >= '2001-1-2' and name = 'b' ; -- \u7ed3\u679c\u540c\u4e0a -- \u6392\u5e8f select * from students order by id ; -- \u5347\u5e8f select * from students order by id asc ; -- \u5347\u5e8f select * from students order by id desc ; -- \u964d\u5e8f select * from students order by sex , id desc ; -- \u5148\u6309sex\u964d\u5e8f, \u5728\u6b64\u57fa\u7840\u4e0a\u518d\u6309id\u964d\u5e8f -- \u5206\u9875 select * from students limit 1 \uff0c 3 ; # \u663e\u793a\u7b2c 2 \u6761\u5230\u7b2c 3 \u6761\u6570\u636e ( \u7d22\u5f15\u4ece 0 \u5f00\u59cb ) -- \u6bcf\u9875\u663e\u793a m \u6761\u6570\u636e\uff0c\u5f53\u524d\u663e\u793a\u7b2c n \u9875\u3002 select * from students limit ( n - 1 ) * m , m ; -- \u53bb\u91cd select distinct name from students ; \u5916\u952e\u7ea6\u675f \u521b\u5efa\u8bed\u6cd5: lter table \u4ece\u8868 add constraint \u5916\u952e\u540d\u79f0 foreign key (\u88ab\u7ea6\u675f\u5b57\u6bb5) references \u4e3b\u8868(\u7ea6\u675f\u5b57\u6bb5); alter table scores add constraint fk_sut_sco foreign key ( stuid ) references students ( id ); alter table scores add constraint fk_sut_sub foreign key ( stuid ) references students ( id ); \u521b\u5efa\u8868\u65f6\u540c\u65f6\u6dfb\u52a0\u5916\u952e\u7ea6\u675f\u7684\u8bed\u6cd5\u793a\u4f8b: create table scores(id int auto_increment primary key not null, stuid int, subid int, scores decimal(5,2), foreign key(stuid) references students(id), foreign key(subid) references subjects(id) ); \u5220\u9664\u8bed\u6cd5: alter table \u8868\u540d drop foreign key \u5916\u952e\u7ea6\u675f\u540d; alter table scores drop foreign key fk_sut_sub; \u6269\u5c55, \u5916\u952e\u5f02\u5e38: restrict(\u9650\u5236)\uff1a\u9ed8\u8ba4\u503c\uff0c\u5373\u9ed8\u8ba4\u65b9\u5f0f\uff0c\u629b\u51fa\u5f02\u5e38 cascade(\u7ea7\u8054)\uff1a\u5982\u679c\u4e3b\u8868\u7684\u8bb0\u5f55\u5220\u9664\uff0c\u5219\u4ece\u8868\u4e2d\u76f8\u5173\u8054\u7684\u8bb0\u5f55\u90fd\u5c06\u88ab\u5220\u9664 set null\uff1a\u5c06\u5916\u952e\u8bbe\u7f6e\u4e3a\u7a7a no action\uff1a\u4ec0\u4e48\u90fd\u4e0d\u505a restric\u65b9\u5f0f\u629b\u51fa\u5f02\u5e38, \u4e0d\u53cb\u597d; cascade\u65b9\u5f0f\u7269\u7406\u5220\u9664\u6570\u636e, \u4ea7\u751f\u8fde\u9501\u53cd\u5e94; \u540e\u4e24\u4e2d\u65b9\u5f0f\u4ea7\u751f\u5197\u4f59\u6570\u636e; \u5efa\u8bae\u4f7f\u7528\u903b\u8f91\u5220\u9664, \u6bd5\u7adf\u6570\u636e\u65e0\u4ef7; \u5173\u8054\u67e5\u8be2 \u4f8b\u5982: \u5b66\u751f\u4fe1\u606f\u5b58\u5728\u8868 students\uff0c\u79d1\u76ee\u4fe1\u606f\u5b58\u5728\u8868 subjects\uff0c\u5206\u6570\u4fe1\u606f\u5b58\u5728 scores scores \u8868\u5b58\u5728\u4e24\u4e2a\u5916\u952e fk_sut_sco \u548c fk_sut_sub , \u5206\u522b\u5173\u8054\u8868 students \u548c\u8868 subjects \u8bed\u6cd5: select * from \u8868 inner join \u8868 on \u5173\u7cfb; select students . name , subjects . title , scores . scores from scores inner join students on scores . stuid = students . id inner join subjects on scores . subid = subjects . id ; -- \u8fd9\u79cd\u5199\u6cd5\u4e5f\u662f\u53ef\u4ee5\u7684\uff0c\u867d\u7136\u8868students\u548c\u8868subjects\u6ca1\u6709\u76f4\u63a5\u5173\u7cfb\uff0c\u4f46\u662f\u901a\u8fc7scores\u8868\u4e5f\u53ef\u4ee5\u5173\u8054 select students . name , subjects . title , scores . scores from students inner join scores on students . id = scores . stuid inner join subjects on subjects . id = scores . subid ; \u9664\u4e86 inner join \u8fd8\u6709 left join \u548c right join, \u533a\u522b\u662f: \u8868A inner join \u8868B \u4f1a\u663e\u793a\u51fa\u4e24\u5f20\u8868\u5171\u6709\u7684\u6570\u636e \u8868A left join \u8868B \u9664\u4e86\u4f1a\u663e\u793a\u4e24\u5f20\u8868\u5171\u6709\u7684\u6570\u636e\u5916\u8fd8\u4f1a\u663e\u793a\u8868A\u72ec\u6709\u7684\u6570\u636e, \u672a\u5bf9\u5e94\u7684\u6570\u636e\u4f7f\u7528null\u586b\u5145 \u8868A righ join \u8868B \u9664\u4e86\u4f1a\u663e\u793a\u4e24\u5f20\u8868\u5171\u6709\u7684\u6570\u636e\u5916\u8fd8\u4f1a\u663e\u793a\u8868B\u72ec\u6709\u7684\u6570\u636e\uff0c\u672a\u5bf9\u5e94\u7684\u6570\u636e\u4f7f\u7528null\u586b\u5145 \u7701\u7565\u4e86 inner join ... on ... \u7684\u5173\u8054\u67e5\u8be2\u7684\u5199\u6cd5: select name , title , score from students , subjects , scores where scores . stuid = students . id and scores . subid = subjects . id ; \u8fd9\u79cd\u5199\u6cd5\u7701\u7565\u4e86 inner join ... on ..., \u76f4\u63a5\u5728from\u540e\u7528\u9017\u53f7\u9694\u5f00\u8868\u660e, where\u540e\u9762\u7684\u6761\u4ef6\u5199\u4e0a\u5404\u4e2a\u8868\u7684\u5173\u7cfb, where \u540e\u9762\u7684\u5173\u7cfb\u4e00\u5b9a\u8981\u5199\u4e0a\u4e14\u4e0a\u5199\u5bf9, \u5426\u5219\u67e5\u51fa\u6765\u7684\u6570\u636e\u53ef\u80fd\u662f\u9519\u8bef\u7684 \u89c6\u56fe \u4e3e\u4f8b, \u6bcf\u6b21\u67e5\u8be2\u5b66\u751f\u7684 ID\u3001\u59d3\u540d\u3001\u79d1\u76ee\u3001\u6210\u7ee9, \u90fd\u9700\u8981\u505a\u5173\u8054\u67e5\u8be2, \u975e\u5e38\u9ebb\u70e6, \u6240\u4ee5\u53ef\u4ee5\u5c06\u8fd9\u53e5\u4ee3\u7801\u5c01\u88c5\u8d77\u6765, \u505a\u6210\u89c6\u56fe \u8bed\u6cd5: create view \u89c6\u56fe\u540d\u79f0 as \u67e5\u8be2\u8bed\u53e5; -- \u521b\u5efa\u89c6\u56fe create view v_cfs as select students . id , name , title , score from scores inner join students on stuid = students . id inner join subjects on subid = subjects . id ; -- \u7528\u6cd5 select * from v_cfs ; \u4fee\u6539\u89c6\u56fe\u7684\u8bed\u6cd5: alter view \u89c6\u56fe\u540d\u79f0 as \u4fee\u6539\u540e\u7684\u67e5\u8be2\u8bed\u53e5; \u5220\u9664\u89c6\u56fe\u7684\u8bed\u6cd5: drop view \u89c6\u56fe\u540d\u79f0; \u4f8b\u5982 drop view v_cfs; \u91cd\u547d\u540d\u89c6\u56fe\u7684\u8bed\u6cd5: rename table \u89c6\u56fe\u540d\u79f0 to \u65b0\u89c6\u56fe\u540d\u79f0; \u4e8b\u52a1 \u56db\u5927\u7279\u6027: \u539f\u5b50\u6027\u3001\u4e00\u81f4\u6027\u3001\u9694\u79bb\u6027\u3001\u6301\u4e45\u6027 \u4e8b\u52a1\u8bed\u6cd5: begin ; -- \u5f00\u59cb\u4e8b\u52a1 your sql ; -- \u7f16\u5199sql commit ; -- \u63d0\u4ea4\u4e8b\u52a1, \u82e5\u8981\u653e\u5f03\u5219\u4f7f\u7528 rollback; \u7d22\u5f15 \u5b9a\u4e49: \u5355\u5217\u7d22\u5f15: \u4e00\u4e2a\u7d22\u5f15\u53ea\u5305\u542b\u5355\u4e2a\u5217, \u4e00\u4e2a\u8868\u53ef\u4ee5\u6709\u591a\u4e2a\u5355\u5217\u7d22\u5f15, \u4f46\u8fd9\u4e0d\u662f\u7ec4(\u8054)\u5408\u7d22\u5f15 \u7ec4\u5408\u7d22\u5f15: \u53c8\u53eb\u8054\u5408\u7d22\u5f15, \u5373\u4e00\u4e2a\u7d22\u5f15\u5305\u542b\u591a\u4e2a\u5217 \u5efa\u7acb: create index \u7d22\u5f15\u540d on \u8868\u540d(\u5217\u540d1(\u957f\u5ea6),\u5217\u540d2(\u957f\u5ea6),...); \u5982\u679c\u5217\u7684\u6570\u636e\u7c7b\u578b\u662f\u6574\u578b\u53ef\u4ee5\u4e0d\u5199\u957f\u5ea6\uff0c\u5982\u679c\u662f\u5b57\u7b26\u4e32\u5c31\u5c31\u5199\u5b57\u7b26\u4e32\u7684\u957f\u5ea6 \u67e5\u770b: show index from \u8868\u540d; \u5220\u9664: drop index \u7d22\u5f15\u540d on \u8868\u540d; \u597d\u5904: \u63d0\u9ad8\u67e5\u8be2\u6548\u7387 \u574f\u5904: \u964d\u4f4e\u8868\u7684\u66f4\u65b0\u901f\u5ea6\uff0c\u56e0\u4e3a\u5f53insert\u3001update\u548cdelete\u7684\u65f6\u5019\uff0cmysql\u4e0d\u4ec5\u8981\u66f4\u65b0\u8868\u7684\u5185\u5bb9\u8fd8\u8981\u66f4\u65b0\u7d22\u5f15\u7684\u5185\u5bb9 \u5efa\u7acb\u7d22\u5f15\u4f1a\u5360\u7528\u78c1\u76d8\u7a7a\u95f4\u7684\u7d22\u5f15\u6587\u4ef6 \u7d22\u5f15\u4f7f\u7528\u793a\u4f8b: 1. set profiling=1; # \u5f00\u542f\u8fd0\u884c\u65f6\u95f4\u76d1\u6d4b 2. select * from areas where atitle='\u5e7f\u5dde\u5e02'; # \u6ca1\u6709\u5efa\u7acb\u7d22\u5f15\u7684\u65f6\u5019\u67e5\u8be2 3. show profiles; # \u663e\u793a\u65f6\u95f4\u662f0.00355700\u79d2 4. create index atitleindex on areas(atitle(20)); # \u5efa\u7acb\u7d22\u5f15 5. select * from areas where atitle='\u5e7f\u5dde\u5e02'; # \u5efa\u7acb\u7d22\u5f15\u540e\u518d\u6b21\u67e5\u8be2 6. show profiles; # \u663e\u793a\u65f6\u95f4\u662f0.00069875\u79d2, \u5bf9\u6bd4\u53d1\u73b0\u5efa\u7acb\u7d22\u5f15\u540e\u67e5\u8be2\u901f\u5ea6\u63d0\u5347 7. drop index atitleindex on areas; # \u5220\u9664\u7d22\u5f15 \u6269\u5c55\u8bed\u53e5 \u67e5\u770b\u65f6\u533a show variables like '%time_zone%' ; \u67e5\u770b\u65f6\u95f4 select now (); \u67e5\u770b\u4e8b\u4ef6 show events ; \u5220\u9664\u4e8b\u4ef6 drop event event_name ; \u67e5\u770b\u89e6\u53d1\u5668 show triggers ; \u5220\u9664\u89e6\u53d1\u5668 drop trigger trigger_name ; \u67e5\u770b\u5b58\u50a8\u8fc7\u7a0b show procedure status ; \u67e5\u770b\u5b58\u50a8\u8fc7\u7a0b\u5185\u5bb9 show create procedure procedure_name ; \u5220\u9664\u5b58\u50a8\u8fc7\u7a0b drop procedure procedure_name ; \u5c55\u793a\u51fd\u6570 show function status ; \u5c55\u793a\u5f53\u524d\u8fde\u63a5\u7528\u6237 show processlist ; \u8e22\u6389\u5ba2\u6237\u7aef\u547d\u4ee4: kill id; \u5c55\u793a\u957f\u8fde\u63a5\u6700\u957f\u65f6\u95f4 show global variables like \"wait_timeout\" ; \u5c55\u793a\u662f\u5426\u5f00\u542fbinlog show variables like 'log_bin' ; binlog \u8bb0\u5f55\u4e86 DDL \u548c DML \u8bed\u53e5(\u9664\u4e86\u6570\u636e\u67e5\u8be2\u8bed\u53e5select), \u4ee5\u4e8b\u4ef6\u5f62\u5f0f\u8bb0\u5f55 \u53ef\u4ee5\u6062\u590d delete \u548c truncate \u5220\u9664\u7684\u4fe1\u606f binlog \u67093\u79cd\u8bb0\u5f55\u65b9\u5f0f: statement\u3001row\u3001mixed, statement\u8bb0\u5f55\u6267\u884c\u7684sql, row\u8bb0\u5f55\u6267\u884csql\u540e\u7684\u7ed3\u679c, mixed\u662f\u524d\u4e24\u8005\u6df7\u5408 statement\u901f\u5ea6\u5feb\u5360\u7528\u78c1\u76d8\u7a7a\u95f4\u5c0f, \u4f46\u5728\u4e3b\u4ece\u6a21\u5f0f\u7684\u60c5\u51b5\u4e0b\u53ef\u80fd\u4f1a\u51fa\u73b0\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u95ee\u9898, row\u6b63\u597d\u76f8\u53cd, \u4e00\u822c\u5efa\u8bae\u4f7f\u7528row\u6a21\u5f0f SQL\u547d\u4ee4 \u5907\u4efd\u6570\u636e\u5e93 \u8bed\u6cd5: mysqldump -u \u7528\u6237\u540d -p \u6570\u636e\u5e93\u540d > ~/\u8def\u5f84/\u5907\u4efd\u6587\u4ef6.sql , \u4f8b\u5982: mysqldump -u root -p students > ~/students_bak.sql \u8fd8\u539f\u6570\u636e\u5e93 \u8bed\u6cd5: mysql -u \u7528\u6237\u540d -p \u6570\u636e\u5e93\u540d < ~/\u8def\u5f84/\u5907\u4efd\u6587\u4ef6.sql; , \u4f8b\u5982: mysql -u root -p students < ~/students_bak.sql","title":"MySQL\u5e38\u7528\u8bed\u53e5\u548c\u547d\u4ee4"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#mysql","text":"","title":"MySQL\u5e38\u7528\u8bed\u53e5\u548c\u547d\u4ee4"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#ddl","text":"DDL \u5373\u6570\u636e\u5e93\u5b9a\u4e49\u8bed\u8a00(data definition language)","title":"DDL\u76f8\u5173\u57fa\u7840\u8bed\u53e5"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_1","text":"show databases ;","title":"\u663e\u793a\u6570\u636e\u5e93"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_2","text":"create database ` db ` character set 'utf8mb4' collate 'utf8mb4_general_ci' ;","title":"\u521b\u5efa\u6570\u636e\u5e93"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_3","text":"drop database ` db ` ;","title":"\u5220\u9664\u6570\u636e\u5e93"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_4","text":"use ` db ` ;","title":"\u5207\u6362\u6570\u636e\u5e93"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_5","text":"select database ();","title":"\u67e5\u770b\u5f53\u524d\u9009\u62e9\u7684\u6570\u636e\u5e93"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#dml","text":"DML \u5373\u6570\u636e\u64cd\u7eb5\u8bed\u8a00(data manipulation language)","title":"DML\u76f8\u5173\u57fa\u7840\u8bed\u53e5"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_6","text":"show tables ;","title":"\u67e5\u770b\u8868"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_7","text":"\u8bed\u6cd5: create table \u8868\u540d(\u5b57\u6bb5\u3001\u7c7b\u578b\u3001\u7ea6\u675f); , \u4f8b\u5982: create table students ( id int auto_increment primary key not null , name varchar ( 10 ) not null , sex bit default 1 , birthday datetime ); \u6269\u5c55: \u67e5\u770b\u8868\u7684\u521b\u5efa\u8bed\u53e5 - show create table \u8868\u540d ; \u67e5\u770b\u8868\u7ed3\u6784\uff1a desc \u8868\u540d;","title":"\u521b\u5efa\u8868"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_8","text":"\u8bed\u6cd5: alter table \u8868\u540d add|change|drop \u5217\u540d \u7c7b\u578b; , \u4f8b\u5982\uff1a -- \u65b0\u589e\u5b57\u6bb5is_delete, bit\u7c7b\u578b, \u9ed8\u8ba40 alter table students add is_delete bit default 0 ; -- \u4fee\u6539\u5b57\u6bb5 alter table students change is_delete delete_flag smallint default 0 ; -- \u5220\u9664\u5b57\u6bb5 alter table students drop delete_flag ;","title":"\u4fee\u6539\u5b57\u6bb5"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_9","text":"\u8bed\u6cd5: rename table \u539f\u8868\u540d to \u65b0\u8868\u540d; , \u4f8b\u5982: rename table students to person ;","title":"\u4fee\u6539\u8868\u540d"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_10","text":"\u8bed\u6cd5: drop talbe \u8868\u540d1,\u8868\u540d2,\u8868\u540d3; , \u4f8b\u5982: drop table person ;","title":"\u5220\u9664\u8868"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_11","text":"\u8bed\u6cd5: select * from \u8868\u540d where \u6761\u4ef6; \u6216 select \u52171,\u52172,...\u5217n from \u8868\u540d where \u6761\u4ef6 , where\u6761\u4ef6\u53ef\u7701\u7565, \u4f8b\u5982: select * from students ; select name from students ; select * from students where birthday < '2000-01-01' ;","title":"\u67e5\u8be2\u6570\u636e"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_12","text":"","title":"\u63d2\u5165\u6570\u636e"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_13","text":"\u8bed\u6cd5: insert into \u8868\u540d values(\u52171, \u52172, ... \u5217n); , \u4f8b\u5982: /* 0 \u4ee3\u6307\u4e3b\u952e, \u4e3b\u952e\u81ea\u589e, \u6b64\u5904\u75280, \u7cfb\u7edf\u81ea\u52a8\u5206\u914d\u4e3b\u952e \u5982\u679c\u8f93\u5165\u7684\u4e0d\u662f0, \u5219\u63d2\u5165, \u4f46\u4e4b\u540e\u4e3b\u952e\u4ee5\u6b64\u63d2\u5165\u7684\u503c\u4e3a\u57fa\u6570\u9012\u589e(\u4e0d\u5efa\u8bae\u624b\u52a8\u6307\u5b9a, \u53ef\u80fd\u4f1a\u51fa\u73b0\u8df3\u53f7) values \u4e5f\u53ef\u4ee5\u5199\u6210 value, \u540c\u65f6\u62ec\u53f7\u5185\u7684\u6570\u636e\u8981\u548c\u5b57\u6bb5\u4e00\u4e00\u5bf9\u5e94 */ insert into students values ( 0 , '\u5f20\u4e09' , 1 , '2001-01-01' );","title":"\u5168\u90e8\u5217\u63d2\u5165"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_14","text":"insert into students ( name , birthday ) values ( '\u674e\u56db' , '2001-01-01 01:02:03.456789' );","title":"\u90e8\u5206\u5217\u63d2\u5165"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_15","text":"-- \u7528\u9017\u53f7\u9694\u5f00\u591a\u6761\u8bb0\u5f55\u5373\u53ef insert into students value ( 0 , '\u738b\u671d' , 1 , '2001-01-01' ),( 0 , '\u9a6c\u6c49' , 1 , '2001-01-01' );","title":"\u591a\u8bb0\u5f55\u63d2\u5165"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_16","text":"\u8bed\u6cd5: update \u8868\u540d set \u52171=\u503c1,\u52172=\u503c2... where \u6761\u4ef6; , where\u6761\u4ef6\u53ef\u7701\u7565, \u4f8b\u5982: update students set name = '\u738b\u4e94' where name = '\u5f20\u4e09' ; update students set name = '\u8d75\u516d' , sex = 0 where name = '\u738b\u4e94' ; update students set birthday = '2022-01-01' where birthday > '2022-12-31' ;","title":"\u4fee\u6539\u6570\u636e"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_17","text":"\u8bed\u6cd5: delete from \u8868\u540d where \u6761\u4ef6; , where\u6761\u4ef6\u53ef\u7701\u7565, \u4f8b\u5982: delete from students where name = '\u674e\u56db' ; delete from students ;","title":"\u5220\u9664\u6570\u636e"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#dcl","text":"DCL \u5373\u6570\u636e\u5e93\u63a7\u5236\u8bed\u8a00(Data Control Language)","title":"DCL\u76f8\u5173\u57fa\u7840\u8bed\u53e5"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_18","text":"-- \u8303\u56f4 select * from students where age >= 20 ; delete from students where '2000-01-01' < birthday <= '2000-12-31' ; select * from students where sex in ( 0 , 1 , 2 ); select * from students where id between 3 and 5 ; -- \u4e0e\u6216\u975e -- \u6ce8\u610f != \u7684\u53e6\u4e00\u79cd\u5199\u6cd5\u662f <> select * from students where name = '\u738b\u671d' and age != 20 or sex not in ( 1 , 2 , 3 ); -- \u4f18\u5148\u7ea7 -- \u901a\u8fc7\u62ec\u53f7\u6539\u53d8and or \u7684\u4f18\u5148\u7ea7 select * from students where name = '\u738b\u671d' and ( age != 20 or sex not in ( 1 , 2 , 3 )); -- \u7a7a\u5224\u65ad select * from students where birthday is null ; select * from students where sex is not null ; -- \u6a21\u7cca\u67e5\u8be2 -- % \u8868\u793a0\u4e2a\u6216\u591a\u4e2a\u4efb\u610f\u5b57\u7b26, _ \u8868\u793a\u4e00\u4e2a\u4efb\u610f\u5b57\u7b26 select * from students where name like '%\u4e09' ; select * from students where name like '_\u4e09' ; select * from students where name like '_\u4e09%' -- \u5206\u7ec4\u4e0e\u805a\u5408 select count ( * ) from students ; -- \u7edf\u8ba1\u6709\u591a\u5c11\u884c select max ( age ) from students group by sex ; -- \u67e5\u8be2\u7537\u5973\u4e2d\u6700\u5927\u7684\u5e74\u9f84 select min ( age ) from students group by sex ; -- \u67e5\u8be2\u7537\u5973\u4e2d\u6700\u5c0f\u7684\u5e74\u9f84 select avg ( id ) from students ; -- \u67e5\u8be2id\u7684\u5e73\u5747\u6570 select sum ( id ) from students ; -- \u67e5\u8be2id\u7684\u603b\u548c -- as \u522b\u540d select sex as gender from students ; -- having -- having \u7528\u4e8ewhere\u6761\u4ef6\u540e, \u7528\u4e8e\u8fdb\u4e00\u6b65\u8fc7\u6ee4\u7b5b\u9009 select * from students where birthday >= '2001-1-2' having name = 'b' ; select * from students where birthday >= '2001-1-2' and name = 'b' ; -- \u7ed3\u679c\u540c\u4e0a -- \u6392\u5e8f select * from students order by id ; -- \u5347\u5e8f select * from students order by id asc ; -- \u5347\u5e8f select * from students order by id desc ; -- \u964d\u5e8f select * from students order by sex , id desc ; -- \u5148\u6309sex\u964d\u5e8f, \u5728\u6b64\u57fa\u7840\u4e0a\u518d\u6309id\u964d\u5e8f -- \u5206\u9875 select * from students limit 1 \uff0c 3 ; # \u663e\u793a\u7b2c 2 \u6761\u5230\u7b2c 3 \u6761\u6570\u636e ( \u7d22\u5f15\u4ece 0 \u5f00\u59cb ) -- \u6bcf\u9875\u663e\u793a m \u6761\u6570\u636e\uff0c\u5f53\u524d\u663e\u793a\u7b2c n \u9875\u3002 select * from students limit ( n - 1 ) * m , m ; -- \u53bb\u91cd select distinct name from students ;","title":"\u6761\u4ef6\u8bed\u53e5\u548c\u5176\u4ed6\u5e38\u89c1\u8bed\u53e5"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_19","text":"\u521b\u5efa\u8bed\u6cd5: lter table \u4ece\u8868 add constraint \u5916\u952e\u540d\u79f0 foreign key (\u88ab\u7ea6\u675f\u5b57\u6bb5) references \u4e3b\u8868(\u7ea6\u675f\u5b57\u6bb5); alter table scores add constraint fk_sut_sco foreign key ( stuid ) references students ( id ); alter table scores add constraint fk_sut_sub foreign key ( stuid ) references students ( id ); \u521b\u5efa\u8868\u65f6\u540c\u65f6\u6dfb\u52a0\u5916\u952e\u7ea6\u675f\u7684\u8bed\u6cd5\u793a\u4f8b: create table scores(id int auto_increment primary key not null, stuid int, subid int, scores decimal(5,2), foreign key(stuid) references students(id), foreign key(subid) references subjects(id) ); \u5220\u9664\u8bed\u6cd5: alter table \u8868\u540d drop foreign key \u5916\u952e\u7ea6\u675f\u540d; alter table scores drop foreign key fk_sut_sub; \u6269\u5c55, \u5916\u952e\u5f02\u5e38: restrict(\u9650\u5236)\uff1a\u9ed8\u8ba4\u503c\uff0c\u5373\u9ed8\u8ba4\u65b9\u5f0f\uff0c\u629b\u51fa\u5f02\u5e38 cascade(\u7ea7\u8054)\uff1a\u5982\u679c\u4e3b\u8868\u7684\u8bb0\u5f55\u5220\u9664\uff0c\u5219\u4ece\u8868\u4e2d\u76f8\u5173\u8054\u7684\u8bb0\u5f55\u90fd\u5c06\u88ab\u5220\u9664 set null\uff1a\u5c06\u5916\u952e\u8bbe\u7f6e\u4e3a\u7a7a no action\uff1a\u4ec0\u4e48\u90fd\u4e0d\u505a restric\u65b9\u5f0f\u629b\u51fa\u5f02\u5e38, \u4e0d\u53cb\u597d; cascade\u65b9\u5f0f\u7269\u7406\u5220\u9664\u6570\u636e, \u4ea7\u751f\u8fde\u9501\u53cd\u5e94; \u540e\u4e24\u4e2d\u65b9\u5f0f\u4ea7\u751f\u5197\u4f59\u6570\u636e; \u5efa\u8bae\u4f7f\u7528\u903b\u8f91\u5220\u9664, \u6bd5\u7adf\u6570\u636e\u65e0\u4ef7;","title":"\u5916\u952e\u7ea6\u675f"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_20","text":"\u4f8b\u5982: \u5b66\u751f\u4fe1\u606f\u5b58\u5728\u8868 students\uff0c\u79d1\u76ee\u4fe1\u606f\u5b58\u5728\u8868 subjects\uff0c\u5206\u6570\u4fe1\u606f\u5b58\u5728 scores scores \u8868\u5b58\u5728\u4e24\u4e2a\u5916\u952e fk_sut_sco \u548c fk_sut_sub , \u5206\u522b\u5173\u8054\u8868 students \u548c\u8868 subjects \u8bed\u6cd5: select * from \u8868 inner join \u8868 on \u5173\u7cfb; select students . name , subjects . title , scores . scores from scores inner join students on scores . stuid = students . id inner join subjects on scores . subid = subjects . id ; -- \u8fd9\u79cd\u5199\u6cd5\u4e5f\u662f\u53ef\u4ee5\u7684\uff0c\u867d\u7136\u8868students\u548c\u8868subjects\u6ca1\u6709\u76f4\u63a5\u5173\u7cfb\uff0c\u4f46\u662f\u901a\u8fc7scores\u8868\u4e5f\u53ef\u4ee5\u5173\u8054 select students . name , subjects . title , scores . scores from students inner join scores on students . id = scores . stuid inner join subjects on subjects . id = scores . subid ; \u9664\u4e86 inner join \u8fd8\u6709 left join \u548c right join, \u533a\u522b\u662f: \u8868A inner join \u8868B \u4f1a\u663e\u793a\u51fa\u4e24\u5f20\u8868\u5171\u6709\u7684\u6570\u636e \u8868A left join \u8868B \u9664\u4e86\u4f1a\u663e\u793a\u4e24\u5f20\u8868\u5171\u6709\u7684\u6570\u636e\u5916\u8fd8\u4f1a\u663e\u793a\u8868A\u72ec\u6709\u7684\u6570\u636e, \u672a\u5bf9\u5e94\u7684\u6570\u636e\u4f7f\u7528null\u586b\u5145 \u8868A righ join \u8868B \u9664\u4e86\u4f1a\u663e\u793a\u4e24\u5f20\u8868\u5171\u6709\u7684\u6570\u636e\u5916\u8fd8\u4f1a\u663e\u793a\u8868B\u72ec\u6709\u7684\u6570\u636e\uff0c\u672a\u5bf9\u5e94\u7684\u6570\u636e\u4f7f\u7528null\u586b\u5145 \u7701\u7565\u4e86 inner join ... on ... \u7684\u5173\u8054\u67e5\u8be2\u7684\u5199\u6cd5: select name , title , score from students , subjects , scores where scores . stuid = students . id and scores . subid = subjects . id ; \u8fd9\u79cd\u5199\u6cd5\u7701\u7565\u4e86 inner join ... on ..., \u76f4\u63a5\u5728from\u540e\u7528\u9017\u53f7\u9694\u5f00\u8868\u660e, where\u540e\u9762\u7684\u6761\u4ef6\u5199\u4e0a\u5404\u4e2a\u8868\u7684\u5173\u7cfb, where \u540e\u9762\u7684\u5173\u7cfb\u4e00\u5b9a\u8981\u5199\u4e0a\u4e14\u4e0a\u5199\u5bf9, \u5426\u5219\u67e5\u51fa\u6765\u7684\u6570\u636e\u53ef\u80fd\u662f\u9519\u8bef\u7684","title":"\u5173\u8054\u67e5\u8be2"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_21","text":"\u4e3e\u4f8b, \u6bcf\u6b21\u67e5\u8be2\u5b66\u751f\u7684 ID\u3001\u59d3\u540d\u3001\u79d1\u76ee\u3001\u6210\u7ee9, \u90fd\u9700\u8981\u505a\u5173\u8054\u67e5\u8be2, \u975e\u5e38\u9ebb\u70e6, \u6240\u4ee5\u53ef\u4ee5\u5c06\u8fd9\u53e5\u4ee3\u7801\u5c01\u88c5\u8d77\u6765, \u505a\u6210\u89c6\u56fe \u8bed\u6cd5: create view \u89c6\u56fe\u540d\u79f0 as \u67e5\u8be2\u8bed\u53e5; -- \u521b\u5efa\u89c6\u56fe create view v_cfs as select students . id , name , title , score from scores inner join students on stuid = students . id inner join subjects on subid = subjects . id ; -- \u7528\u6cd5 select * from v_cfs ; \u4fee\u6539\u89c6\u56fe\u7684\u8bed\u6cd5: alter view \u89c6\u56fe\u540d\u79f0 as \u4fee\u6539\u540e\u7684\u67e5\u8be2\u8bed\u53e5; \u5220\u9664\u89c6\u56fe\u7684\u8bed\u6cd5: drop view \u89c6\u56fe\u540d\u79f0; \u4f8b\u5982 drop view v_cfs; \u91cd\u547d\u540d\u89c6\u56fe\u7684\u8bed\u6cd5: rename table \u89c6\u56fe\u540d\u79f0 to \u65b0\u89c6\u56fe\u540d\u79f0;","title":"\u89c6\u56fe"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_22","text":"\u56db\u5927\u7279\u6027: \u539f\u5b50\u6027\u3001\u4e00\u81f4\u6027\u3001\u9694\u79bb\u6027\u3001\u6301\u4e45\u6027 \u4e8b\u52a1\u8bed\u6cd5: begin ; -- \u5f00\u59cb\u4e8b\u52a1 your sql ; -- \u7f16\u5199sql commit ; -- \u63d0\u4ea4\u4e8b\u52a1, \u82e5\u8981\u653e\u5f03\u5219\u4f7f\u7528 rollback;","title":"\u4e8b\u52a1"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_23","text":"\u5b9a\u4e49: \u5355\u5217\u7d22\u5f15: \u4e00\u4e2a\u7d22\u5f15\u53ea\u5305\u542b\u5355\u4e2a\u5217, \u4e00\u4e2a\u8868\u53ef\u4ee5\u6709\u591a\u4e2a\u5355\u5217\u7d22\u5f15, \u4f46\u8fd9\u4e0d\u662f\u7ec4(\u8054)\u5408\u7d22\u5f15 \u7ec4\u5408\u7d22\u5f15: \u53c8\u53eb\u8054\u5408\u7d22\u5f15, \u5373\u4e00\u4e2a\u7d22\u5f15\u5305\u542b\u591a\u4e2a\u5217 \u5efa\u7acb: create index \u7d22\u5f15\u540d on \u8868\u540d(\u5217\u540d1(\u957f\u5ea6),\u5217\u540d2(\u957f\u5ea6),...); \u5982\u679c\u5217\u7684\u6570\u636e\u7c7b\u578b\u662f\u6574\u578b\u53ef\u4ee5\u4e0d\u5199\u957f\u5ea6\uff0c\u5982\u679c\u662f\u5b57\u7b26\u4e32\u5c31\u5c31\u5199\u5b57\u7b26\u4e32\u7684\u957f\u5ea6 \u67e5\u770b: show index from \u8868\u540d; \u5220\u9664: drop index \u7d22\u5f15\u540d on \u8868\u540d; \u597d\u5904: \u63d0\u9ad8\u67e5\u8be2\u6548\u7387 \u574f\u5904: \u964d\u4f4e\u8868\u7684\u66f4\u65b0\u901f\u5ea6\uff0c\u56e0\u4e3a\u5f53insert\u3001update\u548cdelete\u7684\u65f6\u5019\uff0cmysql\u4e0d\u4ec5\u8981\u66f4\u65b0\u8868\u7684\u5185\u5bb9\u8fd8\u8981\u66f4\u65b0\u7d22\u5f15\u7684\u5185\u5bb9 \u5efa\u7acb\u7d22\u5f15\u4f1a\u5360\u7528\u78c1\u76d8\u7a7a\u95f4\u7684\u7d22\u5f15\u6587\u4ef6 \u7d22\u5f15\u4f7f\u7528\u793a\u4f8b: 1. set profiling=1; # \u5f00\u542f\u8fd0\u884c\u65f6\u95f4\u76d1\u6d4b 2. select * from areas where atitle='\u5e7f\u5dde\u5e02'; # \u6ca1\u6709\u5efa\u7acb\u7d22\u5f15\u7684\u65f6\u5019\u67e5\u8be2 3. show profiles; # \u663e\u793a\u65f6\u95f4\u662f0.00355700\u79d2 4. create index atitleindex on areas(atitle(20)); # \u5efa\u7acb\u7d22\u5f15 5. select * from areas where atitle='\u5e7f\u5dde\u5e02'; # \u5efa\u7acb\u7d22\u5f15\u540e\u518d\u6b21\u67e5\u8be2 6. show profiles; # \u663e\u793a\u65f6\u95f4\u662f0.00069875\u79d2, \u5bf9\u6bd4\u53d1\u73b0\u5efa\u7acb\u7d22\u5f15\u540e\u67e5\u8be2\u901f\u5ea6\u63d0\u5347 7. drop index atitleindex on areas; # \u5220\u9664\u7d22\u5f15","title":"\u7d22\u5f15"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_24","text":"\u67e5\u770b\u65f6\u533a show variables like '%time_zone%' ; \u67e5\u770b\u65f6\u95f4 select now (); \u67e5\u770b\u4e8b\u4ef6 show events ; \u5220\u9664\u4e8b\u4ef6 drop event event_name ; \u67e5\u770b\u89e6\u53d1\u5668 show triggers ; \u5220\u9664\u89e6\u53d1\u5668 drop trigger trigger_name ; \u67e5\u770b\u5b58\u50a8\u8fc7\u7a0b show procedure status ; \u67e5\u770b\u5b58\u50a8\u8fc7\u7a0b\u5185\u5bb9 show create procedure procedure_name ; \u5220\u9664\u5b58\u50a8\u8fc7\u7a0b drop procedure procedure_name ; \u5c55\u793a\u51fd\u6570 show function status ; \u5c55\u793a\u5f53\u524d\u8fde\u63a5\u7528\u6237 show processlist ; \u8e22\u6389\u5ba2\u6237\u7aef\u547d\u4ee4: kill id; \u5c55\u793a\u957f\u8fde\u63a5\u6700\u957f\u65f6\u95f4 show global variables like \"wait_timeout\" ; \u5c55\u793a\u662f\u5426\u5f00\u542fbinlog show variables like 'log_bin' ; binlog \u8bb0\u5f55\u4e86 DDL \u548c DML \u8bed\u53e5(\u9664\u4e86\u6570\u636e\u67e5\u8be2\u8bed\u53e5select), \u4ee5\u4e8b\u4ef6\u5f62\u5f0f\u8bb0\u5f55 \u53ef\u4ee5\u6062\u590d delete \u548c truncate \u5220\u9664\u7684\u4fe1\u606f binlog \u67093\u79cd\u8bb0\u5f55\u65b9\u5f0f: statement\u3001row\u3001mixed, statement\u8bb0\u5f55\u6267\u884c\u7684sql, row\u8bb0\u5f55\u6267\u884csql\u540e\u7684\u7ed3\u679c, mixed\u662f\u524d\u4e24\u8005\u6df7\u5408 statement\u901f\u5ea6\u5feb\u5360\u7528\u78c1\u76d8\u7a7a\u95f4\u5c0f, \u4f46\u5728\u4e3b\u4ece\u6a21\u5f0f\u7684\u60c5\u51b5\u4e0b\u53ef\u80fd\u4f1a\u51fa\u73b0\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u95ee\u9898, row\u6b63\u597d\u76f8\u53cd, \u4e00\u822c\u5efa\u8bae\u4f7f\u7528row\u6a21\u5f0f","title":"\u6269\u5c55\u8bed\u53e5"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#sql","text":"","title":"SQL\u547d\u4ee4"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_25","text":"\u8bed\u6cd5: mysqldump -u \u7528\u6237\u540d -p \u6570\u636e\u5e93\u540d > ~/\u8def\u5f84/\u5907\u4efd\u6587\u4ef6.sql , \u4f8b\u5982: mysqldump -u root -p students > ~/students_bak.sql","title":"\u5907\u4efd\u6570\u636e\u5e93"},{"location":"mysql/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E5%92%8C%E5%91%BD%E4%BB%A4/#_26","text":"\u8bed\u6cd5: mysql -u \u7528\u6237\u540d -p \u6570\u636e\u5e93\u540d < ~/\u8def\u5f84/\u5907\u4efd\u6587\u4ef6.sql; , \u4f8b\u5982: mysql -u root -p students < ~/students_bak.sql","title":"\u8fd8\u539f\u6570\u636e\u5e93"},{"location":"mysql/MySQL%E6%97%B6%E5%8C%BA/","text":"Mysql\u65f6\u533a \u67e5\u770b\u65f6\u533a\uff1a show variables like '%time_zone%'; \u7ed3\u679c\u663e\u793a\u4e3a\uff1a Variable_name Value system_time_zone UTC time_zone SYSTEM \u542b\u4e49\u89e3\u91ca\uff1a system_time_zone: \u7cfb\u7edf\u65f6\u533a\u3002\u5f53\u670d\u52a1\u5668\u542f\u52a8\u65f6\uff0c\u5b83\u8bd5\u56fe\u81ea\u52a8\u786e\u5b9a\u4e3b\u673a\u7684\u65f6\u533a\uff0c\u5e76\u4f7f\u7528\u5b83\u6765\u8bbe\u7f6esystem_time_zone\u7cfb\u7edf\u53d8\u91cf\u3002\u6b64\u540e\uff0c\u8be5\u503c\u4e0d\u4f1a\u6539\u53d8 time_zone: \u5f53\u524d\u7684\u65f6\u533a\uff0c\u8fd9\u4e2a\u53d8\u91cf\u7528\u6765\u4e3a\u6bcf\u4e2a\u8fde\u63a5\u7684\u5ba2\u6237\u7aef\u521d\u59cb\u5316\u65f6\u533a\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b83\u7684\u521d\u59cb\u503c\u662f'SYSTEM'\uff08\u8fd9\u610f\u5473\u7740\uff0c\"\u4f7f\u7528system_time_zone\u7684\u503c\"\uff09 \u4fee\u6539\u65f6\u533a\uff1a \u4e00\u5171\u6709\u4e09\u79cd\u65b9\u5f0f\u8bbe\u7f6e\u65f6\u533a\uff1a 1\u3001\u8fd0\u884c\u671f\u95f4 set global time_zone='+8:00'; \u6216\u8005 set global time_zone='Asia/Shanghai'; 1\u3001 \u6ce8\u610f\u4fee\u6539\u65f6\u533a\u540e\uff0c\u9700\u8981\u65ad\u5f00\u4e0e\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u518d\u91cd\u65b0\u8fde\u63a5\uff0c\u5426\u5219\u6b64\u65f6\u67e5\u770b\u65f6\u533a\u53d1\u73b0\u6ca1\u53d8\uff0c\u4f46\u5b9e\u9645\u4e0a\u8bbe\u7f6e\u6210\u529f\uff01 2\u3001\u4e34\u65f6\u4fee\u6539\u547d\u4ee4\u662f `set time_zone='Asia/Shanghai;' \uff0c\u9000\u51famysql\u91cd\u65b0\u8fdb\u53bb\u4f1a\u53d1\u73b0\u5931\u6548 2\u3001\u542f\u52a8\u547d\u4ee4 --default-time-zone=timezone 3\u3001\u914d\u7f6e\u6587\u4ef6 default-time-zone=timezone","title":"Mysql\u65f6\u533a"},{"location":"mysql/MySQL%E6%97%B6%E5%8C%BA/#mysql","text":"\u67e5\u770b\u65f6\u533a\uff1a show variables like '%time_zone%'; \u7ed3\u679c\u663e\u793a\u4e3a\uff1a Variable_name Value system_time_zone UTC time_zone SYSTEM \u542b\u4e49\u89e3\u91ca\uff1a system_time_zone: \u7cfb\u7edf\u65f6\u533a\u3002\u5f53\u670d\u52a1\u5668\u542f\u52a8\u65f6\uff0c\u5b83\u8bd5\u56fe\u81ea\u52a8\u786e\u5b9a\u4e3b\u673a\u7684\u65f6\u533a\uff0c\u5e76\u4f7f\u7528\u5b83\u6765\u8bbe\u7f6esystem_time_zone\u7cfb\u7edf\u53d8\u91cf\u3002\u6b64\u540e\uff0c\u8be5\u503c\u4e0d\u4f1a\u6539\u53d8 time_zone: \u5f53\u524d\u7684\u65f6\u533a\uff0c\u8fd9\u4e2a\u53d8\u91cf\u7528\u6765\u4e3a\u6bcf\u4e2a\u8fde\u63a5\u7684\u5ba2\u6237\u7aef\u521d\u59cb\u5316\u65f6\u533a\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b83\u7684\u521d\u59cb\u503c\u662f'SYSTEM'\uff08\u8fd9\u610f\u5473\u7740\uff0c\"\u4f7f\u7528system_time_zone\u7684\u503c\"\uff09 \u4fee\u6539\u65f6\u533a\uff1a \u4e00\u5171\u6709\u4e09\u79cd\u65b9\u5f0f\u8bbe\u7f6e\u65f6\u533a\uff1a 1\u3001\u8fd0\u884c\u671f\u95f4 set global time_zone='+8:00'; \u6216\u8005 set global time_zone='Asia/Shanghai'; 1\u3001 \u6ce8\u610f\u4fee\u6539\u65f6\u533a\u540e\uff0c\u9700\u8981\u65ad\u5f00\u4e0e\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u518d\u91cd\u65b0\u8fde\u63a5\uff0c\u5426\u5219\u6b64\u65f6\u67e5\u770b\u65f6\u533a\u53d1\u73b0\u6ca1\u53d8\uff0c\u4f46\u5b9e\u9645\u4e0a\u8bbe\u7f6e\u6210\u529f\uff01 2\u3001\u4e34\u65f6\u4fee\u6539\u547d\u4ee4\u662f `set time_zone='Asia/Shanghai;' \uff0c\u9000\u51famysql\u91cd\u65b0\u8fdb\u53bb\u4f1a\u53d1\u73b0\u5931\u6548 2\u3001\u542f\u52a8\u547d\u4ee4 --default-time-zone=timezone 3\u3001\u914d\u7f6e\u6587\u4ef6 default-time-zone=timezone","title":"Mysql\u65f6\u533a"},{"location":"mysql/MySQL%E7%B4%A2%E5%BC%95%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","text":"MySQL\u7d22\u5f15\u7684\u6570\u636e\u7ed3\u6784 \u7d22\u5f15 \u7d22\u5f15\u662f\u5e2e\u52a9Mysql\u9ad8\u6548\u83b7\u53d6\u6570\u636e\u7684\u6392\u597d\u5e8f\u7684\u6570\u636e\u7ed3\u6784 \u6570\u636e\u7ed3\u6784 \u4e8c\u53c9\u6811 \u4e8c\u53c9\u6811\u7684\u6811\u7ed3\u6784: \u5de6\u4fa7\u8282\u70b9\u7684\u6570\u5b57\u6bd4\u7236\u8282\u70b9\u7684\u6570\u5b57\u5c0f, \u53f3\u4fa7\u8282\u70b9\u7684\u6570\u5b57\u6bd4\u7236\u8282\u70b9\u7684\u6570\u5b57\u5927 \u56fe\u5f62\u5316\u53c2\u8003: Binary Search Tree Visualization (usfca.edu) \u5bf9\u4e8e\u65e0\u5e8f\u6570\u636e, \u4e8c\u53c9\u6811\u6709\u4f18\u52bf \u5bf9\u4e8e\u6709\u5e8f\u6570\u636e, \u4e8c\u53c9\u6811\u65e0\u4f18\u52bf(\u4ecd\u9700\u8981\u904d\u5386) \u5f53\u6570\u636e\u91cf\u8f83\u5927\u65f6, \u6811\u7684\u9ad8\u5ea6\u9012\u589e, \u5982\u679c\u67e5\u8be2\u7684\u6570\u636e\u4f4d\u4e8e\u6811\u7684\u5e95\u5c42, \u4f9d\u7136\u5f88\u6162 \u7ea2\u9ed1\u6811(\u4e8c\u53c9\u5e73\u8861\u6811) \u5b9e\u9645\u4e0a\u8fd8\u662f\u4e8c\u53c9\u6811, \u4f46\u5f53\u6709\u5e8f\u63d2\u5165\u6570\u636e\u65f6, \u4f1a\u81ea\u52a8\u5e73\u8861\u6570\u636e, \u5373\u8c03\u6574\u6570\u636e\u7ed3\u6784, \u4f7f\u5f97 \u5de6\u8282\u70b9 < \u7236\u8282\u70b9 < \u53f3\u8282\u70b9 \u56fe\u5f62\u5316\u53c2\u8003: Red/Black Tree Visualization (usfca.edu) \u5f53\u6570\u636e\u91cf\u8f83\u5927\u65f6, \u6811\u7684\u9ad8\u5ea6\u9012\u589e, \u5982\u679c\u67e5\u8be2\u7684\u6570\u636e\u4f4d\u4e8e\u6811\u7684\u5e95\u5c42, \u4f9d\u7136\u5f88\u6162 BTree(B\u6811)\u548cBPlusTree(B+\u6811) \u56fe\u5f62\u5316\u53c2\u8003: B-Tree Visualization (usfca.edu) B+ Tree Visualization (usfca.edu) B\u6811\u76f8\u5bf9\u4e8e\u4e8c\u53c9\u6811\u7684\u533a\u522b\u662f: \u200b \u6839\u8282\u70b9\u4e0d\u662f1\u4e2a, \u800c\u662f\u591a\u4e2a(\u53ef\u4ee5\u5206\u644a\u6570\u636e, \u51cf\u5c11\u4e8c\u53c9\u6811\u7684\u9ad8\u5ea6) \u200b \u591a\u4e2a\u6839\u8282\u70b9\u4ece\u5de6\u5230\u53f3\u662f\u6709\u5e8f\u7684, \u4f9d\u6b21\u9012\u589e \u200b \u540c\u7406, \u6bcf\u4e2a\u6839\u8282\u70b9\u4e0b\u9762\u7684\u53f6\u5b50\u8282\u70b9\u4e5f\u4e0d\u662f1\u4e2a, \u4e5f\u662f\u591a\u4e2a\u4e14\u4e5f\u662f\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u81ea\u589e B+\u6811\u662fB\u6811\u7684\u53d8\u79cd, \u533a\u522b\u662f: \u200b \u975e\u53f6\u5b50\u8282\u70b9\u4e0d\u5b58\u50a8data, \u53ea\u5b58\u50a8\u7d22\u5f15, \u540c\u65f6\u56e0\u4e3a\u4e0d\u5b58\u50a8data, \u4fbf\u53ef\u4ee5\u5b58\u50a8\u66f4\u591a\u7684\u7d22\u5f15(\u53d8\u76f8\u7684\u51cf\u5c11\u6811\u7684\u9ad8\u5ea6, \u63d0\u9ad8\u67e5\u8be2\u6548\u7387) \u200b \u53f6\u5b50\u8282\u70b9\u5305\u542b\u6240\u6709\u7684\u7d22\u5f15\u5b57\u6bb5(\u56e0\u4e3a\u5305\u542b\u6240\u6709\u7d22\u5f15, \u6240\u4ee5\u4e0a\u9762\u975e\u53f6\u5b50\u8282\u70b9\u7684\u7d22\u5f15\u662f\u5197\u4f59\u7684, \u6240\u4ee5B\u6811\u6ca1\u6709\u5197\u4f59\u7d22\u5f15) \u200b \u53f6\u5b50\u8282\u70b9\u7528\u6307\u9488\u8fde\u63a5(\u76f8\u5f53\u4e8e\u94fe\u8868, \u6bcf\u4e00\u5757\u7684\u6700\u540e\u5b58\u50a8\u4e0b\u4e00\u5757\u7684\u5730\u5740, \u6bcf\u4e00\u4e2a\u7684\u6700\u524d\u5b58\u50a8\u4e0a\u4e00\u5757\u7684\u5730\u5740), \u63d0\u9ad8\u533a\u95f4\u8bbf\u95ee(where\u6761\u4ef6 \u540e\u9762\u7684\u8303\u56f4\u67e5\u8be2, \u6bd4\u5982\u5927\u4e8e\u6216\u5c0f\u4e8e\u67d0\u4e2a\u503c)\u7684\u6027\u80fd PS: \u8303\u56f4\u67e5\u627e\u7684\u7ed3\u679c\u7684\u6570\u636e\u91cf\u5f88\u5927\u7684\u65f6\u5019, \u4f9d\u7136\u4f1a\u5f88\u6162, \u6b64\u65f6\u91c7\u7528\u5206\u9875\u5373\u53ef\u89e3\u51b3 MySQL\u4f7f\u7528\u7684\u662fB+\u6811, \u4f46\u5bf9B+\u6811\u505a\u4e86\u4f18\u5316, \u4f8b\u5982\u4e0a\u56fe, \u6807\u51c6\u7684B+\u6811\u662f\u5355\u5411\u7bad\u5934(\u60f3\u8c61\u5355\u5411\u94fe\u8868), \u4f18\u5316\u540e\u662f\u53cc\u5411\u7bad\u5934(\u60f3\u8c61\u53cc\u5411\u94fe\u8868) MySQL\u4f7f\u7528B+\u6811\u5b58\u50a8\u591a\u4e2a\u6839\u8282\u70b9\u65f6, \u5206\u914d\u5230\u4e00\u5757\u8fde\u7eed\u7684\u78c1\u76d8\u7a7a\u95f4(\u78c1\u76d8\u9875, \u5927\u5c0f\u662f16KB), \u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u67e5\u770b: show global status like 'Innodb_page_size' ; MySQL\u4e00\u822c\u4f1a\u5c06\u6839\u8282\u70b9\u5e38\u9a7b\u5230\u5185\u5b58\u4e2d(\u51cf\u5c11\u78c1\u76d8I/O), \u9ad8\u7248\u672c\u7684MySQL\u53ef\u80fd\u4f1a\u5c06\u6240\u6709\u975e\u53f6\u5b50\u8282\u70b9\u90fd\u5e38\u9a7b\u5230\u5185\u5b58\u4e2d PS: MySQL\u662f\u6309\u7167\u9875\u64cd\u4f5c\u7684, \u4f8b\u5982\u8bfb\u53d6\u4e00\u6761\u6570\u636e\u5e76\u4e0d\u662f\u5355\u72ec\u53d6\u8fd9\u4e00\u6761, \u800c\u662f\u5c06\u8fd9\u4e00\u6761\u6570\u636e\u6240\u5728\u7684\u9875\u7684\u5168\u90e8\u6570\u636e\u653e\u5230Buffer Pool\u4e2d B+\u6811\u7684\u9ad8\u5ea6\u8bf4\u767d\u5c31\u662f\u7531\u975e\u53f6\u5b50\u8282\u70b9\u80fd\u5b58\u653e\u591a\u5c11\u4e2a\u7d22\u5f15\u7684\u6570\u91cf\u51b3\u5b9a\u7684 MySIAM\u7d22\u5f15\u6587\u4ef6(.myi)\u548c\u6570\u636e\u6587\u4ef6(.myd)\u662f\u5206\u79bb\u7684( \u975e\u805a\u96c6\u7d22\u5f15, \u53c8\u53eb\u975e\u805a\u7c07\u7d22\u5f15, \u53c8\u53eb\u7a00\u758f\u7d22\u5f15 ) InnoDB\u7d22\u5f15\u6587\u4ef6\u548c\u6570\u636e\u6587\u4ef6\u662f\u4e00\u8d77\u7684(.ibd\u6587\u4ef6, \u805a\u96c6\u7d22\u5f15, \u53c8\u53eb\u805a\u7c07\u7d22\u5f15 ), \u4e14\u805a\u96c6\u7d22\u5f15\u67e5\u5230\u6700\u7ec8\u6570\u636e\u6bd4\u975e\u805a\u96c6\u6240\u6709\u5feb(\u56e0\u4e3a\u5728\u540c\u4e00\u4e2a\u6587\u4ef6\u4e2d) \u5bf9\u4e8e\u4f7f\u7528InnoDB\u7684\u8868\u6765\u8bf4, \u6709\u4e14\u53ea\u80fd\u6709\u4e00\u4e2a\u805a\u96c6\u7d22\u5f15 \u5bf9\u4e8eInnoDB\u6765\u8bf4, \u8868\u6570\u636e\u6587\u4ef6\u672c\u8eab\u5c31\u662f\u6309B+\u6811\u7ec4\u7ec7\u7684\u4e00\u4e2a\u6240\u6709\u7ed3\u6784\u6587\u4ef6, \u5176\u805a\u96c6\u7d22\u5f15-\u53f6\u5b50\u8282\u70b9\u5305\u542b\u5b8c\u6574\u7684\u6570\u636e\u8bb0\u5f55(\u4e3b\u952e\u7684\u6570\u636e+\u5176\u4ed6\u5217\u7684\u6570\u636e) \u5efa\u8baeInnoDB\u8868\u4f7f\u7528\u6574\u5f62\u81ea\u589e\u4e3b\u952e\u7684\u539f\u56e0: \u200b \u5982\u679c\u5efa\u8868\u65f6\u6ca1\u6709\u8bbe\u7f6e\u4e3b\u952e, InnoDB\u4f1a\u81ea\u52a8\u9009\u4e00\u5217\u4e14\u8fd9\u5217\u6570\u636e\u6ca1\u6709\u91cd\u590d, \u5f53\u4f5c\u4e3b\u952e, \u5982\u679c\u6ca1\u6709\u627e\u5230\u4e0d\u91cd\u590d\u7684\u5217, \u4f1a\u81ea\u52a8\u5efa\u7acb\u4e00\u4e2a\u9690\u85cf\u7684\u4e0d\u91cd\u590d\u7684\u5217(\u6bd4\u5982\u7528\u884c\u53f7row_id)\u4f5c\u4e3a\u4e3b\u952e \u200b \u4f7f\u7528\u6574\u5f62\u4f5c\u4e3aID, \u800c\u4e0d\u662fUUID, \u7ed3\u5408\u4e8c\u53c9\u6811\u7684\u6570\u636e\u7ed3\u6784, \u53ef\u4ee5\u53d1\u73b0\u6574\u5f62\u6bd4\u5927\u5c0f\u7684\u6548\u7387\u6bd4UUID\u5feb, \u4e14\u6574\u5f62\u6bd4UUID\u5360\u7528\u7684\u78c1\u76d8\u7a7a\u95f4\u5c0f \u200b \u4f7f\u7528\u81ea\u589e\u662f\u56e0\u4e3a\u7ea2\u9ed1\u6811\u7684\u5e73\u8861\u539f\u56e0, \u5f53\u63d2\u5165\u975e\u81ea\u589eID\u65f6, \u8981\u6ee1\u8db3 \u5de6\u8282\u70b9<\u7236\u8282\u70b9<\u53f3\u8282\u70b9 \u7684\u6761\u4ef6, \u9700\u8981\u5e73\u8861\u8c03\u6574\u6811\u7ed3\u6784, \u5f71\u54cd\u6548\u7387, \u800c\u9012\u589e ID, \u53ea\u9700\u8981\u5728\u6700\u53f3\u4fa7\u6dfb\u52a0\u8282\u70b9\u5373\u53ef(\u60f3\u8c61\u4e00\u4e2aPython\u5217\u8868\u4e2d\u7684append\u548cinsert\u65b9\u6cd5) \u200b \u6240\u4ee5\u5c3d\u91cf\u7ed9\u6bcf\u5f20\u8868\u8bbe\u7f6e\u4e00\u4e2a\u6574\u5f62\u81ea\u589e\u7684\u4e3b\u952e \u975e\u4e3b\u952e(\u8868\u4e2d\u7684\u5176\u4ed6\u5217)\u7d22\u5f15\u7ed3\u6784\u4e2d\u53f6\u5b50\u8282\u70b9\u50a8\u5b58\u7684\u662f\u4e3b\u952e(\u8868\u4e2d\u7684\u4e3b\u952e\u5217)\u7684\u539f\u56e0: \u4e00\u81f4\u6027\u548c\u8282\u7ea6\u5b58\u50a8\u7a7a\u95f4 , \u5982\u56fe: \u4e0a\u9762\u8bf4\u4e86\u53ea\u6709\u4e00\u4e2a\u805a\u96c6\u7d22\u5f15(\u5305\u542b\u6240\u6709\u6570\u636e), \u800c\u5176\u4ed6\u975e\u4e3b\u952e\u7684\u7d22\u5f15\u7684\u53f6\u5b50\u8282\u70b9\u4e2d\u5b58\u50a8\u7684data\u5c31\u662f\u4e3b\u952e\u4e3b\u952e\u7684\u503c(\u5373\u8282\u7ea6\u4e86\u7a7a\u95f4), \u540c\u65f6\u51cf\u5c11\u4e86\u590d\u6742\u5ea6(\u5373\u63d2\u5165\u6570\u636e\u65f6, \u53ea\u8981\u4e3b\u952e\u7d22\u5f15\u66f4\u65b0\u5b8c\u6bd5, \u5176\u4ed6\u975e\u4e3b\u952e\u7d22\u5f15\u5f15\u7528\u4e3b\u952e\u5373\u53ef, \u51cf\u5c11\u4e86\u51fa\u9519\u7684\u53ef\u80fd\u884c, \u4e5f\u5c31\u662f\u4e00\u81f4\u6027) \u975e\u4e3b\u952e\u7d22\u5f15, \u5373\u4e8c\u7ea7\u7d22\u5f15, \u4e5f\u5c31\u662f\u975e\u805a\u96c6\u7d22\u5f15, \u4f7f\u7528\u7684\u65f6\u5019\u5148\u901a\u8fc7\u4e8c\u7ea7\u7d22\u5f15\u627e\u5230\u4e3b\u952e, \u518d\u901a\u8fc7\u4e3b\u952e\u7d22\u5f15\u67e5\u5230\u6700\u7ec8\u9700\u8981\u7684\u6570\u636e, \u8fd9\u5c31\u662f\u56de\u8868 \u8054\u5408\u7d22\u5f15, \u53c8\u53eb\u590d\u5408\u7d22\u5f15, \u5373\u591a\u4e2a\u5b57\u6bb5\u7ec4\u5408\u6210\u4e00\u4e2a\u7d22\u5f15, \u5982\u56fe: \u8fd9\u91cc\u6d89\u53ca\u5230\u4e00\u4e2a \u7d22\u5f15\u6700\u5de6\u5217\u539f\u7406(\u53c8\u53eb\u5de6\u5217\u539f\u7406) , \u5373\u6392\u5e8f\u7684\u65f6\u5019\u6309\u7167\u5b57\u6bb5\u7684\u987a\u5e8f, \u4e0a\u56fe\u793a\u4f8b\u4e2d\u7684name\u3001age\u548cposition\u7684\u987a\u5e8f\u8fdb\u884c\u6bd4\u5927\u5c0f, \u7136\u540e\u6392\u5e8f \u5982\u679c, name\u3001age\u548cposition\u6bd4\u8f83\u5b8c\u6bd5\u53d1\u73b0\u4e00\u6837, \u5c31\u4e0d\u5206\u5148\u540e\u653e\u5728\u4e00\u8d77, \u53f6\u5b50\u8282\u70b9\u7684data\u80af\u5b9a\u662f\u4e3b\u952e \u5982\u679c, name\u3001age\u548cposition\u662f\u8054\u5408\u4e3b\u952e, \u5373\u4e09\u8005\u5408\u4e00\u4e0d\u53ef\u80fd\u91cd\u590d, \u5b83\u672c\u8eab\u5c31\u662f\u805a\u96c6\u7d22\u5f15, \u53f6\u5b50\u8282\u70b9\u7684data\u5b58\u50a8\u5176\u4ed6\u5217\u7684\u6570\u636e \u540c\u65f6, \u4f7f\u7528\u8054\u5408\u7d22\u5f15\u65f6, \u9700\u8981\u6ce8\u610f\u5b57\u6bb5\u7684\u987a\u5e8f, \u5982 : select * from table_1 where name='xxx' and age='xxx'; # \u4f7f\u7528\u4e86\u7d22\u5f15 select * from table_1 where age='xxx' and position='xxx'; # \u672a\u4f7f\u7528\u7d22\u5f15 select * from table_1 where name='xxx' # \u4f7f\u7528\u4e86\u7d22\u5f15 select * from table_1 where position='xxx' # \u672a\u4f7f\u7528\u7d22\u5f15 # \u8fd9\u5c31\u662f\u6700\u5de6\u524d\u7f00\u539f\u7406 # why? # \u770b\u4e0a\u56fe, \u7d22\u5f15\u5c31\u662f\u6392\u597d\u5e8f\u7684\u6570\u636e\u7ed3\u6784, \u6240\u4ee5\u4e0a\u56fe\u4e2d\u5148\u6392\u5e8f\u7684name, \u7136\u540eage, \u6700\u540eposition # \u4f7f\u7528explain\u8bed\u6cd5\u53ef\u4ee5\u67e5\u770b\u7d22\u5f15\u7684\u4f7f\u7528, \u5982: explain select * from table_1 where name='xxx' and age='xxx'; \u4e00\u822c\u6765\u8bb2, \u4e00\u5f20\u8868\u4e2d\u4e0d\u63a8\u8350\u5efa\u7acb\u591a\u4e2a\u5355\u952e\u7d22\u5f15, \u57fa\u672c\u4e0a\u90fd\u7528\u8054\u5408\u7d22\u5f15 Hash \u5176\u5b9e\u5728MySQL\u4e2d\u5efa\u7acb\u7d22\u5f15\u65f6, \u9664\u4e86B+\u6811\u8fd8\u53ef\u4ee5\u9009\u62e9Hash\u7ed3\u6784 \u5176\u4f18\u70b9\u662f: \u200b \u5bf9\u7d22\u5f15\u7684Key\u8fdb\u884c\u4e00\u6b21hash\u8ba1\u7b97\u5c31\u53ef\u4ee5\u5b9a\u4f4d\u51fa\u6570\u636e\u5b58\u50a8\u7684\u4f4d\u7f6e \u200b \u5f88\u591a\u65f6\u5019hash\u6240\u6709\u6bd4B+\u6811\u6240\u6709\u66f4\u9ad8\u6548 \u5176\u7f3a\u70b9\u662f: \u200b \u4ec5\u80fd\u6ee1\u8db3 = \u548c in \u7684where\u6761\u4ef6\u67e5\u8be2, \u4e0d\u652f\u6301\u8303\u56f4\u67e5\u8be2 \u200b hash\u51b2\u7a81\u95ee\u9898 \u6240\u4ee5\u57fa\u672c\u4e0a\u8fd8\u662f\u7528B+\u6811\u7684\u591a","title":"MySQL\u7d22\u5f15\u7684\u6570\u636e\u7ed3\u6784"},{"location":"mysql/MySQL%E7%B4%A2%E5%BC%95%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#mysql","text":"","title":"MySQL\u7d22\u5f15\u7684\u6570\u636e\u7ed3\u6784"},{"location":"mysql/MySQL%E7%B4%A2%E5%BC%95%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_1","text":"\u7d22\u5f15\u662f\u5e2e\u52a9Mysql\u9ad8\u6548\u83b7\u53d6\u6570\u636e\u7684\u6392\u597d\u5e8f\u7684\u6570\u636e\u7ed3\u6784","title":"\u7d22\u5f15"},{"location":"mysql/MySQL%E7%B4%A2%E5%BC%95%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_2","text":"","title":"\u6570\u636e\u7ed3\u6784"},{"location":"mysql/MySQL%E7%B4%A2%E5%BC%95%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_3","text":"\u4e8c\u53c9\u6811\u7684\u6811\u7ed3\u6784: \u5de6\u4fa7\u8282\u70b9\u7684\u6570\u5b57\u6bd4\u7236\u8282\u70b9\u7684\u6570\u5b57\u5c0f, \u53f3\u4fa7\u8282\u70b9\u7684\u6570\u5b57\u6bd4\u7236\u8282\u70b9\u7684\u6570\u5b57\u5927 \u56fe\u5f62\u5316\u53c2\u8003: Binary Search Tree Visualization (usfca.edu) \u5bf9\u4e8e\u65e0\u5e8f\u6570\u636e, \u4e8c\u53c9\u6811\u6709\u4f18\u52bf \u5bf9\u4e8e\u6709\u5e8f\u6570\u636e, \u4e8c\u53c9\u6811\u65e0\u4f18\u52bf(\u4ecd\u9700\u8981\u904d\u5386) \u5f53\u6570\u636e\u91cf\u8f83\u5927\u65f6, \u6811\u7684\u9ad8\u5ea6\u9012\u589e, \u5982\u679c\u67e5\u8be2\u7684\u6570\u636e\u4f4d\u4e8e\u6811\u7684\u5e95\u5c42, \u4f9d\u7136\u5f88\u6162","title":"\u4e8c\u53c9\u6811"},{"location":"mysql/MySQL%E7%B4%A2%E5%BC%95%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#_4","text":"\u5b9e\u9645\u4e0a\u8fd8\u662f\u4e8c\u53c9\u6811, \u4f46\u5f53\u6709\u5e8f\u63d2\u5165\u6570\u636e\u65f6, \u4f1a\u81ea\u52a8\u5e73\u8861\u6570\u636e, \u5373\u8c03\u6574\u6570\u636e\u7ed3\u6784, \u4f7f\u5f97 \u5de6\u8282\u70b9 < \u7236\u8282\u70b9 < \u53f3\u8282\u70b9 \u56fe\u5f62\u5316\u53c2\u8003: Red/Black Tree Visualization (usfca.edu) \u5f53\u6570\u636e\u91cf\u8f83\u5927\u65f6, \u6811\u7684\u9ad8\u5ea6\u9012\u589e, \u5982\u679c\u67e5\u8be2\u7684\u6570\u636e\u4f4d\u4e8e\u6811\u7684\u5e95\u5c42, \u4f9d\u7136\u5f88\u6162","title":"\u7ea2\u9ed1\u6811(\u4e8c\u53c9\u5e73\u8861\u6811)"},{"location":"mysql/MySQL%E7%B4%A2%E5%BC%95%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#btreebbplustreeb","text":"\u56fe\u5f62\u5316\u53c2\u8003: B-Tree Visualization (usfca.edu) B+ Tree Visualization (usfca.edu) B\u6811\u76f8\u5bf9\u4e8e\u4e8c\u53c9\u6811\u7684\u533a\u522b\u662f: \u200b \u6839\u8282\u70b9\u4e0d\u662f1\u4e2a, \u800c\u662f\u591a\u4e2a(\u53ef\u4ee5\u5206\u644a\u6570\u636e, \u51cf\u5c11\u4e8c\u53c9\u6811\u7684\u9ad8\u5ea6) \u200b \u591a\u4e2a\u6839\u8282\u70b9\u4ece\u5de6\u5230\u53f3\u662f\u6709\u5e8f\u7684, \u4f9d\u6b21\u9012\u589e \u200b \u540c\u7406, \u6bcf\u4e2a\u6839\u8282\u70b9\u4e0b\u9762\u7684\u53f6\u5b50\u8282\u70b9\u4e5f\u4e0d\u662f1\u4e2a, \u4e5f\u662f\u591a\u4e2a\u4e14\u4e5f\u662f\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u81ea\u589e B+\u6811\u662fB\u6811\u7684\u53d8\u79cd, \u533a\u522b\u662f: \u200b \u975e\u53f6\u5b50\u8282\u70b9\u4e0d\u5b58\u50a8data, \u53ea\u5b58\u50a8\u7d22\u5f15, \u540c\u65f6\u56e0\u4e3a\u4e0d\u5b58\u50a8data, \u4fbf\u53ef\u4ee5\u5b58\u50a8\u66f4\u591a\u7684\u7d22\u5f15(\u53d8\u76f8\u7684\u51cf\u5c11\u6811\u7684\u9ad8\u5ea6, \u63d0\u9ad8\u67e5\u8be2\u6548\u7387) \u200b \u53f6\u5b50\u8282\u70b9\u5305\u542b\u6240\u6709\u7684\u7d22\u5f15\u5b57\u6bb5(\u56e0\u4e3a\u5305\u542b\u6240\u6709\u7d22\u5f15, \u6240\u4ee5\u4e0a\u9762\u975e\u53f6\u5b50\u8282\u70b9\u7684\u7d22\u5f15\u662f\u5197\u4f59\u7684, \u6240\u4ee5B\u6811\u6ca1\u6709\u5197\u4f59\u7d22\u5f15) \u200b \u53f6\u5b50\u8282\u70b9\u7528\u6307\u9488\u8fde\u63a5(\u76f8\u5f53\u4e8e\u94fe\u8868, \u6bcf\u4e00\u5757\u7684\u6700\u540e\u5b58\u50a8\u4e0b\u4e00\u5757\u7684\u5730\u5740, \u6bcf\u4e00\u4e2a\u7684\u6700\u524d\u5b58\u50a8\u4e0a\u4e00\u5757\u7684\u5730\u5740), \u63d0\u9ad8\u533a\u95f4\u8bbf\u95ee(where\u6761\u4ef6 \u540e\u9762\u7684\u8303\u56f4\u67e5\u8be2, \u6bd4\u5982\u5927\u4e8e\u6216\u5c0f\u4e8e\u67d0\u4e2a\u503c)\u7684\u6027\u80fd PS: \u8303\u56f4\u67e5\u627e\u7684\u7ed3\u679c\u7684\u6570\u636e\u91cf\u5f88\u5927\u7684\u65f6\u5019, \u4f9d\u7136\u4f1a\u5f88\u6162, \u6b64\u65f6\u91c7\u7528\u5206\u9875\u5373\u53ef\u89e3\u51b3 MySQL\u4f7f\u7528\u7684\u662fB+\u6811, \u4f46\u5bf9B+\u6811\u505a\u4e86\u4f18\u5316, \u4f8b\u5982\u4e0a\u56fe, \u6807\u51c6\u7684B+\u6811\u662f\u5355\u5411\u7bad\u5934(\u60f3\u8c61\u5355\u5411\u94fe\u8868), \u4f18\u5316\u540e\u662f\u53cc\u5411\u7bad\u5934(\u60f3\u8c61\u53cc\u5411\u94fe\u8868) MySQL\u4f7f\u7528B+\u6811\u5b58\u50a8\u591a\u4e2a\u6839\u8282\u70b9\u65f6, \u5206\u914d\u5230\u4e00\u5757\u8fde\u7eed\u7684\u78c1\u76d8\u7a7a\u95f4(\u78c1\u76d8\u9875, \u5927\u5c0f\u662f16KB), \u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u67e5\u770b: show global status like 'Innodb_page_size' ; MySQL\u4e00\u822c\u4f1a\u5c06\u6839\u8282\u70b9\u5e38\u9a7b\u5230\u5185\u5b58\u4e2d(\u51cf\u5c11\u78c1\u76d8I/O), \u9ad8\u7248\u672c\u7684MySQL\u53ef\u80fd\u4f1a\u5c06\u6240\u6709\u975e\u53f6\u5b50\u8282\u70b9\u90fd\u5e38\u9a7b\u5230\u5185\u5b58\u4e2d PS: MySQL\u662f\u6309\u7167\u9875\u64cd\u4f5c\u7684, \u4f8b\u5982\u8bfb\u53d6\u4e00\u6761\u6570\u636e\u5e76\u4e0d\u662f\u5355\u72ec\u53d6\u8fd9\u4e00\u6761, \u800c\u662f\u5c06\u8fd9\u4e00\u6761\u6570\u636e\u6240\u5728\u7684\u9875\u7684\u5168\u90e8\u6570\u636e\u653e\u5230Buffer Pool\u4e2d B+\u6811\u7684\u9ad8\u5ea6\u8bf4\u767d\u5c31\u662f\u7531\u975e\u53f6\u5b50\u8282\u70b9\u80fd\u5b58\u653e\u591a\u5c11\u4e2a\u7d22\u5f15\u7684\u6570\u91cf\u51b3\u5b9a\u7684 MySIAM\u7d22\u5f15\u6587\u4ef6(.myi)\u548c\u6570\u636e\u6587\u4ef6(.myd)\u662f\u5206\u79bb\u7684( \u975e\u805a\u96c6\u7d22\u5f15, \u53c8\u53eb\u975e\u805a\u7c07\u7d22\u5f15, \u53c8\u53eb\u7a00\u758f\u7d22\u5f15 ) InnoDB\u7d22\u5f15\u6587\u4ef6\u548c\u6570\u636e\u6587\u4ef6\u662f\u4e00\u8d77\u7684(.ibd\u6587\u4ef6, \u805a\u96c6\u7d22\u5f15, \u53c8\u53eb\u805a\u7c07\u7d22\u5f15 ), \u4e14\u805a\u96c6\u7d22\u5f15\u67e5\u5230\u6700\u7ec8\u6570\u636e\u6bd4\u975e\u805a\u96c6\u6240\u6709\u5feb(\u56e0\u4e3a\u5728\u540c\u4e00\u4e2a\u6587\u4ef6\u4e2d) \u5bf9\u4e8e\u4f7f\u7528InnoDB\u7684\u8868\u6765\u8bf4, \u6709\u4e14\u53ea\u80fd\u6709\u4e00\u4e2a\u805a\u96c6\u7d22\u5f15 \u5bf9\u4e8eInnoDB\u6765\u8bf4, \u8868\u6570\u636e\u6587\u4ef6\u672c\u8eab\u5c31\u662f\u6309B+\u6811\u7ec4\u7ec7\u7684\u4e00\u4e2a\u6240\u6709\u7ed3\u6784\u6587\u4ef6, \u5176\u805a\u96c6\u7d22\u5f15-\u53f6\u5b50\u8282\u70b9\u5305\u542b\u5b8c\u6574\u7684\u6570\u636e\u8bb0\u5f55(\u4e3b\u952e\u7684\u6570\u636e+\u5176\u4ed6\u5217\u7684\u6570\u636e) \u5efa\u8baeInnoDB\u8868\u4f7f\u7528\u6574\u5f62\u81ea\u589e\u4e3b\u952e\u7684\u539f\u56e0: \u200b \u5982\u679c\u5efa\u8868\u65f6\u6ca1\u6709\u8bbe\u7f6e\u4e3b\u952e, InnoDB\u4f1a\u81ea\u52a8\u9009\u4e00\u5217\u4e14\u8fd9\u5217\u6570\u636e\u6ca1\u6709\u91cd\u590d, \u5f53\u4f5c\u4e3b\u952e, \u5982\u679c\u6ca1\u6709\u627e\u5230\u4e0d\u91cd\u590d\u7684\u5217, \u4f1a\u81ea\u52a8\u5efa\u7acb\u4e00\u4e2a\u9690\u85cf\u7684\u4e0d\u91cd\u590d\u7684\u5217(\u6bd4\u5982\u7528\u884c\u53f7row_id)\u4f5c\u4e3a\u4e3b\u952e \u200b \u4f7f\u7528\u6574\u5f62\u4f5c\u4e3aID, \u800c\u4e0d\u662fUUID, \u7ed3\u5408\u4e8c\u53c9\u6811\u7684\u6570\u636e\u7ed3\u6784, \u53ef\u4ee5\u53d1\u73b0\u6574\u5f62\u6bd4\u5927\u5c0f\u7684\u6548\u7387\u6bd4UUID\u5feb, \u4e14\u6574\u5f62\u6bd4UUID\u5360\u7528\u7684\u78c1\u76d8\u7a7a\u95f4\u5c0f \u200b \u4f7f\u7528\u81ea\u589e\u662f\u56e0\u4e3a\u7ea2\u9ed1\u6811\u7684\u5e73\u8861\u539f\u56e0, \u5f53\u63d2\u5165\u975e\u81ea\u589eID\u65f6, \u8981\u6ee1\u8db3 \u5de6\u8282\u70b9<\u7236\u8282\u70b9<\u53f3\u8282\u70b9 \u7684\u6761\u4ef6, \u9700\u8981\u5e73\u8861\u8c03\u6574\u6811\u7ed3\u6784, \u5f71\u54cd\u6548\u7387, \u800c\u9012\u589e ID, \u53ea\u9700\u8981\u5728\u6700\u53f3\u4fa7\u6dfb\u52a0\u8282\u70b9\u5373\u53ef(\u60f3\u8c61\u4e00\u4e2aPython\u5217\u8868\u4e2d\u7684append\u548cinsert\u65b9\u6cd5) \u200b \u6240\u4ee5\u5c3d\u91cf\u7ed9\u6bcf\u5f20\u8868\u8bbe\u7f6e\u4e00\u4e2a\u6574\u5f62\u81ea\u589e\u7684\u4e3b\u952e \u975e\u4e3b\u952e(\u8868\u4e2d\u7684\u5176\u4ed6\u5217)\u7d22\u5f15\u7ed3\u6784\u4e2d\u53f6\u5b50\u8282\u70b9\u50a8\u5b58\u7684\u662f\u4e3b\u952e(\u8868\u4e2d\u7684\u4e3b\u952e\u5217)\u7684\u539f\u56e0: \u4e00\u81f4\u6027\u548c\u8282\u7ea6\u5b58\u50a8\u7a7a\u95f4 , \u5982\u56fe: \u4e0a\u9762\u8bf4\u4e86\u53ea\u6709\u4e00\u4e2a\u805a\u96c6\u7d22\u5f15(\u5305\u542b\u6240\u6709\u6570\u636e), \u800c\u5176\u4ed6\u975e\u4e3b\u952e\u7684\u7d22\u5f15\u7684\u53f6\u5b50\u8282\u70b9\u4e2d\u5b58\u50a8\u7684data\u5c31\u662f\u4e3b\u952e\u4e3b\u952e\u7684\u503c(\u5373\u8282\u7ea6\u4e86\u7a7a\u95f4), \u540c\u65f6\u51cf\u5c11\u4e86\u590d\u6742\u5ea6(\u5373\u63d2\u5165\u6570\u636e\u65f6, \u53ea\u8981\u4e3b\u952e\u7d22\u5f15\u66f4\u65b0\u5b8c\u6bd5, \u5176\u4ed6\u975e\u4e3b\u952e\u7d22\u5f15\u5f15\u7528\u4e3b\u952e\u5373\u53ef, \u51cf\u5c11\u4e86\u51fa\u9519\u7684\u53ef\u80fd\u884c, \u4e5f\u5c31\u662f\u4e00\u81f4\u6027) \u975e\u4e3b\u952e\u7d22\u5f15, \u5373\u4e8c\u7ea7\u7d22\u5f15, \u4e5f\u5c31\u662f\u975e\u805a\u96c6\u7d22\u5f15, \u4f7f\u7528\u7684\u65f6\u5019\u5148\u901a\u8fc7\u4e8c\u7ea7\u7d22\u5f15\u627e\u5230\u4e3b\u952e, \u518d\u901a\u8fc7\u4e3b\u952e\u7d22\u5f15\u67e5\u5230\u6700\u7ec8\u9700\u8981\u7684\u6570\u636e, \u8fd9\u5c31\u662f\u56de\u8868 \u8054\u5408\u7d22\u5f15, \u53c8\u53eb\u590d\u5408\u7d22\u5f15, \u5373\u591a\u4e2a\u5b57\u6bb5\u7ec4\u5408\u6210\u4e00\u4e2a\u7d22\u5f15, \u5982\u56fe: \u8fd9\u91cc\u6d89\u53ca\u5230\u4e00\u4e2a \u7d22\u5f15\u6700\u5de6\u5217\u539f\u7406(\u53c8\u53eb\u5de6\u5217\u539f\u7406) , \u5373\u6392\u5e8f\u7684\u65f6\u5019\u6309\u7167\u5b57\u6bb5\u7684\u987a\u5e8f, \u4e0a\u56fe\u793a\u4f8b\u4e2d\u7684name\u3001age\u548cposition\u7684\u987a\u5e8f\u8fdb\u884c\u6bd4\u5927\u5c0f, \u7136\u540e\u6392\u5e8f \u5982\u679c, name\u3001age\u548cposition\u6bd4\u8f83\u5b8c\u6bd5\u53d1\u73b0\u4e00\u6837, \u5c31\u4e0d\u5206\u5148\u540e\u653e\u5728\u4e00\u8d77, \u53f6\u5b50\u8282\u70b9\u7684data\u80af\u5b9a\u662f\u4e3b\u952e \u5982\u679c, name\u3001age\u548cposition\u662f\u8054\u5408\u4e3b\u952e, \u5373\u4e09\u8005\u5408\u4e00\u4e0d\u53ef\u80fd\u91cd\u590d, \u5b83\u672c\u8eab\u5c31\u662f\u805a\u96c6\u7d22\u5f15, \u53f6\u5b50\u8282\u70b9\u7684data\u5b58\u50a8\u5176\u4ed6\u5217\u7684\u6570\u636e \u540c\u65f6, \u4f7f\u7528\u8054\u5408\u7d22\u5f15\u65f6, \u9700\u8981\u6ce8\u610f\u5b57\u6bb5\u7684\u987a\u5e8f, \u5982 : select * from table_1 where name='xxx' and age='xxx'; # \u4f7f\u7528\u4e86\u7d22\u5f15 select * from table_1 where age='xxx' and position='xxx'; # \u672a\u4f7f\u7528\u7d22\u5f15 select * from table_1 where name='xxx' # \u4f7f\u7528\u4e86\u7d22\u5f15 select * from table_1 where position='xxx' # \u672a\u4f7f\u7528\u7d22\u5f15 # \u8fd9\u5c31\u662f\u6700\u5de6\u524d\u7f00\u539f\u7406 # why? # \u770b\u4e0a\u56fe, \u7d22\u5f15\u5c31\u662f\u6392\u597d\u5e8f\u7684\u6570\u636e\u7ed3\u6784, \u6240\u4ee5\u4e0a\u56fe\u4e2d\u5148\u6392\u5e8f\u7684name, \u7136\u540eage, \u6700\u540eposition # \u4f7f\u7528explain\u8bed\u6cd5\u53ef\u4ee5\u67e5\u770b\u7d22\u5f15\u7684\u4f7f\u7528, \u5982: explain select * from table_1 where name='xxx' and age='xxx'; \u4e00\u822c\u6765\u8bb2, \u4e00\u5f20\u8868\u4e2d\u4e0d\u63a8\u8350\u5efa\u7acb\u591a\u4e2a\u5355\u952e\u7d22\u5f15, \u57fa\u672c\u4e0a\u90fd\u7528\u8054\u5408\u7d22\u5f15","title":"BTree(B\u6811)\u548cBPlusTree(B+\u6811)"},{"location":"mysql/MySQL%E7%B4%A2%E5%BC%95%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/#hash","text":"\u5176\u5b9e\u5728MySQL\u4e2d\u5efa\u7acb\u7d22\u5f15\u65f6, \u9664\u4e86B+\u6811\u8fd8\u53ef\u4ee5\u9009\u62e9Hash\u7ed3\u6784 \u5176\u4f18\u70b9\u662f: \u200b \u5bf9\u7d22\u5f15\u7684Key\u8fdb\u884c\u4e00\u6b21hash\u8ba1\u7b97\u5c31\u53ef\u4ee5\u5b9a\u4f4d\u51fa\u6570\u636e\u5b58\u50a8\u7684\u4f4d\u7f6e \u200b \u5f88\u591a\u65f6\u5019hash\u6240\u6709\u6bd4B+\u6811\u6240\u6709\u66f4\u9ad8\u6548 \u5176\u7f3a\u70b9\u662f: \u200b \u4ec5\u80fd\u6ee1\u8db3 = \u548c in \u7684where\u6761\u4ef6\u67e5\u8be2, \u4e0d\u652f\u6301\u8303\u56f4\u67e5\u8be2 \u200b hash\u51b2\u7a81\u95ee\u9898 \u6240\u4ee5\u57fa\u672c\u4e0a\u8fd8\u662f\u7528B+\u6811\u7684\u591a","title":"Hash"},{"location":"mysql/MySQL%E8%AF%AD%E5%8F%A5%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B/","text":"MySQL\u8bed\u53e5\u6267\u884c\u8fc7\u7a0b \u4f8b\u5982update\u67d0\u884c\u67d0\u4e2a\u5b57\u6bb5\u7684\u503c\u7684\u8fc7\u7a0b\u5982\u4e0b: 1\u3001\u5728 Buffer Pool \u4e2d\u52a0\u8f7d\u6539\u884c\u6570\u636e\u6240\u5728\u9875\u7684\u6574\u9875\u6570\u636e; 2\u3001\u5728 undo\u65e5\u5fd7 \u4e2d\u5199\u5165\u4fee\u6539\u524d\u7684\u6570\u636e\u4ee5\u4fbf\u4e8e\u51fa\u73b0\u95ee\u9898\u65f6\u4f1a\u6eda; 3\u3001\u66f4\u65b0\u5185\u5b58(Buffer Pool)\u4e2d\u7684\u6570\u636e 4\u3001\u5728\u540d\u4e3aRedo Log Buffer\u7684\u5185\u5b58\u5757\u4e2d\u5199\u5165\u66f4\u65b0\u540e\u7684\u6570\u636e(\u5373 redo\u65e5\u5fd7 ) 5\u3001\u5c06redo\u65e5\u5fd7\u5199\u5165\u78c1\u76d8\u4e2d\u7684redo\u65e5\u5fd7\u6587\u4ef6 6\u3001\u540c\u65f6\u5199\u5165 binlog\u65e5\u5fd7 \u6587\u4ef6 7\u3001binglog\u65e5\u5fd7\u6587\u4ef6\u5199\u5165\u6210\u529f\u540e\u518d\u5728redo\u65e5\u5fd7\u6587\u4ef6\u4e2d\u5199\u5165commit\u6807\u8bb0, \u8868\u793a\u4e8b\u52a1\u63d0\u4ea4\u6210\u529f 8\u3001Buffer Pool\u4e2d\u7684IO\u8fdb\u7a0b\u4f1a \u968f\u673a \u7684\u5199\u5165\u9875\u6587\u4ef6\u5230\u78c1\u76d8(\u5373\u5237\u76d8), \u6570\u636e\u771f\u6b63\u4fee\u6539\u5b8c\u6210 \u6ce8\u610f\u70b9: undo\u65e5\u5fd7\u548credo\u65e5\u5fd7\u662fInnoDB\u72ec\u6709\u7684\u673a\u5236 undo\u65e5\u5fd7\u662f\u4e8b\u52a1\u63d0\u4ea4\u5931\u8d25\u65f6\u7528\u4e8e\u4f1a\u6eda\u6570\u636e\u4f7f\u7528 redo\u65e5\u5fd7\u662f\u4e3a\u4e86\u4fdd\u969c\u4e0a\u9762\u6b65\u9aa48\u4e4b\u524d\u670d\u52a1\u5668\u5b95\u673a, \u6570\u636e\u6ca1\u6709\u6765\u5f97\u53ca\u5199\u5165\u78c1\u76d8, \u5bfc\u81f4\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u60c5\u51b5, \u5f53\u670d\u52a1\u5668\u6062\u590d\u540e, MySQL\u4f1a\u5c06redo\u65e5\u5fd7\u4e2d\u7684\u6570\u636e\u91cd\u65b0\u5199\u5165Buffer Pool\u4e2d, \u4ee5\u89e3\u51b3\u8be5\u95ee\u9898 binlog\u662f\u6062\u590d\u6570\u636e\u65e5\u5fd7\u7528\u7684, \u6bd4\u5982\u5220\u5e93\u4e86 \u987a\u4fbf\u8bf4\u4e00\u53e5MySQL\u7684\u6240\u6709crud\u90fd\u662f\u5728buffer pool\u4e2d\u5b8c\u6210\u7684, \u800c\u4e14\u7b2c8\u6b65\u4e2d\u662f \u968f\u673a\u8bfb\u5199 , redo\u662f\u65e5\u5fd7\u662f \u987a\u5e8f\u8bfb\u5199 MySQL\u901a\u8fc7\u8fd9\u5957\u590d\u6742\u7684\u673a\u5236\u4fdd\u8bc1\u4e86\u6570\u636e\u7684\u5b8c\u6574\u3001\u4e00\u81f4, \u540c\u65f6\u901a\u8fc7\u5185\u5b58\u7ea7\u522b\u7684\u64cd\u4f5c\u548c\u987a\u5e8f\u8bfb\u5199\u4fdd\u8bc1\u6027\u80fd \u60f3\u8c61\u4e00\u4e0b\u786c\u76d8\u7684\u968f\u673a\u8bfb\u5199\u6d4b\u8bd5\u6d4b\u8bd5\u662f\u4e0d\u662f\u5f88\u6162?, \u5185\u5b58\u548c\u987a\u5e8f\u8bfb\u5199\u5c31\u4fdd\u8bc1\u4e86\u6027\u80fd \u6269\u5c55\u4e00\u4e0b, kafka\u4e5f\u662f\u64cd\u4f5c\u78c1\u76d8\u6587\u4ef6, \u901f\u5ea6\u5feb\u7684\u539f\u56e0\u5c31\u662f\u987a\u5e8f\u8bfb\u5199, \u76f4\u63a5\u901a\u8fc7offset\u504f\u79fb\u91cf\u5c31\u80fd\u5b9a\u4f4d","title":"MySQL\u8bed\u53e5\u6267\u884c\u8fc7\u7a0b"},{"location":"mysql/MySQL%E8%AF%AD%E5%8F%A5%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B/#mysql","text":"\u4f8b\u5982update\u67d0\u884c\u67d0\u4e2a\u5b57\u6bb5\u7684\u503c\u7684\u8fc7\u7a0b\u5982\u4e0b: 1\u3001\u5728 Buffer Pool \u4e2d\u52a0\u8f7d\u6539\u884c\u6570\u636e\u6240\u5728\u9875\u7684\u6574\u9875\u6570\u636e; 2\u3001\u5728 undo\u65e5\u5fd7 \u4e2d\u5199\u5165\u4fee\u6539\u524d\u7684\u6570\u636e\u4ee5\u4fbf\u4e8e\u51fa\u73b0\u95ee\u9898\u65f6\u4f1a\u6eda; 3\u3001\u66f4\u65b0\u5185\u5b58(Buffer Pool)\u4e2d\u7684\u6570\u636e 4\u3001\u5728\u540d\u4e3aRedo Log Buffer\u7684\u5185\u5b58\u5757\u4e2d\u5199\u5165\u66f4\u65b0\u540e\u7684\u6570\u636e(\u5373 redo\u65e5\u5fd7 ) 5\u3001\u5c06redo\u65e5\u5fd7\u5199\u5165\u78c1\u76d8\u4e2d\u7684redo\u65e5\u5fd7\u6587\u4ef6 6\u3001\u540c\u65f6\u5199\u5165 binlog\u65e5\u5fd7 \u6587\u4ef6 7\u3001binglog\u65e5\u5fd7\u6587\u4ef6\u5199\u5165\u6210\u529f\u540e\u518d\u5728redo\u65e5\u5fd7\u6587\u4ef6\u4e2d\u5199\u5165commit\u6807\u8bb0, \u8868\u793a\u4e8b\u52a1\u63d0\u4ea4\u6210\u529f 8\u3001Buffer Pool\u4e2d\u7684IO\u8fdb\u7a0b\u4f1a \u968f\u673a \u7684\u5199\u5165\u9875\u6587\u4ef6\u5230\u78c1\u76d8(\u5373\u5237\u76d8), \u6570\u636e\u771f\u6b63\u4fee\u6539\u5b8c\u6210 \u6ce8\u610f\u70b9: undo\u65e5\u5fd7\u548credo\u65e5\u5fd7\u662fInnoDB\u72ec\u6709\u7684\u673a\u5236 undo\u65e5\u5fd7\u662f\u4e8b\u52a1\u63d0\u4ea4\u5931\u8d25\u65f6\u7528\u4e8e\u4f1a\u6eda\u6570\u636e\u4f7f\u7528 redo\u65e5\u5fd7\u662f\u4e3a\u4e86\u4fdd\u969c\u4e0a\u9762\u6b65\u9aa48\u4e4b\u524d\u670d\u52a1\u5668\u5b95\u673a, \u6570\u636e\u6ca1\u6709\u6765\u5f97\u53ca\u5199\u5165\u78c1\u76d8, \u5bfc\u81f4\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u60c5\u51b5, \u5f53\u670d\u52a1\u5668\u6062\u590d\u540e, MySQL\u4f1a\u5c06redo\u65e5\u5fd7\u4e2d\u7684\u6570\u636e\u91cd\u65b0\u5199\u5165Buffer Pool\u4e2d, \u4ee5\u89e3\u51b3\u8be5\u95ee\u9898 binlog\u662f\u6062\u590d\u6570\u636e\u65e5\u5fd7\u7528\u7684, \u6bd4\u5982\u5220\u5e93\u4e86 \u987a\u4fbf\u8bf4\u4e00\u53e5MySQL\u7684\u6240\u6709crud\u90fd\u662f\u5728buffer pool\u4e2d\u5b8c\u6210\u7684, \u800c\u4e14\u7b2c8\u6b65\u4e2d\u662f \u968f\u673a\u8bfb\u5199 , redo\u662f\u65e5\u5fd7\u662f \u987a\u5e8f\u8bfb\u5199 MySQL\u901a\u8fc7\u8fd9\u5957\u590d\u6742\u7684\u673a\u5236\u4fdd\u8bc1\u4e86\u6570\u636e\u7684\u5b8c\u6574\u3001\u4e00\u81f4, \u540c\u65f6\u901a\u8fc7\u5185\u5b58\u7ea7\u522b\u7684\u64cd\u4f5c\u548c\u987a\u5e8f\u8bfb\u5199\u4fdd\u8bc1\u6027\u80fd \u60f3\u8c61\u4e00\u4e0b\u786c\u76d8\u7684\u968f\u673a\u8bfb\u5199\u6d4b\u8bd5\u6d4b\u8bd5\u662f\u4e0d\u662f\u5f88\u6162?, \u5185\u5b58\u548c\u987a\u5e8f\u8bfb\u5199\u5c31\u4fdd\u8bc1\u4e86\u6027\u80fd \u6269\u5c55\u4e00\u4e0b, kafka\u4e5f\u662f\u64cd\u4f5c\u78c1\u76d8\u6587\u4ef6, \u901f\u5ea6\u5feb\u7684\u539f\u56e0\u5c31\u662f\u987a\u5e8f\u8bfb\u5199, \u76f4\u63a5\u901a\u8fc7offset\u504f\u79fb\u91cf\u5c31\u80fd\u5b9a\u4f4d","title":"MySQL\u8bed\u53e5\u6267\u884c\u8fc7\u7a0b"},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/","text":"\u68c0\u7d22\u6392\u540d\u524d\u4e09\u548c\u5220\u9664\u91cd\u590d \u51c6\u5907\u5de5\u4f5c \u521b\u5efa\u8868 CREATE TABLE ` test ` ( ` id ` int ( 11 ) NOT NULL AUTO_INCREMENT , ` name ` varchar ( 100 ) DEFAULT NULL , ` score ` int ( 11 ) DEFAULT NULL , PRIMARY KEY ( ` id ` ) ) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4 ; \u63d2\u5165\u6570\u636e INSERT INTO test . test ( name , score ) VALUES ( 'zhangsan' , 100 ), ( 'zhangsan' , 100 ), ( 'lisi' , 99 ), ( 'whangwu' , 99 ), ( 'lisi' , 98 ), ( 'zhaoliu' , 97 ); \u9898\u76ee1: \u67e5\u51fa\u6765\u5206\u6570\u524d\u4e09\u7684\u540c\u5b66 \u6b65\u9aa4\u4e00: \u68c0\u7d22\u5206\u6570\u6700\u9ad8\u7684\u524d\u4e09\u4e2a, \u540c\u65f6\u8003\u8651\u5230\u53ef\u80fd\u51fa\u7ebf\u5206\u6570\u76f8\u540c(\u540d\u6b21\u5e76\u5217)\u7684\u60c5\u51b5 -- \u65b9\u6cd51, \u5206\u6570\u53bb\u91cd select distinct score from test limit 3 -- \u65b9\u6cd52, \u5206\u6570\u5206\u7ec4 select score from test group by score order by score desc limit 3 \u6b65\u9aa4\u4e8c: \u68c0\u7d22\u5206\u6570\u7b49\u4e8e\u6700\u9ad8\u7684\u524d\u4e09\u4e2a\u7684\u540c\u5b66\u5373\u662f\u7b54\u6848 \u76f4\u63a5\u6267\u884csql: select * from test where score in (select distinct score from test limit 3) \u4f1a\u62a5\u9519\u5e76\u63d0\u793a: This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery' \u5373\u4e0d\u652f\u6301\u5728\u5b50\u67e5\u8be2\u4e2d\u4f7f\u7528limit, \u89e3\u51b3\u529e\u6cd5\u5c31\u662f\u628a\u5b50\u67e5\u8be2\u53d8\u6210\u4e00\u5f20\u6d3e\u751f\u8868: select * from (select distinct score from test limit 3) as t \u7136\u540e\u518d\u4f7f\u7528\u5b50\u67e5\u8be2(\u5373\u591a\u5d4c\u5957\u4e00\u5c42): select * from test where score in ( select * from ( select distinct score from test limit 3 ) as t ) \u9898\u76ee2: \u5220\u9664\u540d\u79f0\u91cd\u590d\u7684\u6570\u636e \u6b65\u9aa4\u4e00: \u68c0\u7d22\u51fa\u540d\u79f0\u91cd\u590d\u7684\u6570\u636e \u76f4\u63a5\u6267\u884csql: select name, count(name) as counts from test where count(name) > 1 group by name \u4f1a\u62a5\u9519\u5e76\u63d0\u793a: Invalid use of group function \u539f\u56e0\u662fwhere\u540e\u9762\u7684\u6761\u4ef6\u4e2d\u4e0d\u80fd\u4f7f\u7528\u805a\u5408\u51fd\u6570, \u8981\u4f7f\u7528having\u8bed\u6cd5\u66ff\u4ee3: select name , count ( name ) as counts from test group by name having counts > 1 \u6b65\u9aa4\u4e8c: \u5220\u9664\u91cd\u590d\u7684\u6570\u636e \u901a\u8fc7max()\u6216min()\u51fd\u6570\u9009\u62e9\u4fdd\u7559ID\u6700\u5927\u6216\u6700\u5c0f\u7684\u6570\u636e: select min(id) as min_id from test group by name \u5269\u4f59\u7684\u5373\u662f\u9700\u8981\u5220\u9664\u7684 \u76f4\u63a5\u6267\u884csql: delete from test where id not in (select min(id) as min_id from test group by name) \u4f1a\u62a5\u9519\u5e76\u63d0\u793a: You can't specify target table 'test' for update in FROM clause \u539f\u56e0\u662f, \u4e0d\u80fd\u5148\u67e5\u51fa\u540c\u4e00\u4e2a\u8868\u4e2d\u7684\u6570\u636e\u4ee5\u540e\u518d\u8fdb\u884c\u66f4\u65b0(\u5305\u62ec\u5220\u9664), \u89e3\u51b3\u529e\u6cd5\u4e0e \u9898\u76ee1 \u4e2d\u7684 \u6b65\u9aa42 \u4e00\u6837, \u751f\u6210\u6d3e\u751f\u8868\u5373\u53ef, \u7136\u540e\u901a\u8fc7\u6d3e\u751f\u8868\u5220\u9664: delete from test where id not in ( select min_id from ( select min ( id ) as min_id from test group by name ) as t ) \u5176\u4ed6\u89e3\u6cd5: -- \u65b9\u6cd51 select a . id from ( select ROW_NUMBER () over ( partition by name order by id ) as d , name , id from test ) as a where a . d > 1 -- \u65b9\u6cd52 select t . id from test t inner join ( select count ( 1 ), name , min ( id ) as id from test group by name having count ( 1 ) > 1 ) as a on t . id <> a . id and t . name = a . name -- \u4e0a\u9762\u4e24\u4e2a\u90fd\u80fd\u76f4\u63a5\u67e5\u51fa\u6765\u9700\u8981\u5220\u9664\u7684\u6570\u636e, \u628aselect\u6539\u6210delete\u5373\u53ef, \u4e14\u6548\u7387\u6bd4\u5d4c\u5957\u5b50\u67e5\u8be2\u9ad8 \u9898\u76ee3: \u5220\u9664\u540d\u79f0\u548c\u5206\u6570\u91cd\u590d\u7684\u6570\u636e \u9898\u76ee3\u89e3\u7b54\u601d\u8def\u540c\u9898\u76ee2, \u4f46\u662f\u6240\u6709\u5b57\u6bb5\u91cd\u590d\u624d\u7b97\u91cd\u590d, \u6240\u4ee5select\u548cgroup by\u8981\u5217\u51fa\u6240\u6709\u5b57\u6bb5: delete from test where id in ( select max_id from ( select max ( id ) as max_id , name , score , count ( * ) as counts from test group by name , score having counts > 1 ) as t ) PS: count(name) count(score) count(*) \u6548\u679c\u4e00\u6837","title":"\u68c0\u7d22\u6392\u540d\u524d\u4e09\u548c\u5220\u9664\u91cd\u590d"},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/#_1","text":"","title":"\u68c0\u7d22\u6392\u540d\u524d\u4e09\u548c\u5220\u9664\u91cd\u590d"},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/#_2","text":"","title":"\u51c6\u5907\u5de5\u4f5c"},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/#_3","text":"CREATE TABLE ` test ` ( ` id ` int ( 11 ) NOT NULL AUTO_INCREMENT , ` name ` varchar ( 100 ) DEFAULT NULL , ` score ` int ( 11 ) DEFAULT NULL , PRIMARY KEY ( ` id ` ) ) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4 ;","title":"\u521b\u5efa\u8868"},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/#_4","text":"INSERT INTO test . test ( name , score ) VALUES ( 'zhangsan' , 100 ), ( 'zhangsan' , 100 ), ( 'lisi' , 99 ), ( 'whangwu' , 99 ), ( 'lisi' , 98 ), ( 'zhaoliu' , 97 );","title":"\u63d2\u5165\u6570\u636e"},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/#1","text":"","title":"\u9898\u76ee1: \u67e5\u51fa\u6765\u5206\u6570\u524d\u4e09\u7684\u540c\u5b66"},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/#_5","text":"-- \u65b9\u6cd51, \u5206\u6570\u53bb\u91cd select distinct score from test limit 3 -- \u65b9\u6cd52, \u5206\u6570\u5206\u7ec4 select score from test group by score order by score desc limit 3","title":"\u6b65\u9aa4\u4e00: \u68c0\u7d22\u5206\u6570\u6700\u9ad8\u7684\u524d\u4e09\u4e2a, \u540c\u65f6\u8003\u8651\u5230\u53ef\u80fd\u51fa\u7ebf\u5206\u6570\u76f8\u540c(\u540d\u6b21\u5e76\u5217)\u7684\u60c5\u51b5"},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/#_6","text":"\u76f4\u63a5\u6267\u884csql: select * from test where score in (select distinct score from test limit 3) \u4f1a\u62a5\u9519\u5e76\u63d0\u793a: This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery' \u5373\u4e0d\u652f\u6301\u5728\u5b50\u67e5\u8be2\u4e2d\u4f7f\u7528limit, \u89e3\u51b3\u529e\u6cd5\u5c31\u662f\u628a\u5b50\u67e5\u8be2\u53d8\u6210\u4e00\u5f20\u6d3e\u751f\u8868: select * from (select distinct score from test limit 3) as t \u7136\u540e\u518d\u4f7f\u7528\u5b50\u67e5\u8be2(\u5373\u591a\u5d4c\u5957\u4e00\u5c42): select * from test where score in ( select * from ( select distinct score from test limit 3 ) as t )","title":"\u6b65\u9aa4\u4e8c: \u68c0\u7d22\u5206\u6570\u7b49\u4e8e\u6700\u9ad8\u7684\u524d\u4e09\u4e2a\u7684\u540c\u5b66\u5373\u662f\u7b54\u6848"},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/#2","text":"","title":"\u9898\u76ee2: \u5220\u9664\u540d\u79f0\u91cd\u590d\u7684\u6570\u636e"},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/#_7","text":"\u76f4\u63a5\u6267\u884csql: select name, count(name) as counts from test where count(name) > 1 group by name \u4f1a\u62a5\u9519\u5e76\u63d0\u793a: Invalid use of group function \u539f\u56e0\u662fwhere\u540e\u9762\u7684\u6761\u4ef6\u4e2d\u4e0d\u80fd\u4f7f\u7528\u805a\u5408\u51fd\u6570, \u8981\u4f7f\u7528having\u8bed\u6cd5\u66ff\u4ee3: select name , count ( name ) as counts from test group by name having counts > 1","title":"\u6b65\u9aa4\u4e00: \u68c0\u7d22\u51fa\u540d\u79f0\u91cd\u590d\u7684\u6570\u636e"},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/#_8","text":"\u901a\u8fc7max()\u6216min()\u51fd\u6570\u9009\u62e9\u4fdd\u7559ID\u6700\u5927\u6216\u6700\u5c0f\u7684\u6570\u636e: select min(id) as min_id from test group by name \u5269\u4f59\u7684\u5373\u662f\u9700\u8981\u5220\u9664\u7684 \u76f4\u63a5\u6267\u884csql: delete from test where id not in (select min(id) as min_id from test group by name) \u4f1a\u62a5\u9519\u5e76\u63d0\u793a: You can't specify target table 'test' for update in FROM clause \u539f\u56e0\u662f, \u4e0d\u80fd\u5148\u67e5\u51fa\u540c\u4e00\u4e2a\u8868\u4e2d\u7684\u6570\u636e\u4ee5\u540e\u518d\u8fdb\u884c\u66f4\u65b0(\u5305\u62ec\u5220\u9664), \u89e3\u51b3\u529e\u6cd5\u4e0e \u9898\u76ee1 \u4e2d\u7684 \u6b65\u9aa42 \u4e00\u6837, \u751f\u6210\u6d3e\u751f\u8868\u5373\u53ef, \u7136\u540e\u901a\u8fc7\u6d3e\u751f\u8868\u5220\u9664: delete from test where id not in ( select min_id from ( select min ( id ) as min_id from test group by name ) as t ) \u5176\u4ed6\u89e3\u6cd5: -- \u65b9\u6cd51 select a . id from ( select ROW_NUMBER () over ( partition by name order by id ) as d , name , id from test ) as a where a . d > 1 -- \u65b9\u6cd52 select t . id from test t inner join ( select count ( 1 ), name , min ( id ) as id from test group by name having count ( 1 ) > 1 ) as a on t . id <> a . id and t . name = a . name -- \u4e0a\u9762\u4e24\u4e2a\u90fd\u80fd\u76f4\u63a5\u67e5\u51fa\u6765\u9700\u8981\u5220\u9664\u7684\u6570\u636e, \u628aselect\u6539\u6210delete\u5373\u53ef, \u4e14\u6548\u7387\u6bd4\u5d4c\u5957\u5b50\u67e5\u8be2\u9ad8","title":"\u6b65\u9aa4\u4e8c: \u5220\u9664\u91cd\u590d\u7684\u6570\u636e"},{"location":"mysql/exercises/%E6%A3%80%E7%B4%A2%E6%8E%92%E5%90%8D%E5%89%8D%E4%B8%89%E5%92%8C%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D/#3","text":"\u9898\u76ee3\u89e3\u7b54\u601d\u8def\u540c\u9898\u76ee2, \u4f46\u662f\u6240\u6709\u5b57\u6bb5\u91cd\u590d\u624d\u7b97\u91cd\u590d, \u6240\u4ee5select\u548cgroup by\u8981\u5217\u51fa\u6240\u6709\u5b57\u6bb5: delete from test where id in ( select max_id from ( select max ( id ) as max_id , name , score , count ( * ) as counts from test group by name , score having counts > 1 ) as t ) PS: count(name) count(score) count(*) \u6548\u679c\u4e00\u6837","title":"\u9898\u76ee3: \u5220\u9664\u540d\u79f0\u548c\u5206\u6570\u91cd\u590d\u7684\u6570\u636e"},{"location":"python/PIP/","text":"PIP \u914d\u7f6ePIP\u6e05\u534e\u6e90 \u547d\u4ee4\u914d\u7f6e \u53c2\u8003\uff1a pypi | \u955c\u50cf\u7ad9\u4f7f\u7528\u5e2e\u52a9 | \u6e05\u534e\u5927\u5b66\u5f00\u6e90\u8f6f\u4ef6\u955c\u50cf\u7ad9 | Tsinghua Open Source Mirror pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple \u624b\u52a8\u914d\u7f6e \u521b\u5efa\u914d\u7f6e\u6587\u4ef6\u5939 mkdir -p ~/.config/pip \u521b\u5efa\u914d\u7f6e\u6587\u4ef6 vim ~/.config/pip/pip.conf \u5199\u5165\u914d\u7f6e\u5185\u5bb9 [global] index-url = https://pypi.tuna.tsinghua.edu.cn/simple \u4e0b\u8f7d\u5305\u53ca\u5176\u4f9d\u8d56\u5230\u6307\u5b9a\u76ee\u5f55 pip download -d /path/to/target/ package \u5b89\u88c5\u5305\u53ca\u5176\u4f9d\u8d56\u5230\u6307\u5b9a\u76ee\u5f55 pip install --target = /path/to/target/ package pip install --target = /path/to/target/ -r requirements.txt \u6ce8\u610f, \u5b89\u88c5\u5305\u5230\u6307\u5b9a\u4f4d\u7f6e\u540e\u4f1a\u5bfc\u81f4Python\u89e3\u91ca\u5668\u65e0\u6cd5\u52a0\u8f7d\u8fd9\u4e9b\u5305, \u9700\u8981\u6307\u5b9a\u73af\u5883\u53d8\u91cf export PYTHONPATH=/path/to/target1;/path/to/target2;","title":"PIP"},{"location":"python/PIP/#pip","text":"","title":"PIP"},{"location":"python/PIP/#pip_1","text":"","title":"\u914d\u7f6ePIP\u6e05\u534e\u6e90"},{"location":"python/PIP/#_1","text":"\u53c2\u8003\uff1a pypi | \u955c\u50cf\u7ad9\u4f7f\u7528\u5e2e\u52a9 | \u6e05\u534e\u5927\u5b66\u5f00\u6e90\u8f6f\u4ef6\u955c\u50cf\u7ad9 | Tsinghua Open Source Mirror pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple","title":"\u547d\u4ee4\u914d\u7f6e"},{"location":"python/PIP/#_2","text":"","title":"\u624b\u52a8\u914d\u7f6e"},{"location":"python/PIP/#_3","text":"mkdir -p ~/.config/pip","title":"\u521b\u5efa\u914d\u7f6e\u6587\u4ef6\u5939"},{"location":"python/PIP/#_4","text":"vim ~/.config/pip/pip.conf","title":"\u521b\u5efa\u914d\u7f6e\u6587\u4ef6"},{"location":"python/PIP/#_5","text":"[global] index-url = https://pypi.tuna.tsinghua.edu.cn/simple","title":"\u5199\u5165\u914d\u7f6e\u5185\u5bb9"},{"location":"python/PIP/#_6","text":"pip download -d /path/to/target/ package","title":"\u4e0b\u8f7d\u5305\u53ca\u5176\u4f9d\u8d56\u5230\u6307\u5b9a\u76ee\u5f55"},{"location":"python/PIP/#_7","text":"pip install --target = /path/to/target/ package pip install --target = /path/to/target/ -r requirements.txt \u6ce8\u610f, \u5b89\u88c5\u5305\u5230\u6307\u5b9a\u4f4d\u7f6e\u540e\u4f1a\u5bfc\u81f4Python\u89e3\u91ca\u5668\u65e0\u6cd5\u52a0\u8f7d\u8fd9\u4e9b\u5305, \u9700\u8981\u6307\u5b9a\u73af\u5883\u53d8\u91cf export PYTHONPATH=/path/to/target1;/path/to/target2;","title":"\u5b89\u88c5\u5305\u53ca\u5176\u4f9d\u8d56\u5230\u6307\u5b9a\u76ee\u5f55"},{"location":"python/Python%E8%B5%84%E6%BA%90%E7%B4%A2%E5%BC%95/","text":"Python\u8d44\u6e90\u7d22\u5f15 \u6848\u4f8b\u4ee3\u7801: Python Code Examples \u5b66\u4e60\u6559\u7a0b: GitHub - Python-100-Days \u7b97\u6cd5\u4ee3\u7801: GitHub - Algorithms \u5404\u7c7b\u5305\u96c6\u5408: GitHub - Awesome Python GitHub - Awesome-cryptography \u5f02\u6b65SSH: GitHub - AsyncSSH Document - AsyncSSH \u5047\u6570\u636e\u751f\u6210: GitHub - Faker Document - Faker \u52a0\u5bc6\u7b97\u6cd5: GitHub - PyCryptodome Document - PyCryptodome GitHub - Cryptography Document - Cryptography \u6253\u5305\u4e8c\u8fdb\u5236: GitHub - Nuitka Document - Nuitka GitHub - PyInstaller Document - PyInstaller \u914d\u5957Django\u7684\u5305: Django Packages \u914d\u5957Flask\u7684\u5305: GitHub -Awesome Flask","title":"Python\u8d44\u6e90\u7d22\u5f15"},{"location":"python/Python%E8%B5%84%E6%BA%90%E7%B4%A2%E5%BC%95/#python","text":"\u6848\u4f8b\u4ee3\u7801: Python Code Examples \u5b66\u4e60\u6559\u7a0b: GitHub - Python-100-Days \u7b97\u6cd5\u4ee3\u7801: GitHub - Algorithms \u5404\u7c7b\u5305\u96c6\u5408: GitHub - Awesome Python GitHub - Awesome-cryptography \u5f02\u6b65SSH: GitHub - AsyncSSH Document - AsyncSSH \u5047\u6570\u636e\u751f\u6210: GitHub - Faker Document - Faker \u52a0\u5bc6\u7b97\u6cd5: GitHub - PyCryptodome Document - PyCryptodome GitHub - Cryptography Document - Cryptography \u6253\u5305\u4e8c\u8fdb\u5236: GitHub - Nuitka Document - Nuitka GitHub - PyInstaller Document - PyInstaller \u914d\u5957Django\u7684\u5305: Django Packages \u914d\u5957Flask\u7684\u5305: GitHub -Awesome Flask","title":"Python\u8d44\u6e90\u7d22\u5f15"},{"location":"python/%E5%8F%98%E9%87%8F%E5%90%8D%E7%A7%B0%E4%B8%AD%E7%9A%84%E4%B8%8B%E5%88%92%E7%BA%BF/","text":"\u53d8\u91cf\u540d\u79f0\u4e2d\u7684\u4e0b\u5212\u7ebf \u5355\u4e0b\u5212\u7ebf _ \u8868\u793a\u4e34\u65f6\u7684\u6216\u65e0\u5173\u7d27\u8981\u7684\u53d8\u91cf, \u4f8b\u5982: for _ in range ( 5 ): print ( 'Hello World!' ) \u540c\u65f6\u4e5f\u53ef\u5728REPL(\u4ea4\u4e92\u5f0f\u89e3\u91ca\u5668)\u4e2d\u50a8\u5b58\u6700\u8fd1\u7684\u4e00\u4e2a\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c, \u4f8b\u5982: >>> 1 + 1 2 >>> _ 2 >>> 1 + 2 3 >>> _ 3 >>> list () [] >>> _ . append ( 1 ) >>> _ . extend ([ 2 , 3 ]) >>> _ [ 1 , 2 , 3 ] \u524d\u7f6e\u5355\u4e0b\u5212\u7ebf _var \u5355\u4e2a\u4e0b\u5212\u7ebf\u5f00\u5934\u7684\u53d8\u91cf\u6216\u65b9\u6cd5\u4ec5\u4f9b\u5185\u90e8\u4f7f\u7528, \u5728PEP 8\u4e2d\u5b9a\u4e49\u7684\u7ea6\u5b9a\u4fd7\u6210\u7684\u975e\u5f3a\u5236\u6027\u7684,\u4e0d\u9650\u5236\u8bbf\u95ee, \u4f8b\u5982: class Demo : def __init__ ( self ): self . a = 1 @staticmethod def _return_something (): return 'Hello World' demo = Demo () print ( demo . a ) # \u8f93\u51fa1 print ( demo . _return_something ()) # Hello World \u4f46\u662f\u5728\u5bfc\u5165\u65f6\u4f1a\u6709\u4e00\u4e9b\u533a\u522b, \u4f8b\u5982\u7f16\u5199\u5982\u4e0b\u6a21\u5757: \"\"\"demo.py\"\"\" name = 'zhangsan' _age = 18 gender = 'male' def _get_gender (): return gender class _Birthday : BIRRTHDAY = '1970-01-01 00:00:00' \u4f7f\u7528\u901a\u914d\u7b26\u5bfc\u5165\u6a21\u5757\u4e2d\u7684\u53d8\u91cf, \u9ed8\u8ba4\u4f1a\u5ffd\u7565\u4ee5\u5355\u4e0b\u5212\u7ebf\u5f00\u5934\u7684\u53d8\u91cf\u3001\u51fd\u6570\u548c\u7c7b, \u4f8b\u5982: >>> from demo import * >>> name 'zhangsan' >>> age 18 >>> _gender Traceback ( most recent call last ): File \"<stdin>\" , line 1 , in < module > NameError : name '_gender' is not defined >>> _get_gender () Traceback ( most recent call last ): File \"<stdin>\" , line 1 , in < module > NameError : name '_get_gender' is not defined >>> _Birthday Traceback ( most recent call last ): File \"<stdin>\" , line 1 , in < module > NameError : name '_Birthday' is not defined \u5982\u679c\u5728\u6a21\u5757 demo.py \u4e2d\u8bbe\u7f6e\u4e86 __all__ = ['name', 'age', '_gender', '_get_gender', '_Birthday'] , \u5219\u53ef\u4ee5\u8bbf\u95ee: >>> from demo import * >>> name 'zhangsan' >>> age 18 >>> _gender 'male' >>> _get_gender < function _get_gender at 0x103291d80 > >>> _Birthday < class ' a . _Birthday '> \u6216\u8005\u6ce8\u91ca\u6389 __all__ \u4f46\u4e0d\u4f7f\u7528\u901a\u914d\u7b26\u65b9\u5f0f\u5bfc\u5165, \u4f7f\u7528 \u5305\u540d. \u7684\u65b9\u5f0f\u4e5f\u53ef\u8bbf\u95ee: >>> import demo >>> demo . name 'zhangsan' >>> demo . age 18 >>> demo . _get_gender < function _get_gender at 0x102e29d80 > >>> demo . _Birthday < class ' a . _Birthday '> \u540e\u7f6e\u5355\u4e0b\u5212\u7ebf var_ \u540e\u7f6e\u5355\u4e0b\u5212\u7ebf\u901a\u5e38\u7528\u4e8e\u907f\u514d\u4e0ePython\u7684\u5173\u952e\u5b57\u4ea7\u751f\u51b2\u7a81, \u4f8b\u5982: >>> def = 1 File \"<stdin>\" , line 1 def = 1 ^ SyntaxError : invalid syntax >>> def_ = 1 >>> >>> def test ( class ): File \"<stdin>\" , line 1 def test ( class ): ^^^^^ SyntaxError : invalid syntax >>> def test ( class_ ): ... \u524d\u7f6e\u53cc\u4e0b\u5212\u7ebf __var \u524d\u7f6e\u53cc\u4e0b\u5212\u7ebf\u7684\u53d8\u91cf\u3001\u51fd\u6570\u548c\u7c7b\u540c\u5355\u524d\u7f6e\u4e0b\u5212\u7ebf, \u4f8b\u5982: \"\"\"demo.py\"\"\" __a = 1 def __b (): pass class __C : pass >>> from demo import * >>> __a Traceback ( most recent call last ): File \"<stdin>\" , line 1 , in < module > NameError : name '__a' is not defined >>> __b Traceback ( most recent call last ): File \"<stdin>\" , line 1 , in < module > NameError : name '__b' is not defined >>> __C Traceback ( most recent call last ): File \"<stdin>\" , line 1 , in < module > NameError : name '__C' is not defined >>> import demo >>> demo . __a 1 >>> demo . __b < function __b at 0x100cf1d80 > >>> demo . __C < class ' z . __C '> \u4f46\u5982\u679c\u7528\u4e8e\u7c7b\u5185\u90e8\u7684\u5c5e\u6027\u6216\u65b9\u6cd5\u53ca\u5176\u65b9\u6cd5\u53d8\u91cf, \u4f1a\u89e6\u53d1Python\u7684\u4e00\u4e2a\u7279\u6027: \u540d\u79f0\u4fee\u9970(name mangling), \u5373\u89e3\u91ca\u5668\u4f1a\u66f4\u6539\u53d8\u91cf\u7684\u540d\u79f0, \u4f8b\u5982: \"\"\"demo.py\"\"\" class Demo : __CLASSNAME = 'Demo' def __init__ ( self ): self . foo = 1 self . _bar = 2 self . __baz = 3 def __hey ( self ): pass >>> from demo import Demo >>> d = Demo () >>> d . __CLASSNAME Traceback ( most recent call last ): File \"<stdin>\" , line 1 , in < module > AttributeError : 'Demo' object has no attribute '__CLASSNAME' . Did you mean : '_Demo__CLASSNAME' ? >>> d . foo 1 >>> d . _bar 2 >>> d . __baz Traceback ( most recent call last ): File \"<stdin>\" , line 1 , in < module > AttributeError : 'Demo' object has no attribute '__baz' . Did you mean : '_bar' ? >>> d . __hey Traceback ( most recent call last ): File \"<stdin>\" , line 1 , in < module > AttributeError : 'Demo' object has no attribute '__hey' \u65e0\u6cd5\u8bbf\u95ee __CLASSNAME\u3001 d._baz \u548c d.__hey , \u5c31\u662f\u56e0\u4e3a\u540d\u79f0\u4fee\u9970, \u539f\u672c\u7684\u540d\u79f0\u5df2\u7ecf\u88ab\u66f4\u6539, \u901a\u8fc7 dir(d)`\u67e5\u770b\u6240\u6709\u5c5e\u6027\u53ef\u4ee5\u770b\u51fa: >>> dir ( d ) [ '_Demo__CLASSNAME' , '_Demo__baz' , '_Demo__hey' , '__class__' , '__delattr__' , '__dict__' , '__dir__' , '__doc__' , '__eq__' , '__format__' , '__ge__' , '__getattribute__' , '__gt__' , '__hash__' , '__init__' , '__init_subclass__' , '__le__' , '__lt__' , '__module__' , '__ne__' , '__new__' , '__reduce__' , '__reduce_ex__' , '__repr__' , '__setattr__' , '__sizeof__' , '__str__' , '__subclasshook__' , '__weakref__' , '_bar' , 'foo' ] __CLASSNAME \u88ab\u91cd\u547d\u540d\u6210 _Demo__CLASSNAME __baz \u88ab\u91cd\u547d\u540d\u6210 _Demo__baz __hey \u88ab\u91cd\u547d\u540d\u6210 _Demo__hey \u6240\u4ee5\u5b9e\u9645\u4e0a\u5e94\u8be5\u8fd9\u6837\u8bbf\u95ee: >>> d . _Demo__CLASSNAME 'demo' >>> d . _Demo__baz 3 >>> d . _Demo__hey < bound method Demo . __hey of < demo . Demo object at 0x101110be0 >> \u5373, \u901a\u8fc7 _\u7c7b\u540d__\u53d8\u91cf\u540d \u7684\u65b9\u5f0f\u53ef\u4ee5\u8bbf\u95ee, \u4f46\u4e0d\u5efa\u8bae\u8fd9\u4e48\u505a, \u4e00\u822c\u6765\u8bb2\u524d\u7f6e\u53cc\u4e0b\u5212\u7ebf\u7684\u53d8\u91cf\u5728\u7ea6\u5b9a\u4fd7\u6210\u4e2d\u65f6 \u79c1\u6709\u5c5e\u6027 , \u4e0d\u5141\u8bb8\u5916\u90e8\u8bbf\u95ee \u540c\u65f6\u540d\u79f0\u4fee\u9970\u4f1a\u5f15\u53d1\u4e00\u4e2a\u73b0\u8c61, \u4f8b\u5982: \"\"\"demo.py\"\"\" class Demo : __CLASSNAME = 'Demo' def __init__ ( self ): self . foo = 1 self . _bar = 2 self . __baz = 3 super () . __init__ () def __hey ( self ): pass class SubDemo ( Demo ): __CLASSNAME = 'SubDemo' def __init__ ( self ): self . foo = 11 self . _bar = 22 self . __baz = 33 >>> from demo import SubDemo >>> sd = SubDemo () >>> dir ( sd ) [ '_Demo__CLASSNAME' , '_Demo__baz' , '_Demo__hey' , '_SubDemo__CLASSNAME' , '_SubDemo__baz' , '__class__' , '__delattr__' , '__dict__' , '__dir__' , '__doc__' , '__eq__' , '__format__' , '__ge__' , '__getattribute__' , '__gt__' , '__hash__' , '__init__' , '__init_subclass__' , '__le__' , '__lt__' , '__module__' , '__ne__' , '__new__' , '__reduce__' , '__reduce_ex__' , '__repr__' , '__setattr__' , '__sizeof__' , '__str__' , '__subclasshook__' , '__weakref__' , '_bar' , 'foo' ] \u5b58\u5728 _Demo__CLASSNAME \u3001 _Demo__baz \u3001 _Demo__hey \u3001 _SubDemo__CLASSNAME \u3001 _SubDemo__baz >>> sd . _Demo__CLASSNAME 'Demo' >>> sd . _Demo__baz 3 >>> sd . _Demo__hey < bound method Demo . __hey of < demo . SubDemo object at 0x101045510 >> >>> sd . _SubDemo__CLASSNAME 'SubDemo' >>> sd . _SubDemo__baz 33 \u8bc1\u660e: \u7c7b\u7684\u79c1\u6709\u5c5e\u6027\u53ef\u4ee5\u88ab\u5b50\u7c7b\u7ee7\u627f, \u4f46\u56e0\u4e3a\u540d\u79f0\u4fee\u9970\u7684\u673a\u5236\u5bfc\u81f4\u4e0d\u4f1a\u88ab\u91cd\u5199 \u5728\u770b\u4e00\u4e2a\u5947\u602a\u7684\u4f8b\u5b50: \"\"\"demo.py\"\"\" _Demo__name = '\u5168\u5c40\u53d8\u91cfDemo' class Demo : @staticmethod def test (): return __name \u672c\u6848\u4f8b\u4e2d\u5728IDE\u4e2d\u4e00\u5b9a\u4f1a\u63d0\u793a __name \u672a\u5b9a\u4e49, \u5c5e\u4e8e\u4e00\u4e2a\u9519\u8bef \u4f46\u662f\u7531\u4e8e\u540d\u79f0\u4fee\u9970\u7684\u539f\u56e0, \u5b9e\u9645\u4e0a\u4e0d\u4f1a\u8fd4\u56de __name , \u800c\u662f\u8fd4\u56de\u4fee\u9970\u540e _Demo__name \u6070\u5de7\u6709\u4e2a\u5168\u5c40\u53d8\u91cf _Demo__name , \u6240\u4ee5\u53ef\u4ee5\u6b63\u5e38\u8fd4\u56de, \u4f8b\u5982: >>> from demo import Demo >>> Demo () . test () '\u5168\u5c40\u53d8\u91cfDemo' \u524d\u540e\u53cc\u4e0b\u5212\u7ebf __var__ \u524d\u540e\u53cc\u4e0b\u5212\u7ebf\u5373\u539f\u6765\u7684\u9b54\u6cd5(magic)\u53d8\u91cf\u6216\u9b54\u6cd5\u65b9\u6cd5, \u73b0\u5728\u53ebdunder\u65b9\u6cd5, \u4e2a\u4eba\u7f16\u7801\u5e94\u907f\u514d\u6b64\u7c7b\u5199\u6cd5","title":"\u53d8\u91cf\u540d\u79f0\u4e2d\u7684\u4e0b\u5212\u7ebf"},{"location":"python/%E5%8F%98%E9%87%8F%E5%90%8D%E7%A7%B0%E4%B8%AD%E7%9A%84%E4%B8%8B%E5%88%92%E7%BA%BF/#_1","text":"","title":"\u53d8\u91cf\u540d\u79f0\u4e2d\u7684\u4e0b\u5212\u7ebf"},{"location":"python/%E5%8F%98%E9%87%8F%E5%90%8D%E7%A7%B0%E4%B8%AD%E7%9A%84%E4%B8%8B%E5%88%92%E7%BA%BF/#_","text":"\u8868\u793a\u4e34\u65f6\u7684\u6216\u65e0\u5173\u7d27\u8981\u7684\u53d8\u91cf, \u4f8b\u5982: for _ in range ( 5 ): print ( 'Hello World!' ) \u540c\u65f6\u4e5f\u53ef\u5728REPL(\u4ea4\u4e92\u5f0f\u89e3\u91ca\u5668)\u4e2d\u50a8\u5b58\u6700\u8fd1\u7684\u4e00\u4e2a\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c, \u4f8b\u5982: >>> 1 + 1 2 >>> _ 2 >>> 1 + 2 3 >>> _ 3 >>> list () [] >>> _ . append ( 1 ) >>> _ . extend ([ 2 , 3 ]) >>> _ [ 1 , 2 , 3 ]","title":"\u5355\u4e0b\u5212\u7ebf _"},{"location":"python/%E5%8F%98%E9%87%8F%E5%90%8D%E7%A7%B0%E4%B8%AD%E7%9A%84%E4%B8%8B%E5%88%92%E7%BA%BF/#_var","text":"\u5355\u4e2a\u4e0b\u5212\u7ebf\u5f00\u5934\u7684\u53d8\u91cf\u6216\u65b9\u6cd5\u4ec5\u4f9b\u5185\u90e8\u4f7f\u7528, \u5728PEP 8\u4e2d\u5b9a\u4e49\u7684\u7ea6\u5b9a\u4fd7\u6210\u7684\u975e\u5f3a\u5236\u6027\u7684,\u4e0d\u9650\u5236\u8bbf\u95ee, \u4f8b\u5982: class Demo : def __init__ ( self ): self . a = 1 @staticmethod def _return_something (): return 'Hello World' demo = Demo () print ( demo . a ) # \u8f93\u51fa1 print ( demo . _return_something ()) # Hello World \u4f46\u662f\u5728\u5bfc\u5165\u65f6\u4f1a\u6709\u4e00\u4e9b\u533a\u522b, \u4f8b\u5982\u7f16\u5199\u5982\u4e0b\u6a21\u5757: \"\"\"demo.py\"\"\" name = 'zhangsan' _age = 18 gender = 'male' def _get_gender (): return gender class _Birthday : BIRRTHDAY = '1970-01-01 00:00:00' \u4f7f\u7528\u901a\u914d\u7b26\u5bfc\u5165\u6a21\u5757\u4e2d\u7684\u53d8\u91cf, \u9ed8\u8ba4\u4f1a\u5ffd\u7565\u4ee5\u5355\u4e0b\u5212\u7ebf\u5f00\u5934\u7684\u53d8\u91cf\u3001\u51fd\u6570\u548c\u7c7b, \u4f8b\u5982: >>> from demo import * >>> name 'zhangsan' >>> age 18 >>> _gender Traceback ( most recent call last ): File \"<stdin>\" , line 1 , in < module > NameError : name '_gender' is not defined >>> _get_gender () Traceback ( most recent call last ): File \"<stdin>\" , line 1 , in < module > NameError : name '_get_gender' is not defined >>> _Birthday Traceback ( most recent call last ): File \"<stdin>\" , line 1 , in < module > NameError : name '_Birthday' is not defined \u5982\u679c\u5728\u6a21\u5757 demo.py \u4e2d\u8bbe\u7f6e\u4e86 __all__ = ['name', 'age', '_gender', '_get_gender', '_Birthday'] , \u5219\u53ef\u4ee5\u8bbf\u95ee: >>> from demo import * >>> name 'zhangsan' >>> age 18 >>> _gender 'male' >>> _get_gender < function _get_gender at 0x103291d80 > >>> _Birthday < class ' a . _Birthday '> \u6216\u8005\u6ce8\u91ca\u6389 __all__ \u4f46\u4e0d\u4f7f\u7528\u901a\u914d\u7b26\u65b9\u5f0f\u5bfc\u5165, \u4f7f\u7528 \u5305\u540d. \u7684\u65b9\u5f0f\u4e5f\u53ef\u8bbf\u95ee: >>> import demo >>> demo . name 'zhangsan' >>> demo . age 18 >>> demo . _get_gender < function _get_gender at 0x102e29d80 > >>> demo . _Birthday < class ' a . _Birthday '>","title":"\u524d\u7f6e\u5355\u4e0b\u5212\u7ebf _var"},{"location":"python/%E5%8F%98%E9%87%8F%E5%90%8D%E7%A7%B0%E4%B8%AD%E7%9A%84%E4%B8%8B%E5%88%92%E7%BA%BF/#var_","text":"\u540e\u7f6e\u5355\u4e0b\u5212\u7ebf\u901a\u5e38\u7528\u4e8e\u907f\u514d\u4e0ePython\u7684\u5173\u952e\u5b57\u4ea7\u751f\u51b2\u7a81, \u4f8b\u5982: >>> def = 1 File \"<stdin>\" , line 1 def = 1 ^ SyntaxError : invalid syntax >>> def_ = 1 >>> >>> def test ( class ): File \"<stdin>\" , line 1 def test ( class ): ^^^^^ SyntaxError : invalid syntax >>> def test ( class_ ): ...","title":"\u540e\u7f6e\u5355\u4e0b\u5212\u7ebf var_"},{"location":"python/%E5%8F%98%E9%87%8F%E5%90%8D%E7%A7%B0%E4%B8%AD%E7%9A%84%E4%B8%8B%E5%88%92%E7%BA%BF/#__var","text":"\u524d\u7f6e\u53cc\u4e0b\u5212\u7ebf\u7684\u53d8\u91cf\u3001\u51fd\u6570\u548c\u7c7b\u540c\u5355\u524d\u7f6e\u4e0b\u5212\u7ebf, \u4f8b\u5982: \"\"\"demo.py\"\"\" __a = 1 def __b (): pass class __C : pass >>> from demo import * >>> __a Traceback ( most recent call last ): File \"<stdin>\" , line 1 , in < module > NameError : name '__a' is not defined >>> __b Traceback ( most recent call last ): File \"<stdin>\" , line 1 , in < module > NameError : name '__b' is not defined >>> __C Traceback ( most recent call last ): File \"<stdin>\" , line 1 , in < module > NameError : name '__C' is not defined >>> import demo >>> demo . __a 1 >>> demo . __b < function __b at 0x100cf1d80 > >>> demo . __C < class ' z . __C '> \u4f46\u5982\u679c\u7528\u4e8e\u7c7b\u5185\u90e8\u7684\u5c5e\u6027\u6216\u65b9\u6cd5\u53ca\u5176\u65b9\u6cd5\u53d8\u91cf, \u4f1a\u89e6\u53d1Python\u7684\u4e00\u4e2a\u7279\u6027: \u540d\u79f0\u4fee\u9970(name mangling), \u5373\u89e3\u91ca\u5668\u4f1a\u66f4\u6539\u53d8\u91cf\u7684\u540d\u79f0, \u4f8b\u5982: \"\"\"demo.py\"\"\" class Demo : __CLASSNAME = 'Demo' def __init__ ( self ): self . foo = 1 self . _bar = 2 self . __baz = 3 def __hey ( self ): pass >>> from demo import Demo >>> d = Demo () >>> d . __CLASSNAME Traceback ( most recent call last ): File \"<stdin>\" , line 1 , in < module > AttributeError : 'Demo' object has no attribute '__CLASSNAME' . Did you mean : '_Demo__CLASSNAME' ? >>> d . foo 1 >>> d . _bar 2 >>> d . __baz Traceback ( most recent call last ): File \"<stdin>\" , line 1 , in < module > AttributeError : 'Demo' object has no attribute '__baz' . Did you mean : '_bar' ? >>> d . __hey Traceback ( most recent call last ): File \"<stdin>\" , line 1 , in < module > AttributeError : 'Demo' object has no attribute '__hey' \u65e0\u6cd5\u8bbf\u95ee __CLASSNAME\u3001 d._baz \u548c d.__hey , \u5c31\u662f\u56e0\u4e3a\u540d\u79f0\u4fee\u9970, \u539f\u672c\u7684\u540d\u79f0\u5df2\u7ecf\u88ab\u66f4\u6539, \u901a\u8fc7 dir(d)`\u67e5\u770b\u6240\u6709\u5c5e\u6027\u53ef\u4ee5\u770b\u51fa: >>> dir ( d ) [ '_Demo__CLASSNAME' , '_Demo__baz' , '_Demo__hey' , '__class__' , '__delattr__' , '__dict__' , '__dir__' , '__doc__' , '__eq__' , '__format__' , '__ge__' , '__getattribute__' , '__gt__' , '__hash__' , '__init__' , '__init_subclass__' , '__le__' , '__lt__' , '__module__' , '__ne__' , '__new__' , '__reduce__' , '__reduce_ex__' , '__repr__' , '__setattr__' , '__sizeof__' , '__str__' , '__subclasshook__' , '__weakref__' , '_bar' , 'foo' ] __CLASSNAME \u88ab\u91cd\u547d\u540d\u6210 _Demo__CLASSNAME __baz \u88ab\u91cd\u547d\u540d\u6210 _Demo__baz __hey \u88ab\u91cd\u547d\u540d\u6210 _Demo__hey \u6240\u4ee5\u5b9e\u9645\u4e0a\u5e94\u8be5\u8fd9\u6837\u8bbf\u95ee: >>> d . _Demo__CLASSNAME 'demo' >>> d . _Demo__baz 3 >>> d . _Demo__hey < bound method Demo . __hey of < demo . Demo object at 0x101110be0 >> \u5373, \u901a\u8fc7 _\u7c7b\u540d__\u53d8\u91cf\u540d \u7684\u65b9\u5f0f\u53ef\u4ee5\u8bbf\u95ee, \u4f46\u4e0d\u5efa\u8bae\u8fd9\u4e48\u505a, \u4e00\u822c\u6765\u8bb2\u524d\u7f6e\u53cc\u4e0b\u5212\u7ebf\u7684\u53d8\u91cf\u5728\u7ea6\u5b9a\u4fd7\u6210\u4e2d\u65f6 \u79c1\u6709\u5c5e\u6027 , \u4e0d\u5141\u8bb8\u5916\u90e8\u8bbf\u95ee \u540c\u65f6\u540d\u79f0\u4fee\u9970\u4f1a\u5f15\u53d1\u4e00\u4e2a\u73b0\u8c61, \u4f8b\u5982: \"\"\"demo.py\"\"\" class Demo : __CLASSNAME = 'Demo' def __init__ ( self ): self . foo = 1 self . _bar = 2 self . __baz = 3 super () . __init__ () def __hey ( self ): pass class SubDemo ( Demo ): __CLASSNAME = 'SubDemo' def __init__ ( self ): self . foo = 11 self . _bar = 22 self . __baz = 33 >>> from demo import SubDemo >>> sd = SubDemo () >>> dir ( sd ) [ '_Demo__CLASSNAME' , '_Demo__baz' , '_Demo__hey' , '_SubDemo__CLASSNAME' , '_SubDemo__baz' , '__class__' , '__delattr__' , '__dict__' , '__dir__' , '__doc__' , '__eq__' , '__format__' , '__ge__' , '__getattribute__' , '__gt__' , '__hash__' , '__init__' , '__init_subclass__' , '__le__' , '__lt__' , '__module__' , '__ne__' , '__new__' , '__reduce__' , '__reduce_ex__' , '__repr__' , '__setattr__' , '__sizeof__' , '__str__' , '__subclasshook__' , '__weakref__' , '_bar' , 'foo' ] \u5b58\u5728 _Demo__CLASSNAME \u3001 _Demo__baz \u3001 _Demo__hey \u3001 _SubDemo__CLASSNAME \u3001 _SubDemo__baz >>> sd . _Demo__CLASSNAME 'Demo' >>> sd . _Demo__baz 3 >>> sd . _Demo__hey < bound method Demo . __hey of < demo . SubDemo object at 0x101045510 >> >>> sd . _SubDemo__CLASSNAME 'SubDemo' >>> sd . _SubDemo__baz 33 \u8bc1\u660e: \u7c7b\u7684\u79c1\u6709\u5c5e\u6027\u53ef\u4ee5\u88ab\u5b50\u7c7b\u7ee7\u627f, \u4f46\u56e0\u4e3a\u540d\u79f0\u4fee\u9970\u7684\u673a\u5236\u5bfc\u81f4\u4e0d\u4f1a\u88ab\u91cd\u5199 \u5728\u770b\u4e00\u4e2a\u5947\u602a\u7684\u4f8b\u5b50: \"\"\"demo.py\"\"\" _Demo__name = '\u5168\u5c40\u53d8\u91cfDemo' class Demo : @staticmethod def test (): return __name \u672c\u6848\u4f8b\u4e2d\u5728IDE\u4e2d\u4e00\u5b9a\u4f1a\u63d0\u793a __name \u672a\u5b9a\u4e49, \u5c5e\u4e8e\u4e00\u4e2a\u9519\u8bef \u4f46\u662f\u7531\u4e8e\u540d\u79f0\u4fee\u9970\u7684\u539f\u56e0, \u5b9e\u9645\u4e0a\u4e0d\u4f1a\u8fd4\u56de __name , \u800c\u662f\u8fd4\u56de\u4fee\u9970\u540e _Demo__name \u6070\u5de7\u6709\u4e2a\u5168\u5c40\u53d8\u91cf _Demo__name , \u6240\u4ee5\u53ef\u4ee5\u6b63\u5e38\u8fd4\u56de, \u4f8b\u5982: >>> from demo import Demo >>> Demo () . test () '\u5168\u5c40\u53d8\u91cfDemo'","title":"\u524d\u7f6e\u53cc\u4e0b\u5212\u7ebf __var"},{"location":"python/%E5%8F%98%E9%87%8F%E5%90%8D%E7%A7%B0%E4%B8%AD%E7%9A%84%E4%B8%8B%E5%88%92%E7%BA%BF/#__var__","text":"\u524d\u540e\u53cc\u4e0b\u5212\u7ebf\u5373\u539f\u6765\u7684\u9b54\u6cd5(magic)\u53d8\u91cf\u6216\u9b54\u6cd5\u65b9\u6cd5, \u73b0\u5728\u53ebdunder\u65b9\u6cd5, \u4e2a\u4eba\u7f16\u7801\u5e94\u907f\u514d\u6b64\u7c7b\u5199\u6cd5","title":"\u524d\u540e\u53cc\u4e0b\u5212\u7ebf __var__"},{"location":"python/decorator-generator-iterator/%E7%94%9F%E6%88%90%E5%99%A8/","text":"\u751f\u6210\u5668 \u751f\u6210\u5668\u5176\u5b9e\u5c31\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u8fed\u4ee3\u5668, \u7528\u8fc7yield\u8bed\u6cd5\u5b9e\u73b0 \u4ee3\u78011 import math # 2\u662f\u6700\u5c0f\u7684\u8d28\u6570 number = 2 def is_prime_number ( number ): \"\"\"\u5224\u65ad\u4f20\u5165\u6570\u5b57\u662f\u5426\u662f\u8d28\u6570\"\"\" end = int ( math . sqrt ( number )) + 1 for i in range ( 2 , end ): if math . remainder ( number , i ) == 0 : return False return True def generate_prime_number (): \"\"\"\u8d28\u6570\u751f\u6210\u5668\"\"\" global number while True : tmp = number number += 1 if is_prime_number ( tmp ): yield tmp def main (): \"\"\"\u8f93\u51fa100\u4ee5\u5185\u7684\u6240\u6709\u8d28\u6570\"\"\" for _ in range ( 24 ): print ( next ( generate_prime_number ()), end = ', ' ) print ( next ( generate_prime_number ())) if __name__ == '__main__' : main () \u8f93\u51fa: 2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97 \u89e3\u91ca: \u4f7f\u7528\u4e86yield\u5173\u952e\u5b57\u7684\u51fd\u6570\u4e0d\u518d\u662f\u666e\u901a\u51fd\u6570\uff0c\u800c\u662f\u751f\u6210\u5668(generator), \u751f\u6210\u5668\u662f\u4e00\u7c7b\u7279\u6b8a\u7684\u8fed\u4ee3\u5668 yield\u5173\u952e\u5b57\u6709\u4e24\u70b9\u4f5c\u7528: \u4fdd\u5b58\u5f53\u524d\u8fd0\u884c\u72b6\u6001, \u5373\u9047\u5230 yield \u540e\u6682\u505c\u6267\u884c\uff0c\u5373\u5c06\u751f\u6210\u5668\u6302\u8d77 \u5c06 yield \u540e\u9762\u7684\u503c\u8fd4\u56de \u4f7f\u7528 next() \u51fd\u6570\u5524\u9192\u751f\u6210\u5668\u4ece\u800c\u7ee7\u7eed\u6267\u884c PS: \u628a\u5217\u8868\u63a8\u5230\u5f0f\u5916\u9762\u7684[]\u6362\u6210()\u5c31\u662f\u4e00\u4e2a\u751f\u6210\u5668, \u7136\u540e\u53ef\u4ee5\u4f7f\u7528next()\u65b9\u6cd5\u8f93\u51fa\u5176\u5143\u7d20 \u4ee3\u78012 def fibonacci_sequence ( n ): \"\"\"\u6590\u6ce2\u90a3\u5951\u6570\u5217\"\"\" current = 0 num1 , num2 = 1 , 1 while current < n : num = num1 num1 , num2 = num2 , num1 + num2 current += 1 yield num # \u89e6\u53d1StopIteration\u5f02\u5e38\u65f6\u53ef\u8fd4\u56de\u7684\u503c return '\u6ca1\u6709\u4e86' def main (): fs = fibonacci_sequence ( 6 ) while True : try : print ( next ( fs )) except StopIteration as e : print ( e . value ) break if __name__ == '__main__' : main () \u8f93\u51fa: 1 1 2 3 5 8 \u6ca1\u6709\u4e86 \u89e3\u91ca: \u5f53\u5f15\u53d1StopIteration\u5f02\u5e38\u65f6, \u751f\u6210\u5668\u51fd\u6570fibonacci_sequence\u4e2dreturn\u540e\u7684\u503c\u53ef\u4ee5\u88ab\u8f93\u51fa main\u51fd\u6570\u4e2d\u5fc5\u987b\u5148\u5b9a\u4e49\u53d8\u91cf fs = fibonacci_sequence(6), \u518d\u4f7f\u7528 next(fs) \u5426\u5219\u4f1a\u65e0\u9650\u5faa\u73af\u8f93\u51fa 1 \u56e0\u4e3a\u6bcf\u6b21\u90fd\u8c03\u7528\u51fd\u6570\uff0c\u90fd\u662f\u4e00\u4e2a\u65b0\u7684\u5b9e\u4f8b\uff0c\u6bcf\u6b21\u90fd\u90fd\u4ece\u7b2c\u4e00\u4e2a\u6570\u636e\u5f00\u59cb\u53d6 \u5bf9\u6bd4\u4ee3\u78011, \u5e76\u6ca1\u6709\u8bbe\u7f6e\u53d8\u91cf, \u4e4b\u6240\u4ee5\u76f4\u63a5\u8c03\u7528\u7684\u7ed3\u679c\u4f9d\u65e7\u6b63\u786e, \u662f\u56e0\u4e3a\u8bbe\u7f6e\u4e86\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf, \u6bcf\u6b21\u8c03\u7528\u7684\u521d\u59cb\u6761\u4ef6\u90fd\u4e0d\u4e00\u6837 \u751f\u6210\u5668\u4e2d\u8fd8\u6709\u4e00\u4e2asend\u65b9\u6cd5, \u8be6\u60c5\u89c1: https://blog.csdn.net/qq_42103091/article/details/124995095","title":"\u751f\u6210\u5668"},{"location":"python/decorator-generator-iterator/%E7%94%9F%E6%88%90%E5%99%A8/#_1","text":"\u751f\u6210\u5668\u5176\u5b9e\u5c31\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u8fed\u4ee3\u5668, \u7528\u8fc7yield\u8bed\u6cd5\u5b9e\u73b0","title":"\u751f\u6210\u5668"},{"location":"python/decorator-generator-iterator/%E7%94%9F%E6%88%90%E5%99%A8/#1","text":"import math # 2\u662f\u6700\u5c0f\u7684\u8d28\u6570 number = 2 def is_prime_number ( number ): \"\"\"\u5224\u65ad\u4f20\u5165\u6570\u5b57\u662f\u5426\u662f\u8d28\u6570\"\"\" end = int ( math . sqrt ( number )) + 1 for i in range ( 2 , end ): if math . remainder ( number , i ) == 0 : return False return True def generate_prime_number (): \"\"\"\u8d28\u6570\u751f\u6210\u5668\"\"\" global number while True : tmp = number number += 1 if is_prime_number ( tmp ): yield tmp def main (): \"\"\"\u8f93\u51fa100\u4ee5\u5185\u7684\u6240\u6709\u8d28\u6570\"\"\" for _ in range ( 24 ): print ( next ( generate_prime_number ()), end = ', ' ) print ( next ( generate_prime_number ())) if __name__ == '__main__' : main () \u8f93\u51fa: 2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97 \u89e3\u91ca: \u4f7f\u7528\u4e86yield\u5173\u952e\u5b57\u7684\u51fd\u6570\u4e0d\u518d\u662f\u666e\u901a\u51fd\u6570\uff0c\u800c\u662f\u751f\u6210\u5668(generator), \u751f\u6210\u5668\u662f\u4e00\u7c7b\u7279\u6b8a\u7684\u8fed\u4ee3\u5668 yield\u5173\u952e\u5b57\u6709\u4e24\u70b9\u4f5c\u7528: \u4fdd\u5b58\u5f53\u524d\u8fd0\u884c\u72b6\u6001, \u5373\u9047\u5230 yield \u540e\u6682\u505c\u6267\u884c\uff0c\u5373\u5c06\u751f\u6210\u5668\u6302\u8d77 \u5c06 yield \u540e\u9762\u7684\u503c\u8fd4\u56de \u4f7f\u7528 next() \u51fd\u6570\u5524\u9192\u751f\u6210\u5668\u4ece\u800c\u7ee7\u7eed\u6267\u884c PS: \u628a\u5217\u8868\u63a8\u5230\u5f0f\u5916\u9762\u7684[]\u6362\u6210()\u5c31\u662f\u4e00\u4e2a\u751f\u6210\u5668, \u7136\u540e\u53ef\u4ee5\u4f7f\u7528next()\u65b9\u6cd5\u8f93\u51fa\u5176\u5143\u7d20","title":"\u4ee3\u78011"},{"location":"python/decorator-generator-iterator/%E7%94%9F%E6%88%90%E5%99%A8/#2","text":"def fibonacci_sequence ( n ): \"\"\"\u6590\u6ce2\u90a3\u5951\u6570\u5217\"\"\" current = 0 num1 , num2 = 1 , 1 while current < n : num = num1 num1 , num2 = num2 , num1 + num2 current += 1 yield num # \u89e6\u53d1StopIteration\u5f02\u5e38\u65f6\u53ef\u8fd4\u56de\u7684\u503c return '\u6ca1\u6709\u4e86' def main (): fs = fibonacci_sequence ( 6 ) while True : try : print ( next ( fs )) except StopIteration as e : print ( e . value ) break if __name__ == '__main__' : main () \u8f93\u51fa: 1 1 2 3 5 8 \u6ca1\u6709\u4e86 \u89e3\u91ca: \u5f53\u5f15\u53d1StopIteration\u5f02\u5e38\u65f6, \u751f\u6210\u5668\u51fd\u6570fibonacci_sequence\u4e2dreturn\u540e\u7684\u503c\u53ef\u4ee5\u88ab\u8f93\u51fa main\u51fd\u6570\u4e2d\u5fc5\u987b\u5148\u5b9a\u4e49\u53d8\u91cf fs = fibonacci_sequence(6), \u518d\u4f7f\u7528 next(fs) \u5426\u5219\u4f1a\u65e0\u9650\u5faa\u73af\u8f93\u51fa 1 \u56e0\u4e3a\u6bcf\u6b21\u90fd\u8c03\u7528\u51fd\u6570\uff0c\u90fd\u662f\u4e00\u4e2a\u65b0\u7684\u5b9e\u4f8b\uff0c\u6bcf\u6b21\u90fd\u90fd\u4ece\u7b2c\u4e00\u4e2a\u6570\u636e\u5f00\u59cb\u53d6 \u5bf9\u6bd4\u4ee3\u78011, \u5e76\u6ca1\u6709\u8bbe\u7f6e\u53d8\u91cf, \u4e4b\u6240\u4ee5\u76f4\u63a5\u8c03\u7528\u7684\u7ed3\u679c\u4f9d\u65e7\u6b63\u786e, \u662f\u56e0\u4e3a\u8bbe\u7f6e\u4e86\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf, \u6bcf\u6b21\u8c03\u7528\u7684\u521d\u59cb\u6761\u4ef6\u90fd\u4e0d\u4e00\u6837 \u751f\u6210\u5668\u4e2d\u8fd8\u6709\u4e00\u4e2asend\u65b9\u6cd5, \u8be6\u60c5\u89c1: https://blog.csdn.net/qq_42103091/article/details/124995095","title":"\u4ee3\u78012"},{"location":"python/decorator-generator-iterator/%E8%A3%85%E9%A5%B0%E5%99%A8/","text":"\u88c5\u9970\u5668 \u666e\u901a\u88c5\u9970\u5668 import time def outer_func ( func ): def inner_func (): start_time = time . time () func () end_time = time . time () print ( f '\u51fd\u6570test_func\u8fd0\u884c\u65f6\u957f: { end_time - start_time } ' ) return inner_func @outer_func def test_func (): time . sleep ( 1 ) def main (): # \u91cd\u70b9\uff1a # \u88c5\u9970\u5668\u672c\u8d28\u4e0a\u662f\u628a\u88ab\u88c5\u9970\u7684\u51fd\u6570\u5f53\u4f5c\u53c2\u6570\u4f20\u5165\u5e76\u53cd\u56de\u4e00\u4e2a\u540c\u540d\u51fd\u6570 # \u89e3\u91ca\uff1a # \u8c03\u7528\u88ab\u88c5\u9970\u8fc7\u7684\u51fd\u6570test_func\u65f6\u5b9e\u9645\u4e0a\u8c03\u7528outer_func(test_func) # \u6240\u4ee5 test_func \u5c31\u662f outer_func(test_func) # \u56e0\u6b64 test_func() \u5c31\u662f outer_func(test_func)() # outer_func(test_func)() \u4e2d\u7684 outer_func(test_func) \u53cd\u56de inner_func # \u6240\u4ee5\u5c31\u662f inner_func() # inner_func() \u5185\u90e8\u53ef\u4ee5\u8c03\u7528\u5916\u90e8\u51fd\u6570\u7684\u53c2\u6570\uff0c\u4e5f\u5c31\u662ffunc\uff0c\u800cfunc\u624d\u662f\u771f\u771f\u7684test_func # \u6240\u4ee5 inner_func() \u5185\u90e8\u8c03\u7528\u4e86 test_func() test_func () if __name__ == '__main__' : main () \u591a\u5c42\u88c5\u9970\u5668 def outer_func_1 ( func ): def inner_func (): print ( '\u88c5\u9970\u5668outer_func_1\u8fd0\u884c\u5f00\u59cb' ) func () print ( '\u88c5\u9970\u5668outer_func_1\u8fd0\u884c\u7ed3\u675f' ) return inner_func def outer_func_2 ( func ): def inner_func (): print ( '\u88c5\u9970\u5668outer_func_2\u8fd0\u884c\u5f00\u59cb' ) func () print ( '\u88c5\u9970\u5668outer_func_2\u8fd0\u884c\u7ed3\u675f' ) return inner_func @outer_func_2 @outer_func_1 def test_func (): print ( \"\u6211\u624d\u662ftest_func\u51fd\u6570\" ) def main (): test_func () if __name__ == '__main__' : main () \u8f93\u51fa: \u88c5\u9970\u5668outer_func_2\u8fd0\u884c\u5f00\u59cb \u88c5\u9970\u5668outer_func_1\u8fd0\u884c\u5f00\u59cb \u6211\u624d\u662ftest_func\u51fd\u6570 \u88c5\u9970\u5668outer_func_1\u8fd0\u884c\u7ed3\u675f \u88c5\u9970\u5668outer_func_2\u8fd0\u884c\u7ed3\u675f \u89e3\u91ca: \u591a\u5c42\u88c5\u9970\u5668\u7531\u5916\u5411\u5185\u8c03\u7528\uff0c\u7531\u5185\u5411\u5916\u53cd\u56de \u6839\u636e\u88c5\u9970\u5668\u7684\u672c\u8d28\uff0c\u5b9e\u9645\u6267\u884c\u7684\u662f test_func = outer_func_2(outer_func_1(test_func))\uff0c\u5206\u89e3\u5f00\u5c31\u662f: 1\u3001outer_func_1 = outer_func_2(outer_func_1) 2\u3001test_func = outer_func_1(test_func) \u9996\u5148\u662f\u8fc7\u7a0b1\uff0c\u8c03\u7528\u7684outer_func_1\u5176\u5b9e\u662fouter_func_2\u53cd\u56de\u7684\u540c\u540d\u51fd\u6570\uff0c\u6240\u4ee5\u5b9e\u9645\u6267\u884c\u7684\u662fouter_func_2\u51fd\u6570\uff0c\u56e0\u6b64\u7b2c\u4e00\u4e2a\u8f93\u51fa\u662f\u201c\u88c5\u9970\u5668outer_func_2\u8fd0\u884c\u5f00\u59cb\u201d \u5176\u6b21\u662f\u8fc7\u7a0b2\uff0c\u8c03\u7528\u7684test_func\u5176\u5b9e\u662fouter_func_1\u53cd\u56de\u7684\u540c\u540d\u51fd\u6570\uff0c\u6240\u4ee5\u5b9e\u9645\u6267\u884c\u7684\u662fouter_func_1\u51fd\u6570\uff0c\u56e0\u6b64\u7b2c\u4e8c\u4e2a\u8f93\u51fa\u662f\u201c\u88c5\u9970\u5668outer_func_1\u8fd0\u884c\u5f00\u59cb\u201d \u7136\u540e\u5f00\u59cb\u6267\u884c\u771f\u6b63\u7684\u51fd\u6570test_func\uff0c\u56e0\u6b64\u7b2c\u4e09\u4e2a\u8f93\u51fa\u662f\u201c\u6211\u624d\u662ftest_func\u51fd\u6570\u201d \u6700\u540e\u662f\u4f9d\u6b21\u53cd\u56de\u4e0a\u5c42\u51fd\u6570outer_func_1\u3001outer_func_2\uff0c\u56e0\u6b64\u7b2c\u4e09\u4e2a\u8f93\u51fa\u201c\u88c5\u9970\u5668outer_func_1\u8fd0\u884c\u7ed3\u675f\u201d\uff0c\u7b2c\u56db\u4e2a\u8f93\u51fa\u201c\u88c5\u9970\u5668outer_func_2\u8fd0\u884c\u7ed3\u675f\u201d \u88ab\u88c5\u9970\u7684\u51fd\u6570\u6709\u8fd4\u56de\u503c def outer_func ( func ): def inner_func (): # \u5f53\u88ab\u88c5\u9970\u7684\u51fd\u6570\u6709\u8fd4\u56de\u503c # \u6b64\u5904\u4e0d\u80fd\u4ec5\u4ec5\u662f\u8c03\u7528 func()\uff0c \u5426\u5219\u4e0d\u4f1a\u8f93\u51fa Hello World! # \u800c\u662f\u9700\u8981\u8fd4\u56de\u8c03\u7528 return func () return inner_func @outer_func def test_func (): return 'Hello World!' def main (): print ( test_func ()) if __name__ == '__main__' : main () \u88ab\u88c5\u9970\u7684\u51fd\u6570\u6709\u53c2\u6570 \u4ee3\u78011 def outer_func ( func ): def inner_func ( name , age ): func ( name , age ) return inner_func @outer_func def introduce ( name , age ): print ( f '\u6211\u662f { name } \u4eca\u5e74 { age } \u5c81' ) def main (): introduce ( '\u8c01' , '\u51e0' ) if __name__ == '__main__' : main () \u4ee3\u78012 def outer_func ( func ): def inner_func ( * args , ** kwargs ): func ( * args , ** kwargs ) return inner_func @outer_func def print_parmeter ( a , b , * args , ** kwargs ): print ( a , b ) print ( f 'args: { args } ' ) print ( f 'kwargs: { kwargs } ' ) def main (): print_parmeter ( 1 , 2 , 3 , 4 , 5 , key1 = 'value1' , key2 = 'value2' ) if __name__ == '__main__' : main () \u8f93\u51fa\uff1a 1 2 args:(3, 4, 5) kwargs:{'key1': 'value1', 'key2': 'value2'} \u88c5\u9970\u5668\u5de5\u5382 \u5373\u51fd\u6570\u5185\u90e8\u5b9a\u4e49\u4e86\u88c5\u9970\u5668\uff0c\u6700\u540e\u53cd\u56de\u8fd9\u4e2a\u88c5\u9970\u5668\uff0c\u5373\u8be5\u51fd\u6570\u521b\u5efa\u4e86\u4e00\u4e2a\u88c5\u9970\u5668\uff0c\u6240\u4ee5\u53eb\u88c5\u9970\u5668\u5de5\u5382 def wraps_factory (): def outer_func ( func ): def inner_func (): func () return inner_func return outer_func # \u6ce8\u610f\u8fd9\u91cc\uff0c\u540e\u6765\u5e26\u4e86\u62ec\u53f7 # \u4f7f\u7528\u88c5\u9970\u5668\u65e0\u9700\u5e26\u62ec\u53f7\uff0c\u4f7f\u7528\u88c5\u9970\u5668\u529f\u80fd\u9700\u5e26\u62ec\u53f7 @wraps_factory () def test_func (): print ( 'Hello World' ) def main (): test_func () if __name__ == '__main__' : main () \u4e0a\u9762\u7684\u793a\u4f8b\u610f\u4e49\u4e0d\u5927\uff0c\u56e0\u4e3a\u7528\u88c5\u9970\u5668\u5c31\u80fd\u5b8c\u6210\uff0c\u4e0d\u9700\u8981\u88c5\u9970\u5668\u5de5\u5382 \u88c5\u9970\u5668\u5de5\u5382\u7684\u771f\u6b63\u610f\u4e49\u5728\u4e8e\u7ed9\u88c5\u9970\u5668\u643a\u5e26\u53c2\u6570\uff0c\u5177\u4f53\u770b\u4e0b\u9762\u7684\u4f8b\u5b50 \u88c5\u9970\u5668\u4e0e\u88ab\u88c5\u9970\u5668\u90fd\u6709\u53c2\u6570 \u88c5\u9970\u5668\u672c\u8eab\u53ef\u4ee5\u643a\u5e26\u53c2\u6570\uff0c\u90a3\u5fc5\u5b9a\u662f\u88c5\u9970\u5668\u5de5\u5382\uff0c\u56e0\u4e3a\u53ea\u6709\u88c5\u9970\u5668\u5de5\u5382\u53ef\u4ee5\u5e26\u53c2\u6570 def wraps_factory ( factory ): def outer_func ( func ): def inner_func ( parm = None ): if parm : func ( parm ) else : # \u88c5\u9970\u5668\u7684\u53c2\u6570\u53ef\u4ee5\u88ab\u5185\u90e8\u4f7f\u7528 func ( factory ) return inner_func return outer_func @wraps_factory ( 'abc' ) def test_func ( parm = None ): print ( f 'factory name is { parm } ' ) def main (): test_func () # \u7b49\u540c\u4e8e wraps_factory('abc')(test_func)(parm=None) test_func ( 'xyz' ) # \u7b49\u540c\u4e8e wraps_factory('abc')(test_func)(parm='xyz') if __name__ == '__main__' : main () wraps_factory ( 'abc' )( test_func )( parm = None ) wraps_factory ( 'abc' )( test_func )( parm = 'xyz' ) \u8f93\u51fa: factory name is abc factory name is xyz \u88c5\u9970\u5668\u7c7b \u88c5\u9970\u5668\u7c7b\u9700\u8981\u5b9e\u73b0\u4e24\u4e2a\u65b9\u6cd5\uff1a __init__ \u548c __call__ __init__ \u63a5\u6536\u4e00\u4e2a\u53c2\u6570\uff0c\u5373\u88ab\u88c5\u9970\u7684\u51fd\u6570\uff0c \u76f8\u5f53\u4e8eouter_func(func) __call__ \u8d1f\u8d23\u5904\u7406\u4e1a\u52a1\uff0c\u76f8\u5f53\u4e8einner_func() class Wraps : def __init__ ( self , func ): self . func = func def __call__ ( self , * args , ** kwds ): print ( '\u5f00\u59cb\u88c5\u9970' ) func = self . func ( * args , ** kwds ) print ( '\u88c5\u9970\u7ed3\u675f' ) return func @Wraps def test_func ( num1 , num2 ): for i in range ( num1 , num2 ): print ( 'Hello World' ) def main (): test_func ( 1 , 3 ) if __name__ == '__main__' : main ()","title":"\u88c5\u9970\u5668"},{"location":"python/decorator-generator-iterator/%E8%A3%85%E9%A5%B0%E5%99%A8/#_1","text":"","title":"\u88c5\u9970\u5668"},{"location":"python/decorator-generator-iterator/%E8%A3%85%E9%A5%B0%E5%99%A8/#_2","text":"import time def outer_func ( func ): def inner_func (): start_time = time . time () func () end_time = time . time () print ( f '\u51fd\u6570test_func\u8fd0\u884c\u65f6\u957f: { end_time - start_time } ' ) return inner_func @outer_func def test_func (): time . sleep ( 1 ) def main (): # \u91cd\u70b9\uff1a # \u88c5\u9970\u5668\u672c\u8d28\u4e0a\u662f\u628a\u88ab\u88c5\u9970\u7684\u51fd\u6570\u5f53\u4f5c\u53c2\u6570\u4f20\u5165\u5e76\u53cd\u56de\u4e00\u4e2a\u540c\u540d\u51fd\u6570 # \u89e3\u91ca\uff1a # \u8c03\u7528\u88ab\u88c5\u9970\u8fc7\u7684\u51fd\u6570test_func\u65f6\u5b9e\u9645\u4e0a\u8c03\u7528outer_func(test_func) # \u6240\u4ee5 test_func \u5c31\u662f outer_func(test_func) # \u56e0\u6b64 test_func() \u5c31\u662f outer_func(test_func)() # outer_func(test_func)() \u4e2d\u7684 outer_func(test_func) \u53cd\u56de inner_func # \u6240\u4ee5\u5c31\u662f inner_func() # inner_func() \u5185\u90e8\u53ef\u4ee5\u8c03\u7528\u5916\u90e8\u51fd\u6570\u7684\u53c2\u6570\uff0c\u4e5f\u5c31\u662ffunc\uff0c\u800cfunc\u624d\u662f\u771f\u771f\u7684test_func # \u6240\u4ee5 inner_func() \u5185\u90e8\u8c03\u7528\u4e86 test_func() test_func () if __name__ == '__main__' : main ()","title":"\u666e\u901a\u88c5\u9970\u5668"},{"location":"python/decorator-generator-iterator/%E8%A3%85%E9%A5%B0%E5%99%A8/#_3","text":"def outer_func_1 ( func ): def inner_func (): print ( '\u88c5\u9970\u5668outer_func_1\u8fd0\u884c\u5f00\u59cb' ) func () print ( '\u88c5\u9970\u5668outer_func_1\u8fd0\u884c\u7ed3\u675f' ) return inner_func def outer_func_2 ( func ): def inner_func (): print ( '\u88c5\u9970\u5668outer_func_2\u8fd0\u884c\u5f00\u59cb' ) func () print ( '\u88c5\u9970\u5668outer_func_2\u8fd0\u884c\u7ed3\u675f' ) return inner_func @outer_func_2 @outer_func_1 def test_func (): print ( \"\u6211\u624d\u662ftest_func\u51fd\u6570\" ) def main (): test_func () if __name__ == '__main__' : main () \u8f93\u51fa: \u88c5\u9970\u5668outer_func_2\u8fd0\u884c\u5f00\u59cb \u88c5\u9970\u5668outer_func_1\u8fd0\u884c\u5f00\u59cb \u6211\u624d\u662ftest_func\u51fd\u6570 \u88c5\u9970\u5668outer_func_1\u8fd0\u884c\u7ed3\u675f \u88c5\u9970\u5668outer_func_2\u8fd0\u884c\u7ed3\u675f \u89e3\u91ca: \u591a\u5c42\u88c5\u9970\u5668\u7531\u5916\u5411\u5185\u8c03\u7528\uff0c\u7531\u5185\u5411\u5916\u53cd\u56de \u6839\u636e\u88c5\u9970\u5668\u7684\u672c\u8d28\uff0c\u5b9e\u9645\u6267\u884c\u7684\u662f test_func = outer_func_2(outer_func_1(test_func))\uff0c\u5206\u89e3\u5f00\u5c31\u662f: 1\u3001outer_func_1 = outer_func_2(outer_func_1) 2\u3001test_func = outer_func_1(test_func) \u9996\u5148\u662f\u8fc7\u7a0b1\uff0c\u8c03\u7528\u7684outer_func_1\u5176\u5b9e\u662fouter_func_2\u53cd\u56de\u7684\u540c\u540d\u51fd\u6570\uff0c\u6240\u4ee5\u5b9e\u9645\u6267\u884c\u7684\u662fouter_func_2\u51fd\u6570\uff0c\u56e0\u6b64\u7b2c\u4e00\u4e2a\u8f93\u51fa\u662f\u201c\u88c5\u9970\u5668outer_func_2\u8fd0\u884c\u5f00\u59cb\u201d \u5176\u6b21\u662f\u8fc7\u7a0b2\uff0c\u8c03\u7528\u7684test_func\u5176\u5b9e\u662fouter_func_1\u53cd\u56de\u7684\u540c\u540d\u51fd\u6570\uff0c\u6240\u4ee5\u5b9e\u9645\u6267\u884c\u7684\u662fouter_func_1\u51fd\u6570\uff0c\u56e0\u6b64\u7b2c\u4e8c\u4e2a\u8f93\u51fa\u662f\u201c\u88c5\u9970\u5668outer_func_1\u8fd0\u884c\u5f00\u59cb\u201d \u7136\u540e\u5f00\u59cb\u6267\u884c\u771f\u6b63\u7684\u51fd\u6570test_func\uff0c\u56e0\u6b64\u7b2c\u4e09\u4e2a\u8f93\u51fa\u662f\u201c\u6211\u624d\u662ftest_func\u51fd\u6570\u201d \u6700\u540e\u662f\u4f9d\u6b21\u53cd\u56de\u4e0a\u5c42\u51fd\u6570outer_func_1\u3001outer_func_2\uff0c\u56e0\u6b64\u7b2c\u4e09\u4e2a\u8f93\u51fa\u201c\u88c5\u9970\u5668outer_func_1\u8fd0\u884c\u7ed3\u675f\u201d\uff0c\u7b2c\u56db\u4e2a\u8f93\u51fa\u201c\u88c5\u9970\u5668outer_func_2\u8fd0\u884c\u7ed3\u675f\u201d","title":"\u591a\u5c42\u88c5\u9970\u5668"},{"location":"python/decorator-generator-iterator/%E8%A3%85%E9%A5%B0%E5%99%A8/#_4","text":"def outer_func ( func ): def inner_func (): # \u5f53\u88ab\u88c5\u9970\u7684\u51fd\u6570\u6709\u8fd4\u56de\u503c # \u6b64\u5904\u4e0d\u80fd\u4ec5\u4ec5\u662f\u8c03\u7528 func()\uff0c \u5426\u5219\u4e0d\u4f1a\u8f93\u51fa Hello World! # \u800c\u662f\u9700\u8981\u8fd4\u56de\u8c03\u7528 return func () return inner_func @outer_func def test_func (): return 'Hello World!' def main (): print ( test_func ()) if __name__ == '__main__' : main ()","title":"\u88ab\u88c5\u9970\u7684\u51fd\u6570\u6709\u8fd4\u56de\u503c"},{"location":"python/decorator-generator-iterator/%E8%A3%85%E9%A5%B0%E5%99%A8/#_5","text":"\u4ee3\u78011 def outer_func ( func ): def inner_func ( name , age ): func ( name , age ) return inner_func @outer_func def introduce ( name , age ): print ( f '\u6211\u662f { name } \u4eca\u5e74 { age } \u5c81' ) def main (): introduce ( '\u8c01' , '\u51e0' ) if __name__ == '__main__' : main () \u4ee3\u78012 def outer_func ( func ): def inner_func ( * args , ** kwargs ): func ( * args , ** kwargs ) return inner_func @outer_func def print_parmeter ( a , b , * args , ** kwargs ): print ( a , b ) print ( f 'args: { args } ' ) print ( f 'kwargs: { kwargs } ' ) def main (): print_parmeter ( 1 , 2 , 3 , 4 , 5 , key1 = 'value1' , key2 = 'value2' ) if __name__ == '__main__' : main () \u8f93\u51fa\uff1a 1 2 args:(3, 4, 5) kwargs:{'key1': 'value1', 'key2': 'value2'}","title":"\u88ab\u88c5\u9970\u7684\u51fd\u6570\u6709\u53c2\u6570"},{"location":"python/decorator-generator-iterator/%E8%A3%85%E9%A5%B0%E5%99%A8/#_6","text":"\u5373\u51fd\u6570\u5185\u90e8\u5b9a\u4e49\u4e86\u88c5\u9970\u5668\uff0c\u6700\u540e\u53cd\u56de\u8fd9\u4e2a\u88c5\u9970\u5668\uff0c\u5373\u8be5\u51fd\u6570\u521b\u5efa\u4e86\u4e00\u4e2a\u88c5\u9970\u5668\uff0c\u6240\u4ee5\u53eb\u88c5\u9970\u5668\u5de5\u5382 def wraps_factory (): def outer_func ( func ): def inner_func (): func () return inner_func return outer_func # \u6ce8\u610f\u8fd9\u91cc\uff0c\u540e\u6765\u5e26\u4e86\u62ec\u53f7 # \u4f7f\u7528\u88c5\u9970\u5668\u65e0\u9700\u5e26\u62ec\u53f7\uff0c\u4f7f\u7528\u88c5\u9970\u5668\u529f\u80fd\u9700\u5e26\u62ec\u53f7 @wraps_factory () def test_func (): print ( 'Hello World' ) def main (): test_func () if __name__ == '__main__' : main () \u4e0a\u9762\u7684\u793a\u4f8b\u610f\u4e49\u4e0d\u5927\uff0c\u56e0\u4e3a\u7528\u88c5\u9970\u5668\u5c31\u80fd\u5b8c\u6210\uff0c\u4e0d\u9700\u8981\u88c5\u9970\u5668\u5de5\u5382 \u88c5\u9970\u5668\u5de5\u5382\u7684\u771f\u6b63\u610f\u4e49\u5728\u4e8e\u7ed9\u88c5\u9970\u5668\u643a\u5e26\u53c2\u6570\uff0c\u5177\u4f53\u770b\u4e0b\u9762\u7684\u4f8b\u5b50","title":"\u88c5\u9970\u5668\u5de5\u5382"},{"location":"python/decorator-generator-iterator/%E8%A3%85%E9%A5%B0%E5%99%A8/#_7","text":"\u88c5\u9970\u5668\u672c\u8eab\u53ef\u4ee5\u643a\u5e26\u53c2\u6570\uff0c\u90a3\u5fc5\u5b9a\u662f\u88c5\u9970\u5668\u5de5\u5382\uff0c\u56e0\u4e3a\u53ea\u6709\u88c5\u9970\u5668\u5de5\u5382\u53ef\u4ee5\u5e26\u53c2\u6570 def wraps_factory ( factory ): def outer_func ( func ): def inner_func ( parm = None ): if parm : func ( parm ) else : # \u88c5\u9970\u5668\u7684\u53c2\u6570\u53ef\u4ee5\u88ab\u5185\u90e8\u4f7f\u7528 func ( factory ) return inner_func return outer_func @wraps_factory ( 'abc' ) def test_func ( parm = None ): print ( f 'factory name is { parm } ' ) def main (): test_func () # \u7b49\u540c\u4e8e wraps_factory('abc')(test_func)(parm=None) test_func ( 'xyz' ) # \u7b49\u540c\u4e8e wraps_factory('abc')(test_func)(parm='xyz') if __name__ == '__main__' : main () wraps_factory ( 'abc' )( test_func )( parm = None ) wraps_factory ( 'abc' )( test_func )( parm = 'xyz' ) \u8f93\u51fa: factory name is abc factory name is xyz","title":"\u88c5\u9970\u5668\u4e0e\u88ab\u88c5\u9970\u5668\u90fd\u6709\u53c2\u6570"},{"location":"python/decorator-generator-iterator/%E8%A3%85%E9%A5%B0%E5%99%A8/#_8","text":"\u88c5\u9970\u5668\u7c7b\u9700\u8981\u5b9e\u73b0\u4e24\u4e2a\u65b9\u6cd5\uff1a __init__ \u548c __call__ __init__ \u63a5\u6536\u4e00\u4e2a\u53c2\u6570\uff0c\u5373\u88ab\u88c5\u9970\u7684\u51fd\u6570\uff0c \u76f8\u5f53\u4e8eouter_func(func) __call__ \u8d1f\u8d23\u5904\u7406\u4e1a\u52a1\uff0c\u76f8\u5f53\u4e8einner_func() class Wraps : def __init__ ( self , func ): self . func = func def __call__ ( self , * args , ** kwds ): print ( '\u5f00\u59cb\u88c5\u9970' ) func = self . func ( * args , ** kwds ) print ( '\u88c5\u9970\u7ed3\u675f' ) return func @Wraps def test_func ( num1 , num2 ): for i in range ( num1 , num2 ): print ( 'Hello World' ) def main (): test_func ( 1 , 3 ) if __name__ == '__main__' : main ()","title":"\u88c5\u9970\u5668\u7c7b"},{"location":"python/decorator-generator-iterator/%E8%A3%85%E9%A5%B0%E5%99%A8%E5%89%AF%E4%BD%9C%E7%94%A8/","text":"\u88c5\u9970\u5668\u526f\u4f5c\u7528 from typing import Any def get_func_info ( func ): def wrap ( param : Any ) -> None : \"\"\"this is the wrap function\"\"\" func ( param ) return wrap @get_func_info def func ( param : str ) -> None : \"\"\"\u6253\u5370\u201c\u4e16\u754c\u4f60\u597d\u201d\"\"\" print ( param ) def main (): print ( f 'func name is: { func . __name__ } ' ) print ( f 'func docs is: { func . __doc__ } ' ) print ( f 'func annotations is: { func . __annotations__ } ' ) func ( 'Hello World' ) if __name__ == '__main__' : main () \u8f93\u51fa: func name is: wrap func docs is: this is the wrap function func annotations is: {'param': typing.Any, 'return': None} Hello World \u89e3\u91ca: @get_func_info \u88c5\u9970\u5668\u7b49\u4ef7\u4e8e func = get_func_info(func) \u6240\u4ee5 func() \u5b9e\u9645\u6307\u5411\u7684\u662f wrap() \u56e0\u6b64\u8f93\u51fa\u7684 wrap \u7684\u540d\u79f0\u3001\u6587\u6863\u548c\u6ce8\u89e3 \u8fd9\u5c31\u662f\u88c5\u9970\u5668\u7684\u526f\u4f5c\u7528\uff0c\u88c5\u9970\u5668\u4e0d\u4f1a\u6539\u53d8\u539f\u6709\u51fd\u6570\u7684\u529f\u80fd\uff0c\u4f46\u4f1a\u6539\u53d8\u539f\u6709\u51fd\u6570\u7684\u4e00\u4e9b\u5c5e\u6027 \u89e3\u51b3\u529e\u6cd5\u5c31\u662f\u4f7f\u7528 functools.wraps \u88c5\u9970 \u88c5\u9970\u5668\u7684\u5185\u90e8\u51fd\u6570\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a from functools import wraps from typing import Any def get_func_info ( func ): # \u6ce8\u610f\u6b64\u5904\uff0c\u4f7f\u7528 @wraps(func) \u88c5\u9970 \u88c5\u9970\u5668\u7684\u5185\u90e8\u51fd\u6570\uff0c\u62b5\u6d88\u88c5\u9970\u5668\u5bf9\u539f\u51fd\u6570\u5e26\u6765\u7684\u526f\u4f5c\u7528 @wraps ( func ) def wrap ( param : Any ) -> None : \"\"\"this is the wrap function\"\"\" func ( param ) return wrap @get_func_info def func ( param : str ) -> None : \"\"\"\u6253\u5370\u201c\u4e16\u754c\u4f60\u597d\u201d\"\"\" print ( param ) def main (): print ( f 'func name is: { func . __name__ } ' ) print ( f 'func docs is: { func . __doc__ } ' ) print ( f 'func annotations is: { func . __annotations__ } ' ) func ( 'Hello World' ) if __name__ == '__main__' : main () \u8f93\u51fa: func name is: func func docs is: \u6253\u5370\u201c\u4e16\u754c\u4f60\u597d\u201d func annotations is: {'param': <class 'str'>, 'return': None} Hello World","title":"\u88c5\u9970\u5668\u526f\u4f5c\u7528"},{"location":"python/decorator-generator-iterator/%E8%A3%85%E9%A5%B0%E5%99%A8%E5%89%AF%E4%BD%9C%E7%94%A8/#_1","text":"from typing import Any def get_func_info ( func ): def wrap ( param : Any ) -> None : \"\"\"this is the wrap function\"\"\" func ( param ) return wrap @get_func_info def func ( param : str ) -> None : \"\"\"\u6253\u5370\u201c\u4e16\u754c\u4f60\u597d\u201d\"\"\" print ( param ) def main (): print ( f 'func name is: { func . __name__ } ' ) print ( f 'func docs is: { func . __doc__ } ' ) print ( f 'func annotations is: { func . __annotations__ } ' ) func ( 'Hello World' ) if __name__ == '__main__' : main () \u8f93\u51fa: func name is: wrap func docs is: this is the wrap function func annotations is: {'param': typing.Any, 'return': None} Hello World \u89e3\u91ca: @get_func_info \u88c5\u9970\u5668\u7b49\u4ef7\u4e8e func = get_func_info(func) \u6240\u4ee5 func() \u5b9e\u9645\u6307\u5411\u7684\u662f wrap() \u56e0\u6b64\u8f93\u51fa\u7684 wrap \u7684\u540d\u79f0\u3001\u6587\u6863\u548c\u6ce8\u89e3 \u8fd9\u5c31\u662f\u88c5\u9970\u5668\u7684\u526f\u4f5c\u7528\uff0c\u88c5\u9970\u5668\u4e0d\u4f1a\u6539\u53d8\u539f\u6709\u51fd\u6570\u7684\u529f\u80fd\uff0c\u4f46\u4f1a\u6539\u53d8\u539f\u6709\u51fd\u6570\u7684\u4e00\u4e9b\u5c5e\u6027 \u89e3\u51b3\u529e\u6cd5\u5c31\u662f\u4f7f\u7528 functools.wraps \u88c5\u9970 \u88c5\u9970\u5668\u7684\u5185\u90e8\u51fd\u6570\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a from functools import wraps from typing import Any def get_func_info ( func ): # \u6ce8\u610f\u6b64\u5904\uff0c\u4f7f\u7528 @wraps(func) \u88c5\u9970 \u88c5\u9970\u5668\u7684\u5185\u90e8\u51fd\u6570\uff0c\u62b5\u6d88\u88c5\u9970\u5668\u5bf9\u539f\u51fd\u6570\u5e26\u6765\u7684\u526f\u4f5c\u7528 @wraps ( func ) def wrap ( param : Any ) -> None : \"\"\"this is the wrap function\"\"\" func ( param ) return wrap @get_func_info def func ( param : str ) -> None : \"\"\"\u6253\u5370\u201c\u4e16\u754c\u4f60\u597d\u201d\"\"\" print ( param ) def main (): print ( f 'func name is: { func . __name__ } ' ) print ( f 'func docs is: { func . __doc__ } ' ) print ( f 'func annotations is: { func . __annotations__ } ' ) func ( 'Hello World' ) if __name__ == '__main__' : main () \u8f93\u51fa: func name is: func func docs is: \u6253\u5370\u201c\u4e16\u754c\u4f60\u597d\u201d func annotations is: {'param': <class 'str'>, 'return': None} Hello World","title":"\u88c5\u9970\u5668\u526f\u4f5c\u7528"},{"location":"python/decorator-generator-iterator/%E8%BF%AD%E4%BB%A3%E5%99%A8/","text":"\u8fed\u4ee3\u5668 \u4ee3\u78011 from collections.abc import Iterable , Iterator class MyIterable : def __iter__ ( self ): pass class MyIterator : def __iter__ ( self ): pass def __next__ ( self ): pass def main (): print ( isinstance ( MyIterable (), Iterable )) print ( isinstance ( MyIterable (), Iterator )) print ( isinstance ( MyIterator (), Iterable )) print ( isinstance ( MyIterator (), Iterator )) if __name__ == '__main__' : main () \u8f93\u51fa: True False True True \u89e3\u91ca: MyIterable \u5b9e\u73b0\u4e86 __iter__ \u8868\u793a\u8be5\u5bf9\u8c61\u53ef\u8fed\u4ee3 MyIterator \u5b9e\u73b0\u4e86 __iter__ \u548c __next__ \u8868\u793a\u8be5\u5bf9\u8c61\u662f\u8fed\u4ee3\u5668 \u4ee3\u78012 class FibIterator : \"\"\"\u6590\u6ce2\u90a3\u5951\u6570\u5217\u8fed\u4ee3\u5668\"\"\" def __init__ ( self , num ): self . num = num self . fisrt = 1 self . second = 1 self . index = 0 def __iter__ ( self ): return self def __next__ ( self ): if self . index < self . num : self . index += 1 item = self . fisrt self . fisrt , self . second = self . second , self . fisrt + self . second return item else : raise StopIteration def main (): for i in FibIterator ( 6 ): print ( i ) print () fi = FibIterator ( 6 ) print ( next ( fi )) print ( next ( fi )) print ( next ( fi )) print ( next ( fi )) print ( next ( fi )) print ( next ( fi )) \u8f93\u51fa: 1 1 2 3 5 8 1 1 2 3 5 8 \u89e3\u91ca: iter() \u5c31\u662f\u901a\u8fc7 __iter__ \u83b7\u53d6\u8fed\u4ee3\u5668, \u6240\u4ee5\u8981\u8fd4\u56de\u81ea\u5df1, \u4e5f\u5c31\u662f return self next() \u672c\u8d28\u5c31\u662f\u901a\u8fc7\u8fed\u4ee3\u5668\u7684 __next__ \u65b9\u6cd5\u83b7\u53d6\u503c, \u4e5f\u5c31\u662f return item\uff0c\u76f4\u81f3\u9047\u5230StopIteration\u5f02\u5e38 for \u5faa\u73af\u7684\u672c\u8d28\u662f\u5148\u901a\u8fc7 iter() \u51fd\u6570\u83b7\u53d6\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u8fed\u4ee3\u5668, \u4e0d\u65ad\u4f7f\u7528 next() \u65b9\u6cd5\u8c03\u7528\u8fed\u4ee3\u5668, \u83b7\u53d6\u4e0b\u4e00\u4e2a\u503c\u5e76\u8d4b\u503c\u7ed9 item, \u76f4\u5230\u9047\u5230 StopIteration \u5f02\u5e38\u540e\u7ed3\u675f\u5faa\u73af","title":"\u8fed\u4ee3\u5668"},{"location":"python/decorator-generator-iterator/%E8%BF%AD%E4%BB%A3%E5%99%A8/#_1","text":"","title":"\u8fed\u4ee3\u5668"},{"location":"python/decorator-generator-iterator/%E8%BF%AD%E4%BB%A3%E5%99%A8/#1","text":"from collections.abc import Iterable , Iterator class MyIterable : def __iter__ ( self ): pass class MyIterator : def __iter__ ( self ): pass def __next__ ( self ): pass def main (): print ( isinstance ( MyIterable (), Iterable )) print ( isinstance ( MyIterable (), Iterator )) print ( isinstance ( MyIterator (), Iterable )) print ( isinstance ( MyIterator (), Iterator )) if __name__ == '__main__' : main () \u8f93\u51fa: True False True True \u89e3\u91ca: MyIterable \u5b9e\u73b0\u4e86 __iter__ \u8868\u793a\u8be5\u5bf9\u8c61\u53ef\u8fed\u4ee3 MyIterator \u5b9e\u73b0\u4e86 __iter__ \u548c __next__ \u8868\u793a\u8be5\u5bf9\u8c61\u662f\u8fed\u4ee3\u5668","title":"\u4ee3\u78011"},{"location":"python/decorator-generator-iterator/%E8%BF%AD%E4%BB%A3%E5%99%A8/#2","text":"class FibIterator : \"\"\"\u6590\u6ce2\u90a3\u5951\u6570\u5217\u8fed\u4ee3\u5668\"\"\" def __init__ ( self , num ): self . num = num self . fisrt = 1 self . second = 1 self . index = 0 def __iter__ ( self ): return self def __next__ ( self ): if self . index < self . num : self . index += 1 item = self . fisrt self . fisrt , self . second = self . second , self . fisrt + self . second return item else : raise StopIteration def main (): for i in FibIterator ( 6 ): print ( i ) print () fi = FibIterator ( 6 ) print ( next ( fi )) print ( next ( fi )) print ( next ( fi )) print ( next ( fi )) print ( next ( fi )) print ( next ( fi )) \u8f93\u51fa: 1 1 2 3 5 8 1 1 2 3 5 8 \u89e3\u91ca: iter() \u5c31\u662f\u901a\u8fc7 __iter__ \u83b7\u53d6\u8fed\u4ee3\u5668, \u6240\u4ee5\u8981\u8fd4\u56de\u81ea\u5df1, \u4e5f\u5c31\u662f return self next() \u672c\u8d28\u5c31\u662f\u901a\u8fc7\u8fed\u4ee3\u5668\u7684 __next__ \u65b9\u6cd5\u83b7\u53d6\u503c, \u4e5f\u5c31\u662f return item\uff0c\u76f4\u81f3\u9047\u5230StopIteration\u5f02\u5e38 for \u5faa\u73af\u7684\u672c\u8d28\u662f\u5148\u901a\u8fc7 iter() \u51fd\u6570\u83b7\u53d6\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u8fed\u4ee3\u5668, \u4e0d\u65ad\u4f7f\u7528 next() \u65b9\u6cd5\u8c03\u7528\u8fed\u4ee3\u5668, \u83b7\u53d6\u4e0b\u4e00\u4e2a\u503c\u5e76\u8d4b\u503c\u7ed9 item, \u76f4\u5230\u9047\u5230 StopIteration \u5f02\u5e38\u540e\u7ed3\u675f\u5faa\u73af","title":"\u4ee3\u78012"},{"location":"python/exercises/%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/","text":"\u8fd4\u56de\u5217\u8868\u4e2d\u4e24\u4e2a\u6570\u7684\u548c\u7b49\u4e8e\u76ee\u6807\u503c\u7684\u7d22\u5f15 \u9650\u5236\u6761\u4ef6: \u5217\u8868\u4e2d\u7684\u6570\u5b57\u53ef\u4ee5\u91cd\u590d, \u4f46\u8fd4\u56de\u7684\u7d22\u5f15\u4e0d\u80fd\u91cd\u590d \u65b9\u6cd51: def demo ( array : list , target : int ): # \u904d\u5386\u5217\u8868 for index , value in enumerate ( array ): # \u6c42\u5dee\u503c tmp = target - value # \u6392\u9664\u7d22\u5f15\u91cd\u590d\u7684\u60c5\u51b5 if tmp == value and array . count ( value ) == 1 : continue # \u5982\u679c\u5dee\u503c\u4e5f\u5728\u5217\u8868\u4e2d\u76f4\u63a5\u8fd4\u56de\u7ed3\u679c if tmp in array and tmp != value : return [ index , array . index ( tmp )] # \u5982\u679c\u5dee\u503c\u4e5f\u5728\u5217\u8868\u4e2d\u4f46\u4e0e\u5f53\u524d\u503c\u76f8\u7b49 # \u8981\u53d6\u540e\u9762\u7684\u5dee\u503c\u7684\u7d22\u5f15\u5e76\u52a0\u4e0a\u504f\u79fb\u91cf index+1 if tmp in array : return [ index , array [ index + 1 :] . index ( tmp ) + index + 1 ] \u65b9\u6cd52: def demo ( array , target ): # \u5b58\u653e\u6570\u5b57(key)\u548c\u7d22\u5f15(value)\u7684\u5b57\u5178 mydict = {} # \u904d\u5386\u5217\u8868 for index , value in enumerate ( array ): # \u6c42\u5dee\u503c tmp = target - value # \u5982\u679c\u5b57\u5178\u91cc\u5b58\u5728\u8be5\u5dee\u503c\u5219\u76f4\u63a5\u8fd4\u56de\u7d22\u5f15 if mydict . get ( tmp ) is not None : return [ mydict [ tmp ], index ] # \u5426\u5219\u653e\u5165\u5b57\u5178 mydict [ value ] = index \u8f93\u51fa: if __name__ == '__main__' : li = [ 2 , 7 , 11 , 15 ] print ( demo ( li , 9 )) li = [ 2 , 7 , 11 , 15 ] print ( demo ( li , 26 )) li = [ 3 , 2 , 4 ] print ( demo ( li , 6 )) li = [ 3 , 2 , 3 ] print ( demo ( li , 6 )) li = [ 3 , 3 ] print ( demo ( li , 6 )) li = [ 5 , 6 , 4 , 1 , 4 ] print ( demo ( li , 8 )) [0, 1] [2, 3] [1, 2] [0, 2] [0, 1] [2, 4]","title":"\u4e24\u6570\u4e4b\u548c"},{"location":"python/exercises/%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/#_1","text":"\u9650\u5236\u6761\u4ef6: \u5217\u8868\u4e2d\u7684\u6570\u5b57\u53ef\u4ee5\u91cd\u590d, \u4f46\u8fd4\u56de\u7684\u7d22\u5f15\u4e0d\u80fd\u91cd\u590d \u65b9\u6cd51: def demo ( array : list , target : int ): # \u904d\u5386\u5217\u8868 for index , value in enumerate ( array ): # \u6c42\u5dee\u503c tmp = target - value # \u6392\u9664\u7d22\u5f15\u91cd\u590d\u7684\u60c5\u51b5 if tmp == value and array . count ( value ) == 1 : continue # \u5982\u679c\u5dee\u503c\u4e5f\u5728\u5217\u8868\u4e2d\u76f4\u63a5\u8fd4\u56de\u7ed3\u679c if tmp in array and tmp != value : return [ index , array . index ( tmp )] # \u5982\u679c\u5dee\u503c\u4e5f\u5728\u5217\u8868\u4e2d\u4f46\u4e0e\u5f53\u524d\u503c\u76f8\u7b49 # \u8981\u53d6\u540e\u9762\u7684\u5dee\u503c\u7684\u7d22\u5f15\u5e76\u52a0\u4e0a\u504f\u79fb\u91cf index+1 if tmp in array : return [ index , array [ index + 1 :] . index ( tmp ) + index + 1 ] \u65b9\u6cd52: def demo ( array , target ): # \u5b58\u653e\u6570\u5b57(key)\u548c\u7d22\u5f15(value)\u7684\u5b57\u5178 mydict = {} # \u904d\u5386\u5217\u8868 for index , value in enumerate ( array ): # \u6c42\u5dee\u503c tmp = target - value # \u5982\u679c\u5b57\u5178\u91cc\u5b58\u5728\u8be5\u5dee\u503c\u5219\u76f4\u63a5\u8fd4\u56de\u7d22\u5f15 if mydict . get ( tmp ) is not None : return [ mydict [ tmp ], index ] # \u5426\u5219\u653e\u5165\u5b57\u5178 mydict [ value ] = index \u8f93\u51fa: if __name__ == '__main__' : li = [ 2 , 7 , 11 , 15 ] print ( demo ( li , 9 )) li = [ 2 , 7 , 11 , 15 ] print ( demo ( li , 26 )) li = [ 3 , 2 , 4 ] print ( demo ( li , 6 )) li = [ 3 , 2 , 3 ] print ( demo ( li , 6 )) li = [ 3 , 3 ] print ( demo ( li , 6 )) li = [ 5 , 6 , 4 , 1 , 4 ] print ( demo ( li , 8 )) [0, 1] [2, 3] [1, 2] [0, 2] [0, 1] [2, 4]","title":"\u8fd4\u56de\u5217\u8868\u4e2d\u4e24\u4e2a\u6570\u7684\u548c\u7b49\u4e8e\u76ee\u6807\u503c\u7684\u7d22\u5f15"},{"location":"python/exercises/%E4%B9%98%E6%B3%95%E5%8F%A3%E8%AF%80%E8%A1%A8/","text":"\u4e58\u6cd5\u53e3\u8bc0\u8868 def main (): x = 1 while x <= 9 : y = 1 while y <= x : print ( ' %d * %d = %d ' % ( y , x , x * y ), end = ' \\t ' ) y += 1 print ( '' ) x += 1 if __name__ == '__main__' : main () \u8f93\u51fa: 1 * 1 = 1 1 * 2 = 2 2 * 2 = 4 1 * 3 = 3 2 * 3 = 6 3 * 3 = 9 1 * 4 = 4 2 * 4 = 8 3 * 4 = 12 4 * 4 = 16 1 * 5 = 5 2 * 5 = 10 3 * 5 = 15 4 * 5 = 20 5 * 5 = 25 1 * 6 = 6 2 * 6 = 12 3 * 6 = 18 4 * 6 = 24 5 * 6 = 30 6 * 6 = 36 1 * 7 = 7 2 * 7 = 14 3 * 7 = 21 4 * 7 = 28 5 * 7 = 35 6 * 7 = 42 7 * 7 = 49 1 * 8 = 8 2 * 8 = 16 3 * 8 = 24 4 * 8 = 32 5 * 8 = 40 6 * 8 = 48 7 * 8 = 56 8 * 8 = 64 1 * 9 = 9 2 * 9 = 18 3 * 9 = 27 4 * 9 = 36 5 * 9 = 45 6 * 9 = 54 7 * 9 = 63 8 * 9 = 72 9 * 9 = 81","title":"\u4e58\u6cd5\u53e3\u8bc0\u8868"},{"location":"python/exercises/%E4%B9%98%E6%B3%95%E5%8F%A3%E8%AF%80%E8%A1%A8/#_1","text":"def main (): x = 1 while x <= 9 : y = 1 while y <= x : print ( ' %d * %d = %d ' % ( y , x , x * y ), end = ' \\t ' ) y += 1 print ( '' ) x += 1 if __name__ == '__main__' : main () \u8f93\u51fa: 1 * 1 = 1 1 * 2 = 2 2 * 2 = 4 1 * 3 = 3 2 * 3 = 6 3 * 3 = 9 1 * 4 = 4 2 * 4 = 8 3 * 4 = 12 4 * 4 = 16 1 * 5 = 5 2 * 5 = 10 3 * 5 = 15 4 * 5 = 20 5 * 5 = 25 1 * 6 = 6 2 * 6 = 12 3 * 6 = 18 4 * 6 = 24 5 * 6 = 30 6 * 6 = 36 1 * 7 = 7 2 * 7 = 14 3 * 7 = 21 4 * 7 = 28 5 * 7 = 35 6 * 7 = 42 7 * 7 = 49 1 * 8 = 8 2 * 8 = 16 3 * 8 = 24 4 * 8 = 32 5 * 8 = 40 6 * 8 = 48 7 * 8 = 56 8 * 8 = 64 1 * 9 = 9 2 * 9 = 18 3 * 9 = 27 4 * 9 = 36 5 * 9 = 45 6 * 9 = 54 7 * 9 = 63 8 * 9 = 72 9 * 9 = 81","title":"\u4e58\u6cd5\u53e3\u8bc0\u8868"},{"location":"python/exercises/%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%92/","text":"\u6768\u8f89\u4e09\u89d2 \"\"\" \u6253\u5370\u6768\u8f89\u4e09\u89d2 1 1 1 1 2 1 1 3 3 1 1 4 6 4 1 1 5 10 10 5 1 1 6 15 20 15 6 1 1 7 21 35 35 21 7 1 1 8 28 56 70 56 28 8 1 \"\"\" def yhsj1 ( n ): \"\"\"\u9012\u5f52(\u6548\u7387\u4f4e\u4e0d\u63a8\u8350)\"\"\" listx = [ '1' ] listy = listx [:] if n == 1 : return listx if n == 2 : listy . append ( '1' ) return listy leny = len ( yhsj1 ( n - 1 )) for i in range ( leny ): if i < leny - 1 : z = int ( yhsj1 ( n - 1 )[ i ]) + int ( yhsj1 ( n - 1 )[ i + 1 ]) listy . append ( str ( z )) listy . append ( '1' ) return listy def yhsj2 ( n ): \"\"\"\u5faa\u73af(\u63a8\u8350)\"\"\" lists = [] for i in range ( n ): lists += [ 1 ] if i > 1 : lists_cp = lists [:] for j in range ( 1 , i ): lists [ j ] = lists_cp [ j ] + lists_cp [ j - 1 ] for sj in lists : print ( sj , end = ' \\t ' ) print () def main (): # \u8c03\u75289\u6b21\u51fd\u6570\u6253\u5370\u7ed3\u679c for i in range ( 1 , 10 ): print ( ' \\t ' . join ( yhsj1 ( i ))) yhsj2 ( 9 ) if __name__ == '__main__' : main ()","title":"\u6768\u8f89\u4e09\u89d2"},{"location":"python/exercises/%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%92/#_1","text":"\"\"\" \u6253\u5370\u6768\u8f89\u4e09\u89d2 1 1 1 1 2 1 1 3 3 1 1 4 6 4 1 1 5 10 10 5 1 1 6 15 20 15 6 1 1 7 21 35 35 21 7 1 1 8 28 56 70 56 28 8 1 \"\"\" def yhsj1 ( n ): \"\"\"\u9012\u5f52(\u6548\u7387\u4f4e\u4e0d\u63a8\u8350)\"\"\" listx = [ '1' ] listy = listx [:] if n == 1 : return listx if n == 2 : listy . append ( '1' ) return listy leny = len ( yhsj1 ( n - 1 )) for i in range ( leny ): if i < leny - 1 : z = int ( yhsj1 ( n - 1 )[ i ]) + int ( yhsj1 ( n - 1 )[ i + 1 ]) listy . append ( str ( z )) listy . append ( '1' ) return listy def yhsj2 ( n ): \"\"\"\u5faa\u73af(\u63a8\u8350)\"\"\" lists = [] for i in range ( n ): lists += [ 1 ] if i > 1 : lists_cp = lists [:] for j in range ( 1 , i ): lists [ j ] = lists_cp [ j ] + lists_cp [ j - 1 ] for sj in lists : print ( sj , end = ' \\t ' ) print () def main (): # \u8c03\u75289\u6b21\u51fd\u6570\u6253\u5370\u7ed3\u679c for i in range ( 1 , 10 ): print ( ' \\t ' . join ( yhsj1 ( i ))) yhsj2 ( 9 ) if __name__ == '__main__' : main ()","title":"\u6768\u8f89\u4e09\u89d2"},{"location":"python/exercises/%E6%B1%89%E8%AF%BA%E5%A1%94/","text":"\u6c49\u8bfa\u5854 def dg ( num , A , B , C , count = 0 ): \"\"\" \u6c49\u8bfa\u5854 num: \u76d8\u5b50\u7684\u6570\u91cf count: \u64cd\u4f5c\u6b21\u6570 \"\"\" # \u89e3\u51b3\u601d\u8def: # \u65e0\u8bba\u6709\u591a\u5c11\u4e2a\u76d8\u5b50, \u6700\u4e0a\u9762\u7684\u76d8\u5b50\u6c38\u8fdc\u662f\u6700\u5c0f\u7684 # \u4e0b\u9762\u7684\u6240\u6709\u76d8\u5b50\u5f53\u4f5c\u4e00\u4e2a\u6574\u4f53, \u662f\u5927\u76d8\u5b50 # \u90a3\u4e48\u53ea\u9700\u89813\u6b65 # \u4e0b\u9762\u6ce8\u91ca\u4e2d\u7684\u7b2c\u4e00\u6b65\u3001\u7b2c\u4e8c\u6b65\u3001\u7b2c\u4e09\u6b65\u662f\u9488\u5bf9n>1\u7684\u60c5\u51b5 if num == 1 : count += 1 print ( f ' { A } -> { C } ' ) # \u7b2c\u4e8c\u6b65: \u628a\u5927\u76d8\u5b50\u4ecea\u653e\u5230c else : count += 1 count = dg ( num - 1 , A , C , B , count ) # \u7b2c\u4e00\u6b65: \u628a\u5c0f\u76d8\u5b50\u4ecea\u653e\u5230b print ( f ' { A } -> { C } ' ) count = dg ( num - 1 , B , A , C , count ) # \u7b2c\u4e09\u6b65: \u628a\u5c0f\u76d8\u5b50\u4eceb\u653e\u5230c return count def main (): print ( f \"\u603b\u5171\u9700\u8981 { dg ( 1 , 'A' , 'B' , 'C' ) } \u6b65\" ) print () print ( f \"\u603b\u5171\u9700\u8981 { dg ( 2 , 'A' , 'B' , 'C' ) } \u6b65\" ) print () print ( f \"\u603b\u5171\u9700\u8981 { dg ( 3 , 'A' , 'B' , 'C' ) } \u6b65\" ) if __name__ == '__main__' : main () \u8f93\u51fa: A->C \u603b\u5171\u9700\u89811\u6b65 A->B A->C B->C \u603b\u5171\u9700\u89813\u6b65 A->C A->B C->B A->C B->A B->C A->C \u603b\u5171\u9700\u89817\u6b65","title":"\u6c49\u8bfa\u5854"},{"location":"python/exercises/%E6%B1%89%E8%AF%BA%E5%A1%94/#_1","text":"def dg ( num , A , B , C , count = 0 ): \"\"\" \u6c49\u8bfa\u5854 num: \u76d8\u5b50\u7684\u6570\u91cf count: \u64cd\u4f5c\u6b21\u6570 \"\"\" # \u89e3\u51b3\u601d\u8def: # \u65e0\u8bba\u6709\u591a\u5c11\u4e2a\u76d8\u5b50, \u6700\u4e0a\u9762\u7684\u76d8\u5b50\u6c38\u8fdc\u662f\u6700\u5c0f\u7684 # \u4e0b\u9762\u7684\u6240\u6709\u76d8\u5b50\u5f53\u4f5c\u4e00\u4e2a\u6574\u4f53, \u662f\u5927\u76d8\u5b50 # \u90a3\u4e48\u53ea\u9700\u89813\u6b65 # \u4e0b\u9762\u6ce8\u91ca\u4e2d\u7684\u7b2c\u4e00\u6b65\u3001\u7b2c\u4e8c\u6b65\u3001\u7b2c\u4e09\u6b65\u662f\u9488\u5bf9n>1\u7684\u60c5\u51b5 if num == 1 : count += 1 print ( f ' { A } -> { C } ' ) # \u7b2c\u4e8c\u6b65: \u628a\u5927\u76d8\u5b50\u4ecea\u653e\u5230c else : count += 1 count = dg ( num - 1 , A , C , B , count ) # \u7b2c\u4e00\u6b65: \u628a\u5c0f\u76d8\u5b50\u4ecea\u653e\u5230b print ( f ' { A } -> { C } ' ) count = dg ( num - 1 , B , A , C , count ) # \u7b2c\u4e09\u6b65: \u628a\u5c0f\u76d8\u5b50\u4eceb\u653e\u5230c return count def main (): print ( f \"\u603b\u5171\u9700\u8981 { dg ( 1 , 'A' , 'B' , 'C' ) } \u6b65\" ) print () print ( f \"\u603b\u5171\u9700\u8981 { dg ( 2 , 'A' , 'B' , 'C' ) } \u6b65\" ) print () print ( f \"\u603b\u5171\u9700\u8981 { dg ( 3 , 'A' , 'B' , 'C' ) } \u6b65\" ) if __name__ == '__main__' : main () \u8f93\u51fa: A->C \u603b\u5171\u9700\u89811\u6b65 A->B A->C B->C \u603b\u5171\u9700\u89813\u6b65 A->C A->B C->B A->C B->A B->C A->C \u603b\u5171\u9700\u89817\u6b65","title":"\u6c49\u8bfa\u5854"},{"location":"python/exercises/%E8%BF%9E%E7%BB%AD%E5%AD%90%E6%95%B0%E7%BB%84%E7%9A%84%E6%9C%80%E5%A4%A7%E5%92%8C/","text":"\u8fde\u7eed\u5b50\u6570\u7ec4\u7684\u6700\u5927\u548c \"\"\" \u52a8\u6001\u89c4\u5212: \u5176\u57fa\u672c\u601d\u60f3\u662f\u5c06\u5f85\u6c42\u89e3\u95ee\u9898\u5206\u89e3\u6210\u82e5\u5e72\u4e2a\u5b50\u95ee\u9898, \u5148\u6c42\u89e3\u5b50\u95ee\u9898\uff0c\u7136\u540e\u4ece\u8fd9\u4e9b\u5b50\u95ee\u9898\u7684\u89e3\u5f97\u5230\u539f\u95ee\u9898\u7684\u89e3 \"\"\" def func ( li ): \"\"\" \u95ee\u9898: \u5bf9\u4e8e\u4e00\u4e2a\u957f\u5ea6\u4e3a n \u7684\u6570\u7ec4, \u6c42\u8fde\u7eed\u5b50\u6570\u7ec4\u7684\u6700\u5927\u548c \u6838\u5fc3: \u5982\u679c li[i] \u524d\u9762\u7684\u6240\u6709\u6570\u5b57(\u5b50\u6570\u7ec4)\u4e4b\u548c\u5c0f\u4e8e li[i], \u90a3\u4e48\u524d\u9762\u7684\u5b50\u6570\u7ec4\u653e\u5f03, \u4ece\u5f53\u524d\u6570\u5b57 li[i] \u91cd\u65b0\u5f00\u59cb\u6c42\u548c \u601d\u8def: \u5229\u7528\u52a8\u6001\u89c4\u5212\u7b97\u6cd5, \u5c06\u957f\u5ea6\u4e3a n \u7684\u6570\u7ec4, \u62c6\u89e3\u6210\u4e24\u90e8\u5206 li[0] \u548c li[1:], \u518d\u5c06 li[1:] \u62c6\u89e3\u6210 li[1:][0] \u548c li[1:][1:], \u4ee5\u6b64\u7c7b\u63a8 \"\"\" # 1\u3001\u9996\u5148, \u59d1\u4e14\u8ba4\u4e3a\u7b2c\u4e00\u4e2a\u6570\u5b57\u662f\u6700\u5927\u7684, \u6bd4\u5269\u4f59\u6240\u6709\u5143\u7d20\u7684\u7d2f\u79ef\u8fd8\u8981\u8981\u5927 max_sum = li [ 0 ] # 2\u3001\u5176\u6b21, \u5b9a\u4e49\u4e00\u4e2a\u4e34\u65f6\u53d8\u91cf, \u8bb0\u5f55\u771f\u6b63\u7684\u6700\u5927\u548c tmp = 0 # 3\u3001\u7136\u540e, \u904d\u5386\u6574\u4e2a\u6570\u7ec4 for i in li : # 4\u3001\u63a5\u7740, \u7528\u4e34\u65f6\u53d8\u91cf tmp (\u521d\u59cb\u503c\u4e3a0) + \u5f53\u524d\u6570\u5b57\u540e\u4e0e\u5f53\u524d\u7684\u6570\u5b57\u6bd4\u5927\u5c0f # \u5c31\u662f\u8bf4\u5982\u679c\u524d\u9762\u7684\u4e00\u7cfb\u5217\u6570\u5b57(\u5b50\u6570\u7ec4)\u4e4b\u548c\u90fd\u4e0d\u5982\u5f53\u524d\u7684\u6570\u5b57\u5927, # \u5219\u629b\u5f03\u5b50\u6570\u7ec4\u4fdd\u7559(\u8d4b\u503c\u7ed9 tmp )\u5f53\u524d\u6570\u5b57, \u5426\u5219\u53cd\u4e4b tmp = max ( tmp + i , i ) # 5\u3001\u6700\u540e, \u5224\u65ad\u4e00\u4e0b\u6211\u4eec\u8ba4\u4e3a\u7684\u6700\u5927\u548c(max_sum) # \u4e0e\u771f\u6b63\u7684\u6700\u5927\u548c(\u4e0d\u65ad\u904d\u5386\u7d2f\u52a0\u5e76\u5224\u65ad\u540e\u88ab\u8d4b\u503c\u7684 tmp) \u54ea\u4e2a\u5927 max_sum = max ( max_sum , tmp ) return max_sum def main (): li = [ 1 , - 2 , 3 , 10 , - 4 , 7 , 2 , - 5 ] print ( func ( li )) li = [ 2 ] print ( func ( li )) li = [ - 10 ] print ( func ( li )) if __name__ == '__main__' : main ()","title":"\u8fde\u7eed\u5b50\u6570\u7ec4\u7684\u6700\u5927\u548c"},{"location":"python/exercises/%E8%BF%9E%E7%BB%AD%E5%AD%90%E6%95%B0%E7%BB%84%E7%9A%84%E6%9C%80%E5%A4%A7%E5%92%8C/#_1","text":"\"\"\" \u52a8\u6001\u89c4\u5212: \u5176\u57fa\u672c\u601d\u60f3\u662f\u5c06\u5f85\u6c42\u89e3\u95ee\u9898\u5206\u89e3\u6210\u82e5\u5e72\u4e2a\u5b50\u95ee\u9898, \u5148\u6c42\u89e3\u5b50\u95ee\u9898\uff0c\u7136\u540e\u4ece\u8fd9\u4e9b\u5b50\u95ee\u9898\u7684\u89e3\u5f97\u5230\u539f\u95ee\u9898\u7684\u89e3 \"\"\" def func ( li ): \"\"\" \u95ee\u9898: \u5bf9\u4e8e\u4e00\u4e2a\u957f\u5ea6\u4e3a n \u7684\u6570\u7ec4, \u6c42\u8fde\u7eed\u5b50\u6570\u7ec4\u7684\u6700\u5927\u548c \u6838\u5fc3: \u5982\u679c li[i] \u524d\u9762\u7684\u6240\u6709\u6570\u5b57(\u5b50\u6570\u7ec4)\u4e4b\u548c\u5c0f\u4e8e li[i], \u90a3\u4e48\u524d\u9762\u7684\u5b50\u6570\u7ec4\u653e\u5f03, \u4ece\u5f53\u524d\u6570\u5b57 li[i] \u91cd\u65b0\u5f00\u59cb\u6c42\u548c \u601d\u8def: \u5229\u7528\u52a8\u6001\u89c4\u5212\u7b97\u6cd5, \u5c06\u957f\u5ea6\u4e3a n \u7684\u6570\u7ec4, \u62c6\u89e3\u6210\u4e24\u90e8\u5206 li[0] \u548c li[1:], \u518d\u5c06 li[1:] \u62c6\u89e3\u6210 li[1:][0] \u548c li[1:][1:], \u4ee5\u6b64\u7c7b\u63a8 \"\"\" # 1\u3001\u9996\u5148, \u59d1\u4e14\u8ba4\u4e3a\u7b2c\u4e00\u4e2a\u6570\u5b57\u662f\u6700\u5927\u7684, \u6bd4\u5269\u4f59\u6240\u6709\u5143\u7d20\u7684\u7d2f\u79ef\u8fd8\u8981\u8981\u5927 max_sum = li [ 0 ] # 2\u3001\u5176\u6b21, \u5b9a\u4e49\u4e00\u4e2a\u4e34\u65f6\u53d8\u91cf, \u8bb0\u5f55\u771f\u6b63\u7684\u6700\u5927\u548c tmp = 0 # 3\u3001\u7136\u540e, \u904d\u5386\u6574\u4e2a\u6570\u7ec4 for i in li : # 4\u3001\u63a5\u7740, \u7528\u4e34\u65f6\u53d8\u91cf tmp (\u521d\u59cb\u503c\u4e3a0) + \u5f53\u524d\u6570\u5b57\u540e\u4e0e\u5f53\u524d\u7684\u6570\u5b57\u6bd4\u5927\u5c0f # \u5c31\u662f\u8bf4\u5982\u679c\u524d\u9762\u7684\u4e00\u7cfb\u5217\u6570\u5b57(\u5b50\u6570\u7ec4)\u4e4b\u548c\u90fd\u4e0d\u5982\u5f53\u524d\u7684\u6570\u5b57\u5927, # \u5219\u629b\u5f03\u5b50\u6570\u7ec4\u4fdd\u7559(\u8d4b\u503c\u7ed9 tmp )\u5f53\u524d\u6570\u5b57, \u5426\u5219\u53cd\u4e4b tmp = max ( tmp + i , i ) # 5\u3001\u6700\u540e, \u5224\u65ad\u4e00\u4e0b\u6211\u4eec\u8ba4\u4e3a\u7684\u6700\u5927\u548c(max_sum) # \u4e0e\u771f\u6b63\u7684\u6700\u5927\u548c(\u4e0d\u65ad\u904d\u5386\u7d2f\u52a0\u5e76\u5224\u65ad\u540e\u88ab\u8d4b\u503c\u7684 tmp) \u54ea\u4e2a\u5927 max_sum = max ( max_sum , tmp ) return max_sum def main (): li = [ 1 , - 2 , 3 , 10 , - 4 , 7 , 2 , - 5 ] print ( func ( li )) li = [ 2 ] print ( func ( li )) li = [ - 10 ] print ( func ( li )) if __name__ == '__main__' : main ()","title":"\u8fde\u7eed\u5b50\u6570\u7ec4\u7684\u6700\u5927\u548c"},{"location":"python/exercises/%E9%80%92%E5%BD%92%E5%AE%9E%E7%8E%B0%E7%B4%AF%E5%8A%A0%E5%92%8C%E9%98%B6%E4%B9%98/","text":"\u9012\u5f52\u5b9e\u73b0\u7d2f\u52a0\u548c\u9636\u4e58 def accumulation ( n ): \"\"\"\u7d2f\u52a0\"\"\" return 0 if n < 1 else n + accumulation ( n - 1 ) def factorial ( n ): \"\"\"\u9636\u4e58\"\"\" return 1 if n < 2 else n * factorial ( n - 1 ) def main (): print ( accumulation ( 5 )) print ( factorial ( 5 )) if __name__ == '__main__' : main ()","title":"\u7d2f\u52a0\u548c\u9636\u4e58"},{"location":"python/exercises/%E9%80%92%E5%BD%92%E5%AE%9E%E7%8E%B0%E7%B4%AF%E5%8A%A0%E5%92%8C%E9%98%B6%E4%B9%98/#_1","text":"def accumulation ( n ): \"\"\"\u7d2f\u52a0\"\"\" return 0 if n < 1 else n + accumulation ( n - 1 ) def factorial ( n ): \"\"\"\u9636\u4e58\"\"\" return 1 if n < 2 else n * factorial ( n - 1 ) def main (): print ( accumulation ( 5 )) print ( factorial ( 5 )) if __name__ == '__main__' : main ()","title":"\u9012\u5f52\u5b9e\u73b0\u7d2f\u52a0\u548c\u9636\u4e58"},{"location":"python/linked-list/%E5%8D%95%E5%90%91%E5%BE%AA%E7%8E%AF%E9%93%BE%E8%A1%A8/","text":"# singlelcycinklist class Node ( object ): \"\"\"\u8282\u70b9\"\"\" def __init__ ( self , item ): # \u8bb0\u5f55\u6570\u636e\u5185\u5bb9 self . item = item # \u8bb0\u5f55\u4e0b\u4e00\u4e2a\u8282\u70b9 self . next = None class SingleCycLinkList ( object ): \"\"\"\u5355\u5411\u5faa\u73af\u94fe\u8868\"\"\" def __init__ ( self ): # \u8bb0\u5f55\u5934\u8282\u70b9\uff0c\u6240\u6709\u7684\u64cd\u4f5c\u4ece\u5934\u8282\u70b9\u5f00\u59cb self . __head = None def is_empty ( self ): \"\"\"\u94fe\u8868\u662f\u5426\u4e3a\u7a7a\"\"\" # \u5224\u65ad\u5934\u8282\u70b9\u662f\u5426\u4e3a\u7a7a return self . __head is None def length ( self ): \"\"\"\u94fe\u8868\u957f\u5ea6\"\"\" if self . is_empty (): return 0 # \u5b9a\u4e49count \u7d2f\u8ba1\u52a01 count = 1 # \u4ece\u5934\u5230\u5c3e\u904d\u5386 cur = self . __head while cur . next is not self . __head : count += 1 cur = cur . next return count def travel ( self ): \"\"\"\u904d\u5386\u6574\u4e2a\u94fe\u8868\"\"\" if self . is_empty (): return # \u5b9a\u4e49\u6e38\u6807\uff0c\u4ece\u5934\u5f80\u540e\u79fb\u52a8 cur = self . __head print ( cur . item , end = \" \" ) while cur . next is not self . __head : cur = cur . next print ( cur . item , end = \" \" ) print () def add ( self , item ): \"\"\"\u94fe\u8868\u5934\u90e8\u6dfb\u52a0\u5143\u7d20\"\"\" # \u521b\u5efa\u65b0\u8282\u70b9 node = Node ( item ) # \u5224\u65ad\u94fe\u8868\u662f\u5426\u4e3a\u7a7a if self . is_empty (): # \u94fe\u8868\u53ea\u6709\u4e00\u4e2a\u8282\u70b9\uff0c\u81ea\u5df1\u7684next\u6307\u5411\u81ea\u5df1 self . __head = node node . next = self . __head return # \u904d\u5386\u627e\u5230\u5c3e\u8282\u70b9\uff0cwhile\u5faa\u73af\u7ed3\u675f\uff0ccur\u6307\u5411\u7684\u662f\u5c3e\u8282\u70b9 cur = self . __head while cur . next is not self . __head : cur = cur . next # \u8ba9\u65b0\u8282\u70b9\u7684next\u6307\u5411\u539f\u6765\u7684\u5934 node . next = self . __head # \u8ba9head\u8bb0\u5f55\u65b0\u8282\u70b9 self . __head = node # \u5c3e\u8282\u70b9\u6307\u5411\u65b0\u7684\u5934 cur . next = node def append ( self , item ): \"\"\"\u94fe\u8868\u5c3e\u90e8\u6dfb\u52a0\u5143\u7d20\"\"\" # \u5224\u65ad\u5934\u8282\u70b9\u662f\u5426\u4e3a\u7a7a if self . is_empty (): self . add ( item ) return # \u4ece\u5934\u904d\u5386\uff0c\u627e\u5230\u5c3e\u8282\u70b9 cur = self . __head while cur . next is not self . __head : cur = cur . next # \u5f53while\u5faa\u73af\u7ed3\u675f\uff0ccur\u6307\u5411\u7684\u662f\u5c3e\u8282\u70b9 node = Node ( item ) cur . next = node # \u8ba9\u65b0\u8282\u70b9\u7684next\u6307\u5411\u5934\u8282\u70b9 node . next = self . __head def insert ( self , pos , item ): \"\"\"\u6307\u5b9a\u4f4d\u7f6e\u6dfb\u52a0\u5143\u7d20\"\"\" # \u5065\u58ee\u6027 if pos <= 0 : self . add ( item ) elif pos >= self . length (): self . append ( item ) else : # \u4ece\u5934\u904d\u5386\uff0c\u627e\u5230pos\u524d\u9762\u7684\u8282\u70b9 cur = self . __head # \u5b9a\u4e49\u4e0b\u6807\uff0cindex\u8bb0\u5f55\u7684\u662f\u5f53\u524dcur\u6307\u5411\u7684\u5bf9\u8c61\u7684\u4e0b\u6807 index = 0 while index < ( pos - 1 ): index += 1 cur = cur . next # while\u5faa\u73af\u7ed3\u675f\uff0ccur\u6267\u884c\u7684\u662fpos\u524d\u9762\u7684\u8282\u70b9 node = Node ( item ) node . next = cur . next cur . next = node def remove ( self , item ): \"\"\"\u5220\u9664\u8282\u70b9\"\"\" # \u4ece\u5934\u904d\u5386\uff0c\u627e\u5230\u8981\u5220\u9664\u7684\u8282\u70b9 cur = self . __head # \u5b9a\u4e49pre\uff0c\u8bb0\u5f55cur\u7684\u524d\u7f6e\u8282\u70b9 pre = None while cur . next is not self . __head : if cur . item == item : # \u5982\u679cpre\u4e3a\u7a7a\uff0c\u8bc1\u660e\u5220\u9664\u7684\u662f\u9996\u8282\u70b9 if pre is None : # \u627e\u5230\u5c3e\u8282\u70b9 end_node = self . __head while end_node . next is not self . __head : end_node = end_node . next # \u8ba9head\u6307\u5411cur\u4e0b\u4e00\u4e2a\u8282\u70b9 self . __head = cur . next # \u8ba9\u5c3e\u8282\u70b9\u6307\u5411\u65b0\u7684\u5934\u8282\u70b9 end_node . next = self . __head else : pre . next = cur . next return pre = cur cur = cur . next # while\u5faa\u73af\u4e0d\u80fd\u5904\u7406\u5c3e\u8282\u70b9\uff0c\u5faa\u73af\u540e\u5355\u72ec\u5904\u7406\u5c3e\u8282\u70b9 if cur . item == item : # \u5982\u679cpre\u4e3a\u7a7a\uff0c\u8bc1\u660e\u5f53\u524d\u53ea\u6709\u4e00\u4e2a\u8282\u70b9\uff0c\u800c\u4e14\u5220\u9664\u7684\u662f\u8fd9\u4e2a\u8282\u70b9 if pre is None : self . __head = None else : # \u8ba9\u524d\u7f6e\u8282\u70b9\u6307\u5411\u5934\u8282\u70b9 pre . next = self . __head def search ( self , item ): \"\"\"\u67e5\u627e\u8282\u70b9\u662f\u5426\u5b58\u5728\"\"\" if self . is_empty (): return False # \u53ef\u80fd\u662f\u9996\u8282\u70b9 cur = self . __head if cur . item == item : return True # \u5426\u5219\u904d\u5386 while cur . next is not self . __head : cur = cur . next if cur . item == item : return True # while\u5faa\u73af\u7ed3\u675f\uff0c\u6ca1\u627e\u5230 return False if __name__ == '__main__' : sll = SingleCycLinkList () print ( sll . is_empty ()) print ( sll . length ()) sll . add ( 3 ) sll . add ( 2 ) sll . add ( 1 ) print ( sll . is_empty ()) print ( sll . length ()) sll . travel () sll . add ( 4 ) sll . travel () print ( sll . length ()) sll . append ( 5 ) sll . travel () sll . insert ( 2 , 6 ) sll . travel () sll . insert ( 4 , 7 ) sll . travel () sll . insert ( - 100 , 8 ) sll . insert ( 100 , 9 ) sll . travel () sll . remove ( 6 ) sll . remove ( 8 ) sll . remove ( 9 ) sll . travel () print ( sll . search ( 4 )) print ( sll . search ( 2 )) print ( sll . search ( 5 )) print ( sll . search ( 6 ))","title":"\u5355\u5411\u5faa\u73af\u94fe\u8868"},{"location":"python/linked-list/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/","text":"# singlelinklist class Node : \"\"\"\u8282\u70b9\"\"\" def __init__ ( self , item ): # \u8bb0\u5f55\u6570\u636e\u5185\u5bb9 self . item = item # \u8bb0\u5f55\u4e0b\u4e00\u4e2a\u8282\u70b9 self . next = None class SingleLinkList : \"\"\"\u5355\u5411\u94fe\u8868\"\"\" def __init__ ( self ): # \u8bb0\u5f55\u5934\u8282\u70b9\uff0c\u6240\u6709\u7684\u64cd\u4f5c\u4ece\u5934\u8282\u70b9\u5f00\u59cb self . __head = None def is_empty ( self ): \"\"\"\u94fe\u8868\u662f\u5426\u4e3a\u7a7a\"\"\" # \u5224\u65ad\u5934\u8282\u70b9\u662f\u5426\u4e3a\u7a7a return self . __head is None def length ( self ): \"\"\"\u94fe\u8868\u957f\u5ea6\"\"\" if self . is_empty (): return 0 # \u5b9a\u4e49count \u7d2f\u8ba1\u52a01 count = 0 # \u4ece\u5934\u5230\u5c3e\u904d\u5386 cur = self . __head while cur is not None : count += 1 cur = cur . next return count def travel ( self ): \"\"\"\u904d\u5386\u6574\u4e2a\u94fe\u8868\"\"\" if self . is_empty (): return # \u5b9a\u4e49\u6e38\u6807\uff0c\u4ece\u5934\u5f80\u540e\u79fb\u52a8 cur = self . __head while cur is not None : print ( cur . item , end = \" \" ) cur = cur . next print () def add ( self , item ): \"\"\"\u94fe\u8868\u5934\u90e8\u6dfb\u52a0\u5143\u7d20\"\"\" # \u521b\u5efa\u65b0\u8282\u70b9 node = Node ( item ) # \u8ba9\u65b0\u8282\u70b9\u7684next\u6307\u5411\u539f\u6765\u7684\u5934 node . next = self . __head # \u8ba9head\u8bb0\u5f55\u65b0\u8282\u70b9 self . __head = node def append ( self , item ): \"\"\"\u94fe\u8868\u5c3e\u90e8\u6dfb\u52a0\u5143\u7d20\"\"\" # \u5224\u65ad\u5934\u8282\u70b9\u662f\u5426\u4e3a\u7a7a if self . is_empty (): self . add ( item ) return # \u4ece\u5934\u904d\u5386\uff0c\u627e\u5230\u5c3e\u8282\u70b9 cur = self . __head while cur . next is not None : cur = cur . next # \u5f53while\u5faa\u73af\u7ed3\u675f\uff0ccur\u6307\u5411\u7684\u662f\u5c3e\u8282\u70b9 node = Node ( item ) cur . next = node def insert ( self , pos , item ): \"\"\"\u6307\u5b9a\u4f4d\u7f6e\u6dfb\u52a0\u5143\u7d20\"\"\" # \u5065\u58ee\u6027 if pos <= 0 : self . add ( item ) elif pos >= self . length (): self . append ( item ) else : # \u4ece\u5934\u904d\u5386\uff0c\u627e\u5230pos\u524d\u9762\u7684\u8282\u70b9 cur = self . __head # \u5b9a\u4e49\u4e0b\u6807\uff0cindex\u8bb0\u5f55\u7684\u662f\u5f53\u524dcur\u6307\u5411\u7684\u5bf9\u8c61\u7684\u4e0b\u6807 index = 0 while index < ( pos - 1 ): index += 1 cur = cur . next # while\u5faa\u73af\u7ed3\u675f\uff0ccur\u6267\u884c\u7684\u662fpos\u524d\u9762\u7684\u8282\u70b9 node = Node ( item ) node . next = cur . next cur . next = node def remove ( self , item ): \"\"\"\u5220\u9664\u8282\u70b9\"\"\" # \u4ece\u5934\u904d\u5386\uff0c\u627e\u5230\u8981\u5220\u9664\u7684\u8282\u70b9 cur = self . __head # \u5b9a\u4e49pre\uff0c\u8bb0\u5f55cur\u7684\u524d\u7f6e\u8282\u70b9 pre = None while cur is not None : if cur . item == item : # \u5982\u679cpre\u4e3a\u7a7a\uff0c\u8bc1\u660e\u5220\u9664\u7684\u662f\u9996\u8282\u70b9 if pre is None : self . __head = cur . next else : pre . next = cur . next return pre = cur cur = cur . next def search ( self , item ): \"\"\"\u67e5\u627e\u8282\u70b9\u662f\u5426\u5b58\u5728\"\"\" if self . is_empty (): return False cur = self . __head while cur is not None : if cur . item == item : return True cur = cur . next # while\u5faa\u73af\u7ed3\u675f\uff0c\u6ca1\u627e\u5230 return False if __name__ == '__main__' : sll = SingleLinkList () print ( sll . is_empty ()) print ( sll . length ()) sll . add ( 3 ) sll . add ( 2 ) sll . add ( 1 ) print ( sll . is_empty ()) print ( sll . length ()) sll . travel () sll . add ( 4 ) sll . travel () print ( sll . length ()) sll . append ( 5 ) sll . travel () sll . insert ( 2 , 6 ) sll . travel () sll . insert ( 4 , 7 ) sll . travel () sll . insert ( - 100 , 8 ) sll . insert ( 100 , 9 ) sll . travel () sll . remove ( 6 ) sll . remove ( 8 ) sll . remove ( 9 ) sll . travel () print ( sll . search ( 4 )) print ( sll . search ( 2 )) print ( sll . search ( 5 )) print ( sll . search ( 6 ))","title":"\u5355\u5411\u94fe\u8868"},{"location":"python/linked-list/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/","text":"# doublelinklist class Node ( object ): \"\"\"\u8282\u70b9\"\"\" def __init__ ( self , item ): # \u8bb0\u5f55\u6570\u636e\u5185\u5bb9 self . item = item # \u8bb0\u5f55\u4e0b\u4e00\u4e2a\u8282\u70b9 self . next = None # \u8bb0\u5f55\u524d\u7f6e\u8282\u70b9 self . pre = None class DoubleLinkList ( object ): \"\"\"\u53cc\u5411\u94fe\u8868\"\"\" def __init__ ( self ): # \u8bb0\u5f55\u5934\u8282\u70b9\uff0c\u6240\u6709\u7684\u64cd\u4f5c\u4ece\u5934\u8282\u70b9\u5f00\u59cb self . __head = None def is_empty ( self ): \"\"\"\u94fe\u8868\u662f\u5426\u4e3a\u7a7a\"\"\" # \u5224\u65ad\u5934\u8282\u70b9\u662f\u5426\u4e3a\u7a7a return self . __head is None def length ( self ): \"\"\"\u94fe\u8868\u957f\u5ea6\"\"\" if self . is_empty (): return 0 # \u5b9a\u4e49count \u7d2f\u8ba1\u52a01 count = 0 # \u4ece\u5934\u5230\u5c3e\u904d\u5386 cur = self . __head while cur is not None : count += 1 cur = cur . next return count def travel ( self ): \"\"\"\u904d\u5386\u6574\u4e2a\u94fe\u8868\"\"\" if self . is_empty (): return # \u5b9a\u4e49\u6e38\u6807\uff0c\u4ece\u5934\u5f80\u540e\u79fb\u52a8 cur = self . __head while cur is not None : print ( cur . item , end = \" \" ) cur = cur . next print () def add ( self , item ): \"\"\"\u94fe\u8868\u5934\u90e8\u6dfb\u52a0\u5143\u7d20\"\"\" # \u521b\u5efa\u65b0\u8282\u70b9 node = Node ( item ) # \u5224\u65ad\u94fe\u8868\u662f\u5426\u4e3a\u7a7a if self . is_empty (): self . __head = node return # \u8ba9\u65b0\u8282\u70b9\u7684next\u6307\u5411\u539f\u6765\u7684\u5934 node . next = self . __head # \u8ba9\u539f\u6765\u7684\u5934\u8282\u70b9\u7684pre\u6307\u5411\u65b0\u8282\u70b9 self . __head . pre = node # \u8ba9head\u8bb0\u5f55\u65b0\u8282\u70b9 self . __head = node def append ( self , item ): \"\"\"\u94fe\u8868\u5c3e\u90e8\u6dfb\u52a0\u5143\u7d20\"\"\" # \u5224\u65ad\u5934\u8282\u70b9\u662f\u5426\u4e3a\u7a7a if self . is_empty (): self . add ( item ) return # \u4ece\u5934\u904d\u5386\uff0c\u627e\u5230\u5c3e\u8282\u70b9 cur = self . __head while cur . next is not None : cur = cur . next # \u5f53while\u5faa\u73af\u7ed3\u675f\uff0ccur\u6307\u5411\u7684\u662f\u5c3e\u8282\u70b9 node = Node ( item ) cur . next = node # \u8ba9\u65b0\u8282\u70b9\u7684pre\u6307\u5411\u539f\u6765\u7684\u5c3e\u8282\u70b9 node . pre = cur def insert ( self , pos , item ): \"\"\"\u6307\u5b9a\u4f4d\u7f6e\u6dfb\u52a0\u5143\u7d20\"\"\" # \u5065\u58ee\u6027 if pos <= 0 : self . add ( item ) elif pos >= self . length (): self . append ( item ) else : # \u4ece\u5934\u904d\u5386\uff0c\u627e\u5230pos\u524d\u9762\u7684\u8282\u70b9 cur = self . __head # \u5b9a\u4e49\u4e0b\u6807\uff0cindex\u8bb0\u5f55\u7684\u662f\u5f53\u524dcur\u6307\u5411\u7684\u5bf9\u8c61\u7684\u4e0b\u6807 index = 0 while index < ( pos - 1 ): index += 1 cur = cur . next # while\u5faa\u73af\u7ed3\u675f\uff0ccur\u6267\u884c\u7684\u662fpos\u524d\u9762\u7684\u8282\u70b9 node = Node ( item ) node . next = cur . next # \u539f\u6765\u4f4d\u7f6e\u8282\u70b9\u7684pre\u8bb0\u5f55\u8282\u70b9 cur . next . pre = node cur . next = node # \u65b0\u8282\u70b9\u7684pre\u8bb0\u5f55pos\u524d\u9762\u7684\u8282\u70b9 node . pre = cur def remove ( self , item ): \"\"\"\u5220\u9664\u8282\u70b9\"\"\" # \u4ece\u5934\u904d\u5386\uff0c\u627e\u5230\u8981\u5220\u9664\u7684\u8282\u70b9 cur = self . __head while cur is not None : if cur . item == item : # \u5982\u679ccur.pre\u4e3a\u7a7a\uff0c\u8bc1\u660e\u5220\u9664\u7684\u5934\u8282\u70b9 if cur . pre is None : self . __head = cur . next else : cur . pre . next = cur . next # \u5982\u679ccur.next\u4e3a\u7a7a\uff0c\u8bc1\u660e\u5220\u6389\u7684\u662f\u5c3e\u8282\u70b9 if cur . next is not None : cur . next . pre = cur . pre return cur = cur . next def search ( self , item ): \"\"\"\u67e5\u627e\u8282\u70b9\u662f\u5426\u5b58\u5728\"\"\" if self . is_empty (): return False cur = self . __head while cur is not None : if cur . item == item : return True cur = cur . next # while\u5faa\u73af\u7ed3\u675f\uff0c\u6ca1\u627e\u5230 return False if __name__ == '__main__' : sll = DoubleLinkList () print ( sll . is_empty ()) print ( sll . length ()) sll . add ( 3 ) sll . add ( 2 ) sll . add ( 1 ) print ( sll . is_empty ()) print ( sll . length ()) sll . travel () sll . add ( 4 ) sll . travel () print ( sll . length ()) sll . append ( 5 ) sll . travel () sll . insert ( 2 , 6 ) sll . travel () sll . insert ( 4 , 7 ) sll . travel () sll . insert ( - 100 , 8 ) sll . insert ( 100 , 9 ) sll . travel () sll . remove ( 6 ) sll . remove ( 8 ) sll . remove ( 9 ) sll . travel () print ( sll . search ( 4 )) print ( sll . search ( 2 )) print ( sll . search ( 5 )) print ( sll . search ( 6 ))","title":"\u53cc\u5411\u94fe\u8868"},{"location":"python/other/%2B%20%2B%3D%20append%20extend%20%E7%9A%84%E5%8C%BA%E5%88%AB/","text":"+ += append extend \u7684\u533a\u522b def test1 ( li ): \"\"\"\u4f7f\u7528+\u64cd\u4f5c\u4e24\u4e2a\u5217\u8868\"\"\" raw_li = li print ( f '\u539f\u59cbli: \\t { raw_li } ' ) li = li + li print ( f '\u4f7f\u7528+\u64cd\u4f5c\u540e: \\t { li } ' ) print ( f '\u539f\u59cbli: \\t { raw_li } ' ) print () def test2 ( li ): \"\"\"\u4f7f\u7528+=\u64cd\u4f5c\u5217\u8868\"\"\" raw_li = li print ( f '\u539f\u59cbli: \\t { raw_li } ' ) li += li print ( f '\u4f7f\u7528+=\u64cd\u4f5c\u540e: \\t { li } ' ) print ( f '\u539f\u59cbli: \\t { raw_li } ' ) print () def test3 ( li : list ): \"\"\"\u4f7f\u7528append\u64cd\u4f5c\u5217\u8868\"\"\" raw_li = li print ( f '\u539f\u59cbli: \\t\\t { raw_li } ' ) li . append ( 4 ) print ( f '\u4f7f\u7528append\u64cd\u4f5c\u540e: \\t { li } ' ) print ( f '\u539f\u59cbli: \\t\\t { raw_li } ' ) print () def test4 ( li : list ): \"\"\"\u4f7f\u7528extend\u64cd\u4f5c\u5217\u8868\"\"\" raw_li = li print ( f '\u539f\u59cbli: \\t\\t { raw_li } ' ) li . extend ( li ) print ( f '\u4f7f\u7528extend\u64cd\u4f5c\u540e: \\t { li } ' ) print ( f '\u539f\u59cbli: \\t\\t { raw_li } ' ) def main (): li = [ 1 , 2 , 3 ] test1 ( li ) li = [ 1 , 2 , 3 ] test2 ( li ) li = [ 1 , 2 , 3 ] test3 ( li ) li = [ 1 , 2 , 3 ] test4 ( li ) if __name__ == '__main__' : main () \u8f93\u51fa: \u539f\u59cbli: [1, 2, 3] \u4f7f\u7528+\u64cd\u4f5c\u540e: [1, 2, 3, 1, 2, 3] \u539f\u59cbli: [1, 2, 3] \u539f\u59cbli: [1, 2, 3] \u4f7f\u7528+=\u64cd\u4f5c\u540e: [1, 2, 3, 1, 2, 3] \u539f\u59cbli: [1, 2, 3, 1, 2, 3] \u539f\u59cbli: [1, 2, 3] \u4f7f\u7528append\u64cd\u4f5c\u540e: [1, 2, 3, 4] \u539f\u59cbli: [1, 2, 3, 4] \u539f\u59cbli: [1, 2, 3] \u4f7f\u7528extend\u64cd\u4f5c\u540e: [1, 2, 3, 1, 2, 3] \u539f\u59cbli: [1, 2, 3, 1, 2, 3] \u89e3\u91ca: \u5bf9\u4e8e\u53ef\u53d8\u6570\u636e\u7c7b\u578b, \u51fd\u6570\u5185\u90e8\u5bf9\u5176\u8fdb\u884c +=\u3001append\u548cextend\u64cd\u4f5c, \u4f1a\u66f4\u6539\u539f\u59cb\u6570\u636e \u800c li=li+li, \u5219\u662f\u5728\u51fd\u6570\u5185\u90e8\u521b\u5efa\u4e86\u4e00\u5c40\u90e8\u53d8\u91cfli, \u4e0d\u4f1a\u5bf9\u5916\u9762\u7684li\u9020\u6210\u5f71\u54cd += \u5185\u90e8\u4f7f\u7528\u4e86\u9b54\u6cd5\u65b9\u6cd5 __iadd__ , __iadd__ \u5185\u90e8\u53c8\u8c03\u7528\u4e86 extend \u65b9\u6cd5 \u62d3\u5c55: + \u53ea\u80fd\u64cd\u4f5c\u7c7b\u578b\u4e00\u76f4\u7684\u5bf9\u8c61, \u4f8b\u5982\u5217\u8868+\u5217\u8868, \u5982\u679c\u662f\u5217\u8868+\u8fdc\u8db3, \u5219\u63d0\u793aTyperError extend \u65b9\u6cd5\u4f20\u5165\u53c2\u6570\u662f\u53ef\u8fed\u4ee3\u5bf9\u8c61(iterable), \u6240\u4ee5\u53ef\u4ee5 \u5217\u8868.extend(\u5143\u7ec4)\u3001\u5143\u7ec4.extend(\u96c6\u5408)\u7b49\u7b49","title":"+ += append extend \u7684\u533a\u522b"},{"location":"python/other/%2B%20%2B%3D%20append%20extend%20%E7%9A%84%E5%8C%BA%E5%88%AB/#append-extend","text":"def test1 ( li ): \"\"\"\u4f7f\u7528+\u64cd\u4f5c\u4e24\u4e2a\u5217\u8868\"\"\" raw_li = li print ( f '\u539f\u59cbli: \\t { raw_li } ' ) li = li + li print ( f '\u4f7f\u7528+\u64cd\u4f5c\u540e: \\t { li } ' ) print ( f '\u539f\u59cbli: \\t { raw_li } ' ) print () def test2 ( li ): \"\"\"\u4f7f\u7528+=\u64cd\u4f5c\u5217\u8868\"\"\" raw_li = li print ( f '\u539f\u59cbli: \\t { raw_li } ' ) li += li print ( f '\u4f7f\u7528+=\u64cd\u4f5c\u540e: \\t { li } ' ) print ( f '\u539f\u59cbli: \\t { raw_li } ' ) print () def test3 ( li : list ): \"\"\"\u4f7f\u7528append\u64cd\u4f5c\u5217\u8868\"\"\" raw_li = li print ( f '\u539f\u59cbli: \\t\\t { raw_li } ' ) li . append ( 4 ) print ( f '\u4f7f\u7528append\u64cd\u4f5c\u540e: \\t { li } ' ) print ( f '\u539f\u59cbli: \\t\\t { raw_li } ' ) print () def test4 ( li : list ): \"\"\"\u4f7f\u7528extend\u64cd\u4f5c\u5217\u8868\"\"\" raw_li = li print ( f '\u539f\u59cbli: \\t\\t { raw_li } ' ) li . extend ( li ) print ( f '\u4f7f\u7528extend\u64cd\u4f5c\u540e: \\t { li } ' ) print ( f '\u539f\u59cbli: \\t\\t { raw_li } ' ) def main (): li = [ 1 , 2 , 3 ] test1 ( li ) li = [ 1 , 2 , 3 ] test2 ( li ) li = [ 1 , 2 , 3 ] test3 ( li ) li = [ 1 , 2 , 3 ] test4 ( li ) if __name__ == '__main__' : main () \u8f93\u51fa: \u539f\u59cbli: [1, 2, 3] \u4f7f\u7528+\u64cd\u4f5c\u540e: [1, 2, 3, 1, 2, 3] \u539f\u59cbli: [1, 2, 3] \u539f\u59cbli: [1, 2, 3] \u4f7f\u7528+=\u64cd\u4f5c\u540e: [1, 2, 3, 1, 2, 3] \u539f\u59cbli: [1, 2, 3, 1, 2, 3] \u539f\u59cbli: [1, 2, 3] \u4f7f\u7528append\u64cd\u4f5c\u540e: [1, 2, 3, 4] \u539f\u59cbli: [1, 2, 3, 4] \u539f\u59cbli: [1, 2, 3] \u4f7f\u7528extend\u64cd\u4f5c\u540e: [1, 2, 3, 1, 2, 3] \u539f\u59cbli: [1, 2, 3, 1, 2, 3] \u89e3\u91ca: \u5bf9\u4e8e\u53ef\u53d8\u6570\u636e\u7c7b\u578b, \u51fd\u6570\u5185\u90e8\u5bf9\u5176\u8fdb\u884c +=\u3001append\u548cextend\u64cd\u4f5c, \u4f1a\u66f4\u6539\u539f\u59cb\u6570\u636e \u800c li=li+li, \u5219\u662f\u5728\u51fd\u6570\u5185\u90e8\u521b\u5efa\u4e86\u4e00\u5c40\u90e8\u53d8\u91cfli, \u4e0d\u4f1a\u5bf9\u5916\u9762\u7684li\u9020\u6210\u5f71\u54cd += \u5185\u90e8\u4f7f\u7528\u4e86\u9b54\u6cd5\u65b9\u6cd5 __iadd__ , __iadd__ \u5185\u90e8\u53c8\u8c03\u7528\u4e86 extend \u65b9\u6cd5 \u62d3\u5c55: + \u53ea\u80fd\u64cd\u4f5c\u7c7b\u578b\u4e00\u76f4\u7684\u5bf9\u8c61, \u4f8b\u5982\u5217\u8868+\u5217\u8868, \u5982\u679c\u662f\u5217\u8868+\u8fdc\u8db3, \u5219\u63d0\u793aTyperError extend \u65b9\u6cd5\u4f20\u5165\u53c2\u6570\u662f\u53ef\u8fed\u4ee3\u5bf9\u8c61(iterable), \u6240\u4ee5\u53ef\u4ee5 \u5217\u8868.extend(\u5143\u7ec4)\u3001\u5143\u7ec4.extend(\u96c6\u5408)\u7b49\u7b49","title":"+ += append extend \u7684\u533a\u522b"},{"location":"python/other/AtExit/","text":"AtExit \u4ee3\u7801 import atexit import sys def run_func_at_exit_1 (): print ( f 'func name is { sys . _getframe () . f_code . co_name } ' ) print ( f 'file name is { sys . _getframe () . f_code . co_filename } ' ) def run_func_at_exit_2 ( hello , world ): print ( f ' { hello } { world } ' ) atexit . register ( run_func_at_exit_1 ) atexit . register ( run_func_at_exit_2 , 'Good' , 'Morning' ) @atexit . register def run_func_at_exit_3 (): run_func_at_exit_2 ( 'Hi,' , 'How are you' ) \u8f93\u51fa Hi, How are you Good Morning func name is run_func_at_exit_1 file name is /root/code/python/my_atexit.py \u5b66\u4e60\u70b9 sys._getframe().f_code.co_name \u53ef\u4ee5\u8f93\u51fa\u5f53\u524d\u8fd0\u884c\u51fd\u6570\u7684\u540d\u79f0 sys._getframe().f_code.co_filename \u53ef\u4ee5\u8f93\u51fa\u5f53\u524d\u8fd0\u884c\u51fd\u6570\u6240\u5728\u6a21\u5757\u7684\u7edd\u5bf9\u8def\u5f84 atexit \u6a21\u5757\u7684 register \u51fd\u6570\u6ce8\u518c\u7684\u5176\u4ed6\u51fd\u6570\u4f1a\u5728\u5f53\u524d\u6a21\u5757\u7684\u4ee3\u7801\u4ece\u4e0a\u800c\u4e0b\u6267\u884c\u5b8c\u6bd5\u540e\u81ea\u52a8\u8c03\u7528(\u4e0d\u9700\u8981 __name__ == '__main__' ) atexit.register()\u548c@atexit.register\u662f\u4e24\u79cd\u4f7f\u7528\u65b9\u6cd5, \u5176\u8fd0\u884c\u987a\u5e8f\u662f\u6700\u540e\u6ce8\u518c\u7684\u6700\u5148\u8fd0\u884c \u5982\u679c\u7a0b\u5e8f\u662f\u975e\u6b63\u5e38crash\uff0c\u6216\u901a\u8fc7os._exit()\u9000\u51fa\uff0c\u6ce8\u518c\u7684\u56de\u8c03\u51fd\u6570\u5c06\u4e0d\u4f1a\u88ab\u8c03\u7528 atexit.unregister(func) \u53ef\u53d6\u6d88\u6ce8\u518c\u51fd\u6570","title":"AtExit"},{"location":"python/other/AtExit/#atexit","text":"","title":"AtExit"},{"location":"python/other/AtExit/#_1","text":"import atexit import sys def run_func_at_exit_1 (): print ( f 'func name is { sys . _getframe () . f_code . co_name } ' ) print ( f 'file name is { sys . _getframe () . f_code . co_filename } ' ) def run_func_at_exit_2 ( hello , world ): print ( f ' { hello } { world } ' ) atexit . register ( run_func_at_exit_1 ) atexit . register ( run_func_at_exit_2 , 'Good' , 'Morning' ) @atexit . register def run_func_at_exit_3 (): run_func_at_exit_2 ( 'Hi,' , 'How are you' )","title":"\u4ee3\u7801"},{"location":"python/other/AtExit/#_2","text":"Hi, How are you Good Morning func name is run_func_at_exit_1 file name is /root/code/python/my_atexit.py","title":"\u8f93\u51fa"},{"location":"python/other/AtExit/#_3","text":"sys._getframe().f_code.co_name \u53ef\u4ee5\u8f93\u51fa\u5f53\u524d\u8fd0\u884c\u51fd\u6570\u7684\u540d\u79f0 sys._getframe().f_code.co_filename \u53ef\u4ee5\u8f93\u51fa\u5f53\u524d\u8fd0\u884c\u51fd\u6570\u6240\u5728\u6a21\u5757\u7684\u7edd\u5bf9\u8def\u5f84 atexit \u6a21\u5757\u7684 register \u51fd\u6570\u6ce8\u518c\u7684\u5176\u4ed6\u51fd\u6570\u4f1a\u5728\u5f53\u524d\u6a21\u5757\u7684\u4ee3\u7801\u4ece\u4e0a\u800c\u4e0b\u6267\u884c\u5b8c\u6bd5\u540e\u81ea\u52a8\u8c03\u7528(\u4e0d\u9700\u8981 __name__ == '__main__' ) atexit.register()\u548c@atexit.register\u662f\u4e24\u79cd\u4f7f\u7528\u65b9\u6cd5, \u5176\u8fd0\u884c\u987a\u5e8f\u662f\u6700\u540e\u6ce8\u518c\u7684\u6700\u5148\u8fd0\u884c \u5982\u679c\u7a0b\u5e8f\u662f\u975e\u6b63\u5e38crash\uff0c\u6216\u901a\u8fc7os._exit()\u9000\u51fa\uff0c\u6ce8\u518c\u7684\u56de\u8c03\u51fd\u6570\u5c06\u4e0d\u4f1a\u88ab\u8c03\u7528 atexit.unregister(func) \u53ef\u53d6\u6d88\u6ce8\u518c\u51fd\u6570","title":"\u5b66\u4e60\u70b9"},{"location":"python/other/MRO/","text":"MRO Python\u591a\u7ee7\u627f\u7684mro\u987a\u5e8f class A : def __init__ ( self ): pass class B ( A ): def __init__ ( self ): pass class C : def __init__ ( self ): pass class D ( C ): def __init__ ( self ): pass class E ( A ): def __init__ ( self ): pass class F : def __init__ ( self ): pass class G ( F ): def __init__ ( self ): pass class H ( G ): def __init__ ( self ): pass class I ( F ): def __init__ ( self ): pass class Test1 ( B , E , D , H , I ): def __init__ ( self ): pass class Test2 ( I , E , D , H ): def __init__ ( self ): pass class Test3 ( C , I , H , E , B ): def __init__ ( self ): pass def main (): print ( Test1 . __mro__ ) print () print ( Test2 . __mro__ ) print () print ( Test3 . __mro__ ) if __name__ == '__main__' : main () \u8f93\u51fa: (<class '__main__.Test1'>, <class '__main__.B'>, <class '__main__.E'>, <class '__main__.A'>, <class '__main__.D'>, <class '__main__.C'>, <class '__main__.H'>, <class '__main__.G'>, <class '__main__.I'>, <class '__main__.F'>, <class 'object'>) (<class '__main__.Test2'>, <class '__main__.I'>, <class '__main__.E'>, <class '__main__.A'>, <class '__main__.D'>, <class '__main__.C'>, <class '__main__.H'>, <class '__main__.G'>, <class '__main__.F'>, <class 'object'>) (<class '__main__.Test3'>, <class '__main__.C'>, <class '__main__.I'>, <class '__main__.H'>, <class '__main__.G'>, <class '__main__.F'>, <class '__main__.E'>, <class '__main__.B'>, <class '__main__.A'>, <class 'object'>) \u89e3\u91ca: Test1 \u7ee7\u627f B E D H I, Test2 \u7ee7\u627f I E D H, Test3 \u7ee7\u627f C I H E B: MRO\u7684\u987a\u5e8f\u662f: \u9996\u5148, \u6839\u636e\u7c7b\u7684\u62ec\u53f7\u5185\u7684\u4e66\u5199\u987a\u5e8f\u7ee7\u627f \u5176\u6b21, \u5f53\u524d\u8282\u70b9\u7684\u7c7b\u7684\u7236\u7c7b\u7684\u5b50\u7c7b\u90fd\u88ab\u7ee7\u627f\u7684\u60c5\u51b5\u4e0b, \u76f4\u63a5\u7ee7\u627f\u7236\u7c7b(\u53c2\u89c1Test1\u4e2dB->E->A\u3001D->C\u3001H->G) \u7136\u540e, \u7ee7\u627f\u5f53\u524d\u8282\u70b9\u7684\u7c7b\u7684\u7236\u7c7b\u540e, \u4f1a\u4ece\u65b0\u56de\u5230\u540c\u5f53\u524d\u8282\u70b9\u7c7b\u540c\u7ea7\u7684\u5176\u4ed6\u8282\u70b9\u7684\u7c7b\u5f00\u59cb\u7ee7\u627f(\u53c2\u89c1Test2\u4e2dE->A\u540e\u53d8\u6210D->C) \u63a5\u7740, \u5982\u679c\u7ee7\u627f\u5f53\u524d\u8282\u70b9\u7684\u7c7b\u540e\u53d1\u73b0\u8fd8\u6709\u66f4\u4f4e\u7ea7\u8282\u70b9\u7684\u7c7b, \u5219\u5f00\u59cb\u7ee7\u627f\u66f4\u4f4e\u7ea7\u8282\u70b9\u7684\u7c7b(\u53c2\u89c1Test3\u4e2dC->I->H) \u6700\u540e, \u7edf\u8ba1\u7c7b\u7684\u7c7b\u90fd\u7ee7\u627f\u5b8c\u6210\u4e4b\u540e, \u5f00\u59cb\u51e0\u4e2aObject","title":"MRO"},{"location":"python/other/MRO/#mro","text":"Python\u591a\u7ee7\u627f\u7684mro\u987a\u5e8f class A : def __init__ ( self ): pass class B ( A ): def __init__ ( self ): pass class C : def __init__ ( self ): pass class D ( C ): def __init__ ( self ): pass class E ( A ): def __init__ ( self ): pass class F : def __init__ ( self ): pass class G ( F ): def __init__ ( self ): pass class H ( G ): def __init__ ( self ): pass class I ( F ): def __init__ ( self ): pass class Test1 ( B , E , D , H , I ): def __init__ ( self ): pass class Test2 ( I , E , D , H ): def __init__ ( self ): pass class Test3 ( C , I , H , E , B ): def __init__ ( self ): pass def main (): print ( Test1 . __mro__ ) print () print ( Test2 . __mro__ ) print () print ( Test3 . __mro__ ) if __name__ == '__main__' : main () \u8f93\u51fa: (<class '__main__.Test1'>, <class '__main__.B'>, <class '__main__.E'>, <class '__main__.A'>, <class '__main__.D'>, <class '__main__.C'>, <class '__main__.H'>, <class '__main__.G'>, <class '__main__.I'>, <class '__main__.F'>, <class 'object'>) (<class '__main__.Test2'>, <class '__main__.I'>, <class '__main__.E'>, <class '__main__.A'>, <class '__main__.D'>, <class '__main__.C'>, <class '__main__.H'>, <class '__main__.G'>, <class '__main__.F'>, <class 'object'>) (<class '__main__.Test3'>, <class '__main__.C'>, <class '__main__.I'>, <class '__main__.H'>, <class '__main__.G'>, <class '__main__.F'>, <class '__main__.E'>, <class '__main__.B'>, <class '__main__.A'>, <class 'object'>) \u89e3\u91ca: Test1 \u7ee7\u627f B E D H I, Test2 \u7ee7\u627f I E D H, Test3 \u7ee7\u627f C I H E B: MRO\u7684\u987a\u5e8f\u662f: \u9996\u5148, \u6839\u636e\u7c7b\u7684\u62ec\u53f7\u5185\u7684\u4e66\u5199\u987a\u5e8f\u7ee7\u627f \u5176\u6b21, \u5f53\u524d\u8282\u70b9\u7684\u7c7b\u7684\u7236\u7c7b\u7684\u5b50\u7c7b\u90fd\u88ab\u7ee7\u627f\u7684\u60c5\u51b5\u4e0b, \u76f4\u63a5\u7ee7\u627f\u7236\u7c7b(\u53c2\u89c1Test1\u4e2dB->E->A\u3001D->C\u3001H->G) \u7136\u540e, \u7ee7\u627f\u5f53\u524d\u8282\u70b9\u7684\u7c7b\u7684\u7236\u7c7b\u540e, \u4f1a\u4ece\u65b0\u56de\u5230\u540c\u5f53\u524d\u8282\u70b9\u7c7b\u540c\u7ea7\u7684\u5176\u4ed6\u8282\u70b9\u7684\u7c7b\u5f00\u59cb\u7ee7\u627f(\u53c2\u89c1Test2\u4e2dE->A\u540e\u53d8\u6210D->C) \u63a5\u7740, \u5982\u679c\u7ee7\u627f\u5f53\u524d\u8282\u70b9\u7684\u7c7b\u540e\u53d1\u73b0\u8fd8\u6709\u66f4\u4f4e\u7ea7\u8282\u70b9\u7684\u7c7b, \u5219\u5f00\u59cb\u7ee7\u627f\u66f4\u4f4e\u7ea7\u8282\u70b9\u7684\u7c7b(\u53c2\u89c1Test3\u4e2dC->I->H) \u6700\u540e, \u7edf\u8ba1\u7c7b\u7684\u7c7b\u90fd\u7ee7\u627f\u5b8c\u6210\u4e4b\u540e, \u5f00\u59cb\u51e0\u4e2aObject","title":"MRO"},{"location":"python/other/Mp3Cut/","text":"Mp3Cut import sys from mutagen.mp3 import MP3 \"\"\" \u9700: pip install mutagen \"\"\" class Mp3Cut ( object ): def __init__ ( self ): # \u8bfb\u53d6\u6b4c\u66f2\u540d\u79f0 self . file = sys . argv [ 1 ] # \u83b7\u53d6\u6bd4\u7279\u7387(kbps), kb\u662f1000bit, p\u662fper, s\u662fsecond, \u5373\u6bcf\u79d2\u4f20\u8f93\u7684\u6570\u636e\u91cf mp3 = MP3 ( '\u738b\u529b\u5b8f - \u5929\u5730\u9f99\u9cde.mp3' ) bitrate = mp3 . info . bitrate # kb / 8 \u5c31\u662f\u6bd4\u7279(bit)\u5230\u5b57\u8282(Byte)\u7684\u8f6c\u6362, \u5373\u6bcf\u79d2\u4f20\u8f93\u591a\u5c11\u5b57\u8282 self . kBps = bitrate / 8 # \u83b7\u53d6\u6587\u4ef6\u540d\uff08\u4e0d\u5305\u62ec\u6587\u4ef6\u6269\u5c55\u540d\uff09 self . name = self . file [: self . file . rindex ( '.' )] def start_time ( self ): tt = input ( \"\u8bf7\u8f93\u5165\u5f00\u59cb\u65f6\u95f4, \u5206\u79d2\u4ee5.\u5206\u9694: \" ) minute = int ( tt . split ( '.' )[ 0 ]) # \u53d6\u5206 second = int ( tt . split ( '.' )[ 1 ]) # \u53d6\u79d2 self . tms = minute * 60 + second # \u4e00\u5171\u591a\u5c11\u79d2 def stop_time ( self ): pt = input ( \"\u8bf7\u8f93\u5165\u7ed3\u675f\u65f6\u95f4, \u5206\u79d2\u4ee5.\u5206\u9694: \" ) minute = int ( pt . split ( '.' )[ 0 ]) second = int ( pt . split ( '.' )[ 1 ]) self . pms = minute * 60 + second def cut_mp3 ( self ): first_part = self . tms * self . kBps # \u79d2\u6570(s) * \u901f\u7387(kBps) = \u6570\u636e\u5927\u5c0f(kB), \u8fd9\u5c31\u662f\u5f00\u59cb\u622a\u53d6\u7684\u4f4d\u7f6e last_part = ( self . pms - self . tms ) * self . kBps # \u540c\u7406, \u8fd9\u5c31\u662f\u7ed3\u675f\u622a\u53d6\u7684\u4f4d\u7f6e with open ( self . file , 'rb' ) as start_f : start_f . read ( int ( first_part )) # \u8bfb\u53d6\u5230\u8981\u622a\u53d6\u7684\u4f4d\u7f6e with open ( f ' { self . name } _cut.mp3' , 'wb' ) as stop_f : stop_f . write ( start_f . read ( int ( last_part ))) # \u5728\u65b0\u6587\u4ef6\u5199\u5165\u5230\u8981\u7ed3\u675f\u622a\u53d6\u7684\u4f4d\u7f6e def main (): mp3 = Mp3Cut () mp3 . start_time () mp3 . stop_time () mp3 . cut_mp3 () if __name__ == '__main__' : main () \u8fd0\u884c: python a.py xxxx.mp3 \u8bf7\u8f93\u5165\u5f00\u59cb\u65f6\u95f4\uff08\u5206\u79d2\u4ee5.\u5206\u9694\uff09\uff1a0.50 \u8bf7\u8f93\u5165\u7ed3\u675f\u65f6\u95f4\uff08\u5206\u79d2\u4ee5.\u5206\u9694\uff09\uff1a1.20 \u8f93\u51fa: \u5373\u53ef\u622a\u53d6\u672c\u9996\u6b4c\u66f2\u4ece0\u520650\u79d2\u52301\u520620\u4e2d\u4e4b\u95f4\u768430\u79d2\u957f\u5ea6\u7684\u6b4c\u66f2","title":"Mp3Cut"},{"location":"python/other/Mp3Cut/#mp3cut","text":"import sys from mutagen.mp3 import MP3 \"\"\" \u9700: pip install mutagen \"\"\" class Mp3Cut ( object ): def __init__ ( self ): # \u8bfb\u53d6\u6b4c\u66f2\u540d\u79f0 self . file = sys . argv [ 1 ] # \u83b7\u53d6\u6bd4\u7279\u7387(kbps), kb\u662f1000bit, p\u662fper, s\u662fsecond, \u5373\u6bcf\u79d2\u4f20\u8f93\u7684\u6570\u636e\u91cf mp3 = MP3 ( '\u738b\u529b\u5b8f - \u5929\u5730\u9f99\u9cde.mp3' ) bitrate = mp3 . info . bitrate # kb / 8 \u5c31\u662f\u6bd4\u7279(bit)\u5230\u5b57\u8282(Byte)\u7684\u8f6c\u6362, \u5373\u6bcf\u79d2\u4f20\u8f93\u591a\u5c11\u5b57\u8282 self . kBps = bitrate / 8 # \u83b7\u53d6\u6587\u4ef6\u540d\uff08\u4e0d\u5305\u62ec\u6587\u4ef6\u6269\u5c55\u540d\uff09 self . name = self . file [: self . file . rindex ( '.' )] def start_time ( self ): tt = input ( \"\u8bf7\u8f93\u5165\u5f00\u59cb\u65f6\u95f4, \u5206\u79d2\u4ee5.\u5206\u9694: \" ) minute = int ( tt . split ( '.' )[ 0 ]) # \u53d6\u5206 second = int ( tt . split ( '.' )[ 1 ]) # \u53d6\u79d2 self . tms = minute * 60 + second # \u4e00\u5171\u591a\u5c11\u79d2 def stop_time ( self ): pt = input ( \"\u8bf7\u8f93\u5165\u7ed3\u675f\u65f6\u95f4, \u5206\u79d2\u4ee5.\u5206\u9694: \" ) minute = int ( pt . split ( '.' )[ 0 ]) second = int ( pt . split ( '.' )[ 1 ]) self . pms = minute * 60 + second def cut_mp3 ( self ): first_part = self . tms * self . kBps # \u79d2\u6570(s) * \u901f\u7387(kBps) = \u6570\u636e\u5927\u5c0f(kB), \u8fd9\u5c31\u662f\u5f00\u59cb\u622a\u53d6\u7684\u4f4d\u7f6e last_part = ( self . pms - self . tms ) * self . kBps # \u540c\u7406, \u8fd9\u5c31\u662f\u7ed3\u675f\u622a\u53d6\u7684\u4f4d\u7f6e with open ( self . file , 'rb' ) as start_f : start_f . read ( int ( first_part )) # \u8bfb\u53d6\u5230\u8981\u622a\u53d6\u7684\u4f4d\u7f6e with open ( f ' { self . name } _cut.mp3' , 'wb' ) as stop_f : stop_f . write ( start_f . read ( int ( last_part ))) # \u5728\u65b0\u6587\u4ef6\u5199\u5165\u5230\u8981\u7ed3\u675f\u622a\u53d6\u7684\u4f4d\u7f6e def main (): mp3 = Mp3Cut () mp3 . start_time () mp3 . stop_time () mp3 . cut_mp3 () if __name__ == '__main__' : main () \u8fd0\u884c: python a.py xxxx.mp3 \u8bf7\u8f93\u5165\u5f00\u59cb\u65f6\u95f4\uff08\u5206\u79d2\u4ee5.\u5206\u9694\uff09\uff1a0.50 \u8bf7\u8f93\u5165\u7ed3\u675f\u65f6\u95f4\uff08\u5206\u79d2\u4ee5.\u5206\u9694\uff09\uff1a1.20 \u8f93\u51fa: \u5373\u53ef\u622a\u53d6\u672c\u9996\u6b4c\u66f2\u4ece0\u520650\u79d2\u52301\u520620\u4e2d\u4e4b\u95f4\u768430\u79d2\u957f\u5ea6\u7684\u6b4c\u66f2","title":"Mp3Cut"},{"location":"python/other/UNZIP/","text":"UNZIP import pathlib import sys import pathlib import zipfile def un_zip_file (): \"\"\" \u89e3\u538b\u591a\u4e2aZIP\u6587\u4ef6 python un_zip.py file1.zip file2.zip file3.zip ... \u89e3\u538b\u540e\u751f\u6210\u6587\u4ef6\u5939 file1 file2 file3 ... \u6bcf\u4e2a\u6587\u4ef6\u5939\u4e2d\u5c31\u662fzip\u89e3\u538b\u540e\u7684\u6587\u4ef6 \"\"\" zip_files = sys . argv [ 1 :] for zip_file in zip_files : # \u83b7\u53d6 \u53bb\u9664\u6389 .zip \u540e\u7684\u540d\u79f0 dir_nbame = zip_file [: - 4 ] # \u7528\u4e0a\u9762\u7684\u540d\u79f0\u5f53\u4f5c\u6587\u4ef6\u5939\u7684\u540d\u79f0 if not pathlib . Path ( dir_nbame ) . is_dir (): pathlib . Path ( dir_nbame ) . mkdir () with zipfile . ZipFile ( zip_file , \"r\" ) as f : file_list = f . namelist () print ( f '\u538b\u7f29\u6587\u4ef6 { zip_file } \u4e00\u5171\u6709 { len ( file_list ) } \u4e2a: ' ) for index , file in enumerate ( file_list ): print ( f ' { index + 1 } : { file } ' ) un_zip_file_number = int ( input ( '\u8bf7\u8f93\u5165\u8981\u89e3\u538b\u7684\u6587\u4ef6(\u8f93\u51650\u89e3\u538b\u6240\u6709): ' )) if un_zip_file_number > len ( file_list ): print ( '\u7f16\u53f7\u9519\u8bef' ) continue if un_zip_file_number == 0 : f . extractall ( path = dir_nbame ) else : f . extract ( file_list [ un_zip_file_number - 1 ], path = dir_nbame ) def main (): un_zip_file () if __name__ == '__main__' : main ()","title":"UNZIP"},{"location":"python/other/UNZIP/#unzip","text":"import pathlib import sys import pathlib import zipfile def un_zip_file (): \"\"\" \u89e3\u538b\u591a\u4e2aZIP\u6587\u4ef6 python un_zip.py file1.zip file2.zip file3.zip ... \u89e3\u538b\u540e\u751f\u6210\u6587\u4ef6\u5939 file1 file2 file3 ... \u6bcf\u4e2a\u6587\u4ef6\u5939\u4e2d\u5c31\u662fzip\u89e3\u538b\u540e\u7684\u6587\u4ef6 \"\"\" zip_files = sys . argv [ 1 :] for zip_file in zip_files : # \u83b7\u53d6 \u53bb\u9664\u6389 .zip \u540e\u7684\u540d\u79f0 dir_nbame = zip_file [: - 4 ] # \u7528\u4e0a\u9762\u7684\u540d\u79f0\u5f53\u4f5c\u6587\u4ef6\u5939\u7684\u540d\u79f0 if not pathlib . Path ( dir_nbame ) . is_dir (): pathlib . Path ( dir_nbame ) . mkdir () with zipfile . ZipFile ( zip_file , \"r\" ) as f : file_list = f . namelist () print ( f '\u538b\u7f29\u6587\u4ef6 { zip_file } \u4e00\u5171\u6709 { len ( file_list ) } \u4e2a: ' ) for index , file in enumerate ( file_list ): print ( f ' { index + 1 } : { file } ' ) un_zip_file_number = int ( input ( '\u8bf7\u8f93\u5165\u8981\u89e3\u538b\u7684\u6587\u4ef6(\u8f93\u51650\u89e3\u538b\u6240\u6709): ' )) if un_zip_file_number > len ( file_list ): print ( '\u7f16\u53f7\u9519\u8bef' ) continue if un_zip_file_number == 0 : f . extractall ( path = dir_nbame ) else : f . extract ( file_list [ un_zip_file_number - 1 ], path = dir_nbame ) def main (): un_zip_file () if __name__ == '__main__' : main ()","title":"UNZIP"},{"location":"python/other/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/","text":"# search def search ( li , item ): \"\"\"\u4e8c\u5206\u67e5\u627e\u9002\u7528\u4e8e\u6709\u5e8f\u5217\u8868\"\"\" n = len ( li ) if n == 0 : return False # \u4ece\u4e00\u534a\u7684\u4f4d\u7f6e\u5f00\u59cb\u627e mid = n // 2 # \u90a3\u4e2d\u95f4\u4f4d\u7f6e\u6570\u636e\u4e0e\u8981\u627e\u7684\u6570\u636e\u6bd4\u8f83 if item == li [ mid ]: return True elif item > li [ mid ]: # \u6b63\u5e8f\u65f6\uff0c\u5927\u4e8emid \u5f80\u53f3\u627e return search ( li [ mid + 1 :], item ) else : # \u6b63\u5e8f\u65f6\uff0c\u5c0f\u4e8emid \u5f80\u5de6\u627e return search ( li [: mid ], item ) if __name__ == '__main__' : l = [ 1 , 2 , 3 , 4 , 5 , 6 ] print ( search ( l , 1 )) print ( search ( l , 3 )) print ( search ( l , 6 )) print ( search ( l , 0 )) print ( search ( l , 9 )) # \u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(logn)","title":"\u4e8c\u5206\u67e5\u627e"},{"location":"python/other/%E4%BA%8C%E5%8F%89%E6%A0%91/","text":"# tree class Node ( object ): \"\"\"\u4e8c\u53c9\u6811\u7684\u8282\u70b9\"\"\" def __init__ ( self , item ): # \u8bb0\u5f55\u6570\u636e self . item = item # \u8bb0\u5f55\u5de6\u5b69\u5b50 self . left = None # \u8bb0\u5f55\u53f3\u5b69\u5b50 self . right = None class Tree ( object ): \"\"\"\u4e8c\u53c9\u6811\"\"\" def __init__ ( self ): # \u8bb0\u5f55\u6839\u8282\u70b9 self . __root = None def add ( self , item ): \"\"\"\u6dfb\u52a0\u8282\u70b9\"\"\" new_node = Node ( item ) if self . __root is None : self . __root = new_node return # \u4ece\u4e0a\u5230\u4e0b\uff0c\u4ece\u5de6\u5230\u53f3\u904d\u5386\uff0c\u7528\u5230\u961f\u5217 queue = [] queue . append ( self . __root ) while queue : node = queue . pop ( 0 ) # \u5224\u65ad\u5f53\u524d\u8282\u70b9\uff0c\u5de6\u53f3\u6709\u6ca1\u6709\u5b50\u8282\u70b9 if node . left is None : node . left = new_node return if node . right is None : node . right = new_node return # \u628a\u5f53\u524d\u8282\u70b9\u7684\u5de6\u53f3\u5b50\u8282\u70b9\u6dfb\u52a0\u5230\u961f\u5217\uff0c\u5c06\u8981\u5904\u7406 queue . append ( node . left ) queue . append ( node . right ) def breath_travel ( self ): \"\"\"\u5e7f\u5ea6\u4f18\u5148\u904d\u5386 \u4ece\u4e0a\u5230\u4e0b\uff0c\u4ece\u5de6\u5230\u53f3\u904d\u5386\uff0c\u7528\u5230\u961f\u5217\"\"\" if self . __root is None : return queue = [] queue . append ( self . __root ) while queue : node = queue . pop ( 0 ) print ( node . item , end = \" \" ) if node . left is not None : queue . append ( node . left ) if node . right is not None : queue . append ( node . right ) print () def depth_travel ( self ): \"\"\"\u6df1\u5ea6\u4f18\u5148\u904d\u5386\"\"\" self . pre_order ( self . __root ) print () self . in_order ( self . __root ) print () self . post_order ( self . __root ) print () def pre_order ( self , node ): \"\"\"\u6839 \u5de6 \u53f3\"\"\" if node is None : return print ( node . item , end = \" \" ) self . pre_order ( node . left ) self . pre_order ( node . right ) def in_order ( self , node ): \"\"\"\u5de6 \u6839 \u53f3\"\"\" if node is None : return self . in_order ( node . left ) print ( node . item , end = \" \" ) self . in_order ( node . right ) def post_order ( self , node ): \"\"\"\u5de6 \u53f3 \u6839\"\"\" if node is None : return self . post_order ( node . left ) self . post_order ( node . right ) print ( node . item , end = \" \" ) if __name__ == '__main__' : tree = Tree () tree . add ( 0 ) tree . add ( 1 ) tree . add ( 2 ) tree . add ( 3 ) tree . add ( 4 ) tree . add ( 5 ) tree . add ( 6 ) tree . add ( 7 ) tree . add ( 8 ) tree . add ( 9 ) tree . breath_travel () tree . depth_travel ()","title":"\u4e8c\u53c9\u6811"},{"location":"python/other/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8/","text":"\u81ea\u5b9a\u4e49\u5f02\u5e38 class AgeException ( Exception ): \"\"\"\u81ea\u5b9a\u4e49\u5f02\u5e38\"\"\" def __init__ ( self , age ): self . age = age def __str__ ( self ): return f 'Wrong Age: { self . age } ' def main (): age = 0 if age <= 0 : raise AgeException ( age ) print ( age ) if __name__ == '__main__' : main ()","title":"\u81ea\u5b9a\u4e49\u5f02\u5e38"},{"location":"python/other/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8/#_1","text":"class AgeException ( Exception ): \"\"\"\u81ea\u5b9a\u4e49\u5f02\u5e38\"\"\" def __init__ ( self , age ): self . age = age def __str__ ( self ): return f 'Wrong Age: { self . age } ' def main (): age = 0 if age <= 0 : raise AgeException ( age ) print ( age ) if __name__ == '__main__' : main ()","title":"\u81ea\u5b9a\u4e49\u5f02\u5e38"},{"location":"python/other/%E9%9A%8F%E6%9C%BA%E5%AD%97%E7%AC%A6%E4%B8%B2/","text":"\u968f\u673a\u5b57\u7b26\u4e32 import random import secrets import string def generate_random_str ( length = 6 ): \"\"\" \u751f\u6210\u6307\u5b9a\u957f\u5ea6\u7684\u968f\u673a\u5b57\u7b26\u4e32 \u4e00\u822c\u7528\u4e8e\u9a8c\u8bc1\u7801 \"\"\" # \u7eaf\u6570\u5b57\u7684\u968f\u673a\u5b57\u7b26\u4e32 print ( '' . join ( random . sample ( string . digits , length ))) # \u7eaf\u5c0f\u5199\u5b57\u6bcd\u7684\u968f\u673a\u5b57\u7b26\u4e32 print ( '' . join ( random . sample ( string . ascii_lowercase , length ))) # \u7eaf\u5927\u5199\u5b57\u6bcd\u7684\u968f\u673a\u5b57\u7b26\u4e32 print ( '' . join ( random . sample ( string . ascii_uppercase , length ))) # \u6df7\u5408\u6570\u5b57\u548c\u5927\u5c0f\u5199\u5b57\u6bcd\u7684\u968f\u673a\u5b57\u7b26\u4e32 str_source = string . digits + string . ascii_lowercase + string . ascii_uppercase print ( '' . join ( random . sample ( str_source , length ))) def generate_random_key ( length = None ): \"\"\" \u751f\u6210\u968f\u673a\u5bc6\u94a5 \u4e00\u822c\u7528\u4e8e\u5b89\u5168\u5bc6\u94a5, \u4f8b\u5982Flask\u7684Secret Key \"\"\" # \u8fd4\u56de\u957f\u5ea6length\u7684\u968f\u673a\u5b57\u8282\u5b57\u7b26\u4e32, length\u9ed8\u8ba4\u662f32 print ( secrets . token_bytes ( length )) # \u8fd4\u56de\u957f\u5ea6length*2\u7684\u968f\u673a16\u8fdb\u5236\u5b57\u7b26\u4e32, length\u9ed8\u8ba4\u662f32 print ( secrets . token_hex ( length )) # \u8fd4\u56de\u4e00\u4e2a\u7ecf\u8fc7Base64\u7f16\u7801\u540e\u7684URL\u5b89\u5168\u7684\u5b57\u7b26\u4e32 # length\u9ed8\u8ba4\u662f32, \u4f46\u7ecf\u8fc7Base64\u7f16\u7801\u957f\u5ea6\u4e0d\u786e\u5b9a print ( secrets . token_urlsafe ( length )) if __name__ == '__main__' : generate_random_str () generate_random_key () \u8f93\u51fa: 063582 yqctlu QHXYOM UxcjHt b'\\xb5\\xc7\\xa7b\\xd3\\xc6\\xfa^\\xa2\\xbe\\xcaP\\x19\\x82G+9\\xac\\xf7\\xc5\\xc6\\xb3i\\x0e\\x8a\\xddzH\\xb0\\xf3\\xc2J' 58a595f814c34a90254c17f7b02986bc603c0972811d386d6d4ef86e9e45a4a8 ablQClbICKIjHYmEGYtqKo-ZT9CmlbXxrXL1FyiGc3E","title":"\u968f\u673a\u5b57\u7b26\u4e32"},{"location":"python/other/%E9%9A%8F%E6%9C%BA%E5%AD%97%E7%AC%A6%E4%B8%B2/#_1","text":"import random import secrets import string def generate_random_str ( length = 6 ): \"\"\" \u751f\u6210\u6307\u5b9a\u957f\u5ea6\u7684\u968f\u673a\u5b57\u7b26\u4e32 \u4e00\u822c\u7528\u4e8e\u9a8c\u8bc1\u7801 \"\"\" # \u7eaf\u6570\u5b57\u7684\u968f\u673a\u5b57\u7b26\u4e32 print ( '' . join ( random . sample ( string . digits , length ))) # \u7eaf\u5c0f\u5199\u5b57\u6bcd\u7684\u968f\u673a\u5b57\u7b26\u4e32 print ( '' . join ( random . sample ( string . ascii_lowercase , length ))) # \u7eaf\u5927\u5199\u5b57\u6bcd\u7684\u968f\u673a\u5b57\u7b26\u4e32 print ( '' . join ( random . sample ( string . ascii_uppercase , length ))) # \u6df7\u5408\u6570\u5b57\u548c\u5927\u5c0f\u5199\u5b57\u6bcd\u7684\u968f\u673a\u5b57\u7b26\u4e32 str_source = string . digits + string . ascii_lowercase + string . ascii_uppercase print ( '' . join ( random . sample ( str_source , length ))) def generate_random_key ( length = None ): \"\"\" \u751f\u6210\u968f\u673a\u5bc6\u94a5 \u4e00\u822c\u7528\u4e8e\u5b89\u5168\u5bc6\u94a5, \u4f8b\u5982Flask\u7684Secret Key \"\"\" # \u8fd4\u56de\u957f\u5ea6length\u7684\u968f\u673a\u5b57\u8282\u5b57\u7b26\u4e32, length\u9ed8\u8ba4\u662f32 print ( secrets . token_bytes ( length )) # \u8fd4\u56de\u957f\u5ea6length*2\u7684\u968f\u673a16\u8fdb\u5236\u5b57\u7b26\u4e32, length\u9ed8\u8ba4\u662f32 print ( secrets . token_hex ( length )) # \u8fd4\u56de\u4e00\u4e2a\u7ecf\u8fc7Base64\u7f16\u7801\u540e\u7684URL\u5b89\u5168\u7684\u5b57\u7b26\u4e32 # length\u9ed8\u8ba4\u662f32, \u4f46\u7ecf\u8fc7Base64\u7f16\u7801\u957f\u5ea6\u4e0d\u786e\u5b9a print ( secrets . token_urlsafe ( length )) if __name__ == '__main__' : generate_random_str () generate_random_key () \u8f93\u51fa: 063582 yqctlu QHXYOM UxcjHt b'\\xb5\\xc7\\xa7b\\xd3\\xc6\\xfa^\\xa2\\xbe\\xcaP\\x19\\x82G+9\\xac\\xf7\\xc5\\xc6\\xb3i\\x0e\\x8a\\xddzH\\xb0\\xf3\\xc2J' 58a595f814c34a90254c17f7b02986bc603c0972811d386d6d4ef86e9e45a4a8 ablQClbICKIjHYmEGYtqKo-ZT9CmlbXxrXL1FyiGc3E","title":"\u968f\u673a\u5b57\u7b26\u4e32"},{"location":"python/other/%E9%AD%94%E6%B3%95%E6%96%B9%E6%B3%95--%E5%AD%97%E5%85%B8/","text":"\u9b54\u6cd5\u65b9\u6cd5 -- \u5b57\u5178 \u4ee3\u7801 class Demo ( object ): def __init__ ( self , start = 0 , step = 1 ): self . start = start self . step = step self . changed = {} def __getitem__ ( self , key ): try : return self . changed [ key ] except KeyError : return self . start + key * self . step def __setitem__ ( self , key , value ): self . changed [ key ] = value print ( '\u957f\u5ea61: ' , len ( self . changed )) def __delitem__ ( self , key ): self . changed . pop ( key ) print ( '\u957f\u5ea62: ' , len ( self . changed )) def main (): demo = Demo ( 1 , 2 ) # \u81ea\u52a8\u89e6\u53d1\u6267\u884c __getitem__ print ( demo [ 4 ]) print ( demo . changed ) # \u81ea\u52a8\u89e6\u53d1\u6267\u884c __setitem__ demo [ 4 ] = 2 print ( demo [ 4 ]) print ( demo . changed ) # \u81ea\u52a8\u89e6\u53d1\u6267\u884c __delitem__ del demo [ 4 ] print ( demo . changed ) if __name__ == '__main__' : main () \u8f93\u51fa: 9 {} \u957f\u5ea61: 1 2 {4: 2} \u957f\u5ea62: 0 {} PS: \u524d\u540e\u53cc\u4e0b\u5212\u7ebf\u7684\u65b9\u6cd5, \u4ee5\u524d\u53eb\u9b54\u6cd5(magic)\u53d8\u91cf\u6216\u9b54\u6cd5\u65b9\u6cd5, \u73b0\u5728\u53ebdunders","title":"\u9b54\u6cd5\u65b9\u6cd5 -- \u5b57\u5178"},{"location":"python/other/%E9%AD%94%E6%B3%95%E6%96%B9%E6%B3%95--%E5%AD%97%E5%85%B8/#-","text":"\u4ee3\u7801 class Demo ( object ): def __init__ ( self , start = 0 , step = 1 ): self . start = start self . step = step self . changed = {} def __getitem__ ( self , key ): try : return self . changed [ key ] except KeyError : return self . start + key * self . step def __setitem__ ( self , key , value ): self . changed [ key ] = value print ( '\u957f\u5ea61: ' , len ( self . changed )) def __delitem__ ( self , key ): self . changed . pop ( key ) print ( '\u957f\u5ea62: ' , len ( self . changed )) def main (): demo = Demo ( 1 , 2 ) # \u81ea\u52a8\u89e6\u53d1\u6267\u884c __getitem__ print ( demo [ 4 ]) print ( demo . changed ) # \u81ea\u52a8\u89e6\u53d1\u6267\u884c __setitem__ demo [ 4 ] = 2 print ( demo [ 4 ]) print ( demo . changed ) # \u81ea\u52a8\u89e6\u53d1\u6267\u884c __delitem__ del demo [ 4 ] print ( demo . changed ) if __name__ == '__main__' : main () \u8f93\u51fa: 9 {} \u957f\u5ea61: 1 2 {4: 2} \u957f\u5ea62: 0 {} PS: \u524d\u540e\u53cc\u4e0b\u5212\u7ebf\u7684\u65b9\u6cd5, \u4ee5\u524d\u53eb\u9b54\u6cd5(magic)\u53d8\u91cf\u6216\u9b54\u6cd5\u65b9\u6cd5, \u73b0\u5728\u53ebdunders","title":"\u9b54\u6cd5\u65b9\u6cd5 -- \u5b57\u5178"},{"location":"python/queue-stack/%E5%A0%86/","text":"# queue\uff0c\u5148\u8fdb\u5148\u51fa(FIFO: First In First Out) class Queue ( object ): \"\"\"\u5806\"\"\" def __init__ ( self ): \"\"\"\u521b\u5efa\u4e00\u4e2a\u7a7a\u7684\u961f\u5217\"\"\" self . data = [] def enqueue ( self , item ): \"\"\"\u5f80\u961f\u5217\u4e2d\u6dfb\u52a0\u4e00\u4e2aitem\u5143\u7d20\"\"\" self . data . append ( item ) def dequeue ( self ): \"\"\"\u4ece\u961f\u5217\u5934\u90e8\u5220\u9664\u4e00\u4e2a\u5143\u7d20\"\"\" return self . data . pop ( 0 ) def is_empty ( self ): \"\"\"\u5224\u65ad\u4e00\u4e2a\u961f\u5217\u662f\u5426\u4e3a\u7a7a\"\"\" return self . data == [] def size ( self ): \"\"\"\u8fd4\u56de\u961f\u5217\u7684\u5927\u5c0f\"\"\" return len ( self . data ) if __name__ == '__main__' : queue = Queue () print ( queue . is_empty ()) queue . enqueue ( 1 ) queue . enqueue ( 3 ) queue . enqueue ( 2 ) print ( queue . is_empty ()) print ( queue . dequeue ()) print ( queue . dequeue ()) print ( queue . dequeue ())","title":"\u5806"},{"location":"python/queue-stack/%E5%A0%86%E6%A0%88/","text":"\"\"\" deque\uff0c\u53c8\u53eb\u53cc\u7aef\u961f\u5217\uff0c\u56e0\u4e3a\u65e2\u53ef\u4ee5\u5148\u8fdb\u5148\u51fa\u4e5f\u53ef\u4ee5\u540e\u8fdb\u5148\u51fa \u4ee5\u4e0b\u4f7f\u7528\u5217\u8868\u6a21\u62df Python\u5185\u7f6e\u4e86\u771f\u6b63\u7684\u53cc\u7aef\u961f\u5217,\u8bf7\u53c2\u8003 https://docs.python.org/zh-cn/3/library/collections.html#collections.deque \"\"\" class Deque ( object ): \"\"\"\u53cc\u7aef\u961f\u5217\"\"\" def __init__ ( self ): \"\"\"\u521b\u5efa\u4e00\u4e2a\u7a7a\u7684\u53cc\u7aef\u961f\u5217\"\"\" self . data = [] def add_front ( self , item ): \"\"\"\u4ece\u961f\u5934\u52a0\u5165\u4e00\u4e2aitem\u5143\u7d20\"\"\" self . data . insert ( 0 , item ) def add_rear ( self , item ): \"\"\"\u4ece\u961f\u5c3e\u52a0\u5165\u4e00\u4e2aitem\u5143\u7d20\"\"\" self . data . append ( item ) def remove_front ( self ): \"\"\"\u4ece\u961f\u5934\u5220\u9664\u4e00\u4e2aitem\u5143\u7d20\"\"\" return self . data . pop ( 0 ) def remove_rear ( self ): \"\"\"\u4ece\u961f\u5c3e\u5220\u9664\u4e00\u4e2aitem\u5143\u7d20\"\"\" return self . data . pop () if __name__ == '__main__' : deque = Deque () # \u5f53\u6210\u6808\u4f7f\u7528 deque . add_rear ( 1 ) deque . add_rear ( 2 ) deque . add_rear ( 3 ) print ( deque . remove_rear ()) print ( deque . remove_rear ()) print ( deque . remove_rear ()) # \u5f53\u6210\u961f\u5217\u4f7f\u7528 deque . add_front ( 1 ) deque . add_front ( 2 ) deque . add_front ( 3 ) print ( deque . remove_rear ()) print ( deque . remove_rear ()) print ( deque . remove_rear ())","title":"\u5806\u6808"},{"location":"python/queue-stack/%E6%A0%88/","text":"# stack\uff0c\u540e\u8fdb\u5148\u51fa(LIFO: Last In First Out) class Stack ( object ): \"\"\" \u4f7f\u7528\u5217\u8868\u5b9e\u73b0\u7684\u987a\u5e8f\u6808 \"\"\" def __init__ ( self ): \"\"\"\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7a7a\u6808\"\"\" self . data = [] def push ( self , item ): \"\"\"\u5165\u6808\uff0c\u8fdb\u6808\uff0c\u538b\u6808\"\"\" self . data . append ( item ) def pop ( self ): \"\"\"\u51fa\u6808\uff0c\u9000\u6808\"\"\" return self . data . pop () def peek ( self ): \"\"\"\u8fd4\u56de\u6808\u9876\u5143\u7d20\"\"\" return self . data [ - 1 ] def is_empty ( self ): \"\"\"\u5224\u65ad\u6808\u662f\u5426\u4e3a\u7a7a\"\"\" return self . data == [] def size ( self ): \"\"\"\u8fd4\u56de\u6808\u7684\u5143\u7d20\u4e2a\u6570\"\"\" return len ( self . data ) if __name__ == '__main__' : stack = Stack () stack . push ( 1 ) stack . push ( 2 ) stack . push ( 3 ) print ( stack . peek ()) print ( stack . pop ()) print ( stack . pop ()) print ( stack . pop ())","title":"\u6808"},{"location":"python/single-multiple-instance/%E5%8D%95%E4%BE%8B/","text":"\u5355\u4f8b class Singleton : \"\"\"\u5355\u4f8b\u6a21\u5f0f\u4e14\u53ea\u521d\u59cb\u5316\u4e00\u6b21\"\"\" instance = None init = False def __new__ ( cls , * args , ** kwargs ): \"\"\"\u5355\u4f8b\"\"\" if cls . instance is None : # \u8c03\u7528\u57fa\u7c7bobject\u8fdb\u884c\u5b9e\u4f8b\uff0c\u5e76\u7528instance\u8bb0\u5f55\u5b9e\u4f8b\u5730\u5740 cls . instance = object . __new__ ( cls ) # \u4e5f\u53ef\u7528 super() \u66ff\u6362 object, \u662f\u4e00\u6837\u7684 # \u8bb0\u5f55\u5730\u5740\u4ee5\u540e\uff0c\u540e\u7eed\u7684\u5b9e\u4f8b\u5316\u5bf9\u8c61\u64cd\u4f5c\u90fd\u8fd4\u56de\u8fd9\u4e2a\u6700\u5f00\u59cb\u7684\u5b9e\u4f8b\u5730\u5740 return cls . instance def __init__ ( self ): \"\"\"\u521d\u59cb\u5316\u4e00\u6b21\"\"\" if self . init : return print ( '\u521d\u59cb\u5316' ) self . init = True def main (): dog = Singleton () cat = Singleton () pig = Singleton () print ( id ( dog ) == id ( cat ) == id ( pig )) if __name__ == '__main__' : main () \u8f93\u51fa: \u521d\u59cb\u5316 True","title":"\u5355\u4f8b"},{"location":"python/single-multiple-instance/%E5%8D%95%E4%BE%8B/#_1","text":"class Singleton : \"\"\"\u5355\u4f8b\u6a21\u5f0f\u4e14\u53ea\u521d\u59cb\u5316\u4e00\u6b21\"\"\" instance = None init = False def __new__ ( cls , * args , ** kwargs ): \"\"\"\u5355\u4f8b\"\"\" if cls . instance is None : # \u8c03\u7528\u57fa\u7c7bobject\u8fdb\u884c\u5b9e\u4f8b\uff0c\u5e76\u7528instance\u8bb0\u5f55\u5b9e\u4f8b\u5730\u5740 cls . instance = object . __new__ ( cls ) # \u4e5f\u53ef\u7528 super() \u66ff\u6362 object, \u662f\u4e00\u6837\u7684 # \u8bb0\u5f55\u5730\u5740\u4ee5\u540e\uff0c\u540e\u7eed\u7684\u5b9e\u4f8b\u5316\u5bf9\u8c61\u64cd\u4f5c\u90fd\u8fd4\u56de\u8fd9\u4e2a\u6700\u5f00\u59cb\u7684\u5b9e\u4f8b\u5730\u5740 return cls . instance def __init__ ( self ): \"\"\"\u521d\u59cb\u5316\u4e00\u6b21\"\"\" if self . init : return print ( '\u521d\u59cb\u5316' ) self . init = True def main (): dog = Singleton () cat = Singleton () pig = Singleton () print ( id ( dog ) == id ( cat ) == id ( pig )) if __name__ == '__main__' : main () \u8f93\u51fa: \u521d\u59cb\u5316 True","title":"\u5355\u4f8b"},{"location":"python/single-multiple-instance/%E5%A4%9A%E5%AE%9E%E4%BE%8B%E8%AE%A1%E6%95%B0/","text":"\u591a\u5b9e\u4f8b\u8ba1\u6570 class MyClass ( object ): \"\"\"\u591a\u5b9e\u4f8b\u8ba1\u6570\"\"\" __num = 0 def __new__ ( cls , * args , ** kwargs ): cls . __num += 1 return object . __new__ ( cls ) # \u65b9\u6cd51 # def __del__(self): # MyClass.__num -= 1 # \u65b9\u6cd52 @classmethod def __del__ ( cls ): cls . __num -= 1 # \u65b9\u6cd51 # @staticmethod # def get_nums(): # return MyClass.__num # \u65b9\u6cd52 @classmethod def get_nums ( cls ): return cls . __num def main (): mc1 = MyClass () print ( mc1 . get_nums ()) mc2 = MyClass () print ( mc1 . get_nums ()) del mc2 print ( MyClass . get_nums ()) del mc1 print ( MyClass . get_nums ()) if __name__ == '__main__' : main () \u8f93\u51fa: 1 2 1 0","title":"\u591a\u5b9e\u4f8b\u8ba1\u6570"},{"location":"python/single-multiple-instance/%E5%A4%9A%E5%AE%9E%E4%BE%8B%E8%AE%A1%E6%95%B0/#_1","text":"class MyClass ( object ): \"\"\"\u591a\u5b9e\u4f8b\u8ba1\u6570\"\"\" __num = 0 def __new__ ( cls , * args , ** kwargs ): cls . __num += 1 return object . __new__ ( cls ) # \u65b9\u6cd51 # def __del__(self): # MyClass.__num -= 1 # \u65b9\u6cd52 @classmethod def __del__ ( cls ): cls . __num -= 1 # \u65b9\u6cd51 # @staticmethod # def get_nums(): # return MyClass.__num # \u65b9\u6cd52 @classmethod def get_nums ( cls ): return cls . __num def main (): mc1 = MyClass () print ( mc1 . get_nums ()) mc2 = MyClass () print ( mc1 . get_nums ()) del mc2 print ( MyClass . get_nums ()) del mc1 print ( MyClass . get_nums ()) if __name__ == '__main__' : main () \u8f93\u51fa: 1 2 1 0","title":"\u591a\u5b9e\u4f8b\u8ba1\u6570"},{"location":"python/sort/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/","text":"# bubblesort \"\"\" \u7528\u7b2c\u4e00\u4e2a\u6570\u548c\u7b2c\u4e8c\u4e2a\u6570\u6bd4\u8f83\uff0c\u5982\u679c\u524d\u8005\u5c0f\u4e8e\u540e\u8005\uff0c\u4e0d\u505a\u4ea4\u6362\uff0c\u5426\u5219\u4ea4\u6362\u4f4d\u7f6e \u7136\u540e\u7528\u7b2c\u4e8c\u4e2a\u6570\u548c\u7b2c\u4e09\u4e2a\u6570\u6bd4\u8f83\uff0c\u5982\u679c\u524d\u8005\u5c0f\u4e8e\u540e\u8005\uff0c\u4e0d\u505a\u4ea4\u6362\uff0c\u5426\u5219\u4ea4\u6362\u4f4d\u7f6e \u4ee5\u6b64\u7c7b\u63a8\uff0c\u7136\u540e\u6700\u5927\u7684\u6570\u5728\u6700\u53f3\u8fb9\uff0c\u6b21\u8981\u5927\u7684\u6570\u5728\u5012\u6570\u7b2c\u4e8c\u4e2a\uff0c\u6700\u7ec8\u5b9e\u73b0\u6392\u5e8f \"\"\" def bubble_sort ( li ): n = len ( li ) # \u5185\u90e8\u5faa\u73af\u6bcf\u4e00\u6b21\u80fd\u628a\u6700\u5927\u7684\u6570\u79fb\u52a8\u5230\u6700\u53f3\u8fb9\uff0c\u5171n-1\u6b21 for j in range ( n - 1 ): # 0 1 2 3 # \u5185\u90e8\u5faa\u73af\u4e00\u904d\uff0c\u5982\u679c\u6ca1\u6709\u6267\u884c\u8fc7\u4ea4\u6362\uff0c\u8bc1\u660e\u6570\u636e\u5df2\u7ecf\u6709\u5e8f\uff08\u63d0\u9ad8\u6548\u7387\uff09 flag = 0 # \u5b9a\u4e49\u6e38\u6807\uff0c\u4ece0\u79fb\u52a8\u5230\u5012\u6570\u7b2c\u4e8c\u4e2a\u4f4d\u7f6e for i in range ( n - 1 - j ): # n-1 n-2 n-3 # \u62ff\u5f53\u524d\u4f4d\u7f6e\u4e0e\u4e0b\u4e00\u4e2a\u4f4d\u7f6e\u7684\u6570\u636e\u6bd4\u8f83 if li [ i ] > li [ i + 1 ]: li [ i ], li [ i + 1 ] = li [ i + 1 ], li [ i ] flag += 1 # \u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u5224\u65ad\uff0c\u5bf9\u4e8e\u5927\u90e8\u5206\u662f\u6709\u5e8f\uff0c\u6700\u540e\u51e0\u4e2a\u5143\u7d20\u65e0\u5e8f\u7684\u5217\u8868\u6765\u8bf4 # \u4f1a\u589e\u52a0\u6ca1\u6709\u5fc5\u8981\u7684\u5faa\u73af\uff0c\u52a0\u4e0a\u4e4b\u540e\u53ef\u4ee5\u63d0\u9ad8\u6548\u7387 if flag == 0 : return if __name__ == '__main__' : l = [ 4 , 2 , 3 , 5 , 1 ] l = [ 5 , 4 , 3 , 2 , 1 ] bubble_sort ( l ) print ( l ) # \u7a33\u5b9a\u6027\uff1a\u7a33\u5b9a # \u6700\u574f\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(n^2) # \u6700\u4f18\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(n)","title":"\u5192\u6ce1\u6392\u5e8f"},{"location":"python/sort/%E5%AD%97%E5%85%B8%E6%8E%92%E5%BA%8F/","text":"\u5b57\u5178\u6392\u5e8f \u57fa\u7840\u7248 \u6309\u7167\u5b57\u5178\u7684key\u6216value\u6392\u5e8f # \u5b57\u5178\u5982\u4e0b\uff1a mydict1 = { 'b' : 3 , 'd' : 1 , 'c' : 2 , 'a' : 4 } mydict2 = { 'name' : '\u5f20\u4e09' , 'age' : '18\u5c81' , 'city' : '\u6df1\u5733' , 'tel' : '13626266627' } print ( '\u5b57\u5178mydict1\u6392\u5e8f\u524d\uff1a' , mydict1 ) print ( '\u5b57\u5178mydict2\u6392\u5e8f\u524d\uff1a' , mydict2 ) print () print ( '\u6309\u7167\u5b57\u5178\u7684key\u6392\u5e8f:' ) print () def func1 ( mydict ): \"\"\" \u65b9\u6cd5\u4e00\uff1a \u601d\u8def\u662f\u5c06k\u548cv\u4ee5\u5143\u7ec4\u7684\u5f62\u5f0f\u7ec4\u6210\u5217\u8868\u5e76\u6392\u5e8f\uff08\u4f1a\u4ee5\u5143\u7ec4\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u5927\u5c0f\u6392\u5e8f\uff0c\u5373k\uff09\uff0c\u518d\u904d\u5386\u5217\u8868\u53d6\u51fa\u5143\u7ec4\uff0c \u5143\u7ec4\u4e2d\u7684\u5143\u7d20\u5206\u522b\u662fk\u548cv,\u653e\u5230\u4e00\u4e2a\u65b0\u7684\u5b57\u5178\u91cc\uff0c\u6700\u540e\u8fd4\u56de\u8fd9\u4e2a\u65b0\u5b57\u5178 \"\"\" mydict2list = sorted ([ item for item in mydict . items ()]) # \u76ee\u7684\u662f\u5c06\u5b57\u5178\u53d8\u6210\u5217\u8868\u518d\u7528sorted()\u6392\u5e8f new_dict = {} # for i in mydict2list : # \u904d\u5386\u51fa\u6765\u7684i\u662f\u4e00\u4e2a\u5143\u7956\uff0c\u5305\u542bkey\u548cvalue\u4e24\u4e2a\u5143\u7d20 new_dict [ i [ 0 ]] = i [ 1 ] print ( '\u65b9\u6cd5\u4e00\u6392\u5e8f\u540e\uff1a' , new_dict ) func1 ( mydict1 ) func1 ( mydict2 ) print () def func2 ( mydict ): \"\"\" \u65b9\u6cd5\u4e8c\uff1a \u7528\u7684\u8fd8\u662f\u65b9\u6cd5\u4e00\u7684\u601d\u8def\uff0c\u4f46\u662fsorted()\u51fd\u6570\u7684\u8fd4\u56de\u503c\u5c31\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u5199\u5217\u8868\u63a8\u5bfc\u5f0f \u5373sorted([item for item in mydict.items()])\u53ef\u4ee5\u7b80\u5199\u6210sorted(mydict.items()) \"\"\" mydict2list = sorted ( mydict . items ()) new_dict = {} for i in mydict2list : new_dict [ i [ 0 ]] = i [ 1 ] print ( '\u65b9\u6cd5\u4e8c\u6392\u5e8f\u540e\uff1a' , new_dict ) func2 ( mydict1 ) func2 ( mydict2 ) print () def func3 ( mydict ): \"\"\" \u65b9\u6cd5\u4e09\uff1a mydict2list\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u5217\u8868\u5185\u7684\u5143\u7d20\u662f\u4e00\u4e2a\u4e2a\u7684\u5143\u7ec4\uff0c\u5143\u7ec4\u91cc\u5305\u542b\u4e24\u4e2a\u5143\u7d20 \u5206\u522b\u662f\u539f\u59cb\u5b57\u5178\u4e2d\u7684key\u548cvalue\uff0c\u800cdict()\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u8f6c\u5316\u8fd9\u79cd\u7ed3\u6784\u6210\u5b57\u5178 \u6240\u4ee5\u5c06for\u5faa\u73af\u7701\u7565\uff0c\u5199\u6210\u4e0b\u9762\u7684\u65b9\u6cd5 \"\"\" mydict2list = sorted ( mydict . items ()) new_dict = dict ( mydict2list ) print ( '\u65b9\u6cd5\u4e09\u6392\u5e8f\u540e\uff1a' , new_dict ) func3 ( mydict1 ) func3 ( mydict2 ) print () def func4 ( mydict ): \"\"\" \u65b9\u6cd5\u56db\uff1a \u65b9\u6cd5\u4e09\u4e2d\u7684\u4e24\u884c\u4ee3\u7801\u53ef\u4ee5\u5408\u5e76\u6210\u4e00\u884c \"\"\" print ( '\u65b9\u6cd5\u56db\u6392\u5e8f\u540e\uff1a' , dict ( sorted ( mydict . items ()))) func4 ( mydict1 ) func4 ( mydict2 ) print () print ( \"\"\" \u603b\u7ed3\u4e0b\u6765\uff0c\u5b57\u5178\u6309\u7167key\u6392\u5e8f\u7684\u683c\u5f0f\u662f\uff1a dict(sorted(mydict.items())) \u5373\uff0c\u6700\u5916\u5c42\u662fdict(),\u4e2d\u95f4\u5c42\u662fsorted()\uff0c\u6700\u5185\u5c42\u662f\u88ab\u6392\u5e8f\u5b57\u5178.items() \u6700\u7ec8\u7ed3\u679c\u5c31\u662f\uff1adict(sorted(mydict.items()))) \"\"\" ) print () print ( '\u62d3\u5c55\uff1a\u53ea\u8981\u5217\u8868\u6216\u8005\u5143\u7956\u4e2d\u7684\u5143\u7d20\uff0c\u662f\u6210\u5bf9\u513f\u51fa\u73b0\u7684\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528dict()\u5c06\u5176\u8f6c\u5316\u6210\u5b57\u5178\uff0c\u4f8b\u5982\uff1a' ) mylist = [[ 'a' , 1 ], [ 'b' , 2 ], ( 'c' , [ 4 ])] print ( '\u5217\u8868\uff1a' , mylist ) print ( '\u5217\u8868\u8f6c\u5b57\u5178\uff1a' , dict ( mylist )) mytuple = ([ 'a' , 1 ], [( 'b' ,), 2 ], ( 'c' , [ 4 ])) print ( '\u5143\u7ec4\uff1a' , mytuple ) print ( '\u5143\u7ec4\u8f6c\u5b57\u5178\uff1a' , dict ( mytuple )) print () def func5 ( mydict ): \"\"\" \u65b9\u6cd5\u4e94\uff1a \u5176\u4e2dsorted()\u65b9\u6cd5\u6709\u4e2a\u53c2\u6570\u662fkey\uff0c\u53ef\u4ee5\u6307\u5b9a\u53c2\u4e0e\u6bd4\u8f83\u7684\u5143\u7d20 \u53ef\u4ee5\u4f7f\u7528lambda\u51fd\u6570\u6765\u8fd4\u56de\u53c2\u4e0e\u6bd4\u8f83\u7684\u5143\u7d20\uff0c\u4e0a\u8ff0\u4ee3\u7801\u53ef\u4ee5\u5199\u6210\u8fd9\u6837: \"\"\" print ( '\u65b9\u6cd5\u4e94\u6392\u5e8f\u540e\uff1a' , dict ( sorted ( mydict . items (), key = lambda x : x [ 0 ]))) # \u5bf9\u6bd4\u65b9\u6cd5\u56db\uff0c\u53d1\u73b0key\u8fd9\u4e2a\u53c2\u6570\u52a0\u4e0d\u52a0\u90fd\u53ef\u4ee5\uff0c\u52a0\u4e0a\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u5f15\u51fa\u540e\u9762\u7684\u6309\u7167value\u6392\u5e8f func5 ( mydict1 ) func5 ( mydict2 ) print () print ( \"\"\"\u4ece\u65b9\u6cd5\u4e00\u5230\u65b9\u6cd5\u56db \u603b\u7ed3\u51fa\u5b57\u5178\u6392\u5e8f\u7684\u6838\u5fc3\u8bed\u53e5\u662f\uff1asorted(mydict.items()) \u800c\u65b9\u6cd5\u4e94\u7684\u6838\u5fc3\u8bed\u53e5\u662f\uff1asorted(mydict.items(),key=lambda x:x[0]) \u5728sorted()\u65b9\u6cd5\u4e2d\u6dfb\u52a0\u4e86\u4e00\u4e2a\u53c2\u6570key\uff0c\u8868\u793a\u6392\u5e8f\u6761\u4ef6\u662flambda x:x[0] \u89e3\u91ca\uff1a \u533f\u540d\u51fd\u6570 lambda x:y \u4e2dx\u8868\u793a\u4f20\u5165\u7684\u53c2\u6570\uff0cy\u8868\u793alambda \u51fd\u6570\u7684\u8fd4\u56de\u503c \u6240\u4ee5 lambda x:x[0] \u8868\u793a\u4f20\u5165\u53c2\u6570x\u8fd4\u56de\u53c2\u6570x\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\uff0c\u5373x[0] \u800c\u5b57\u5178\u7684items()\u65b9\u6cd5\u5c06\u5b57\u5178\u7684k\u548cv\u8f6c\u5316\u4e3a\u4e86\u5143\u7ec4\uff0c\u5e76\u4e14\u88ab\u5f53\u4f5c\u53c2\u6570\u4f20\u7ed9\u4e86lambda\u7684x x\u7684\u7ed3\u6784\u662f(k,v),x[0]\u5c31\u662fk\uff0c\u4e5f\u5c31\u662f\u7528\u5b57\u5178\u7684key\u4f5c\u4e3a\u6392\u5e8f\u6761\u4ef6 \u4e3a\u4e86\u66f4\u52a0\u65b9\u4fbf\u7684\u7406\u89e3\u533f\u540d\u51fd\u6570lambda\uff0c\u53ef\u4ee5\u6539\u5199\u6210\u6b63\u5e38\u7684\u51fd\u6570, \u5e76\u8f93\u51fax\u3001x[0]\u7684\u7ed3\u679c\u548c\u7c7b\u578b \"\"\" ) def mykey ( x ): print ( 'x\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a' , x , type ( x )) print ( 'x[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a' , x [ 0 ], type ( x [ 0 ])) return x [ 0 ] print ( '\u65b9\u6cd5\u4e94\u6392\u5e8f\u540e\uff1a' , dict ( sorted ( mydict1 . items (), key = mykey ))) print ( '' ) print ( '\u65b9\u6cd5\u4e94\u6392\u5e8f\u540e\uff1a' , dict ( sorted ( mydict2 . items (), key = mykey ))) print ( '' ) print ( '\u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u7ed3\u679c\u53ef\u4ee5\u770b\u51fax[0]\u5c31\u662f\u5b57\u5178\u7684key\u503c' ) # \u5982\u6b64\u4e00\u6765\u6309\u7167value\u6392\u5e8f\u53ea\u8981\u628ax[0]\u6539\u6210x[1]\u5373\u53ef\uff1a print ( '\u6309\u7167\u5b57\u5178\u7684value\u6392\u5e8f:' ) print ( '\u6392\u5e8f\u540e\uff1a' , dict ( sorted ( mydict1 . items (), key = lambda x : x [ 1 ]))) print ( '\u6392\u5e8f\u540e\uff1a' , dict ( sorted ( mydict2 . items (), key = lambda x : x [ 1 ]))) print ( \"\"\" \u6309\u7167value\u6392\u5e8f\u540e\u53d1\u73b0\u201c\u5f20\u4e09\u201d\u5728\u201c\u6df1\u5733\u201d\u524d\u9762 \u539f\u56e0\u662fpython\u4ee5\u8f83\u6c49\u5b57\u7684utf-8\u7684\u7f16\u7801\u503c\u6392\u5e8f\u7684 \u4f7f\u7528ord()\u65b9\u6cd5\u53ef\u4ee5\u5f97\u5230\u6c49\u65cf\u7684Unicode\u7f16\u7801(10\u8fdb\u5236) ord('\u5f20')\u5f97\u51fa24352,ord('\u6df1')\u5f97\u51fa28145 \u6240\u4ee5\u2018\u5f20\u2019\u6392\u5728\u2018\u6df1\u2019\u524d\u9762 \u6216\u8005\u4f7f\u7528 '\u5f20'.encode() \u5f97\u51faE5BCA0\uff0c'\u6df1'.encode() \u5f97\u51faE6B7B1\uff0c\u6bd4\u8f8316\u8fdb\u5236\u4e5f\u80fd\u770b\u51fa\u5927\u5c0f \"\"\" ) # \u90a3\u4e48\u5bf9\u4e8e\u5d4c\u5957\u7684\u5b57\u5178\u7ed3\u6784\u5982\u4f55\u6392\u5e8f\u5462\uff1f dit = { 'd' : { 'sort' : 7 }, 'a' : { 'sort' : 3 }, 'c' : { 'sort' : 4 }, 'b' : { 'sort' : 1 }, } print ( '\u5b57\u5178\u5d4c\u5957\u5b57\u5178\uff0c\u6309\u7167\u88ab\u5d4c\u5957\u5b57\u5178\u7684key\u6392\u5e8f\uff0c\u5373abcd\u6392\u5e8f\uff1a' ) print ( '\u539f\u59cb\u987a\u5e8f\uff1a' , dit ) print ( '\u6309\u7167key\u6392\u5e8f\uff1a' , dict ( sorted ( dit . items (), key = lambda x : x [ 0 ]))) print ( '\u5b57\u5178\u5d4c\u5957\u5b57\u5178\uff0c\u6309\u7167\u88ab\u5d4c\u5957\u5b57\u5178\u7684value\u6392\u5e8f\uff0c\u53731347\u6392\u5e8f\uff1a' ) print ( '\u6309\u7167key\u6392\u5e8f\uff1a' , dict ( sorted ( dit . items (), key = lambda x : x [ 1 ][ 'sort' ]))) print ( '' ) print ( \"\u4e3a\u4e86\u65b9\u4fbf\u7406\u89e3\uff0c\u518d\u6b21\u628alambda\u6539\u5199\u6210\u6b63\u5e38\u7684\u51fd\u6570\uff0c\u5e76\u8f93\u51fax[1]['sort']\u7684\u503c:\" ) def value ( x ): print ( x , x [ 1 ], x [ 1 ][ 'sort' ]) return x [ 1 ][ 'sort' ] print ( '\u6309\u7167value\u6392\u5e8f\uff1a' , dict ( sorted ( dit . items (), key = value ))) print () # \u8fd8\u662f\u5d4c\u5957\u5b57\u5178\uff0c\u4f46\u662f\u5d4c\u5957\u5b57\u5178\u7684key\u4e0d\u4e00\u6837\u5462\uff1f dit = { 'd' : { 'sortd' : 7 }, 'a' : { 'sorta' : 3 }, 'c' : { 'sortc' : 4 }, 'b' : { 'sortb' : 1 }, } def value ( x ): \"\"\" \u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5c31\u4e0d\u80fd\u4f7f\u7528x[1]['sort']\uff0c\u56e0\u4e3a\u88ab\u5d4c\u5957\u7684\u5b57\u5178\u7684key\u4e0d\u662f\u7edf\u4e00\u7684'sort'\uff0c\u6240\u4ee5\u8981\u901a\u8fc7\u5b57\u5178\u7684values()\u53d6\u51fa\u6240\u6709\u7684key\uff0c \u4f46\u662fvalues()\u7684\u7c7b\u578b\u662fdict_values\uff0c\u4e0d\u80fd\u901a\u8fc7\u7d22\u5f15\u53d6\u51favalue\uff0c\u6240\u4ee5\u8981\u8f6c\u6210\u5217\u8868 \u5373list(x[1].values())\uff0c\u6b64\u65f6\u7684\u5217\u8868\u5c31\u4e00\u4e2a\u5143\u7d20\uff0c\u901a\u8fc7\u7d22\u5f15\u5c31\u80fd\u53d6\u51fa\u6765 \u6700\u7ec8\u7684\u5f62\u5f0f\u5c31\u662flist(x[1].values())[0] \"\"\" print ( x [ 1 ], x [ 1 ] . values (), list ( x [ 1 ] . values ())[ 0 ]) return list ( x [ 1 ] . values ())[ 0 ] print ( '\u6309\u7167value\u6392\u5e8f\uff1a' , dict ( sorted ( dit . items (), key = value ))) print () # \u65e2\u7136\u6838\u5fc3\u4ee3\u7801\u662flist(x[1].values())[0]\uff0c\u90a3\u4e48\u6700\u7ec8\u7684\u5199\u6cd5\u5c31\u662f\uff1a print ( '\u6309\u7167value\u6392\u5e8f\uff1a' , dict ( sorted ( dit . items (), key = lambda x : list ( x [ 1 ] . values ())[ 0 ]))) \u8f93\u51fa: \u5b57\u5178mydict1\u6392\u5e8f\u524d\uff1a {'b': 3, 'd': 1, 'c': 2, 'a': 4} \u5b57\u5178mydict2\u6392\u5e8f\u524d\uff1a {'name': '\u5f20\u4e09', 'age': '18\u5c81', 'city': '\u6df1\u5733', 'tel': '13626266627'} \u6309\u7167\u5b57\u5178\u7684key\u6392\u5e8f: \u65b9\u6cd5\u4e00\u6392\u5e8f\u540e\uff1a {'a': 4, 'b': 3, 'c': 2, 'd': 1} \u65b9\u6cd5\u4e00\u6392\u5e8f\u540e\uff1a {'age': '18\u5c81', 'city': '\u6df1\u5733', 'name': '\u5f20\u4e09', 'tel': '13626266627'} \u65b9\u6cd5\u4e8c\u6392\u5e8f\u540e\uff1a {'a': 4, 'b': 3, 'c': 2, 'd': 1} \u65b9\u6cd5\u4e8c\u6392\u5e8f\u540e\uff1a {'age': '18\u5c81', 'city': '\u6df1\u5733', 'name': '\u5f20\u4e09', 'tel': '13626266627'} \u65b9\u6cd5\u4e09\u6392\u5e8f\u540e\uff1a {'a': 4, 'b': 3, 'c': 2, 'd': 1} \u65b9\u6cd5\u4e09\u6392\u5e8f\u540e\uff1a {'age': '18\u5c81', 'city': '\u6df1\u5733', 'name': '\u5f20\u4e09', 'tel': '13626266627'} \u65b9\u6cd5\u56db\u6392\u5e8f\u540e\uff1a {'a': 4, 'b': 3, 'c': 2, 'd': 1} \u65b9\u6cd5\u56db\u6392\u5e8f\u540e\uff1a {'age': '18\u5c81', 'city': '\u6df1\u5733', 'name': '\u5f20\u4e09', 'tel': '13626266627'} \u603b\u7ed3\u4e0b\u6765\uff0c\u5b57\u5178\u6309\u7167key\u6392\u5e8f\u7684\u683c\u5f0f\u662f\uff1a dict(sorted(mydict.items())) \u5373\uff0c\u6700\u5916\u5c42\u662fdict(),\u4e2d\u95f4\u5c42\u662fsorted()\uff0c\u6700\u5185\u5c42\u662f\u88ab\u6392\u5e8f\u5b57\u5178.items() \u6700\u7ec8\u7ed3\u679c\u5c31\u662f\uff1adict(sorted(mydict.items()))) \u62d3\u5c55\uff1a\u53ea\u8981\u5217\u8868\u6216\u8005\u5143\u7956\u4e2d\u7684\u5143\u7d20\uff0c\u662f\u6210\u5bf9\u513f\u51fa\u73b0\u7684\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528dict()\u5c06\u5176\u8f6c\u5316\u6210\u5b57\u5178\uff0c\u4f8b\u5982\uff1a \u5217\u8868\uff1a [['a', 1], ['b', 2], ('c', [4])] \u5217\u8868\u8f6c\u5b57\u5178\uff1a {'a': 1, 'b': 2, 'c': [4]} \u5143\u7ec4\uff1a (['a', 1], [('b',), 2], ('c', [4])) \u5143\u7ec4\u8f6c\u5b57\u5178\uff1a {'a': 1, ('b',): 2, 'c': [4]} \u65b9\u6cd5\u4e94\u6392\u5e8f\u540e\uff1a {'a': 4, 'b': 3, 'c': 2, 'd': 1} \u65b9\u6cd5\u4e94\u6392\u5e8f\u540e\uff1a {'age': '18\u5c81', 'city': '\u6df1\u5733', 'name': '\u5f20\u4e09', 'tel': '13626266627'} \u4ece\u65b9\u6cd5\u4e00\u5230\u65b9\u6cd5\u56db \u603b\u7ed3\u51fa\u5b57\u5178\u6392\u5e8f\u7684\u6838\u5fc3\u8bed\u53e5\u662f\uff1asorted(mydict.items()) \u800c\u65b9\u6cd5\u4e94\u7684\u6838\u5fc3\u8bed\u53e5\u662f\uff1asorted(mydict.items(),key=lambda x:x[0]) \u5728sorted()\u65b9\u6cd5\u4e2d\u6dfb\u52a0\u4e86\u4e00\u4e2a\u53c2\u6570key\uff0c\u8868\u793a\u6392\u5e8f\u6761\u4ef6\u662flambda x:x[0] \u89e3\u91ca\uff1a \u533f\u540d\u51fd\u6570 lambda x:y \u4e2dx\u8868\u793a\u4f20\u5165\u7684\u53c2\u6570\uff0cy\u8868\u793alambda \u51fd\u6570\u7684\u8fd4\u56de\u503c \u6240\u4ee5 lambda x:x[0] \u8868\u793a\u4f20\u5165\u53c2\u6570x\u8fd4\u56de\u53c2\u6570x\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\uff0c\u5373x[0] \u800c\u5b57\u5178\u7684items()\u65b9\u6cd5\u5c06\u5b57\u5178\u7684k\u548cv\u8f6c\u5316\u4e3a\u4e86\u5143\u7ec4\uff0c\u5e76\u4e14\u88ab\u5f53\u4f5c\u53c2\u6570\u4f20\u7ed9\u4e86lambda\u7684x x\u7684\u7ed3\u6784\u662f(k,v),x[0]\u5c31\u662fk\uff0c\u4e5f\u5c31\u662f\u7528\u5b57\u5178\u7684key\u4f5c\u4e3a\u6392\u5e8f\u6761\u4ef6 \u4e3a\u4e86\u66f4\u52a0\u65b9\u4fbf\u7684\u7406\u89e3\u533f\u540d\u51fd\u6570lambda\uff0c\u53ef\u4ee5\u6539\u5199\u6210\u6b63\u5e38\u7684\u51fd\u6570, \u5e76\u8f93\u51fax\u3001x[0]\u7684\u7ed3\u679c\u548c\u7c7b\u578b x\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('b', 3) <class 'tuple'> x[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a b <class 'str'> x\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('d', 1) <class 'tuple'> x[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a d <class 'str'> x\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('c', 2) <class 'tuple'> x[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a c <class 'str'> x\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('a', 4) <class 'tuple'> x[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a a <class 'str'> \u65b9\u6cd5\u4e94\u6392\u5e8f\u540e\uff1a {'a': 4, 'b': 3, 'c': 2, 'd': 1} x\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('name', '\u5f20\u4e09') <class 'tuple'> x[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a name <class 'str'> x\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('age', '18\u5c81') <class 'tuple'> x[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a age <class 'str'> x\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('city', '\u6df1\u5733') <class 'tuple'> x[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a city <class 'str'> x\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('tel', '13626266627') <class 'tuple'> x[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a tel <class 'str'> \u65b9\u6cd5\u4e94\u6392\u5e8f\u540e\uff1a {'age': '18\u5c81', 'city': '\u6df1\u5733', 'name': '\u5f20\u4e09', 'tel': '13626266627'} \u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u7ed3\u679c\u53ef\u4ee5\u770b\u51fax[0]\u5c31\u662f\u5b57\u5178\u7684key\u503c \u6309\u7167\u5b57\u5178\u7684value\u6392\u5e8f: \u6392\u5e8f\u540e\uff1a {'d': 1, 'c': 2, 'b': 3, 'a': 4} \u6392\u5e8f\u540e\uff1a {'tel': '13626266627', 'age': '18\u5c81', 'name': '\u5f20\u4e09', 'city': '\u6df1\u5733'} \u6309\u7167value\u6392\u5e8f\u540e\u53d1\u73b0\u201c\u5f20\u4e09\u201d\u5728\u201c\u6df1\u5733\u201d\u524d\u9762 \u539f\u56e0\u662fpython\u4ee5\u8f83\u6c49\u5b57\u7684utf-8\u7684\u7f16\u7801\u503c\u6392\u5e8f\u7684 \u4f7f\u7528ord()\u65b9\u6cd5\u53ef\u4ee5\u5f97\u5230\u6c49\u65cf\u7684Unicode\u7f16\u7801(10\u8fdb\u5236) ord('\u5f20')\u5f97\u51fa24352,ord('\u6df1')\u5f97\u51fa28145 \u6240\u4ee5\u2018\u5f20\u2019\u6392\u5728\u2018\u6df1\u2019\u524d\u9762 \u6216\u8005\u4f7f\u7528 '\u5f20'.encode() \u5f97\u51faE5BCA0\uff0c'\u6df1'.encode() \u5f97\u51faE6B7B1\uff0c\u6bd4\u8f8316\u8fdb\u5236\u4e5f\u80fd\u770b\u51fa\u5927\u5c0f \u5b57\u5178\u5d4c\u5957\u5b57\u5178\uff0c\u6309\u7167\u88ab\u5d4c\u5957\u5b57\u5178\u7684key\u6392\u5e8f\uff0c\u5373abcd\u6392\u5e8f\uff1a \u539f\u59cb\u987a\u5e8f\uff1a {'d': {'sort': 7}, 'a': {'sort': 3}, 'c': {'sort': 4}, 'b': {'sort': 1}} \u6309\u7167key\u6392\u5e8f\uff1a {'a': {'sort': 3}, 'b': {'sort': 1}, 'c': {'sort': 4}, 'd': {'sort': 7}} \u5b57\u5178\u5d4c\u5957\u5b57\u5178\uff0c\u6309\u7167\u88ab\u5d4c\u5957\u5b57\u5178\u7684value\u6392\u5e8f\uff0c\u53731347\u6392\u5e8f\uff1a \u6309\u7167key\u6392\u5e8f\uff1a {'b': {'sort': 1}, 'a': {'sort': 3}, 'c': {'sort': 4}, 'd': {'sort': 7}} \u4e3a\u4e86\u65b9\u4fbf\u7406\u89e3\uff0c\u518d\u6b21\u628alambda\u6539\u5199\u6210\u6b63\u5e38\u7684\u51fd\u6570\uff0c\u5e76\u8f93\u51fax[1]['sort']\u7684\u503c: ('d', {'sort': 7}) {'sort': 7} 7 ('a', {'sort': 3}) {'sort': 3} 3 ('c', {'sort': 4}) {'sort': 4} 4 ('b', {'sort': 1}) {'sort': 1} 1 \u6309\u7167value\u6392\u5e8f\uff1a {'b': {'sort': 1}, 'a': {'sort': 3}, 'c': {'sort': 4}, 'd': {'sort': 7}} {'sortd': 7} dict_values([7]) 7 {'sorta': 3} dict_values([3]) 3 {'sortc': 4} dict_values([4]) 4 {'sortb': 1} dict_values([1]) 1 \u6309\u7167value\u6392\u5e8f\uff1a {'b': {'sortb': 1}, 'a': {'sorta': 3}, 'c': {'sortc': 4}, 'd': {'sortd': 7}} \u6309\u7167value\u6392\u5e8f\uff1a {'b': {'sortb': 1}, 'a': {'sorta': 3}, 'c': {'sortc': 4}, 'd': {'sortd': 7}} \u56f0\u96be\u7248 \u4e0a\u9762\u90fd\u662f\u76f4\u63a5\u6392\u5e8f\u5b57\u5178, \u5982\u679c\u6570\u636e\u662f\u5217\u8868\u4e2d\u5305\u542b\u591a\u4e2a\u5b57\u5178, \u4f8b\u5982: li = [{'k': 1, 'v': 2}, {'k': 12, 'v': 222}, {'k': 13, 'v': 32}] \u6b63\u5e38\u51fd\u6570\u5c31\u662f: def my_sort(x): # print(x) return x.get('k') \u6309\u7167key\u548cvalue\u5012\u5e8f\u5c31\u662f: print(sorted(li, key=my_sort, reverse=True)) print(sorted(li, key=lambda x: x.get('v'), reverse=True)) \u8f93\u51fa: [{'k': 13, 'v': 32}, {'k': 12, 'v': 222}, {'k': 1, 'v': 2}] [{'k': 12, 'v': 222}, {'k': 13, 'v': 32}, {'k': 1, 'v': 2}] \u56f0\u96be\u7248Plus \u5217\u8868\u4e2d\u6bcf\u4e2a\u5143\u7d20\u7684key\u548cvalue\u7684\u503c\u90fd\u4e0d\u4e00\u6837 li = [{'k1': 1, 'v1': 2}, {'k2': 12, 'v2': 222}, {'k3': 13, 'v2': 32}] \u6b63\u5e38\u7684\u51fd\u6570\u5c31\u662f: def my_sort(x): # print(list(x.items())) return list(x.items())[0][1] \u6309\u7167key\u548cvalue\u5012\u5e8f\u5c31\u662f: print(sorted(li, key=my_sort, reverse=True)) print(sorted(li, key=lambda x: list(x.items())[1][1], reverse=True)) \u8f93\u51fa: [{'k3': 13, 'v2': 32}, {'k2': 12, 'v2': 222}, {'k1': 1, 'v1': 2}] [{'k2': 12, 'v2': 222}, {'k3': 13, 'v2': 32}, {'k1': 1, 'v1': 2}]","title":"\u5b57\u5178\u6392\u5e8f"},{"location":"python/sort/%E5%AD%97%E5%85%B8%E6%8E%92%E5%BA%8F/#_1","text":"","title":"\u5b57\u5178\u6392\u5e8f"},{"location":"python/sort/%E5%AD%97%E5%85%B8%E6%8E%92%E5%BA%8F/#_2","text":"\u6309\u7167\u5b57\u5178\u7684key\u6216value\u6392\u5e8f # \u5b57\u5178\u5982\u4e0b\uff1a mydict1 = { 'b' : 3 , 'd' : 1 , 'c' : 2 , 'a' : 4 } mydict2 = { 'name' : '\u5f20\u4e09' , 'age' : '18\u5c81' , 'city' : '\u6df1\u5733' , 'tel' : '13626266627' } print ( '\u5b57\u5178mydict1\u6392\u5e8f\u524d\uff1a' , mydict1 ) print ( '\u5b57\u5178mydict2\u6392\u5e8f\u524d\uff1a' , mydict2 ) print () print ( '\u6309\u7167\u5b57\u5178\u7684key\u6392\u5e8f:' ) print () def func1 ( mydict ): \"\"\" \u65b9\u6cd5\u4e00\uff1a \u601d\u8def\u662f\u5c06k\u548cv\u4ee5\u5143\u7ec4\u7684\u5f62\u5f0f\u7ec4\u6210\u5217\u8868\u5e76\u6392\u5e8f\uff08\u4f1a\u4ee5\u5143\u7ec4\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u5927\u5c0f\u6392\u5e8f\uff0c\u5373k\uff09\uff0c\u518d\u904d\u5386\u5217\u8868\u53d6\u51fa\u5143\u7ec4\uff0c \u5143\u7ec4\u4e2d\u7684\u5143\u7d20\u5206\u522b\u662fk\u548cv,\u653e\u5230\u4e00\u4e2a\u65b0\u7684\u5b57\u5178\u91cc\uff0c\u6700\u540e\u8fd4\u56de\u8fd9\u4e2a\u65b0\u5b57\u5178 \"\"\" mydict2list = sorted ([ item for item in mydict . items ()]) # \u76ee\u7684\u662f\u5c06\u5b57\u5178\u53d8\u6210\u5217\u8868\u518d\u7528sorted()\u6392\u5e8f new_dict = {} # for i in mydict2list : # \u904d\u5386\u51fa\u6765\u7684i\u662f\u4e00\u4e2a\u5143\u7956\uff0c\u5305\u542bkey\u548cvalue\u4e24\u4e2a\u5143\u7d20 new_dict [ i [ 0 ]] = i [ 1 ] print ( '\u65b9\u6cd5\u4e00\u6392\u5e8f\u540e\uff1a' , new_dict ) func1 ( mydict1 ) func1 ( mydict2 ) print () def func2 ( mydict ): \"\"\" \u65b9\u6cd5\u4e8c\uff1a \u7528\u7684\u8fd8\u662f\u65b9\u6cd5\u4e00\u7684\u601d\u8def\uff0c\u4f46\u662fsorted()\u51fd\u6570\u7684\u8fd4\u56de\u503c\u5c31\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u5199\u5217\u8868\u63a8\u5bfc\u5f0f \u5373sorted([item for item in mydict.items()])\u53ef\u4ee5\u7b80\u5199\u6210sorted(mydict.items()) \"\"\" mydict2list = sorted ( mydict . items ()) new_dict = {} for i in mydict2list : new_dict [ i [ 0 ]] = i [ 1 ] print ( '\u65b9\u6cd5\u4e8c\u6392\u5e8f\u540e\uff1a' , new_dict ) func2 ( mydict1 ) func2 ( mydict2 ) print () def func3 ( mydict ): \"\"\" \u65b9\u6cd5\u4e09\uff1a mydict2list\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u5217\u8868\u5185\u7684\u5143\u7d20\u662f\u4e00\u4e2a\u4e2a\u7684\u5143\u7ec4\uff0c\u5143\u7ec4\u91cc\u5305\u542b\u4e24\u4e2a\u5143\u7d20 \u5206\u522b\u662f\u539f\u59cb\u5b57\u5178\u4e2d\u7684key\u548cvalue\uff0c\u800cdict()\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u8f6c\u5316\u8fd9\u79cd\u7ed3\u6784\u6210\u5b57\u5178 \u6240\u4ee5\u5c06for\u5faa\u73af\u7701\u7565\uff0c\u5199\u6210\u4e0b\u9762\u7684\u65b9\u6cd5 \"\"\" mydict2list = sorted ( mydict . items ()) new_dict = dict ( mydict2list ) print ( '\u65b9\u6cd5\u4e09\u6392\u5e8f\u540e\uff1a' , new_dict ) func3 ( mydict1 ) func3 ( mydict2 ) print () def func4 ( mydict ): \"\"\" \u65b9\u6cd5\u56db\uff1a \u65b9\u6cd5\u4e09\u4e2d\u7684\u4e24\u884c\u4ee3\u7801\u53ef\u4ee5\u5408\u5e76\u6210\u4e00\u884c \"\"\" print ( '\u65b9\u6cd5\u56db\u6392\u5e8f\u540e\uff1a' , dict ( sorted ( mydict . items ()))) func4 ( mydict1 ) func4 ( mydict2 ) print () print ( \"\"\" \u603b\u7ed3\u4e0b\u6765\uff0c\u5b57\u5178\u6309\u7167key\u6392\u5e8f\u7684\u683c\u5f0f\u662f\uff1a dict(sorted(mydict.items())) \u5373\uff0c\u6700\u5916\u5c42\u662fdict(),\u4e2d\u95f4\u5c42\u662fsorted()\uff0c\u6700\u5185\u5c42\u662f\u88ab\u6392\u5e8f\u5b57\u5178.items() \u6700\u7ec8\u7ed3\u679c\u5c31\u662f\uff1adict(sorted(mydict.items()))) \"\"\" ) print () print ( '\u62d3\u5c55\uff1a\u53ea\u8981\u5217\u8868\u6216\u8005\u5143\u7956\u4e2d\u7684\u5143\u7d20\uff0c\u662f\u6210\u5bf9\u513f\u51fa\u73b0\u7684\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528dict()\u5c06\u5176\u8f6c\u5316\u6210\u5b57\u5178\uff0c\u4f8b\u5982\uff1a' ) mylist = [[ 'a' , 1 ], [ 'b' , 2 ], ( 'c' , [ 4 ])] print ( '\u5217\u8868\uff1a' , mylist ) print ( '\u5217\u8868\u8f6c\u5b57\u5178\uff1a' , dict ( mylist )) mytuple = ([ 'a' , 1 ], [( 'b' ,), 2 ], ( 'c' , [ 4 ])) print ( '\u5143\u7ec4\uff1a' , mytuple ) print ( '\u5143\u7ec4\u8f6c\u5b57\u5178\uff1a' , dict ( mytuple )) print () def func5 ( mydict ): \"\"\" \u65b9\u6cd5\u4e94\uff1a \u5176\u4e2dsorted()\u65b9\u6cd5\u6709\u4e2a\u53c2\u6570\u662fkey\uff0c\u53ef\u4ee5\u6307\u5b9a\u53c2\u4e0e\u6bd4\u8f83\u7684\u5143\u7d20 \u53ef\u4ee5\u4f7f\u7528lambda\u51fd\u6570\u6765\u8fd4\u56de\u53c2\u4e0e\u6bd4\u8f83\u7684\u5143\u7d20\uff0c\u4e0a\u8ff0\u4ee3\u7801\u53ef\u4ee5\u5199\u6210\u8fd9\u6837: \"\"\" print ( '\u65b9\u6cd5\u4e94\u6392\u5e8f\u540e\uff1a' , dict ( sorted ( mydict . items (), key = lambda x : x [ 0 ]))) # \u5bf9\u6bd4\u65b9\u6cd5\u56db\uff0c\u53d1\u73b0key\u8fd9\u4e2a\u53c2\u6570\u52a0\u4e0d\u52a0\u90fd\u53ef\u4ee5\uff0c\u52a0\u4e0a\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u5f15\u51fa\u540e\u9762\u7684\u6309\u7167value\u6392\u5e8f func5 ( mydict1 ) func5 ( mydict2 ) print () print ( \"\"\"\u4ece\u65b9\u6cd5\u4e00\u5230\u65b9\u6cd5\u56db \u603b\u7ed3\u51fa\u5b57\u5178\u6392\u5e8f\u7684\u6838\u5fc3\u8bed\u53e5\u662f\uff1asorted(mydict.items()) \u800c\u65b9\u6cd5\u4e94\u7684\u6838\u5fc3\u8bed\u53e5\u662f\uff1asorted(mydict.items(),key=lambda x:x[0]) \u5728sorted()\u65b9\u6cd5\u4e2d\u6dfb\u52a0\u4e86\u4e00\u4e2a\u53c2\u6570key\uff0c\u8868\u793a\u6392\u5e8f\u6761\u4ef6\u662flambda x:x[0] \u89e3\u91ca\uff1a \u533f\u540d\u51fd\u6570 lambda x:y \u4e2dx\u8868\u793a\u4f20\u5165\u7684\u53c2\u6570\uff0cy\u8868\u793alambda \u51fd\u6570\u7684\u8fd4\u56de\u503c \u6240\u4ee5 lambda x:x[0] \u8868\u793a\u4f20\u5165\u53c2\u6570x\u8fd4\u56de\u53c2\u6570x\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\uff0c\u5373x[0] \u800c\u5b57\u5178\u7684items()\u65b9\u6cd5\u5c06\u5b57\u5178\u7684k\u548cv\u8f6c\u5316\u4e3a\u4e86\u5143\u7ec4\uff0c\u5e76\u4e14\u88ab\u5f53\u4f5c\u53c2\u6570\u4f20\u7ed9\u4e86lambda\u7684x x\u7684\u7ed3\u6784\u662f(k,v),x[0]\u5c31\u662fk\uff0c\u4e5f\u5c31\u662f\u7528\u5b57\u5178\u7684key\u4f5c\u4e3a\u6392\u5e8f\u6761\u4ef6 \u4e3a\u4e86\u66f4\u52a0\u65b9\u4fbf\u7684\u7406\u89e3\u533f\u540d\u51fd\u6570lambda\uff0c\u53ef\u4ee5\u6539\u5199\u6210\u6b63\u5e38\u7684\u51fd\u6570, \u5e76\u8f93\u51fax\u3001x[0]\u7684\u7ed3\u679c\u548c\u7c7b\u578b \"\"\" ) def mykey ( x ): print ( 'x\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a' , x , type ( x )) print ( 'x[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a' , x [ 0 ], type ( x [ 0 ])) return x [ 0 ] print ( '\u65b9\u6cd5\u4e94\u6392\u5e8f\u540e\uff1a' , dict ( sorted ( mydict1 . items (), key = mykey ))) print ( '' ) print ( '\u65b9\u6cd5\u4e94\u6392\u5e8f\u540e\uff1a' , dict ( sorted ( mydict2 . items (), key = mykey ))) print ( '' ) print ( '\u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u7ed3\u679c\u53ef\u4ee5\u770b\u51fax[0]\u5c31\u662f\u5b57\u5178\u7684key\u503c' ) # \u5982\u6b64\u4e00\u6765\u6309\u7167value\u6392\u5e8f\u53ea\u8981\u628ax[0]\u6539\u6210x[1]\u5373\u53ef\uff1a print ( '\u6309\u7167\u5b57\u5178\u7684value\u6392\u5e8f:' ) print ( '\u6392\u5e8f\u540e\uff1a' , dict ( sorted ( mydict1 . items (), key = lambda x : x [ 1 ]))) print ( '\u6392\u5e8f\u540e\uff1a' , dict ( sorted ( mydict2 . items (), key = lambda x : x [ 1 ]))) print ( \"\"\" \u6309\u7167value\u6392\u5e8f\u540e\u53d1\u73b0\u201c\u5f20\u4e09\u201d\u5728\u201c\u6df1\u5733\u201d\u524d\u9762 \u539f\u56e0\u662fpython\u4ee5\u8f83\u6c49\u5b57\u7684utf-8\u7684\u7f16\u7801\u503c\u6392\u5e8f\u7684 \u4f7f\u7528ord()\u65b9\u6cd5\u53ef\u4ee5\u5f97\u5230\u6c49\u65cf\u7684Unicode\u7f16\u7801(10\u8fdb\u5236) ord('\u5f20')\u5f97\u51fa24352,ord('\u6df1')\u5f97\u51fa28145 \u6240\u4ee5\u2018\u5f20\u2019\u6392\u5728\u2018\u6df1\u2019\u524d\u9762 \u6216\u8005\u4f7f\u7528 '\u5f20'.encode() \u5f97\u51faE5BCA0\uff0c'\u6df1'.encode() \u5f97\u51faE6B7B1\uff0c\u6bd4\u8f8316\u8fdb\u5236\u4e5f\u80fd\u770b\u51fa\u5927\u5c0f \"\"\" ) # \u90a3\u4e48\u5bf9\u4e8e\u5d4c\u5957\u7684\u5b57\u5178\u7ed3\u6784\u5982\u4f55\u6392\u5e8f\u5462\uff1f dit = { 'd' : { 'sort' : 7 }, 'a' : { 'sort' : 3 }, 'c' : { 'sort' : 4 }, 'b' : { 'sort' : 1 }, } print ( '\u5b57\u5178\u5d4c\u5957\u5b57\u5178\uff0c\u6309\u7167\u88ab\u5d4c\u5957\u5b57\u5178\u7684key\u6392\u5e8f\uff0c\u5373abcd\u6392\u5e8f\uff1a' ) print ( '\u539f\u59cb\u987a\u5e8f\uff1a' , dit ) print ( '\u6309\u7167key\u6392\u5e8f\uff1a' , dict ( sorted ( dit . items (), key = lambda x : x [ 0 ]))) print ( '\u5b57\u5178\u5d4c\u5957\u5b57\u5178\uff0c\u6309\u7167\u88ab\u5d4c\u5957\u5b57\u5178\u7684value\u6392\u5e8f\uff0c\u53731347\u6392\u5e8f\uff1a' ) print ( '\u6309\u7167key\u6392\u5e8f\uff1a' , dict ( sorted ( dit . items (), key = lambda x : x [ 1 ][ 'sort' ]))) print ( '' ) print ( \"\u4e3a\u4e86\u65b9\u4fbf\u7406\u89e3\uff0c\u518d\u6b21\u628alambda\u6539\u5199\u6210\u6b63\u5e38\u7684\u51fd\u6570\uff0c\u5e76\u8f93\u51fax[1]['sort']\u7684\u503c:\" ) def value ( x ): print ( x , x [ 1 ], x [ 1 ][ 'sort' ]) return x [ 1 ][ 'sort' ] print ( '\u6309\u7167value\u6392\u5e8f\uff1a' , dict ( sorted ( dit . items (), key = value ))) print () # \u8fd8\u662f\u5d4c\u5957\u5b57\u5178\uff0c\u4f46\u662f\u5d4c\u5957\u5b57\u5178\u7684key\u4e0d\u4e00\u6837\u5462\uff1f dit = { 'd' : { 'sortd' : 7 }, 'a' : { 'sorta' : 3 }, 'c' : { 'sortc' : 4 }, 'b' : { 'sortb' : 1 }, } def value ( x ): \"\"\" \u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5c31\u4e0d\u80fd\u4f7f\u7528x[1]['sort']\uff0c\u56e0\u4e3a\u88ab\u5d4c\u5957\u7684\u5b57\u5178\u7684key\u4e0d\u662f\u7edf\u4e00\u7684'sort'\uff0c\u6240\u4ee5\u8981\u901a\u8fc7\u5b57\u5178\u7684values()\u53d6\u51fa\u6240\u6709\u7684key\uff0c \u4f46\u662fvalues()\u7684\u7c7b\u578b\u662fdict_values\uff0c\u4e0d\u80fd\u901a\u8fc7\u7d22\u5f15\u53d6\u51favalue\uff0c\u6240\u4ee5\u8981\u8f6c\u6210\u5217\u8868 \u5373list(x[1].values())\uff0c\u6b64\u65f6\u7684\u5217\u8868\u5c31\u4e00\u4e2a\u5143\u7d20\uff0c\u901a\u8fc7\u7d22\u5f15\u5c31\u80fd\u53d6\u51fa\u6765 \u6700\u7ec8\u7684\u5f62\u5f0f\u5c31\u662flist(x[1].values())[0] \"\"\" print ( x [ 1 ], x [ 1 ] . values (), list ( x [ 1 ] . values ())[ 0 ]) return list ( x [ 1 ] . values ())[ 0 ] print ( '\u6309\u7167value\u6392\u5e8f\uff1a' , dict ( sorted ( dit . items (), key = value ))) print () # \u65e2\u7136\u6838\u5fc3\u4ee3\u7801\u662flist(x[1].values())[0]\uff0c\u90a3\u4e48\u6700\u7ec8\u7684\u5199\u6cd5\u5c31\u662f\uff1a print ( '\u6309\u7167value\u6392\u5e8f\uff1a' , dict ( sorted ( dit . items (), key = lambda x : list ( x [ 1 ] . values ())[ 0 ]))) \u8f93\u51fa: \u5b57\u5178mydict1\u6392\u5e8f\u524d\uff1a {'b': 3, 'd': 1, 'c': 2, 'a': 4} \u5b57\u5178mydict2\u6392\u5e8f\u524d\uff1a {'name': '\u5f20\u4e09', 'age': '18\u5c81', 'city': '\u6df1\u5733', 'tel': '13626266627'} \u6309\u7167\u5b57\u5178\u7684key\u6392\u5e8f: \u65b9\u6cd5\u4e00\u6392\u5e8f\u540e\uff1a {'a': 4, 'b': 3, 'c': 2, 'd': 1} \u65b9\u6cd5\u4e00\u6392\u5e8f\u540e\uff1a {'age': '18\u5c81', 'city': '\u6df1\u5733', 'name': '\u5f20\u4e09', 'tel': '13626266627'} \u65b9\u6cd5\u4e8c\u6392\u5e8f\u540e\uff1a {'a': 4, 'b': 3, 'c': 2, 'd': 1} \u65b9\u6cd5\u4e8c\u6392\u5e8f\u540e\uff1a {'age': '18\u5c81', 'city': '\u6df1\u5733', 'name': '\u5f20\u4e09', 'tel': '13626266627'} \u65b9\u6cd5\u4e09\u6392\u5e8f\u540e\uff1a {'a': 4, 'b': 3, 'c': 2, 'd': 1} \u65b9\u6cd5\u4e09\u6392\u5e8f\u540e\uff1a {'age': '18\u5c81', 'city': '\u6df1\u5733', 'name': '\u5f20\u4e09', 'tel': '13626266627'} \u65b9\u6cd5\u56db\u6392\u5e8f\u540e\uff1a {'a': 4, 'b': 3, 'c': 2, 'd': 1} \u65b9\u6cd5\u56db\u6392\u5e8f\u540e\uff1a {'age': '18\u5c81', 'city': '\u6df1\u5733', 'name': '\u5f20\u4e09', 'tel': '13626266627'} \u603b\u7ed3\u4e0b\u6765\uff0c\u5b57\u5178\u6309\u7167key\u6392\u5e8f\u7684\u683c\u5f0f\u662f\uff1a dict(sorted(mydict.items())) \u5373\uff0c\u6700\u5916\u5c42\u662fdict(),\u4e2d\u95f4\u5c42\u662fsorted()\uff0c\u6700\u5185\u5c42\u662f\u88ab\u6392\u5e8f\u5b57\u5178.items() \u6700\u7ec8\u7ed3\u679c\u5c31\u662f\uff1adict(sorted(mydict.items()))) \u62d3\u5c55\uff1a\u53ea\u8981\u5217\u8868\u6216\u8005\u5143\u7956\u4e2d\u7684\u5143\u7d20\uff0c\u662f\u6210\u5bf9\u513f\u51fa\u73b0\u7684\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528dict()\u5c06\u5176\u8f6c\u5316\u6210\u5b57\u5178\uff0c\u4f8b\u5982\uff1a \u5217\u8868\uff1a [['a', 1], ['b', 2], ('c', [4])] \u5217\u8868\u8f6c\u5b57\u5178\uff1a {'a': 1, 'b': 2, 'c': [4]} \u5143\u7ec4\uff1a (['a', 1], [('b',), 2], ('c', [4])) \u5143\u7ec4\u8f6c\u5b57\u5178\uff1a {'a': 1, ('b',): 2, 'c': [4]} \u65b9\u6cd5\u4e94\u6392\u5e8f\u540e\uff1a {'a': 4, 'b': 3, 'c': 2, 'd': 1} \u65b9\u6cd5\u4e94\u6392\u5e8f\u540e\uff1a {'age': '18\u5c81', 'city': '\u6df1\u5733', 'name': '\u5f20\u4e09', 'tel': '13626266627'} \u4ece\u65b9\u6cd5\u4e00\u5230\u65b9\u6cd5\u56db \u603b\u7ed3\u51fa\u5b57\u5178\u6392\u5e8f\u7684\u6838\u5fc3\u8bed\u53e5\u662f\uff1asorted(mydict.items()) \u800c\u65b9\u6cd5\u4e94\u7684\u6838\u5fc3\u8bed\u53e5\u662f\uff1asorted(mydict.items(),key=lambda x:x[0]) \u5728sorted()\u65b9\u6cd5\u4e2d\u6dfb\u52a0\u4e86\u4e00\u4e2a\u53c2\u6570key\uff0c\u8868\u793a\u6392\u5e8f\u6761\u4ef6\u662flambda x:x[0] \u89e3\u91ca\uff1a \u533f\u540d\u51fd\u6570 lambda x:y \u4e2dx\u8868\u793a\u4f20\u5165\u7684\u53c2\u6570\uff0cy\u8868\u793alambda \u51fd\u6570\u7684\u8fd4\u56de\u503c \u6240\u4ee5 lambda x:x[0] \u8868\u793a\u4f20\u5165\u53c2\u6570x\u8fd4\u56de\u53c2\u6570x\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\uff0c\u5373x[0] \u800c\u5b57\u5178\u7684items()\u65b9\u6cd5\u5c06\u5b57\u5178\u7684k\u548cv\u8f6c\u5316\u4e3a\u4e86\u5143\u7ec4\uff0c\u5e76\u4e14\u88ab\u5f53\u4f5c\u53c2\u6570\u4f20\u7ed9\u4e86lambda\u7684x x\u7684\u7ed3\u6784\u662f(k,v),x[0]\u5c31\u662fk\uff0c\u4e5f\u5c31\u662f\u7528\u5b57\u5178\u7684key\u4f5c\u4e3a\u6392\u5e8f\u6761\u4ef6 \u4e3a\u4e86\u66f4\u52a0\u65b9\u4fbf\u7684\u7406\u89e3\u533f\u540d\u51fd\u6570lambda\uff0c\u53ef\u4ee5\u6539\u5199\u6210\u6b63\u5e38\u7684\u51fd\u6570, \u5e76\u8f93\u51fax\u3001x[0]\u7684\u7ed3\u679c\u548c\u7c7b\u578b x\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('b', 3) <class 'tuple'> x[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a b <class 'str'> x\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('d', 1) <class 'tuple'> x[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a d <class 'str'> x\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('c', 2) <class 'tuple'> x[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a c <class 'str'> x\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('a', 4) <class 'tuple'> x[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a a <class 'str'> \u65b9\u6cd5\u4e94\u6392\u5e8f\u540e\uff1a {'a': 4, 'b': 3, 'c': 2, 'd': 1} x\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('name', '\u5f20\u4e09') <class 'tuple'> x[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a name <class 'str'> x\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('age', '18\u5c81') <class 'tuple'> x[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a age <class 'str'> x\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('city', '\u6df1\u5733') <class 'tuple'> x[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a city <class 'str'> x\u53cax\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a ('tel', '13626266627') <class 'tuple'> x[0]\u53cax[0]\u7684\u7c7b\u578b\u5230\u5e95\u4ec0\u4e48\uff1a tel <class 'str'> \u65b9\u6cd5\u4e94\u6392\u5e8f\u540e\uff1a {'age': '18\u5c81', 'city': '\u6df1\u5733', 'name': '\u5f20\u4e09', 'tel': '13626266627'} \u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u7ed3\u679c\u53ef\u4ee5\u770b\u51fax[0]\u5c31\u662f\u5b57\u5178\u7684key\u503c \u6309\u7167\u5b57\u5178\u7684value\u6392\u5e8f: \u6392\u5e8f\u540e\uff1a {'d': 1, 'c': 2, 'b': 3, 'a': 4} \u6392\u5e8f\u540e\uff1a {'tel': '13626266627', 'age': '18\u5c81', 'name': '\u5f20\u4e09', 'city': '\u6df1\u5733'} \u6309\u7167value\u6392\u5e8f\u540e\u53d1\u73b0\u201c\u5f20\u4e09\u201d\u5728\u201c\u6df1\u5733\u201d\u524d\u9762 \u539f\u56e0\u662fpython\u4ee5\u8f83\u6c49\u5b57\u7684utf-8\u7684\u7f16\u7801\u503c\u6392\u5e8f\u7684 \u4f7f\u7528ord()\u65b9\u6cd5\u53ef\u4ee5\u5f97\u5230\u6c49\u65cf\u7684Unicode\u7f16\u7801(10\u8fdb\u5236) ord('\u5f20')\u5f97\u51fa24352,ord('\u6df1')\u5f97\u51fa28145 \u6240\u4ee5\u2018\u5f20\u2019\u6392\u5728\u2018\u6df1\u2019\u524d\u9762 \u6216\u8005\u4f7f\u7528 '\u5f20'.encode() \u5f97\u51faE5BCA0\uff0c'\u6df1'.encode() \u5f97\u51faE6B7B1\uff0c\u6bd4\u8f8316\u8fdb\u5236\u4e5f\u80fd\u770b\u51fa\u5927\u5c0f \u5b57\u5178\u5d4c\u5957\u5b57\u5178\uff0c\u6309\u7167\u88ab\u5d4c\u5957\u5b57\u5178\u7684key\u6392\u5e8f\uff0c\u5373abcd\u6392\u5e8f\uff1a \u539f\u59cb\u987a\u5e8f\uff1a {'d': {'sort': 7}, 'a': {'sort': 3}, 'c': {'sort': 4}, 'b': {'sort': 1}} \u6309\u7167key\u6392\u5e8f\uff1a {'a': {'sort': 3}, 'b': {'sort': 1}, 'c': {'sort': 4}, 'd': {'sort': 7}} \u5b57\u5178\u5d4c\u5957\u5b57\u5178\uff0c\u6309\u7167\u88ab\u5d4c\u5957\u5b57\u5178\u7684value\u6392\u5e8f\uff0c\u53731347\u6392\u5e8f\uff1a \u6309\u7167key\u6392\u5e8f\uff1a {'b': {'sort': 1}, 'a': {'sort': 3}, 'c': {'sort': 4}, 'd': {'sort': 7}} \u4e3a\u4e86\u65b9\u4fbf\u7406\u89e3\uff0c\u518d\u6b21\u628alambda\u6539\u5199\u6210\u6b63\u5e38\u7684\u51fd\u6570\uff0c\u5e76\u8f93\u51fax[1]['sort']\u7684\u503c: ('d', {'sort': 7}) {'sort': 7} 7 ('a', {'sort': 3}) {'sort': 3} 3 ('c', {'sort': 4}) {'sort': 4} 4 ('b', {'sort': 1}) {'sort': 1} 1 \u6309\u7167value\u6392\u5e8f\uff1a {'b': {'sort': 1}, 'a': {'sort': 3}, 'c': {'sort': 4}, 'd': {'sort': 7}} {'sortd': 7} dict_values([7]) 7 {'sorta': 3} dict_values([3]) 3 {'sortc': 4} dict_values([4]) 4 {'sortb': 1} dict_values([1]) 1 \u6309\u7167value\u6392\u5e8f\uff1a {'b': {'sortb': 1}, 'a': {'sorta': 3}, 'c': {'sortc': 4}, 'd': {'sortd': 7}} \u6309\u7167value\u6392\u5e8f\uff1a {'b': {'sortb': 1}, 'a': {'sorta': 3}, 'c': {'sortc': 4}, 'd': {'sortd': 7}}","title":"\u57fa\u7840\u7248"},{"location":"python/sort/%E5%AD%97%E5%85%B8%E6%8E%92%E5%BA%8F/#_3","text":"\u4e0a\u9762\u90fd\u662f\u76f4\u63a5\u6392\u5e8f\u5b57\u5178, \u5982\u679c\u6570\u636e\u662f\u5217\u8868\u4e2d\u5305\u542b\u591a\u4e2a\u5b57\u5178, \u4f8b\u5982: li = [{'k': 1, 'v': 2}, {'k': 12, 'v': 222}, {'k': 13, 'v': 32}] \u6b63\u5e38\u51fd\u6570\u5c31\u662f: def my_sort(x): # print(x) return x.get('k') \u6309\u7167key\u548cvalue\u5012\u5e8f\u5c31\u662f: print(sorted(li, key=my_sort, reverse=True)) print(sorted(li, key=lambda x: x.get('v'), reverse=True)) \u8f93\u51fa: [{'k': 13, 'v': 32}, {'k': 12, 'v': 222}, {'k': 1, 'v': 2}] [{'k': 12, 'v': 222}, {'k': 13, 'v': 32}, {'k': 1, 'v': 2}]","title":"\u56f0\u96be\u7248"},{"location":"python/sort/%E5%AD%97%E5%85%B8%E6%8E%92%E5%BA%8F/#plus","text":"\u5217\u8868\u4e2d\u6bcf\u4e2a\u5143\u7d20\u7684key\u548cvalue\u7684\u503c\u90fd\u4e0d\u4e00\u6837 li = [{'k1': 1, 'v1': 2}, {'k2': 12, 'v2': 222}, {'k3': 13, 'v2': 32}] \u6b63\u5e38\u7684\u51fd\u6570\u5c31\u662f: def my_sort(x): # print(list(x.items())) return list(x.items())[0][1] \u6309\u7167key\u548cvalue\u5012\u5e8f\u5c31\u662f: print(sorted(li, key=my_sort, reverse=True)) print(sorted(li, key=lambda x: list(x.items())[1][1], reverse=True)) \u8f93\u51fa: [{'k3': 13, 'v2': 32}, {'k2': 12, 'v2': 222}, {'k1': 1, 'v1': 2}] [{'k2': 12, 'v2': 222}, {'k3': 13, 'v2': 32}, {'k1': 1, 'v1': 2}]","title":"\u56f0\u96be\u7248Plus"},{"location":"python/sort/%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F/","text":"\u53c2\u8003: \u5e0c\u5c14\u6392\u5e8f(\u56fe\u6587\u5e76\u8302) # shellsort def shell_sort ( li ): n = len ( li ) # \u8bbe\u7f6e \u6b65\u957f gap = n // 2 # \u6b65\u957f\u4ece\u5927\u5230\u5c0f\uff0c\u6700\u540e\u5fc5\u987b\u6309\u71671\u6b65\u957f\u6392\u5e8f while gap >= 1 : # \u4ece\u6b65\u957f\u4f4d\u7f6e\u904d\u5386\u5269\u4e0b\u6570\u636e\uff0c\u5206\u7ec4\uff0c\u8ba9\u6bcf\u7ec4\u7684\u6570\u636e\u6392\u5e8f for i in range ( gap , n ): # \u62ff\u5f53\u524d\u4f4d\u7f6e\u4e0e\u51cf\u6b65\u957f\u7684\u4f4d\u7f6e\u7684\u6570\u636e\u6bd4\u8f83 while ( i - gap ) >= 0 : if li [ i ] < li [ i - gap ]: li [ i ], li [ i - gap ] = li [ i - gap ], li [ i ] i -= gap else : break gap //= 2 if __name__ == '__main__' : l = [ 6 , 5 , 6 , 3 , 2 , 7 ] shell_sort ( l ) print ( l ) # \u7a33\u5b9a\u6027\uff1a\u4e0d\u7a33\u5b9a # \u65f6\u95f4\u590d\u6742\u5ea6\uff1a\u8ddf\u6b65\u957f\u76f8\u5173","title":"\u5e0c\u5c14\u6392\u5e8f"},{"location":"python/sort/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F/","text":"\u53c2\u8003\uff1a \u5f52\u5e76\u6392\u5e8f(\u56fe\u6587\u5e76\u8302) \u5f52\u5e76\u6392\u5e8f(\u52a8\u56fe\u7406\u89e3) # mergesort \"\"\" 1\u3001merge_sort\u51fd\u6570\u628a\u4e00\u4e2a\u5217\u8868\u5206\u6210\u4e24\u90e8\u5206\uff0c\u6bcf\u4e00\u4e2a\u90e8\u5206\u7ee7\u7eed\u4e8c\u5206\uff0c\u9012\u5f52\u4e0b\u53bb\uff0c\u76f4\u5230\u5217\u8868\u91cc\u53ea\u67091\u4e2a\u5143\u7d20 2\u3001\u7136\u540e\u5c06\u5404\u81ea\u53ea\u67091\u4e2a\u5143\u7d20\u7684\u4e24\u4e2a\u5217\u8868\u4f20\u9012\u7ed9merge\u51fd\u6570\uff0c\u6bd4\u8f83\u5927\u5c0f\u6784\u5efa\u6210\u6709\u5e8f\u7684\u5217\u8868 3\u3001\u4f9d\u6b21\u6309\u71671\u4e2d\u9012\u5f52\u7684\u987a\u5e8f\u8fd4\u56de2\u4e2d\u5217\u8868\uff0c\u4e0d\u65ad\u7684\u5408\u5e76\uff0c\u6700\u540e\u5f97\u5230\u6392\u5e8f\u597d\u7684\u6570\u7ec4 \"\"\" def merge_sort ( li ): if len ( li ) == 1 : return li # \u628a\u6570\u636e\u62c6\u5206\u6210\u5de6\u53f3\u5404\u4e00\u534a mid = n // 2 left = li [: mid ] right = li [ mid :] # \u7ee7\u7eed\u9012\u5f52\u62c6\u5206 l_res = merge_sort ( left ) r_res = merge_sort ( right ) # \u628a\u4e0b\u5c42\u65b9\u6cd5\u8fd4\u56de\u7684\u4e24\u4e2a\u6709\u5e8f\u5e8f\u5217\uff0c\u518d\u7ec4\u6210\u6709\u5e8f res = merge ( l_res , r_res ) return res def merge ( ll , rl ): \"\"\"\u628a\u4e24\u4e2a\u6709\u5e8f\u5e8f\u5217\uff0c\u518d\u7ec4\u6210\u6709\u5e8f\"\"\" # [1] [2] # [1,2] [3,6] # \u4e24\u4e2a\u4e0b\u6807\u5206\u522b\u6307\u5411\u4e24\u4e2a\u5e8f\u5217\u76840\u4f4d\u7f6e l_index = 0 r_index = 0 # \u521b\u5efa\u4e34\u65f6\u5217\u8868\u5b58\u653e\u7ed3\u679c res = [] while l_index < len ( ll ) and r_index < len ( rl ): if ll [ l_index ] <= rl [ r_index ]: # \u7b49\u53f7\u4fdd\u8bc1\u7a33\u5b9a\u6027 res . append ( ll [ l_index ]) l_index += 1 else : res . append ( rl [ r_index ]) r_index += 1 # \u5faa\u73af\u7ed3\u675f\u65f6\uff0c\u53ea\u80fd\u628a\u5176\u4e2d\u4e00\u4e2a\u5217\u8868\u7684\u6570\u636e\u5168\u90e8\u653e\u5230\u7ed3\u679c\u4e2d res += ll [ l_index :] res += rl [ r_index :] return res if __name__ == '__main__' : l = [ 4 , 2 , 3 , 5 , 1 ] l = [ 5 , 4 , 3 , 2 , 1 ] print ( merge_sort ( l )) # l=[2,4,6,7,8] # r=[1,3,5] # # 1,2,3,4,5 # print(merge(l,r)) # \u7a33\u5b9a\u6027\uff1a\u7a33\u5b9a # \u6700\u574f\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(nlogn) # \u6700\u4f18\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(nlogn)","title":"\u5f52\u5e76\u6392\u5e8f"},{"location":"python/sort/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/","text":"\u53c2\u8003: \u5feb\u901f\u6392\u5e8f\u7b97\u6cd5(\u56fe\u6587\u5e76\u8302) # quicksort \"\"\" 1\u3001\u9996\u5148\u8ba4\u4e3a\u7b2c\u4e00\u4e2a\u6570\u662f\u6700\u5c0f\u7684\uff0c\u4f46\u5b9e\u9645\u4e0a\u53ef\u80fd\u4e0d\u662f 2\u3001\u90a3\u4e48\u5c31\u8981\u904d\u5386\u5269\u4e0b\u7684\u6570\uff0c\u628a\u6bd4\u8fd9\u4e2a\u6570\u5c0f\u7684\u653e\u5230\u5b83\u7684\u5de6\u8fb9\uff0c\u6bd4\u8fd9\u4e2a\u6570\u5927\u7684\u653e\u5230\u5b83\u7684\u53f3\u8fb9 3\u3001\u5de6\u53f3\u5f00\u59cb\u5f80\u4e2d\u95f4\u904d\u5386\uff0c\u5148\u53f3\u518d\u5de6\uff0c\u6309\u71672\u7684\u89c4\u5219\u6392\u5217\uff0c\u5de6\u53f3\u91cd\u5408\u5c31\u662f1\u4e2d\u6211\u4eec\u8ba4\u4e3a\u7684\u8fd9\u4e2a\u6570\u7684\u4f4d\u7f6e 4\u3001\u7136\u540e\u75283\u4e2d\u8fd9\u4e2a\u4f4d\u7f6e\u7684\u7d22\u5f15\u5206\u6210\u5de6\u53f3\u4e24\u4e2a\u90e8\u5206\uff0c\u7ee7\u7eed\u91cd\u590d1234\u6b65\u9aa4\uff0c\u5373\u53ef\u6392\u5e8f \"\"\" def quick_sort ( li , start , end ): \"\"\" li: \u9700\u8981\u6392\u5e8f\u7684\u5217\u8868 start: \u5217\u8868\u9996\u4f4d\u5143\u7d20\u7684\u7d22\u5f15 end: \u5217\u8868\u672b\u4f4d\u5143\u7d20\u7684\u7d22\u5f15 \"\"\" if start >= end : return n = len ( li ) # \u8ba4\u4e3a0\u4f4d\u7f6e\u662f\u4e2d\u95f4\u503c\uff0c\u8bb0\u5f55\u4e2d\u95f4\u503c mid = li [ start ] # \u5b9a\u4e49\u4e24\u4e2a\u6e38\u6807 left = start right = end while left < right : # \u8ba9\u53f3\u8fb9\u6e38\u6807\u5f80\u5de6\u79fb\u52a8\uff0c\u627e\u5230\u5c0f\u4e8emid\u7684\u503c\uff0c\u653e\u5230\u5de6\u8fb9\u6e38\u6807\u4f4d\u7f6e while left < right and li [ right ] >= mid : right -= 1 # \u5faa\u73af\u7ed3\u675f\uff0c\u653e\u5230\u5de6\u8fb9\u6e38\u6807\u4f4d\u7f6e li [ left ] = li [ right ] # \u8ba9\u5de6\u8fb9\u6e38\u6807\u5f80\u53f3\u79fb\u52a8\uff0c\u627e\u5230\u5927\u4e8emid\u7684\u503c\uff0c\u653e\u5230\u53f3\u8fb9\u6e38\u6807\u4f4d\u7f6e while left < right and li [ left ] < mid : left += 1 # \u5faa\u73af\u7ed3\u675f\uff0c\u653e\u5230\u53f3\u8fb9\u6e38\u6807\u4f4d\u7f6e li [ right ] = li [ left ] # left=right \u628amid\u653e\u5230\u6b64\u4f4d\u7f6e li [ left ] = mid # \u9012\u5f52\u7ee7\u7eed\u5904\u7406\u5de6\u8fb9\u548c\u53f3\u8fb9\u7684\u6570\u636e quick_sort ( li , start , left - 1 ) quick_sort ( li , left + 1 , end ) if __name__ == '__main__' : l = [ 4 , 6 , 2 , 5 , 1 , 3 ] l = [ 6 , 5 , 3 , 2 , 1 ] l = [ 3 , 1 , 5 , 6 , 2 , 4 ] # 3 [2,1,3,6,5,4] quick_sort ( l , 0 , len ( l ) - 1 ) print ( l ) # \u7a33\u5b9a\u6027\uff1a\u4e0d\u7a33\u5b9a # \u6700\u574f\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(n^2) # \u6700\u4f18\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(nlogn)","title":"\u5feb\u901f\u6392\u5e8f"},{"location":"python/sort/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/","text":"\u53c2\u8003: \u63d2\u5165\u6392\u5e8f(\u52a8\u56fe\u7406\u89e3) # insertsort \"\"\" \u62ff\u540e\u4e00\u4e2a\u6570\u8ddf\u524d\u4e00\u4e2a\u6570\u6bd4 \u5982\u679c\u540e\u9762\u7684\u6570\u5927\u4e8e\u524d\u9762\u7684\u6570\u5c31\u5ffd\u7565\uff0c\u5426\u5219\u4ea4\u6362\u4f4d\u7f6e \u4ea4\u6362\u4f4d\u7f6e\u540e\uff0c\u518d\u7ee7\u7eed\u8ddf\u524d\u4e00\u4e2a\u6570\u6bd4\uff0c\u7136\u540e\u91cd\u590d\u8fd9\u4e2a\u6b65\u9aa4\uff0c\u76f4\u5230\u6ca1\u6bd4\u4ed6\u5c0f\u7684\u6216\u7d22\u5f15\u4e3a0 \"\"\" def insert_sort ( li ): n = len ( li ) # \u8ba4\u4e3a\u7b2c\u4e00\u4e2a\u6570\u6709\u5e8f\uff0c\u6bcf\u6b21\u4ece\u540e\u9762\u53d6\u4e00\u4e2a\u6570 for j in range ( 1 , n ): # \u4ece\u540e\u9762\u53d6\u4e00\u4e2a\u6570\u636e\uff08\u5012\u7740\u53d6\u6570\uff09\uff0c\u8ddf\u63d2\u5165\u5230\u524d\u9762\u7684\u6709\u5e8f\u5e8f\u5217\u4e2d for i in range ( j , 0 , - 1 ): # \u62ff\u5f53\u524d\u4f4d\u7f6e\u4e0e\u524d\u9762\u4f4d\u7f6e\u6570\u636e\u8fdb\u884c\u6bd4\u8f83 if li [ i ] < li [ i - 1 ]: li [ i ], li [ i - 1 ] = li [ i - 1 ], li [ i ] else : break if __name__ == '__main__' : l = [ 4 , 2 , 3 , 5 , 1 ] l = [ 5 , 4 , 3 , 2 , 1 ] insert_sort ( l ) print ( l ) # \u7a33\u5b9a\u6027\uff1a\u7a33\u5b9a # \u6700\u574f\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(n^2) # \u6700\u4f18\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(n)","title":"\u63d2\u5165\u6392\u5e8f"},{"location":"python/sort/%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F/","text":"\u53c2\u8003: \u9009\u62e9\u6392\u5e8f(\u52a8\u56fe\u7406\u89e3) # selectsort \"\"\" \u8ba4\u4e3a\u7b2c\u4e00\u4e2a\u6570\u662f\u6700\u5c0f\u7684\uff0c\u904d\u5386\u540e\u9762\u7684\u6570\u8ddf\u4e00\u4e2a\u6570\u6bd4\uff0c\u5982\u679c\u6bd4\u7b2c\u4e00\u4e2a\u6570\uff0c\u8bb0\u5f55\u4e0b\u6765 \u904d\u5386\u5b8c\u6bd5\u540e\u5f97\u51fa\u540e\u9762\u7684\u6570\u4e2d\u6700\u5c0f\u7684\u6570\uff0c\u548c\u7b2c\u4e00\u4e2a\u4ea4\u6362\u4f4d\u7f6e \u6b64\u65f6\u7b2c\u4e00\u4e2a\u6570\u5df2\u7ecf\u662f\u6700\u5c0f\u7684\uff0c\u7ee7\u7eed\u904d\u5386\uff0c\u8ba4\u4e3a\u7b2c2\u4e2a\u6570\u662f\u5269\u4f59\u6240\u6709\u6570\u4e2d\u6700\u5c0f\u7684\uff0c\u7ee7\u7eed\u91cd\u590d\u4e0a\u8ff0\u6b65\u9aa4\u5373\u53ef \"\"\" def select_sort ( li ): n = len ( li ) # \u5185\u90e8\u5faa\u73af\u6bcf\u6b21\u627e\u5230\u4e00\u4e2a\u6700\u5c0f\u7684\u6570\uff0c\u5171\u9700\u8981n-1\u6b21 for j in range ( n - 1 ): # j=1 # \u8bb0\u5f550\u4f4d\u7f6e\uff0c\u8ba4\u4e3a0\u4f4d\u7f6e\u5c31\u662f\u6700\u5c0f\u7684\u6570 min = j # \u904d\u5386\u540e\u9762\u7684\u6570\u636e\uff0c\u4e0e\u6700\u5c0f\u7684\u6570\u8fdb\u884c\u6bd4\u8f83 for i in range ( j + 1 , n ): if li [ i ] < li [ min ]: min = i # \u5faa\u73af\u7ed3\u675f\u65f6\uff0cmin\u6307\u5411\u7684\u662f\u6700\u5c0f\u7684\u6570\uff0c\u628a\u6700\u5c0f\u7684\u6570\u653e\u5230\u5269\u4e0b\u7684\u65e0\u5e8f\u5e8f\u5217\u7684\u6700\u524d\u9762 li [ min ], li [ j ] = li [ j ], li [ min ] if __name__ == '__main__' : l = [ 4 , 2 , 3 , 5 , 1 ] l = [ 5 , 4 , 3 , 2 , 1 ] select_sort ( l ) print ( l ) # \u7a33\u5b9a\u6027\uff1a\u4e0d\u7a33\u5b9a # \u6700\u574f\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(n^2) # \u6700\u4f18\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(n^2)","title":"\u9009\u62e9\u6392\u5e8f"},{"location":"python/tcp-udp/TCP%E9%80%9A%E8%AE%AF/","text":"TCP\u901a\u8baf TCP_Server import socket tcp_server = socket . socket ( socket . AF_INET , socket . SOCK_STREAM ) tcp_server . bind (( 'localhost' , 8080 )) tcp_server . listen ( 5 ) tcp_client , tcp_client_ip_port = tcp_server . accept () tcp_client_data = tcp_client . recv ( 1024 ) . decode ( 'utf-8' ) host = tcp_client_ip_port [ 0 ] + ':' + str ( tcp_client_ip_port [ 1 ]) print ( host + ':' , tcp_client_data ) tcp_client . send ( '\u670d\u52a1\u7aef\u5df2\u6536\u5230\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u6d88\u606f\uff01' . encode ( 'utf-8' )) TCP_Client import socket tcp_client = socket . socket ( socket . AF_INET , socket . SOCK_STREAM ) tcp_client . connect (( 'localhost' , 8080 )) tcp_client . send ( '\u6211\u662ftcp\u5ba2\u6237\u7aef\uff01' . encode ( 'utf-8' )) print ( tcp_client . recv ( 1024 ) . decode ( 'utf-8' )) TCP_Server_Client import socket def send_data ( tcp_socket , tcp_address ): tcp_socket . connect ( tcp_address ) tcp_socket . sendto ( input ( '\u8bf7\u8f93\u5165\u8981\u53d1\u9001\u7684\u5185\u5bb9\uff1a' ) . encode ( 'utf-8' ), tcp_address ) print ( tcp_socket . recv ( 1024 ) . decode ( 'utf-8' )) def recv_data ( tcp_socket , tcp_address ): tcp_socket . bind ( tcp_address ) tcp_socket . listen ( 5 ) tcp_client , tcp_client_ip_port = tcp_socket . accept () tcp_client_data = tcp_client . recv ( 1024 ) . decode ( 'utf-8' ) host = tcp_client_ip_port [ 0 ] + ':' + str ( tcp_client_ip_port [ 1 ]) print ( host + ':' , tcp_client_data ) tcp_client . send ( '\u670d\u52a1\u7aef\u5df2\u6536\u5230\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u6d88\u606f\uff01' . encode ( 'utf-8' )) if __name__ == '__main__' : tcp_socket = socket . socket ( socket . AF_INET , socket . SOCK_STREAM ) tcp_address = ( 'localhost' , 8080 ) # \u4e0d\u7ecf\u5386TIME_WAIT\u7684\u8fc7\u7a0b, \u7acb\u5373\u5173\u95edsocket\u5e76\u91ca\u653e\u7aef\u53e3 tcp_socket . setsockopt ( socket . SOL_SOCKET , socket . SO_REUSEADDR , True ) while True : choice = input ( '1\u3001\u53d1\u9001 \\t 2\u3001\u63a5\u6536 \\n ' ) if choice == '1' : send_data ( tcp_socket , tcp_address ) if choice == '2' : recv_data ( tcp_socket , tcp_address )","title":"TCP\u901a\u8baf"},{"location":"python/tcp-udp/TCP%E9%80%9A%E8%AE%AF/#tcp","text":"","title":"TCP\u901a\u8baf"},{"location":"python/tcp-udp/TCP%E9%80%9A%E8%AE%AF/#tcp_server","text":"import socket tcp_server = socket . socket ( socket . AF_INET , socket . SOCK_STREAM ) tcp_server . bind (( 'localhost' , 8080 )) tcp_server . listen ( 5 ) tcp_client , tcp_client_ip_port = tcp_server . accept () tcp_client_data = tcp_client . recv ( 1024 ) . decode ( 'utf-8' ) host = tcp_client_ip_port [ 0 ] + ':' + str ( tcp_client_ip_port [ 1 ]) print ( host + ':' , tcp_client_data ) tcp_client . send ( '\u670d\u52a1\u7aef\u5df2\u6536\u5230\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u6d88\u606f\uff01' . encode ( 'utf-8' ))","title":"TCP_Server"},{"location":"python/tcp-udp/TCP%E9%80%9A%E8%AE%AF/#tcp_client","text":"import socket tcp_client = socket . socket ( socket . AF_INET , socket . SOCK_STREAM ) tcp_client . connect (( 'localhost' , 8080 )) tcp_client . send ( '\u6211\u662ftcp\u5ba2\u6237\u7aef\uff01' . encode ( 'utf-8' )) print ( tcp_client . recv ( 1024 ) . decode ( 'utf-8' ))","title":"TCP_Client"},{"location":"python/tcp-udp/TCP%E9%80%9A%E8%AE%AF/#tcp_server_client","text":"import socket def send_data ( tcp_socket , tcp_address ): tcp_socket . connect ( tcp_address ) tcp_socket . sendto ( input ( '\u8bf7\u8f93\u5165\u8981\u53d1\u9001\u7684\u5185\u5bb9\uff1a' ) . encode ( 'utf-8' ), tcp_address ) print ( tcp_socket . recv ( 1024 ) . decode ( 'utf-8' )) def recv_data ( tcp_socket , tcp_address ): tcp_socket . bind ( tcp_address ) tcp_socket . listen ( 5 ) tcp_client , tcp_client_ip_port = tcp_socket . accept () tcp_client_data = tcp_client . recv ( 1024 ) . decode ( 'utf-8' ) host = tcp_client_ip_port [ 0 ] + ':' + str ( tcp_client_ip_port [ 1 ]) print ( host + ':' , tcp_client_data ) tcp_client . send ( '\u670d\u52a1\u7aef\u5df2\u6536\u5230\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u6d88\u606f\uff01' . encode ( 'utf-8' )) if __name__ == '__main__' : tcp_socket = socket . socket ( socket . AF_INET , socket . SOCK_STREAM ) tcp_address = ( 'localhost' , 8080 ) # \u4e0d\u7ecf\u5386TIME_WAIT\u7684\u8fc7\u7a0b, \u7acb\u5373\u5173\u95edsocket\u5e76\u91ca\u653e\u7aef\u53e3 tcp_socket . setsockopt ( socket . SOL_SOCKET , socket . SO_REUSEADDR , True ) while True : choice = input ( '1\u3001\u53d1\u9001 \\t 2\u3001\u63a5\u6536 \\n ' ) if choice == '1' : send_data ( tcp_socket , tcp_address ) if choice == '2' : recv_data ( tcp_socket , tcp_address )","title":"TCP_Server_Client"},{"location":"python/tcp-udp/UDP%E9%80%9A%E8%AE%AF/","text":"UDP\u901a\u8baf UDP_Server import socket # udp\u670d\u52a1\u7aef udp_server = socket . socket ( socket . AF_INET , socket . SOCK_DGRAM ) udp_server . bind (( '' , 8080 )) # recv()\u63a5\u6536\u5ba2\u6237\u7aef\u53d1\u6765\u7684\u6570\u636e # udp_client_data = udp_server.recv(1024).decode('utf-8') # print(udp_client_data) # recvfrom()\u63a5\u6536\u4e00\u4e2a\u5143\u7ec4 # \u7b2c\u4e00\u4e2a\u5143\u9001\u662f\u5ba2\u6237\u7aef\u53d1\u6765\u7684\u6570\u636e # \u7b2c\u4e8c\u4e2a\u5143\u7d20\u662f\u4e00\u4e2a\u5305\u542b\u5ba2\u6237\u7aefip\u548cport\u7684\u5143\u7ec4 udp_client_data = udp_server . recvfrom ( 1024 ) print ( udp_client_data [ 0 ] . decode ( 'utf-8' ), udp_client_data [ 1 ]) UDP_Client import socket # udp\u5ba2\u6237\u7aef udp_client = socket . socket ( socket . AF_INET , socket . SOCK_DGRAM ) udp_client . sendto ( '\u6211\u662fudp\u5ba2\u6237\u7aef' . encode ( 'utf-8' ), ( 'localhost' , 8080 )) UDP_Server_Client import socket def send_data ( udp_socket , udp_address ): udp_socket . sendto ( input ( '\u8bf7\u8f93\u5165\u8981\u53d1\u9001\u7684\u5185\u5bb9\uff1a' ) . encode ( 'utf-8' ), udp_address ) def recv_data ( udp_socket ): data , ip_port = udp_socket . recvfrom ( 1024 ) ip , port = ip_port host = ip + ':' + str ( port ) print ( host + ':' , data . decode ( 'utf-8' )) if __name__ == '__main__' : udp_socket = socket . socket ( socket . AF_INET , socket . SOCK_DGRAM ) udp_address = ( 'localhost' , 8081 ) udp_socket . bind ( udp_address ) while True : choice = input ( '1\u3001\u53d1\u9001 \\t 2\u3001\u63a5\u6536 \\n ' ) if choice == '1' : send_data ( udp_socket , udp_address ) if choice == '2' : recv_data ( udp_socket )","title":"UDP\u901a\u8baf"},{"location":"python/tcp-udp/UDP%E9%80%9A%E8%AE%AF/#udp","text":"","title":"UDP\u901a\u8baf"},{"location":"python/tcp-udp/UDP%E9%80%9A%E8%AE%AF/#udp_server","text":"import socket # udp\u670d\u52a1\u7aef udp_server = socket . socket ( socket . AF_INET , socket . SOCK_DGRAM ) udp_server . bind (( '' , 8080 )) # recv()\u63a5\u6536\u5ba2\u6237\u7aef\u53d1\u6765\u7684\u6570\u636e # udp_client_data = udp_server.recv(1024).decode('utf-8') # print(udp_client_data) # recvfrom()\u63a5\u6536\u4e00\u4e2a\u5143\u7ec4 # \u7b2c\u4e00\u4e2a\u5143\u9001\u662f\u5ba2\u6237\u7aef\u53d1\u6765\u7684\u6570\u636e # \u7b2c\u4e8c\u4e2a\u5143\u7d20\u662f\u4e00\u4e2a\u5305\u542b\u5ba2\u6237\u7aefip\u548cport\u7684\u5143\u7ec4 udp_client_data = udp_server . recvfrom ( 1024 ) print ( udp_client_data [ 0 ] . decode ( 'utf-8' ), udp_client_data [ 1 ])","title":"UDP_Server"},{"location":"python/tcp-udp/UDP%E9%80%9A%E8%AE%AF/#udp_client","text":"import socket # udp\u5ba2\u6237\u7aef udp_client = socket . socket ( socket . AF_INET , socket . SOCK_DGRAM ) udp_client . sendto ( '\u6211\u662fudp\u5ba2\u6237\u7aef' . encode ( 'utf-8' ), ( 'localhost' , 8080 ))","title":"UDP_Client"},{"location":"python/tcp-udp/UDP%E9%80%9A%E8%AE%AF/#udp_server_client","text":"import socket def send_data ( udp_socket , udp_address ): udp_socket . sendto ( input ( '\u8bf7\u8f93\u5165\u8981\u53d1\u9001\u7684\u5185\u5bb9\uff1a' ) . encode ( 'utf-8' ), udp_address ) def recv_data ( udp_socket ): data , ip_port = udp_socket . recvfrom ( 1024 ) ip , port = ip_port host = ip + ':' + str ( port ) print ( host + ':' , data . decode ( 'utf-8' )) if __name__ == '__main__' : udp_socket = socket . socket ( socket . AF_INET , socket . SOCK_DGRAM ) udp_address = ( 'localhost' , 8081 ) udp_socket . bind ( udp_address ) while True : choice = input ( '1\u3001\u53d1\u9001 \\t 2\u3001\u63a5\u6536 \\n ' ) if choice == '1' : send_data ( udp_socket , udp_address ) if choice == '2' : recv_data ( udp_socket )","title":"UDP_Server_Client"},{"location":"python/tcp-udp/%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/","text":"\u6587\u4ef6\u4e0b\u8f7d \u4f7f\u7528argparse\u5e93\u5b9e\u73b0\u547d\u4ee4\u884c \u4f7f\u7528pathlib\u5e93\u5b8c\u6210\u76ee\u5f55\u3001\u6587\u4ef6\u90e8\u5206 \u4f7f\u7528socket\u5e93\u5b8c\u6210tcp\u4e0b\u8f7d \u4f7f\u7528concurrent.futures\u5e93\u5b9e\u73b0\u7ebf\u7a0b\u6c60 \u670d\u52a1\u7aef import argparse import os import pathlib import socket from concurrent.futures import ThreadPoolExecutor class CLI ( object ): def __init__ ( self ): parser = argparse . ArgumentParser ( prog = 'FileTransfer' , description = 'Download the file from server to client by socket' , epilog = 'www.911205.xyz' , ) # \u53ef\u9009\u53c2\u6570 parser . add_argument ( '-i' , dest = 'ip' , help = '\u670d\u52a1\u5668\u5730\u5740' , default = '0.0.0.0' , type = str ) parser . add_argument ( '-p' , dest = 'port' , help = '\u670d\u52a1\u5668\u7aef\u53e3' , default = 9876 , type = int ) parser . add_argument ( '-f' , dest = 'file' , help = '\u670d\u52a1\u5668\u6587\u4ef6, \u652f\u6301\u76f8\u5bf9\u8def\u5f84\u548c\u7edd\u5bf9\u8def\u5f84' , type = str ) parser . add_argument ( '-s' , dest = 'size' , help = '\u5355\u6b21\u4f20\u8f93\u6587\u4ef6\u5927\u5c0f, \u9ed8\u8ba41024\u5b57\u8282(Byte), \u53731KB' , default = 1024 , type = int ) args = parser . parse_args () print ( f '\u670d\u52a1\u5668\u76d1\u542c\u5730\u5740: { args . ip } ' ) print ( f '\u670d\u52a1\u5668\u76d1\u542c\u7aef\u53e3: { args . port } ' ) print ( f '\u670d\u52a1\u5668\u76d1\u542c\u6587\u4ef6: { pathlib . Path ( args . file ) . resolve () } ' ) print ( f '\u6bcf\u6b21\u4f20\u9001\u6587\u4ef6\u5927\u5c0f: { args . size } \u5b57\u8282' ) SendFile ( * args . __dict__ . values ()) class SendFile : def __init__ ( self , ip : str , port : int , file : str , size : int ): self . file , self . file_name = self . get_file ( file ) # tcp\u670d\u52a1\u7aef\u5957\u63a5\u5b57 self . tcp_server_socket = socket . socket ( socket . AF_INET , socket . SOCK_STREAM ) # \u5173\u95ed\u540e\u7acb\u5373\u91ca\u653e\u7aef\u53e3(\u4e0d\u7ecf\u5386TIME_WAIT\u9636\u6bb5) self . tcp_server_socket . setsockopt ( socket . SOL_SOCKET , socket . SO_REUSEADDR , True ) # \u7ed1\u5b9a\u7aef\u53e3 self . tcp_server_socket . bind (( ip , port )) # \u4e3b\u52a8\u5957\u63a5\u5b57\u53d8\u88ab\u52a8 self . tcp_server_socket . listen ( os . cpu_count () * 2 ) # \u63d0\u4f9b\u4e00\u6b21\u6027\u4e0b\u8f7d\u670d\u52a1 # # \u83b7\u53d6\u5ba2\u6237\u7aef\u7684\u5957\u63a5\u5b57 # self.client_socket, clinet_info = self.tcp_server_socket.accept() # self.client_socket.send(file_name.encode('utf-8')) # # \u53d1\u9001\u6587\u4ef6 # self.send_file(file, clinet_info) # \u542f\u7528\u7ebf\u7a0b\u6c60 thread_pool = ThreadPoolExecutor ( max_workers = os . cpu_count ()) # \u63d0\u4f9b\u591a\u6b21\u4e0b\u8f7d\u670d\u52a1(\u670d\u52a1\u5668\u4e0d\u5173\u95ed, \u591a\u4e2a\u5ba2\u6237\u7aef\u5747\u53ef\u4e0b\u8f7d) while True : self . client_socket , clinet_info = self . tcp_server_socket . accept () # self.client_socket.send(file_name.encode('utf-8')) # self.send_file(file, size, clinet_info) # \u4f7f\u7528\u7ebf\u7a0b\u6c60\u540c\u65f6\u5904\u7406\u591a\u4e2a\u8bf7\u6c42 thread_pool . submit ( self . send_file_in_thread_pool , * [ size , clinet_info ]) def get_file ( self , file ): \"\"\"\u83b7\u53d6\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\u548c\u540d\u79f0\"\"\" file , file_name = self . is_file ( file ) print ( f '\u51c6\u5907\u53d1\u9001\u6587\u4ef6: { file_name } ' ) return file , file_name @staticmethod def is_file ( file ): \"\"\"\u5224\u65ad\u6587\u4ef6\u662f\u5426\u5b58\u5728\u5e76\u8fd4\u56de\u7edd\u5bf9\u8def\u5f84\u548c\u6587\u4ef6\u540d\u79f0\"\"\" file = pathlib . Path ( file ) if not file . is_file (): raise FileNotFoundError ( f '\u6587\u4ef6 { file } \u4e0d\u5b58\u5728' ) return file . resolve (), file . name def send_file_in_thread_pool ( self , size , clinet_info ): \"\"\"\u4f7f\u7528\u8fdb\u7a0b\u6c60, \u53ef\u540c\u65f6\u5904\u7406\u591a\u4e2a\u5ba2\u6237\u7aef\u8bf7\u6c42\"\"\" self . client_socket . send ( self . file_name . encode ( 'utf-8' )) self . send_file ( size , clinet_info ) def send_file ( self , size , clinet_info ): \"\"\"\u53d1\u9001\u6587\u4ef6\u5230\u5ba2\u6237\u7aef\"\"\" with open ( self . file , \"rb\" ) as f : while True : # \u8bfb\u53d6\u6570\u636e result = f . read ( size ) if result : # \u53d1\u9001\u6570\u636e self . client_socket . send ( result ) else : print ( f \"\u6587\u4ef6\u4f20\u8f93\u5b8c\u6210... { clinet_info } \" ) break self . close_socket () def close_socket ( self ): \"\"\"\u5173\u95ed\u5957\u63a5\u5b57\"\"\" # \u5173\u95ed\u5957\u63a5\u5b57 -> \u4e0d\u518d\u8fdb\u884c\u6536\u53d1\u6570\u636e self . client_socket . close () # \u5173\u95ed\u5957\u63a5\u5b57 -> \u4e0d\u518d\u63a5\u6536\u5176\u4ed6\u5ba2\u6237\u7aef\u4e0e\u5176\u5efa\u7acb\u8fde\u63a5 # self.tcp_server_socket.close() def main (): try : CLI () except FileNotFoundError as e : print ( f '\u9519\u8bef: { e } ' ) except Exception as e : print ( f '\u9519\u8bef: { e } ' ) if __name__ == '__main__' : main () \u5ba2\u6237\u7aef import argparse import pathlib import socket from typing import Union class CLI ( object ): def __init__ ( self ): parser = argparse . ArgumentParser ( prog = 'FileTransfer' , description = 'Download the file from server to client by socket' , epilog = 'www.911205.xyz' , ) # \u4f4d\u7f6e\u53c2\u6570 parser . add_argument ( 'ip' , help = '\u670d\u52a1\u5668\u5730\u5740' , type = str ) # \u53ef\u9009\u53c2\u6570 parser . add_argument ( '-p' , dest = 'port' , help = '\u670d\u52a1\u5668\u7aef\u53e3' , default = 9876 , type = int ) parser . add_argument ( '-o' , dest = 'output' , help = '\u6587\u4ef6\u8f93\u51fa\u4f4d\u7f6e, \u540e\u9762\u6839\u6587\u4ef6\u540d\u5219\u8868\u793a\u91cd\u547d\u540d' , type = str ) args = parser . parse_args () print ( f '\u670d\u52a1\u5668\u76d1\u542c\u5730\u5740: { args . ip } ' ) print ( f '\u670d\u52a1\u5668\u76d1\u542c\u7aef\u53e3: { args . port } ' ) ReceiveFile ( * args . __dict__ . values ()) class ReceiveFile : def __init__ ( self , ip : str , port : int , output : Union [ str , None ]): # \u521b\u5efatcp\u5ba2\u6237\u7aef\u5957\u63a5\u5b57 self . tcp_client_socket = socket . socket ( socket . AF_INET , socket . SOCK_STREAM ) # \u5efa\u7acb\u8fde\u63a5 self . tcp_client_socket . connect (( ip , port )) # \u63a5\u6536\u6587\u4ef6\u540d\u79f0 self . file_name = self . tcp_client_socket . recv ( 1024 ) . decode ( 'utf-8' ) print ( f '\u51c6\u5907\u4e0b\u8f7d\u6587\u4ef6: { self . file_name } ' ) # \u4e0b\u8f7d\u6587\u4ef6 self . receive_file ( output ) def receive_file ( self , output ): if output : file = pathlib . Path ( output ) if file . is_dir (): file = file . joinpath ( self . file_name ) else : file = pathlib . Path ( self . file_name ) file = file . resolve () print ( f '\u6587\u4ef6\u53e6\u5b58\u4e3a: { file } ' ) with open ( f ' { file } ' , \"wb\" ) as f : while True : # \u63a5\u6536\u6570\u636e recv_data = self . tcp_client_socket . recv ( 1024 ) if recv_data : # \u5199\u5165\u6570\u636e f . write ( recv_data ) else : print ( \"\u6587\u4ef6\u4e0b\u8f7d\u6210\u529f...\" ) break self . close_socket () def close_socket ( self ): \"\"\"\u5173\u95ed\u5957\u63a5\u5b57\"\"\" self . tcp_client_socket . close () def main (): try : CLI () except ConnectionRefusedError as e : print ( '\u9519\u8bef: \u65e0\u6cd5\u8fde\u63a5\u670d\u52a1\u5668' ) except Exception as e : print ( f '\u9519\u8bef: { e } ' ) if __name__ == '__main__' : main ()","title":"\u6587\u4ef6\u4e0b\u8f7d"},{"location":"python/tcp-udp/%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/#_1","text":"\u4f7f\u7528argparse\u5e93\u5b9e\u73b0\u547d\u4ee4\u884c \u4f7f\u7528pathlib\u5e93\u5b8c\u6210\u76ee\u5f55\u3001\u6587\u4ef6\u90e8\u5206 \u4f7f\u7528socket\u5e93\u5b8c\u6210tcp\u4e0b\u8f7d \u4f7f\u7528concurrent.futures\u5e93\u5b9e\u73b0\u7ebf\u7a0b\u6c60","title":"\u6587\u4ef6\u4e0b\u8f7d"},{"location":"python/tcp-udp/%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/#_2","text":"import argparse import os import pathlib import socket from concurrent.futures import ThreadPoolExecutor class CLI ( object ): def __init__ ( self ): parser = argparse . ArgumentParser ( prog = 'FileTransfer' , description = 'Download the file from server to client by socket' , epilog = 'www.911205.xyz' , ) # \u53ef\u9009\u53c2\u6570 parser . add_argument ( '-i' , dest = 'ip' , help = '\u670d\u52a1\u5668\u5730\u5740' , default = '0.0.0.0' , type = str ) parser . add_argument ( '-p' , dest = 'port' , help = '\u670d\u52a1\u5668\u7aef\u53e3' , default = 9876 , type = int ) parser . add_argument ( '-f' , dest = 'file' , help = '\u670d\u52a1\u5668\u6587\u4ef6, \u652f\u6301\u76f8\u5bf9\u8def\u5f84\u548c\u7edd\u5bf9\u8def\u5f84' , type = str ) parser . add_argument ( '-s' , dest = 'size' , help = '\u5355\u6b21\u4f20\u8f93\u6587\u4ef6\u5927\u5c0f, \u9ed8\u8ba41024\u5b57\u8282(Byte), \u53731KB' , default = 1024 , type = int ) args = parser . parse_args () print ( f '\u670d\u52a1\u5668\u76d1\u542c\u5730\u5740: { args . ip } ' ) print ( f '\u670d\u52a1\u5668\u76d1\u542c\u7aef\u53e3: { args . port } ' ) print ( f '\u670d\u52a1\u5668\u76d1\u542c\u6587\u4ef6: { pathlib . Path ( args . file ) . resolve () } ' ) print ( f '\u6bcf\u6b21\u4f20\u9001\u6587\u4ef6\u5927\u5c0f: { args . size } \u5b57\u8282' ) SendFile ( * args . __dict__ . values ()) class SendFile : def __init__ ( self , ip : str , port : int , file : str , size : int ): self . file , self . file_name = self . get_file ( file ) # tcp\u670d\u52a1\u7aef\u5957\u63a5\u5b57 self . tcp_server_socket = socket . socket ( socket . AF_INET , socket . SOCK_STREAM ) # \u5173\u95ed\u540e\u7acb\u5373\u91ca\u653e\u7aef\u53e3(\u4e0d\u7ecf\u5386TIME_WAIT\u9636\u6bb5) self . tcp_server_socket . setsockopt ( socket . SOL_SOCKET , socket . SO_REUSEADDR , True ) # \u7ed1\u5b9a\u7aef\u53e3 self . tcp_server_socket . bind (( ip , port )) # \u4e3b\u52a8\u5957\u63a5\u5b57\u53d8\u88ab\u52a8 self . tcp_server_socket . listen ( os . cpu_count () * 2 ) # \u63d0\u4f9b\u4e00\u6b21\u6027\u4e0b\u8f7d\u670d\u52a1 # # \u83b7\u53d6\u5ba2\u6237\u7aef\u7684\u5957\u63a5\u5b57 # self.client_socket, clinet_info = self.tcp_server_socket.accept() # self.client_socket.send(file_name.encode('utf-8')) # # \u53d1\u9001\u6587\u4ef6 # self.send_file(file, clinet_info) # \u542f\u7528\u7ebf\u7a0b\u6c60 thread_pool = ThreadPoolExecutor ( max_workers = os . cpu_count ()) # \u63d0\u4f9b\u591a\u6b21\u4e0b\u8f7d\u670d\u52a1(\u670d\u52a1\u5668\u4e0d\u5173\u95ed, \u591a\u4e2a\u5ba2\u6237\u7aef\u5747\u53ef\u4e0b\u8f7d) while True : self . client_socket , clinet_info = self . tcp_server_socket . accept () # self.client_socket.send(file_name.encode('utf-8')) # self.send_file(file, size, clinet_info) # \u4f7f\u7528\u7ebf\u7a0b\u6c60\u540c\u65f6\u5904\u7406\u591a\u4e2a\u8bf7\u6c42 thread_pool . submit ( self . send_file_in_thread_pool , * [ size , clinet_info ]) def get_file ( self , file ): \"\"\"\u83b7\u53d6\u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\u548c\u540d\u79f0\"\"\" file , file_name = self . is_file ( file ) print ( f '\u51c6\u5907\u53d1\u9001\u6587\u4ef6: { file_name } ' ) return file , file_name @staticmethod def is_file ( file ): \"\"\"\u5224\u65ad\u6587\u4ef6\u662f\u5426\u5b58\u5728\u5e76\u8fd4\u56de\u7edd\u5bf9\u8def\u5f84\u548c\u6587\u4ef6\u540d\u79f0\"\"\" file = pathlib . Path ( file ) if not file . is_file (): raise FileNotFoundError ( f '\u6587\u4ef6 { file } \u4e0d\u5b58\u5728' ) return file . resolve (), file . name def send_file_in_thread_pool ( self , size , clinet_info ): \"\"\"\u4f7f\u7528\u8fdb\u7a0b\u6c60, \u53ef\u540c\u65f6\u5904\u7406\u591a\u4e2a\u5ba2\u6237\u7aef\u8bf7\u6c42\"\"\" self . client_socket . send ( self . file_name . encode ( 'utf-8' )) self . send_file ( size , clinet_info ) def send_file ( self , size , clinet_info ): \"\"\"\u53d1\u9001\u6587\u4ef6\u5230\u5ba2\u6237\u7aef\"\"\" with open ( self . file , \"rb\" ) as f : while True : # \u8bfb\u53d6\u6570\u636e result = f . read ( size ) if result : # \u53d1\u9001\u6570\u636e self . client_socket . send ( result ) else : print ( f \"\u6587\u4ef6\u4f20\u8f93\u5b8c\u6210... { clinet_info } \" ) break self . close_socket () def close_socket ( self ): \"\"\"\u5173\u95ed\u5957\u63a5\u5b57\"\"\" # \u5173\u95ed\u5957\u63a5\u5b57 -> \u4e0d\u518d\u8fdb\u884c\u6536\u53d1\u6570\u636e self . client_socket . close () # \u5173\u95ed\u5957\u63a5\u5b57 -> \u4e0d\u518d\u63a5\u6536\u5176\u4ed6\u5ba2\u6237\u7aef\u4e0e\u5176\u5efa\u7acb\u8fde\u63a5 # self.tcp_server_socket.close() def main (): try : CLI () except FileNotFoundError as e : print ( f '\u9519\u8bef: { e } ' ) except Exception as e : print ( f '\u9519\u8bef: { e } ' ) if __name__ == '__main__' : main ()","title":"\u670d\u52a1\u7aef"},{"location":"python/tcp-udp/%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/#_3","text":"import argparse import pathlib import socket from typing import Union class CLI ( object ): def __init__ ( self ): parser = argparse . ArgumentParser ( prog = 'FileTransfer' , description = 'Download the file from server to client by socket' , epilog = 'www.911205.xyz' , ) # \u4f4d\u7f6e\u53c2\u6570 parser . add_argument ( 'ip' , help = '\u670d\u52a1\u5668\u5730\u5740' , type = str ) # \u53ef\u9009\u53c2\u6570 parser . add_argument ( '-p' , dest = 'port' , help = '\u670d\u52a1\u5668\u7aef\u53e3' , default = 9876 , type = int ) parser . add_argument ( '-o' , dest = 'output' , help = '\u6587\u4ef6\u8f93\u51fa\u4f4d\u7f6e, \u540e\u9762\u6839\u6587\u4ef6\u540d\u5219\u8868\u793a\u91cd\u547d\u540d' , type = str ) args = parser . parse_args () print ( f '\u670d\u52a1\u5668\u76d1\u542c\u5730\u5740: { args . ip } ' ) print ( f '\u670d\u52a1\u5668\u76d1\u542c\u7aef\u53e3: { args . port } ' ) ReceiveFile ( * args . __dict__ . values ()) class ReceiveFile : def __init__ ( self , ip : str , port : int , output : Union [ str , None ]): # \u521b\u5efatcp\u5ba2\u6237\u7aef\u5957\u63a5\u5b57 self . tcp_client_socket = socket . socket ( socket . AF_INET , socket . SOCK_STREAM ) # \u5efa\u7acb\u8fde\u63a5 self . tcp_client_socket . connect (( ip , port )) # \u63a5\u6536\u6587\u4ef6\u540d\u79f0 self . file_name = self . tcp_client_socket . recv ( 1024 ) . decode ( 'utf-8' ) print ( f '\u51c6\u5907\u4e0b\u8f7d\u6587\u4ef6: { self . file_name } ' ) # \u4e0b\u8f7d\u6587\u4ef6 self . receive_file ( output ) def receive_file ( self , output ): if output : file = pathlib . Path ( output ) if file . is_dir (): file = file . joinpath ( self . file_name ) else : file = pathlib . Path ( self . file_name ) file = file . resolve () print ( f '\u6587\u4ef6\u53e6\u5b58\u4e3a: { file } ' ) with open ( f ' { file } ' , \"wb\" ) as f : while True : # \u63a5\u6536\u6570\u636e recv_data = self . tcp_client_socket . recv ( 1024 ) if recv_data : # \u5199\u5165\u6570\u636e f . write ( recv_data ) else : print ( \"\u6587\u4ef6\u4e0b\u8f7d\u6210\u529f...\" ) break self . close_socket () def close_socket ( self ): \"\"\"\u5173\u95ed\u5957\u63a5\u5b57\"\"\" self . tcp_client_socket . close () def main (): try : CLI () except ConnectionRefusedError as e : print ( '\u9519\u8bef: \u65e0\u6cd5\u8fde\u63a5\u670d\u52a1\u5668' ) except Exception as e : print ( f '\u9519\u8bef: { e } ' ) if __name__ == '__main__' : main ()","title":"\u5ba2\u6237\u7aef"},{"location":"python/thread-process-coroutine/%E5%8D%8F%E7%A8%8B/","text":"\u534f\u7a0b \u4ee3\u78011(yield) import time def work_one (): for _ in range ( 3 ): print ( '-----\u534f\u7a0b1-----' ) yield time . sleep ( 0.5 ) def work_two (): for _ in range ( 3 ): print ( '-----\u534f\u7a0b2-----' ) yield time . sleep ( 0.5 ) def main (): wo , wt = work_one (), work_two () for _ in range ( 3 ): next ( wo ) next ( wt ) if __name__ == '__main__' : main () \u4ee3\u78012(greenlet) import time from greenlet import greenlet def main (): def work_one (): while True : print ( '-----A-----' ) gl_two . switch () time . sleep ( 0.5 ) def work_two (): while True : print ( '-----B-----' ) gl_one . switch () time . sleep ( 0.5 ) gl_one = greenlet ( work_one ) gl_two = greenlet ( work_two ) gl_one . switch () if __name__ == '__main__' : main () \u901a\u8fc7greenlet\u5b9e\u73b0\u7684\u534f\u7a0b\uff0c\u9700\u8981\u4eba\u5de5\u5207\u6362 \u4ee3\u78013(gevent) \u7528\u6cd51: \u4f7f\u7528monkey.patch_all()\u5b9e\u73b0\uff0c\u5f53\u9047\u5230\u8017\u65f6\u60c5\u51b5\u65f6\u81ea\u52a8\u5207\u6362\u534f\u7a0b import time import gevent from gevent import monkey # \u7ed9\u7a0b\u5e8f\u6253\u8865\u4e01, \u6709\u8017\u65f6\u64cd\u4f5c(\u4f8b\u5982time.sleep)\u65f6 monkey . patch_all () def work1 (): while True : print ( 'work1...' ) time . sleep ( 1 ) def work2 (): while True : print ( 'work2...' ) time . sleep ( 1 ) def main (): w1 = gevent . spawn ( work1 ) w2 = gevent . spawn ( work2 ) w1 . join () w2 . join () if __name__ == '__main__' : main () \u7528\u6cd52: \u4e0d\u4f7f\u7528monkey.patch_all()\u7684\u60c5\u51b5\u4e0b\u8981\u5b9e\u73b0\u534f\u7a0b\u7684\u81ea\u52a8\u5207\u6362\uff0c\u9700\u4f7f\u7528gevent\u4e2d\u81ea\u5df1\u7684\u8017\u65f6\u6a21\u5757 import gevent def work1 (): while True : print ( 'work1...' ) # \u5c06\u7a0b\u5e8f\u4e2d\u7528\u5230\u7684\u8017\u65f6\u64cd\u4f5c\u7684\u4ee3\u7801\uff0c\u4f7f\u7528gevent\u4e2d\u81ea\u5df1\u5b9e\u73b0\u7684\u6a21\u5757 gevent . sleep ( 1 ) def work2 (): while True : print ( 'work2...' ) # \u4f7f\u7528gevent\u4e2d\u81ea\u5df1\u5b9e\u73b0\u7684\u6a21\u5757\uff0c\u4e0d\u9700\u8981monkey.patch_all() gevent . sleep ( 1 ) def main (): w1 = gevent . spawn ( work1 ) w2 = gevent . spawn ( work2 ) w1 . join () w2 . join () if __name__ == '__main__' : main () \u7528\u6cd53: \u6279\u91cfjoin\u534f\u7a0b\u548c\u4f20\u53c2 import gevent def work1 ( msg ): while True : print ( msg ) gevent . sleep ( 1 ) def work2 ( msg ): while True : print ( msg ) gevent . sleep ( 1 ) def main (): # joinall\u53ef\u6279\u91cf\u6dfb\u52a0\u534f\u7a0b gevent . joinall ( [ # \"I'm work1\" \u5373\u662f\u53c2\u6570\uff0c\u4f1a\u4f20\u7ed9\u524d\u9762\u7684\u51fd\u6570\uff0c\u5373work1 gevent . spawn ( work1 , \"I'm work1\" ), gevent . spawn ( work2 , \"I'm work2\" ) ] ) if __name__ == '__main__' : main () \u901a\u8fc7gevent\u5b9e\u73b0\u7684\u534f\u7a0b\uff0c\u4e0d\u9700\u8981\u4eba\u5de5\u5207\u6362\uff0c\u5f53\u68c0\u6d4b\u5230\u8017\u65f6\u64cd\u4f5c\u65f6\u4f1a\u81ea\u52a8\u5207\u6362 \u603b\u7ed3 \u8fdb\u7a0b\u662f\u8d44\u6e90\u5206\u914d\u7684\u5355\u4f4d\uff0c\u540c\u4e00\u4e2a\u8fdb\u7a0b\u4e0b\u7684\u6240\u6709\u7ebf\u7a0b\u5171\u4eab\u5168\u90e8\u8d44\u6e90 \u7ebf\u7a0b\u662f\u64cd\u4f5c\u7cfb\u7edf\u8c03\u5ea6\u7684\u5355\u4f4d \u8fdb\u7a0b\u5207\u6362\u9700\u8981\u7684\u8d44\u6e90\u5f88\u6700\u5927\uff0c\u6548\u7387\u5f88\u4f4e \u5728\u4e0d\u8003\u8651GIL\u7684\u60c5\u51b5\u4e0b\uff0c\u7ebf\u7a0b\u5207\u6362\u9700\u8981\u7684\u8d44\u6e90\u4e00\u822c\uff0c\u6548\u7387\u4e00\u822c \u534f\u7a0b\u5207\u6362\u4efb\u52a1\u8d44\u6e90\u5f88\u5c0f\uff0c\u6548\u7387\u9ad8 \u8fdb\u7a0b\u3001\u7ebf\u7a0b\u4e0d\u53d7\u63a7\u5236\uff0c\u534f\u7a0b\u53d7\u63a7\u5236 \u534f\u7a0b\u662f\u5e76\u53d1\u4e0d\u662f\u5e76\u884c","title":"\u534f\u7a0b"},{"location":"python/thread-process-coroutine/%E5%8D%8F%E7%A8%8B/#_1","text":"","title":"\u534f\u7a0b"},{"location":"python/thread-process-coroutine/%E5%8D%8F%E7%A8%8B/#1yield","text":"import time def work_one (): for _ in range ( 3 ): print ( '-----\u534f\u7a0b1-----' ) yield time . sleep ( 0.5 ) def work_two (): for _ in range ( 3 ): print ( '-----\u534f\u7a0b2-----' ) yield time . sleep ( 0.5 ) def main (): wo , wt = work_one (), work_two () for _ in range ( 3 ): next ( wo ) next ( wt ) if __name__ == '__main__' : main ()","title":"\u4ee3\u78011(yield)"},{"location":"python/thread-process-coroutine/%E5%8D%8F%E7%A8%8B/#2greenlet","text":"import time from greenlet import greenlet def main (): def work_one (): while True : print ( '-----A-----' ) gl_two . switch () time . sleep ( 0.5 ) def work_two (): while True : print ( '-----B-----' ) gl_one . switch () time . sleep ( 0.5 ) gl_one = greenlet ( work_one ) gl_two = greenlet ( work_two ) gl_one . switch () if __name__ == '__main__' : main () \u901a\u8fc7greenlet\u5b9e\u73b0\u7684\u534f\u7a0b\uff0c\u9700\u8981\u4eba\u5de5\u5207\u6362","title":"\u4ee3\u78012(greenlet)"},{"location":"python/thread-process-coroutine/%E5%8D%8F%E7%A8%8B/#3gevent","text":"\u7528\u6cd51: \u4f7f\u7528monkey.patch_all()\u5b9e\u73b0\uff0c\u5f53\u9047\u5230\u8017\u65f6\u60c5\u51b5\u65f6\u81ea\u52a8\u5207\u6362\u534f\u7a0b import time import gevent from gevent import monkey # \u7ed9\u7a0b\u5e8f\u6253\u8865\u4e01, \u6709\u8017\u65f6\u64cd\u4f5c(\u4f8b\u5982time.sleep)\u65f6 monkey . patch_all () def work1 (): while True : print ( 'work1...' ) time . sleep ( 1 ) def work2 (): while True : print ( 'work2...' ) time . sleep ( 1 ) def main (): w1 = gevent . spawn ( work1 ) w2 = gevent . spawn ( work2 ) w1 . join () w2 . join () if __name__ == '__main__' : main () \u7528\u6cd52: \u4e0d\u4f7f\u7528monkey.patch_all()\u7684\u60c5\u51b5\u4e0b\u8981\u5b9e\u73b0\u534f\u7a0b\u7684\u81ea\u52a8\u5207\u6362\uff0c\u9700\u4f7f\u7528gevent\u4e2d\u81ea\u5df1\u7684\u8017\u65f6\u6a21\u5757 import gevent def work1 (): while True : print ( 'work1...' ) # \u5c06\u7a0b\u5e8f\u4e2d\u7528\u5230\u7684\u8017\u65f6\u64cd\u4f5c\u7684\u4ee3\u7801\uff0c\u4f7f\u7528gevent\u4e2d\u81ea\u5df1\u5b9e\u73b0\u7684\u6a21\u5757 gevent . sleep ( 1 ) def work2 (): while True : print ( 'work2...' ) # \u4f7f\u7528gevent\u4e2d\u81ea\u5df1\u5b9e\u73b0\u7684\u6a21\u5757\uff0c\u4e0d\u9700\u8981monkey.patch_all() gevent . sleep ( 1 ) def main (): w1 = gevent . spawn ( work1 ) w2 = gevent . spawn ( work2 ) w1 . join () w2 . join () if __name__ == '__main__' : main () \u7528\u6cd53: \u6279\u91cfjoin\u534f\u7a0b\u548c\u4f20\u53c2 import gevent def work1 ( msg ): while True : print ( msg ) gevent . sleep ( 1 ) def work2 ( msg ): while True : print ( msg ) gevent . sleep ( 1 ) def main (): # joinall\u53ef\u6279\u91cf\u6dfb\u52a0\u534f\u7a0b gevent . joinall ( [ # \"I'm work1\" \u5373\u662f\u53c2\u6570\uff0c\u4f1a\u4f20\u7ed9\u524d\u9762\u7684\u51fd\u6570\uff0c\u5373work1 gevent . spawn ( work1 , \"I'm work1\" ), gevent . spawn ( work2 , \"I'm work2\" ) ] ) if __name__ == '__main__' : main () \u901a\u8fc7gevent\u5b9e\u73b0\u7684\u534f\u7a0b\uff0c\u4e0d\u9700\u8981\u4eba\u5de5\u5207\u6362\uff0c\u5f53\u68c0\u6d4b\u5230\u8017\u65f6\u64cd\u4f5c\u65f6\u4f1a\u81ea\u52a8\u5207\u6362","title":"\u4ee3\u78013(gevent)"},{"location":"python/thread-process-coroutine/%E5%8D%8F%E7%A8%8B/#_2","text":"\u8fdb\u7a0b\u662f\u8d44\u6e90\u5206\u914d\u7684\u5355\u4f4d\uff0c\u540c\u4e00\u4e2a\u8fdb\u7a0b\u4e0b\u7684\u6240\u6709\u7ebf\u7a0b\u5171\u4eab\u5168\u90e8\u8d44\u6e90 \u7ebf\u7a0b\u662f\u64cd\u4f5c\u7cfb\u7edf\u8c03\u5ea6\u7684\u5355\u4f4d \u8fdb\u7a0b\u5207\u6362\u9700\u8981\u7684\u8d44\u6e90\u5f88\u6700\u5927\uff0c\u6548\u7387\u5f88\u4f4e \u5728\u4e0d\u8003\u8651GIL\u7684\u60c5\u51b5\u4e0b\uff0c\u7ebf\u7a0b\u5207\u6362\u9700\u8981\u7684\u8d44\u6e90\u4e00\u822c\uff0c\u6548\u7387\u4e00\u822c \u534f\u7a0b\u5207\u6362\u4efb\u52a1\u8d44\u6e90\u5f88\u5c0f\uff0c\u6548\u7387\u9ad8 \u8fdb\u7a0b\u3001\u7ebf\u7a0b\u4e0d\u53d7\u63a7\u5236\uff0c\u534f\u7a0b\u53d7\u63a7\u5236 \u534f\u7a0b\u662f\u5e76\u53d1\u4e0d\u662f\u5e76\u884c","title":"\u603b\u7ed3"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E7%BA%BF%E7%A8%8B/","text":"\u591a\u7ebf\u7a0b \u4ee3\u78011 import threading import time def say_something ( something ): for _ in range ( 3 ): print ( something ) time . sleep ( 0.5 ) def main (): print ( f '\u5f00\u59cb\u65f6\u95f4: { time . time () } ' ) thread_one = threading . Thread ( target = say_something , args = ( 'balabale...' ,)) thread_one . start () thread_two = threading . Thread ( target = say_something , args = ( 'makabaka...' ,)) thread_two . start () print ( f '\u7ed3\u675f\u65f6\u95f4: { time . time () } ' ) if __name__ == '__main__' : main () \u8f93\u51fa: \u5f00\u59cb\u65f6\u95f4: 1659739324.507312 balabale... makabaka... \u7ed3\u675f\u65f6\u95f4: 1659739324.5080872 balabale... makabaka... balabale... makabaka... \u89e3\u91ca: \u5148\u6267\u884cthread_one\u540e\u6267\u884cthread_two\uff0c\u4f46balabal\u548cmakabaka\u5374\u662f\u4ea4\u66ff\u8f93\u51fa\uff0c\u8bc1\u660e\u662f\u591a\u7ebf\u7a0b \u7ed3\u675f\u65f6\u95f4\u4e0d\u662f\u6700\u540e\u8f93\u51fa\uff0c\u662f\u56e0\u4e3a\u4e3b\u7ebf\u7a0b\u4ee3\u7801\u81ea\u4e0a\u800c\u4e0b\u6267\u884c\uff0cthread_one\u548cthread_two\u5219\u662f\u5f00\u542f\u5b50\u7ebf\u7a0b\u6267\u884c \u6253\u5370\u7ed3\u675f\u65f6\u95f4\u8f93\u51fa\u540e\uff0c\u4f9d\u65e7\u8f93\u51fabalabal\u548cmakabak\u7684\u539f\u56e0\u662f\uff0c\u4e3b\u7ebf\u7a0b\u4ee3\u7801\u6267\u884c\u5b8c\u6bd5\u540e\u5728\u7b49\u5f85\u5b50\u7ebf\u7a0b\u4ee3\u7801\u6267\u884c\u5b8c\u6bd5 \u4ee3\u78012(\u7ebf\u7a0b\u540c\u6b65) import threading import time def say_something ( something ): for _ in range ( 3 ): print ( something ) time . sleep ( 0.5 ) def main (): print ( f '\u5f00\u59cb\u65f6\u95f4: { time . time () } ' ) thread_one = threading . Thread ( target = say_something , args = ( 'balabale...' ,)) thread_one . start () thread_one . join () thread_two = threading . Thread ( target = say_something , args = ( 'makabaka...' ,)) thread_two . start () print ( f '\u7ed3\u675f\u65f6\u95f4: { time . time () } ' ) if __name__ == '__main__' : main () \u8f93\u51fa\uff1a \u5f00\u59cb\u65f6\u95f4: 1659740206.5571399 balabale... balabale... balabale... makabaka... \u7ed3\u675f\u65f6\u95f4: 1659740208.073323 makabaka... makabaka... \u89e3\u91ca\uff1a \u5bf9\u6bd4\u4ee3\u78011\uff0cthread_one\u8fdb\u7a0b\u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\u4e3b\u8fdb\u7a0b\u624d\u7ee7\u7eed\u6267\u884c\uff0c\u539f\u56e0\u662fthread_one\u4f7f\u7528\u4e86join\u65b9\u6cd5\uff0c\u5373\u7ebf\u7a0b\u540c\u6b65, \u4f1a\u4f7f\u4e3b\u7ebf\u7a0b\u8fdb\u5165\u963b\u585e\u72b6\u6001\uff0c\u76f4\u5230\u5b50\u7ebf\u7a0b\u6267\u884c\u5b8c\u6bd5 \u4ee3\u78013(\u5b88\u62a4\u7ebf\u7a0b) import threading import time def say_something ( something ): for _ in range ( 3 ): print ( something ) time . sleep ( 0.5 ) def main (): print ( f '\u5f00\u59cb\u65f6\u95f4: { time . time () } ' ) thread_one = threading . Thread ( target = say_something , args = ( 'balabale...' ,)) thread_one . start () thread_one . join () thread_two = threading . Thread ( target = say_something , args = ( 'makabaka...' ,)) thread_two . setDaemon ( True ) thread_two . start () print ( f '\u7ed3\u675f\u65f6\u95f4: { time . time () } ' ) if __name__ == '__main__' : main () \u8f93\u51fa: \u5f00\u59cb\u65f6\u95f4: 1659740624.978488 balabale... balabale... balabale... makabaka... \u7ed3\u675f\u65f6\u95f4: 1659740626.495806 \u89e3\u91ca: \u5bf9\u6bd4\u4ee3\u78012\uff0cmakaba\u53ea\u8f93\u51fa\u4e00\u6b21\uff0c\u662f\u56e0\u4e3a\u7ed9thread_two\u8bbe\u7f6e\u5b88\u62a4\u7ebf\u7a0b setDaemon(True) \uff0c\u5373\u4e3b\u7ebf\u6267\u884c\u5b8c\u6bd5\u540e\u7acb\u5373\u7ed3\u675f\u5b50\u7ebf\u7a0b \u53e6\u5916\uff0c setDaemon(True) \u5fc5\u987b\u5728\u8c03\u7528stat()\u4e4b\u524d\u8bbe\u7f6e\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u4e3b\u7ebf\u7a0b\u629b\u51fa\u5f02\u5e38\uff0c\u4f46\u5b50\u7ebf\u7a0b\u5df2\u7ecf\u6b63\u5e38\u8fd0\u884c","title":"\u591a\u7ebf\u7a0b"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E7%BA%BF%E7%A8%8B/#_1","text":"","title":"\u591a\u7ebf\u7a0b"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E7%BA%BF%E7%A8%8B/#1","text":"import threading import time def say_something ( something ): for _ in range ( 3 ): print ( something ) time . sleep ( 0.5 ) def main (): print ( f '\u5f00\u59cb\u65f6\u95f4: { time . time () } ' ) thread_one = threading . Thread ( target = say_something , args = ( 'balabale...' ,)) thread_one . start () thread_two = threading . Thread ( target = say_something , args = ( 'makabaka...' ,)) thread_two . start () print ( f '\u7ed3\u675f\u65f6\u95f4: { time . time () } ' ) if __name__ == '__main__' : main () \u8f93\u51fa: \u5f00\u59cb\u65f6\u95f4: 1659739324.507312 balabale... makabaka... \u7ed3\u675f\u65f6\u95f4: 1659739324.5080872 balabale... makabaka... balabale... makabaka... \u89e3\u91ca: \u5148\u6267\u884cthread_one\u540e\u6267\u884cthread_two\uff0c\u4f46balabal\u548cmakabaka\u5374\u662f\u4ea4\u66ff\u8f93\u51fa\uff0c\u8bc1\u660e\u662f\u591a\u7ebf\u7a0b \u7ed3\u675f\u65f6\u95f4\u4e0d\u662f\u6700\u540e\u8f93\u51fa\uff0c\u662f\u56e0\u4e3a\u4e3b\u7ebf\u7a0b\u4ee3\u7801\u81ea\u4e0a\u800c\u4e0b\u6267\u884c\uff0cthread_one\u548cthread_two\u5219\u662f\u5f00\u542f\u5b50\u7ebf\u7a0b\u6267\u884c \u6253\u5370\u7ed3\u675f\u65f6\u95f4\u8f93\u51fa\u540e\uff0c\u4f9d\u65e7\u8f93\u51fabalabal\u548cmakabak\u7684\u539f\u56e0\u662f\uff0c\u4e3b\u7ebf\u7a0b\u4ee3\u7801\u6267\u884c\u5b8c\u6bd5\u540e\u5728\u7b49\u5f85\u5b50\u7ebf\u7a0b\u4ee3\u7801\u6267\u884c\u5b8c\u6bd5","title":"\u4ee3\u78011"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E7%BA%BF%E7%A8%8B/#2","text":"import threading import time def say_something ( something ): for _ in range ( 3 ): print ( something ) time . sleep ( 0.5 ) def main (): print ( f '\u5f00\u59cb\u65f6\u95f4: { time . time () } ' ) thread_one = threading . Thread ( target = say_something , args = ( 'balabale...' ,)) thread_one . start () thread_one . join () thread_two = threading . Thread ( target = say_something , args = ( 'makabaka...' ,)) thread_two . start () print ( f '\u7ed3\u675f\u65f6\u95f4: { time . time () } ' ) if __name__ == '__main__' : main () \u8f93\u51fa\uff1a \u5f00\u59cb\u65f6\u95f4: 1659740206.5571399 balabale... balabale... balabale... makabaka... \u7ed3\u675f\u65f6\u95f4: 1659740208.073323 makabaka... makabaka... \u89e3\u91ca\uff1a \u5bf9\u6bd4\u4ee3\u78011\uff0cthread_one\u8fdb\u7a0b\u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\u4e3b\u8fdb\u7a0b\u624d\u7ee7\u7eed\u6267\u884c\uff0c\u539f\u56e0\u662fthread_one\u4f7f\u7528\u4e86join\u65b9\u6cd5\uff0c\u5373\u7ebf\u7a0b\u540c\u6b65, \u4f1a\u4f7f\u4e3b\u7ebf\u7a0b\u8fdb\u5165\u963b\u585e\u72b6\u6001\uff0c\u76f4\u5230\u5b50\u7ebf\u7a0b\u6267\u884c\u5b8c\u6bd5","title":"\u4ee3\u78012(\u7ebf\u7a0b\u540c\u6b65)"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E7%BA%BF%E7%A8%8B/#3","text":"import threading import time def say_something ( something ): for _ in range ( 3 ): print ( something ) time . sleep ( 0.5 ) def main (): print ( f '\u5f00\u59cb\u65f6\u95f4: { time . time () } ' ) thread_one = threading . Thread ( target = say_something , args = ( 'balabale...' ,)) thread_one . start () thread_one . join () thread_two = threading . Thread ( target = say_something , args = ( 'makabaka...' ,)) thread_two . setDaemon ( True ) thread_two . start () print ( f '\u7ed3\u675f\u65f6\u95f4: { time . time () } ' ) if __name__ == '__main__' : main () \u8f93\u51fa: \u5f00\u59cb\u65f6\u95f4: 1659740624.978488 balabale... balabale... balabale... makabaka... \u7ed3\u675f\u65f6\u95f4: 1659740626.495806 \u89e3\u91ca: \u5bf9\u6bd4\u4ee3\u78012\uff0cmakaba\u53ea\u8f93\u51fa\u4e00\u6b21\uff0c\u662f\u56e0\u4e3a\u7ed9thread_two\u8bbe\u7f6e\u5b88\u62a4\u7ebf\u7a0b setDaemon(True) \uff0c\u5373\u4e3b\u7ebf\u6267\u884c\u5b8c\u6bd5\u540e\u7acb\u5373\u7ed3\u675f\u5b50\u7ebf\u7a0b \u53e6\u5916\uff0c setDaemon(True) \u5fc5\u987b\u5728\u8c03\u7528stat()\u4e4b\u524d\u8bbe\u7f6e\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u4e3b\u7ebf\u7a0b\u629b\u51fa\u5f02\u5e38\uff0c\u4f46\u5b50\u7ebf\u7a0b\u5df2\u7ecf\u6b63\u5e38\u8fd0\u884c","title":"\u4ee3\u78013(\u5b88\u62a4\u7ebf\u7a0b)"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B9%8B%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E4%B8%8E%E4%BA%92%E6%96%A5%E9%94%81/","text":"\u591a\u7ebf\u7a0b\u4e4b\u8d44\u6e90\u7ade\u4e89\u4e0e\u4e92\u65a5\u9501 \u8d44\u6e90\u7ade\u4e89 import threading import time num = 0 def add_num_one ( count ): global num for _ in range ( count ): num += 1 print ( f 'add_num_one\u7ed3\u679c: { num } ' ) def add_num_two ( count ): global num for _ in range ( count ): num += 1 print ( f 'add_num_two\u7ed3\u679c: { num } ' ) def main (): print ( f '\u539f\u59cb\u6570\u5b57: { num } ' ) thread_one = threading . Thread ( target = add_num_one , args = ( 1000000 ,)) thread_one . start () thread_two = threading . Thread ( target = add_num_two , args = ( 1000000 ,)) thread_two . start () while threading . active_count () != 1 : time . sleep ( 0.5 ) print ( f '\u6700\u7ec8\u6570\u5b57: { num } ' ) if __name__ == '__main__' : main () \u8f93\u51fa: \u539f\u59cb\u6570\u5b57: 0 add_num_one\u7ed3\u679c: 1126618 add_num_two\u7ed3\u679c: 1382806 \u6700\u7ec8\u6570\u5b57: 1382806 \u89e3\u91ca: add_num_one\u548cadd_num_two\u7684\u53c2\u6570\u90fd\u662f1000000\uff0c\u4f46\u6700\u7ec8\u6570\u5b57\u7adf\u7136\u4e0d\u662f2000000\uff0c\u662f\u56e0\u4e3a\u53d1\u751f\u4e86\u8d44\u6e90\u7ade\u4e89\uff0c\u5373\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u5bf9\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u64cd\u4f5c\uff0c\u4f1a\u51fa\u73b0\u8d44\u6e90\u7ade\u4e89\uff0c\u5bfc\u81f4\u6570\u636e\u7ed3\u679c\u4e0d\u51c6\u786e \u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u53c2\u6570\u4e0d\u662f1000000\u800c\u662f1000\uff0c\u7ed3\u679c\u53ef\u80fd\u662f\u6b63\u786e\u7684\uff0c\u6b64\u53c2\u6570\u5b58\u5728\u4e00\u4e2a\u4e34\u754c\u70b9\uff0c\u8ddfcpu\u9891\u7387\u6709\u5173\uff0c\u4f46\u7ed3\u679c\u6b63\u786e\u4e0d\u80fd\u8868\u793a\u4e0d\u4f1a\u53d1\u751f\u8d44\u6e90\u7ade\u4e89\uff0c\u53ea\u662f\u56e0\u4e3acpu\u901f\u5ea6\u592a\u5feb\uff0c\u5728\u8fdb\u7a0b\u8c03\u5ea6\u4e4b\u524d\u5df2\u7ecf\u5c06\u7ed3\u679c\u8ba1\u7b97\u5b8c\u6bd5\uff0c\u5bfc\u81f4\u6570\u636e\u6b63\u786e \u4e92\u65a5\u9501 import threading import time num = 0 # \u4e92\u65a5\u9501 mutex_lock = threading . Lock () def add_num_one ( count ): global num mutex_lock . acquire () for i in range ( count ): num += 1 mutex_lock . release () print ( f 'add_num_one\u7ed3\u679c: { num } ' ) def add_num_two ( count ): global num mutex_lock . acquire () for i in range ( count ): num += 1 mutex_lock . release () print ( f 'add_num_two\u7ed3\u679c: { num } ' ) def main (): print ( f '\u539f\u59cb\u6570\u5b57: { num } ' ) thread_one = threading . Thread ( target = add_num_one , args = ( 1000000 ,)) thread_one . start () thread_two = threading . Thread ( target = add_num_two , args = ( 1000000 ,)) thread_two . start () while threading . active_count () != 1 : time . sleep ( 0.5 ) print ( f '\u6700\u7ec8\u6570\u5b57: { num } ' ) if __name__ == '__main__' : main () \u8f93\u51fa: \u539f\u59cb\u6570\u5b57: 0 add_num_one\u7ed3\u679c: 1000000 add_num_two\u7ed3\u679c: 2000000 \u6700\u7ec8\u6570\u5b57: 2000000 \u7ed3\u8bba\uff1a\u4e92\u65a5\u9501\u89e3\u51b3\u4e86\u8d44\u6e90\u7ade\u4e89\u7684\u95ee\u9898 \u4fee\u6539\u6838\u5fc3\u4ee3\u7801\u5982\u4e0b\uff1a def add_num_one ( count ): global num for i in range ( count ): # \u7cbe\u786e\u52a0\u9501\uff0c\u4f18\u70b9\u662f\u7cbe\u786e\u9488\u5bf9\u53d1\u751f\u8d44\u6e90\u7ade\u4e89\u7684\u6838\u5fc3\u4ee3\u7801\uff0c\u7f3a\u70b9\u662f\u9891\u7e41\u7684\u52a0\u9501\u89e3\u9501 mutex_lock . acquire () num += 1 mutex_lock . release () print ( f 'add_num_one\u7ed3\u679c: { num } ' ) def add_num_two ( count ): global num # \u7c97\u7565\u52a0\u9501\uff0c\u4f18\u70b9\u65f6\u51cf\u5c11\u52a0\u9501\u89e3\u9501\u7684\u9891\u7387\uff0c\u7f3a\u70b9\u662f\u65e0\u6cd5\u7cbe\u786e\u5b9a\u4f4d\u53d1\u751f\u8d44\u6e90\u7ade\u4e89\u7684\u6838\u5fc3\u4ee3\u7801 mutex_lock . acquire () for i in range ( count ): num += 1 mutex_lock . release () print ( f 'add_num_two\u7ed3\u679c: { num } ' ) \u8f93\u51fa: \u539f\u59cb\u6570\u5b57: 0 add_num_two\u7ed3\u679c: 1042738 add_num_one\u7ed3\u679c: 2000000 \u6700\u7ec8\u6570\u5b57: 2000000 \u7ed3\u679c\u4e0d\u518d\u662f add_num_one\u76841000000\u548cadd_num_two\u76842000000 \u89e3\u91ca\uff1a cpu\u5728\u8c03\u5ea6\u8fdb\u7a0b\uff0c\u5f53\u8c03\u5ea6\u5230add_num_two\uff0c\u56e0\u4e3a\u4e92\u65a5\u9501\u52a0\u5728\u5faa\u73af\u5916\uff0c\u6240\u4ee5\u5927\u90e8\u5206\u8d44\u6e90\u662f\u5728\u8fdb\u884c num+=1 \u7684\u64cd\u4f5c \u800cadd_num_one\u7684\u4e92\u65a5\u9501\u52a0\u5728\u5faa\u73af\u5185\uff0c\u5927\u90e8\u5206\u8d44\u6e90\u662f\u5728\u8fdb\u884c\u52a0\u9501\u548c\u89e3\u9501\uff0c\u6240\u4ee5\u6bd4add_num_two\u6162 \u6700\u7ec8\u5bfc\u81f4add_num_two\u7684\u6700\u7ec8\u7ed3\u679c\u57281000000\u52302000000\u4e4b\u95f4\uff0cadd_num_one\u6700\u7ec8\u7ed3\u679c\u4e00\u5b9a\u662f2000000","title":"\u591a\u7ebf\u7a0b\u4e4b\u8d44\u6e90\u7ade\u4e89\u4e0e\u4e92\u65a5\u9501"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B9%8B%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E4%B8%8E%E4%BA%92%E6%96%A5%E9%94%81/#_1","text":"","title":"\u591a\u7ebf\u7a0b\u4e4b\u8d44\u6e90\u7ade\u4e89\u4e0e\u4e92\u65a5\u9501"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B9%8B%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E4%B8%8E%E4%BA%92%E6%96%A5%E9%94%81/#_2","text":"import threading import time num = 0 def add_num_one ( count ): global num for _ in range ( count ): num += 1 print ( f 'add_num_one\u7ed3\u679c: { num } ' ) def add_num_two ( count ): global num for _ in range ( count ): num += 1 print ( f 'add_num_two\u7ed3\u679c: { num } ' ) def main (): print ( f '\u539f\u59cb\u6570\u5b57: { num } ' ) thread_one = threading . Thread ( target = add_num_one , args = ( 1000000 ,)) thread_one . start () thread_two = threading . Thread ( target = add_num_two , args = ( 1000000 ,)) thread_two . start () while threading . active_count () != 1 : time . sleep ( 0.5 ) print ( f '\u6700\u7ec8\u6570\u5b57: { num } ' ) if __name__ == '__main__' : main () \u8f93\u51fa: \u539f\u59cb\u6570\u5b57: 0 add_num_one\u7ed3\u679c: 1126618 add_num_two\u7ed3\u679c: 1382806 \u6700\u7ec8\u6570\u5b57: 1382806 \u89e3\u91ca: add_num_one\u548cadd_num_two\u7684\u53c2\u6570\u90fd\u662f1000000\uff0c\u4f46\u6700\u7ec8\u6570\u5b57\u7adf\u7136\u4e0d\u662f2000000\uff0c\u662f\u56e0\u4e3a\u53d1\u751f\u4e86\u8d44\u6e90\u7ade\u4e89\uff0c\u5373\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u5bf9\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u64cd\u4f5c\uff0c\u4f1a\u51fa\u73b0\u8d44\u6e90\u7ade\u4e89\uff0c\u5bfc\u81f4\u6570\u636e\u7ed3\u679c\u4e0d\u51c6\u786e \u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u53c2\u6570\u4e0d\u662f1000000\u800c\u662f1000\uff0c\u7ed3\u679c\u53ef\u80fd\u662f\u6b63\u786e\u7684\uff0c\u6b64\u53c2\u6570\u5b58\u5728\u4e00\u4e2a\u4e34\u754c\u70b9\uff0c\u8ddfcpu\u9891\u7387\u6709\u5173\uff0c\u4f46\u7ed3\u679c\u6b63\u786e\u4e0d\u80fd\u8868\u793a\u4e0d\u4f1a\u53d1\u751f\u8d44\u6e90\u7ade\u4e89\uff0c\u53ea\u662f\u56e0\u4e3acpu\u901f\u5ea6\u592a\u5feb\uff0c\u5728\u8fdb\u7a0b\u8c03\u5ea6\u4e4b\u524d\u5df2\u7ecf\u5c06\u7ed3\u679c\u8ba1\u7b97\u5b8c\u6bd5\uff0c\u5bfc\u81f4\u6570\u636e\u6b63\u786e","title":"\u8d44\u6e90\u7ade\u4e89"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B9%8B%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E4%B8%8E%E4%BA%92%E6%96%A5%E9%94%81/#_3","text":"import threading import time num = 0 # \u4e92\u65a5\u9501 mutex_lock = threading . Lock () def add_num_one ( count ): global num mutex_lock . acquire () for i in range ( count ): num += 1 mutex_lock . release () print ( f 'add_num_one\u7ed3\u679c: { num } ' ) def add_num_two ( count ): global num mutex_lock . acquire () for i in range ( count ): num += 1 mutex_lock . release () print ( f 'add_num_two\u7ed3\u679c: { num } ' ) def main (): print ( f '\u539f\u59cb\u6570\u5b57: { num } ' ) thread_one = threading . Thread ( target = add_num_one , args = ( 1000000 ,)) thread_one . start () thread_two = threading . Thread ( target = add_num_two , args = ( 1000000 ,)) thread_two . start () while threading . active_count () != 1 : time . sleep ( 0.5 ) print ( f '\u6700\u7ec8\u6570\u5b57: { num } ' ) if __name__ == '__main__' : main () \u8f93\u51fa: \u539f\u59cb\u6570\u5b57: 0 add_num_one\u7ed3\u679c: 1000000 add_num_two\u7ed3\u679c: 2000000 \u6700\u7ec8\u6570\u5b57: 2000000 \u7ed3\u8bba\uff1a\u4e92\u65a5\u9501\u89e3\u51b3\u4e86\u8d44\u6e90\u7ade\u4e89\u7684\u95ee\u9898 \u4fee\u6539\u6838\u5fc3\u4ee3\u7801\u5982\u4e0b\uff1a def add_num_one ( count ): global num for i in range ( count ): # \u7cbe\u786e\u52a0\u9501\uff0c\u4f18\u70b9\u662f\u7cbe\u786e\u9488\u5bf9\u53d1\u751f\u8d44\u6e90\u7ade\u4e89\u7684\u6838\u5fc3\u4ee3\u7801\uff0c\u7f3a\u70b9\u662f\u9891\u7e41\u7684\u52a0\u9501\u89e3\u9501 mutex_lock . acquire () num += 1 mutex_lock . release () print ( f 'add_num_one\u7ed3\u679c: { num } ' ) def add_num_two ( count ): global num # \u7c97\u7565\u52a0\u9501\uff0c\u4f18\u70b9\u65f6\u51cf\u5c11\u52a0\u9501\u89e3\u9501\u7684\u9891\u7387\uff0c\u7f3a\u70b9\u662f\u65e0\u6cd5\u7cbe\u786e\u5b9a\u4f4d\u53d1\u751f\u8d44\u6e90\u7ade\u4e89\u7684\u6838\u5fc3\u4ee3\u7801 mutex_lock . acquire () for i in range ( count ): num += 1 mutex_lock . release () print ( f 'add_num_two\u7ed3\u679c: { num } ' ) \u8f93\u51fa: \u539f\u59cb\u6570\u5b57: 0 add_num_two\u7ed3\u679c: 1042738 add_num_one\u7ed3\u679c: 2000000 \u6700\u7ec8\u6570\u5b57: 2000000 \u7ed3\u679c\u4e0d\u518d\u662f add_num_one\u76841000000\u548cadd_num_two\u76842000000 \u89e3\u91ca\uff1a cpu\u5728\u8c03\u5ea6\u8fdb\u7a0b\uff0c\u5f53\u8c03\u5ea6\u5230add_num_two\uff0c\u56e0\u4e3a\u4e92\u65a5\u9501\u52a0\u5728\u5faa\u73af\u5916\uff0c\u6240\u4ee5\u5927\u90e8\u5206\u8d44\u6e90\u662f\u5728\u8fdb\u884c num+=1 \u7684\u64cd\u4f5c \u800cadd_num_one\u7684\u4e92\u65a5\u9501\u52a0\u5728\u5faa\u73af\u5185\uff0c\u5927\u90e8\u5206\u8d44\u6e90\u662f\u5728\u8fdb\u884c\u52a0\u9501\u548c\u89e3\u9501\uff0c\u6240\u4ee5\u6bd4add_num_two\u6162 \u6700\u7ec8\u5bfc\u81f4add_num_two\u7684\u6700\u7ec8\u7ed3\u679c\u57281000000\u52302000000\u4e4b\u95f4\uff0cadd_num_one\u6700\u7ec8\u7ed3\u679c\u4e00\u5b9a\u662f2000000","title":"\u4e92\u65a5\u9501"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E8%BF%9B%E7%A8%8B/","text":"\u591a\u8fdb\u7a0b import os import time from multiprocessing import Process def sub_process ( name , age , * args , ** kwargs ): for _ in range ( 3 ): print ( f '\u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: { os . getpid () } ' ) print ( f \"\u6211\u662f { name } , \u4eca\u5e74 { age } \" ) print ( f 'args: { args } , kwargs: { kwargs } ' ) print ( f '\u7236\u8fdb\u7a0b\u7684pid\u662f: { os . getppid () } ' ) print () time . sleep ( 1 ) def main (): print ( f '\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: { os . getpid () } ' ) process = Process ( target = sub_process , args = ( 'king' , 18 , 'balabala...' , 'makabaka...' ), kwargs = { 'key' : 'value' }) process . start () print ( '\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5' ) if __name__ == '__main__' : main () \u8f93\u51fa: \u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 74799 \u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5 \u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 74801 \u6211\u662fking, \u4eca\u5e7418 args: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'} \u7236\u8fdb\u7a0b\u7684pid\u662f: 74799 \u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 74801 \u6211\u662fking, \u4eca\u5e7418 args: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'} \u7236\u8fdb\u7a0b\u7684pid\u662f: 74799 \u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 74801 \u6211\u662fking, \u4eca\u5e7418 args: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'} \u7236\u8fdb\u7a0b\u7684pid\u662f: 74799 \u89e3\u91ca: main\u51fd\u6570\u662f\u4e3b\u8fdb\u7a0b\uff0c\u7531\u4e0b\u800c\u4e0b\u6267\u884c\uff0c\u5148\u8f93\u51fa\"\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 74799\", process.start()\u5f00\u542f\u5b50\u8fdb\u7a0b\uff0c\u7d27\u63a5\u7740\u8f93\u51fa\"\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5\", \u7136\u540e\uff0c\u5b50\u8fdb\u7a0b\u5f00\u59cb\u5faa\u73af3\u6b21\u8f93\u51fa \u4fee\u6539main\u51fd\u6570\u4ee3\u7801\uff0c\u52a0\u5165join\u65b9\u6cd5\u7684\u8c03\u7528: def main (): print ( f '\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: { os . getpid () } ' ) process = Process ( target = sub_process , args = ( 'king' , 18 , 'balabala...' , 'makabaka...' ), kwargs = { 'key' : 'value' }) process . start () process . join () print ( '\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5' ) \u8f93\u51fa: \u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 75240 \u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 75242 \u6211\u662fking, \u4eca\u5e7418 args: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'} \u7236\u8fdb\u7a0b\u7684pid\u662f: 75240 \u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 75242 \u6211\u662fking, \u4eca\u5e7418 args: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'} \u7236\u8fdb\u7a0b\u7684pid\u662f: 75240 \u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 75242 \u6211\u662fking, \u4eca\u5e7418 args: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'} \u7236\u8fdb\u7a0b\u7684pid\u662f: 75240 \u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5 \u89e3\u91ca: \u5bf9\u6bd4\u4fee\u6539\u524d\u4ee3\u7801\u7684\u8f93\u51fa, \"\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5\"\u6700\u540e\u8f93\u51fa\uff0c\u662f\u56e0\u4e3ajoin()\u81f4\u4f7f\u4e3b\u8fdb\u7a0b\u8fdb\u5165\u963b\u585e\u72b6\u6001, \u7b49\u5f85\u5b50\u8fdb\u7a0b\u6267\u884c\u5b8c\u6bd5\u540e\u624d\u4f1a\u7ee7\u7eed\u6267\u884c \u518d\u6b21\u4fee\u6539main\u51fd\u6570\u4ee3\u7801, \u53d6\u6d88join()\u65b9\u6cd5, \u8bbe\u7f6e\u5b88\u62a4\u8fdb\u7a0b\uff1a def main (): print ( f '\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: { os . getpid () } ' ) process = Process ( target = sub_process , args = ( 'king' , 18 , 'balabala...' , 'makabaka...' ), kwargs = { 'key' : 'value' }) process . daemon = True process . start () print ( '\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5' ) \u6216\u52a0\u5165terminate()\u65b9\u6cd5\uff1a def main (): print ( f '\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: { os . getpid () } ' ) process = Process ( target = sub_process , args = ( 'king' , 18 , 'balabala...' , 'makabaka...' ), kwargs = { 'key' : 'value' }) process . start () process . terminate () print ( '\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5' ) \u8f93\u51fa: \u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 75683 \u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5 \u89e3\u91ca: process.daemon = True , \u548c\u524d\u9762\u8bf4\u5230\u591a\u7ebf\u7a0b\u4e00\u6837\u5fc5\u987b\u5728start\u4e4b\u524d\u8bbe\u5b9a process.terminate() \u65b9\u6cd5\u90fd\u4f1a\u81f4\u4f7f\u4e3b\u8fdb\u7a0b\u5f3a\u5236\u7ed3\u675f\u5b50\u8fdb\u7a0b\u7684\u8fd0\u884c \u6700\u7ec8\u7ed3\u679c\u90fd\u662f\u5b50\u8fdb\u7a0b\u7684\u5185\u5bb9\u6ca1\u6709\u8f93\u51fa","title":"\u591a\u8fdb\u7a0b"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E8%BF%9B%E7%A8%8B/#_1","text":"import os import time from multiprocessing import Process def sub_process ( name , age , * args , ** kwargs ): for _ in range ( 3 ): print ( f '\u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: { os . getpid () } ' ) print ( f \"\u6211\u662f { name } , \u4eca\u5e74 { age } \" ) print ( f 'args: { args } , kwargs: { kwargs } ' ) print ( f '\u7236\u8fdb\u7a0b\u7684pid\u662f: { os . getppid () } ' ) print () time . sleep ( 1 ) def main (): print ( f '\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: { os . getpid () } ' ) process = Process ( target = sub_process , args = ( 'king' , 18 , 'balabala...' , 'makabaka...' ), kwargs = { 'key' : 'value' }) process . start () print ( '\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5' ) if __name__ == '__main__' : main () \u8f93\u51fa: \u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 74799 \u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5 \u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 74801 \u6211\u662fking, \u4eca\u5e7418 args: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'} \u7236\u8fdb\u7a0b\u7684pid\u662f: 74799 \u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 74801 \u6211\u662fking, \u4eca\u5e7418 args: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'} \u7236\u8fdb\u7a0b\u7684pid\u662f: 74799 \u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 74801 \u6211\u662fking, \u4eca\u5e7418 args: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'} \u7236\u8fdb\u7a0b\u7684pid\u662f: 74799 \u89e3\u91ca: main\u51fd\u6570\u662f\u4e3b\u8fdb\u7a0b\uff0c\u7531\u4e0b\u800c\u4e0b\u6267\u884c\uff0c\u5148\u8f93\u51fa\"\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 74799\", process.start()\u5f00\u542f\u5b50\u8fdb\u7a0b\uff0c\u7d27\u63a5\u7740\u8f93\u51fa\"\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5\", \u7136\u540e\uff0c\u5b50\u8fdb\u7a0b\u5f00\u59cb\u5faa\u73af3\u6b21\u8f93\u51fa \u4fee\u6539main\u51fd\u6570\u4ee3\u7801\uff0c\u52a0\u5165join\u65b9\u6cd5\u7684\u8c03\u7528: def main (): print ( f '\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: { os . getpid () } ' ) process = Process ( target = sub_process , args = ( 'king' , 18 , 'balabala...' , 'makabaka...' ), kwargs = { 'key' : 'value' }) process . start () process . join () print ( '\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5' ) \u8f93\u51fa: \u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 75240 \u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 75242 \u6211\u662fking, \u4eca\u5e7418 args: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'} \u7236\u8fdb\u7a0b\u7684pid\u662f: 75240 \u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 75242 \u6211\u662fking, \u4eca\u5e7418 args: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'} \u7236\u8fdb\u7a0b\u7684pid\u662f: 75240 \u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 75242 \u6211\u662fking, \u4eca\u5e7418 args: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'} \u7236\u8fdb\u7a0b\u7684pid\u662f: 75240 \u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5 \u89e3\u91ca: \u5bf9\u6bd4\u4fee\u6539\u524d\u4ee3\u7801\u7684\u8f93\u51fa, \"\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5\"\u6700\u540e\u8f93\u51fa\uff0c\u662f\u56e0\u4e3ajoin()\u81f4\u4f7f\u4e3b\u8fdb\u7a0b\u8fdb\u5165\u963b\u585e\u72b6\u6001, \u7b49\u5f85\u5b50\u8fdb\u7a0b\u6267\u884c\u5b8c\u6bd5\u540e\u624d\u4f1a\u7ee7\u7eed\u6267\u884c \u518d\u6b21\u4fee\u6539main\u51fd\u6570\u4ee3\u7801, \u53d6\u6d88join()\u65b9\u6cd5, \u8bbe\u7f6e\u5b88\u62a4\u8fdb\u7a0b\uff1a def main (): print ( f '\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: { os . getpid () } ' ) process = Process ( target = sub_process , args = ( 'king' , 18 , 'balabala...' , 'makabaka...' ), kwargs = { 'key' : 'value' }) process . daemon = True process . start () print ( '\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5' ) \u6216\u52a0\u5165terminate()\u65b9\u6cd5\uff1a def main (): print ( f '\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: { os . getpid () } ' ) process = Process ( target = sub_process , args = ( 'king' , 18 , 'balabala...' , 'makabaka...' ), kwargs = { 'key' : 'value' }) process . start () process . terminate () print ( '\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5' ) \u8f93\u51fa: \u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 75683 \u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5 \u89e3\u91ca: process.daemon = True , \u548c\u524d\u9762\u8bf4\u5230\u591a\u7ebf\u7a0b\u4e00\u6837\u5fc5\u987b\u5728start\u4e4b\u524d\u8bbe\u5b9a process.terminate() \u65b9\u6cd5\u90fd\u4f1a\u81f4\u4f7f\u4e3b\u8fdb\u7a0b\u5f3a\u5236\u7ed3\u675f\u5b50\u8fdb\u7a0b\u7684\u8fd0\u884c \u6700\u7ec8\u7ed3\u679c\u90fd\u662f\u5b50\u8fdb\u7a0b\u7684\u5185\u5bb9\u6ca1\u6709\u8f93\u51fa","title":"\u591a\u8fdb\u7a0b"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E8%BF%9B%E7%A8%8B%E4%B9%8B%E8%BF%9B%E7%A8%8B%E6%B1%A0/","text":"\u591a\u8fdb\u7a0b\u4e4b\u8fdb\u7a0b\u6c60 import os import time from multiprocessing import Pool def sub_process ( name , age , * args , ** kwargs ): for _ in range ( 2 ): print ( f '\u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: { os . getpid () } ' ) print ( f \"\u6211\u662f { name } , \u4eca\u5e74 { age } \" ) print ( f 'args: { args } , kwargs: { kwargs } ' ) print ( f '\u7236\u8fdb\u7a0b\u7684pid\u662f: { os . getppid () } ' ) print () time . sleep ( 1 ) def main (): print ( f '\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: { os . getpid () } ' ) # \u521b\u5efa\u8fdb\u7a0b\u6c60\uff0c\u6700\u5927\u8fdb\u7a0b\u6570\u91cf\u7b49\u4e8e\u4e24\u500d\u7684CPU\u6838\u6570 pool = Pool ( os . cpu_count () * 2 ) for _ in range ( 2 ): # \u4f7f\u7528\u8fdb\u7a0b\u6c60\u8c03\u7528\u5b50\u8fdb\u7a0b pool . apply_async ( sub_process , ( 'king' , 18 , 'balabala...' , 'makabaka...' ), { 'key' : 'value' }) # \u5173\u95ed\u8fdb\u7a0b\u6c60\uff0c\u4e4b\u540e\u4e0d\u518d\u63a5\u6536\u65b0\u7684\u8bf7\u6c42 pool . close () # \u5fc5\u987b\u5148pool.close()\u4e4b\u540e\u624d\u80fd\u4f7f\u7528pool.join() pool . join () print ( '\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5' ) if __name__ == '__main__' : main () \u8f93\u51fa: \u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 80054 \u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 80058 \u6211\u662fking, \u4eca\u5e7418 args: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'} \u7236\u8fdb\u7a0b\u7684pid\u662f: 80054 \u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 80059 \u6211\u662fking, \u4eca\u5e7418 args: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'} \u7236\u8fdb\u7a0b\u7684pid\u662f: 80054 \u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 80058 \u6211\u662fking, \u4eca\u5e7418 args: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'} \u7236\u8fdb\u7a0b\u7684pid\u662f: 80054 \u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 80059 \u6211\u662fking, \u4eca\u5e7418 args: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'} \u7236\u8fdb\u7a0b\u7684pid\u662f: 80054 \u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5","title":"\u591a\u8fdb\u7a0b\u4e4b\u8fdb\u7a0b\u6c60"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E8%BF%9B%E7%A8%8B%E4%B9%8B%E8%BF%9B%E7%A8%8B%E6%B1%A0/#_1","text":"import os import time from multiprocessing import Pool def sub_process ( name , age , * args , ** kwargs ): for _ in range ( 2 ): print ( f '\u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: { os . getpid () } ' ) print ( f \"\u6211\u662f { name } , \u4eca\u5e74 { age } \" ) print ( f 'args: { args } , kwargs: { kwargs } ' ) print ( f '\u7236\u8fdb\u7a0b\u7684pid\u662f: { os . getppid () } ' ) print () time . sleep ( 1 ) def main (): print ( f '\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: { os . getpid () } ' ) # \u521b\u5efa\u8fdb\u7a0b\u6c60\uff0c\u6700\u5927\u8fdb\u7a0b\u6570\u91cf\u7b49\u4e8e\u4e24\u500d\u7684CPU\u6838\u6570 pool = Pool ( os . cpu_count () * 2 ) for _ in range ( 2 ): # \u4f7f\u7528\u8fdb\u7a0b\u6c60\u8c03\u7528\u5b50\u8fdb\u7a0b pool . apply_async ( sub_process , ( 'king' , 18 , 'balabala...' , 'makabaka...' ), { 'key' : 'value' }) # \u5173\u95ed\u8fdb\u7a0b\u6c60\uff0c\u4e4b\u540e\u4e0d\u518d\u63a5\u6536\u65b0\u7684\u8bf7\u6c42 pool . close () # \u5fc5\u987b\u5148pool.close()\u4e4b\u540e\u624d\u80fd\u4f7f\u7528pool.join() pool . join () print ( '\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5' ) if __name__ == '__main__' : main () \u8f93\u51fa: \u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 80054 \u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 80058 \u6211\u662fking, \u4eca\u5e7418 args: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'} \u7236\u8fdb\u7a0b\u7684pid\u662f: 80054 \u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 80059 \u6211\u662fking, \u4eca\u5e7418 args: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'} \u7236\u8fdb\u7a0b\u7684pid\u662f: 80054 \u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 80058 \u6211\u662fking, \u4eca\u5e7418 args: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'} \u7236\u8fdb\u7a0b\u7684pid\u662f: 80054 \u5b50\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 80059 \u6211\u662fking, \u4eca\u5e7418 args: ('balabala...', 'makabaka...'), kwargs: {'key': 'value'} \u7236\u8fdb\u7a0b\u7684pid\u662f: 80054 \u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5","title":"\u591a\u8fdb\u7a0b\u4e4b\u8fdb\u7a0b\u6c60"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E8%BF%9B%E7%A8%8B%E4%B9%8B%E8%BF%9B%E7%A8%8B%E6%B1%A0%E9%97%B4%E9%80%9A%E4%BF%A1/","text":"\u591a\u8fdb\u7a0b\u4e4b\u8fdb\u7a0b\u6c60\u95f4\u901a\u4fe1 \u4f7f\u7528Manager\u5b8c\u6210\u8fdb\u7a0b\u6c60\u5185\u7684\u8fdb\u7a0b\u95f4\u901a\u4fe1 import os import time from multiprocessing import Manager , Queue , Pool def send_someting ( queue : Queue , something ): print ( f '\u53d1\u9001\u6d88\u606f: { something } , \u53d1\u9001\u6d88\u606f\u7684\u8fdb\u7a0bid: { os . getpid () } ' ) for _ in range ( 3 ): send_time = time . time () print ( f '\u53d1\u9001\u65f6\u95f4: { send_time } ' ) queue . put (( something , send_time )) def receive_something ( queue : Queue ): # queue.qsize() \u662f\u6d88\u606f\u961f\u5217\u4e2d\u7684\u6d88\u606f\u6570\u91cf while queue . qsize (): something , receive_time = queue . get () print ( f '\u63a5\u53d7\u6d88\u606f: { something } , \u63a5\u6536\u65f6\u95f4: { receive_time } , \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: { os . getpid () } ' ) def main (): print ( f '\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: { os . getpid () } ' ) queue = Manager () . Queue () pool = Pool () # \u53d1\u9001\u6d88\u606f\u7684\u8fdb\u7a0b pool . apply_async ( send_someting , ( queue , 'Hello World' )) # \u56e0\u4e3a\u5199\u5165\u9700\u8981\u65f6\u95f4\uff0c\u8c28\u9632\u8fd8\u6ca1\u5199\u5b8c\u5c31\u5f00\u59cb\u8bfb\u53d6 time . sleep ( 1 ) # \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0b pool . apply_async ( receive_something , kwds = { 'queue' : queue }) pool . close () pool . join () print ( '\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5' ) if __name__ == '__main__' : main () \u8f93\u51fa: \u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 93817 \u53d1\u9001\u6d88\u606f: Hello World, \u53d1\u9001\u6d88\u606f\u7684\u8fdb\u7a0bid: 93829 \u53d1\u9001\u65f6\u95f4: 1659790972.757417 \u53d1\u9001\u65f6\u95f4: 1659790972.75799 \u53d1\u9001\u65f6\u95f4: 1659790972.758079 \u63a5\u53d7\u6d88\u606f: Hello World, \u63a5\u6536\u65f6\u95f4: 1659790972.757417, \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: 93826 \u63a5\u53d7\u6d88\u606f: Hello World, \u63a5\u6536\u65f6\u95f4: 1659790972.75799, \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: 93826 \u63a5\u53d7\u6d88\u606f: Hello World, \u63a5\u6536\u65f6\u95f4: 1659790972.758079, \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: 93826 \u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5","title":"\u591a\u8fdb\u7a0b\u4e4b\u8fdb\u7a0b\u6c60\u95f4\u901a\u4fe1"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E8%BF%9B%E7%A8%8B%E4%B9%8B%E8%BF%9B%E7%A8%8B%E6%B1%A0%E9%97%B4%E9%80%9A%E4%BF%A1/#_1","text":"\u4f7f\u7528Manager\u5b8c\u6210\u8fdb\u7a0b\u6c60\u5185\u7684\u8fdb\u7a0b\u95f4\u901a\u4fe1 import os import time from multiprocessing import Manager , Queue , Pool def send_someting ( queue : Queue , something ): print ( f '\u53d1\u9001\u6d88\u606f: { something } , \u53d1\u9001\u6d88\u606f\u7684\u8fdb\u7a0bid: { os . getpid () } ' ) for _ in range ( 3 ): send_time = time . time () print ( f '\u53d1\u9001\u65f6\u95f4: { send_time } ' ) queue . put (( something , send_time )) def receive_something ( queue : Queue ): # queue.qsize() \u662f\u6d88\u606f\u961f\u5217\u4e2d\u7684\u6d88\u606f\u6570\u91cf while queue . qsize (): something , receive_time = queue . get () print ( f '\u63a5\u53d7\u6d88\u606f: { something } , \u63a5\u6536\u65f6\u95f4: { receive_time } , \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: { os . getpid () } ' ) def main (): print ( f '\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: { os . getpid () } ' ) queue = Manager () . Queue () pool = Pool () # \u53d1\u9001\u6d88\u606f\u7684\u8fdb\u7a0b pool . apply_async ( send_someting , ( queue , 'Hello World' )) # \u56e0\u4e3a\u5199\u5165\u9700\u8981\u65f6\u95f4\uff0c\u8c28\u9632\u8fd8\u6ca1\u5199\u5b8c\u5c31\u5f00\u59cb\u8bfb\u53d6 time . sleep ( 1 ) # \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0b pool . apply_async ( receive_something , kwds = { 'queue' : queue }) pool . close () pool . join () print ( '\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5' ) if __name__ == '__main__' : main () \u8f93\u51fa: \u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 93817 \u53d1\u9001\u6d88\u606f: Hello World, \u53d1\u9001\u6d88\u606f\u7684\u8fdb\u7a0bid: 93829 \u53d1\u9001\u65f6\u95f4: 1659790972.757417 \u53d1\u9001\u65f6\u95f4: 1659790972.75799 \u53d1\u9001\u65f6\u95f4: 1659790972.758079 \u63a5\u53d7\u6d88\u606f: Hello World, \u63a5\u6536\u65f6\u95f4: 1659790972.757417, \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: 93826 \u63a5\u53d7\u6d88\u606f: Hello World, \u63a5\u6536\u65f6\u95f4: 1659790972.75799, \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: 93826 \u63a5\u53d7\u6d88\u606f: Hello World, \u63a5\u6536\u65f6\u95f4: 1659790972.758079, \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: 93826 \u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5","title":"\u591a\u8fdb\u7a0b\u4e4b\u8fdb\u7a0b\u6c60\u95f4\u901a\u4fe1"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E8%BF%9B%E7%A8%8B%E4%B9%8B%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/","text":"\u591a\u8fdb\u7a0b\u4e4b\u8fdb\u7a0b\u95f4\u901a\u4fe1 \u4f7f\u7528Queue\u5b8c\u6210\u8fdb\u7a0b\u95f4\u901a\u4fe1 import os import time from multiprocessing import Process , Queue def send_someting ( queue : Queue , something ): print ( f '\u53d1\u9001\u6d88\u606f: { something } , \u53d1\u9001\u6d88\u606f\u7684\u8fdb\u7a0bid: { os . getpid () } ' ) for _ in range ( 3 ): send_time = time . time () print ( f '\u53d1\u9001\u65f6\u95f4: { send_time } ' ) queue . put (( something , send_time )) def receive_something ( queue : Queue ): while not queue . empty (): something , receive_time = queue . get () print ( f '\u63a5\u53d7\u6d88\u606f: { something } , \u63a5\u6536\u65f6\u95f4: { receive_time } , \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: { os . getpid () } ' ) def main (): print ( f '\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: { os . getpid () } ' ) queue = Queue () # \u53d1\u9001\u6d88\u606f\u7684\u8fdb\u7a0b process_send = Process ( target = send_someting , args = ( queue , 'Hello World' )) process_send . start () # \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0b process_receive = Process ( target = receive_something , kwargs = { 'queue' : queue }) process_receive . start () # \u4f7f\u7528\u8fdb\u7a0b\u540c\u6b65\u963b\u585e\u4e3b\u8fdb\u7a0b, \u7b49\u5f85\u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0b\u6210\u529f\u63a5\u6536\u6d88\u606f process_receive . join () print ( '\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5' ) if __name__ == '__main__' : main () \u8f93\u51fa\uff1a \u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 84824 \u53d1\u9001\u6d88\u606f: Hello World, \u53d1\u9001\u6d88\u606f\u7684\u8fdb\u7a0bid: 84826 \u53d1\u9001\u65f6\u95f4: 1659782172.101706 \u53d1\u9001\u65f6\u95f4: 1659782172.101969 \u53d1\u9001\u65f6\u95f4: 1659782172.101996 \u63a5\u53d7\u6d88\u606f: Hello World, \u63a5\u6536\u65f6\u95f4: 1659782172.101706, \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: 84827 \u63a5\u53d7\u6d88\u606f: Hello World, \u63a5\u6536\u65f6\u95f4: 1659782172.101969, \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: 84827 \u63a5\u53d7\u6d88\u606f: Hello World, \u63a5\u6536\u65f6\u95f4: 1659782172.101996, \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: 84827 \u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5","title":"\u591a\u8fdb\u7a0b\u4e4b\u8fdb\u7a0b\u95f4\u901a\u4fe1"},{"location":"python/thread-process-coroutine/%E5%A4%9A%E8%BF%9B%E7%A8%8B%E4%B9%8B%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/#_1","text":"\u4f7f\u7528Queue\u5b8c\u6210\u8fdb\u7a0b\u95f4\u901a\u4fe1 import os import time from multiprocessing import Process , Queue def send_someting ( queue : Queue , something ): print ( f '\u53d1\u9001\u6d88\u606f: { something } , \u53d1\u9001\u6d88\u606f\u7684\u8fdb\u7a0bid: { os . getpid () } ' ) for _ in range ( 3 ): send_time = time . time () print ( f '\u53d1\u9001\u65f6\u95f4: { send_time } ' ) queue . put (( something , send_time )) def receive_something ( queue : Queue ): while not queue . empty (): something , receive_time = queue . get () print ( f '\u63a5\u53d7\u6d88\u606f: { something } , \u63a5\u6536\u65f6\u95f4: { receive_time } , \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: { os . getpid () } ' ) def main (): print ( f '\u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: { os . getpid () } ' ) queue = Queue () # \u53d1\u9001\u6d88\u606f\u7684\u8fdb\u7a0b process_send = Process ( target = send_someting , args = ( queue , 'Hello World' )) process_send . start () # \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0b process_receive = Process ( target = receive_something , kwargs = { 'queue' : queue }) process_receive . start () # \u4f7f\u7528\u8fdb\u7a0b\u540c\u6b65\u963b\u585e\u4e3b\u8fdb\u7a0b, \u7b49\u5f85\u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0b\u6210\u529f\u63a5\u6536\u6d88\u606f process_receive . join () print ( '\u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5' ) if __name__ == '__main__' : main () \u8f93\u51fa\uff1a \u4e3b\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c, pid\u4e3a: 84824 \u53d1\u9001\u6d88\u606f: Hello World, \u53d1\u9001\u6d88\u606f\u7684\u8fdb\u7a0bid: 84826 \u53d1\u9001\u65f6\u95f4: 1659782172.101706 \u53d1\u9001\u65f6\u95f4: 1659782172.101969 \u53d1\u9001\u65f6\u95f4: 1659782172.101996 \u63a5\u53d7\u6d88\u606f: Hello World, \u63a5\u6536\u65f6\u95f4: 1659782172.101706, \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: 84827 \u63a5\u53d7\u6d88\u606f: Hello World, \u63a5\u6536\u65f6\u95f4: 1659782172.101969, \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: 84827 \u63a5\u53d7\u6d88\u606f: Hello World, \u63a5\u6536\u65f6\u95f4: 1659782172.101996, \u63a5\u6536\u6d88\u606f\u7684\u8fdb\u7a0bid: 84827 \u4e3b\u8fdb\u7a0b\u8fd0\u884c\u5b8c\u6bd5","title":"\u591a\u8fdb\u7a0b\u4e4b\u8fdb\u7a0b\u95f4\u901a\u4fe1"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","text":"Git\u5e38\u7528\u547d\u4ee4 \u914d\u7f6e\u7528\u6237\u540d\u79f0 git config --global user.name \"your name\" \u914d\u7f6e\u7535\u5b50\u90ae\u4ef6\u5730\u5740 git config --global user.email \"your email\" \u521b\u5efaGit\u7248\u672c\u5e93 git init \u514b\u9686\u8fdc\u7a0b\u4ed3\u5e93 \u547d\u4ee4\u683c\u5f0f git clone <repo> <directory> \u53c2\u6570\u8bf4\u660e: repo: Git\u4ed3\u5e93\u5730\u5740 directory: \u672c\u5730\u76ee\u5f55\u540d\u79f0, \u53ef\u7701\u7565 \u793a\u4f8b: git clone git@github.com:public-apis/public-apis.git public_apis \u521b\u5efa\u6587\u4ef6\u5e76\u63d0\u4ea4\u5230\u7248\u672c\u5e93 Git\u672c\u5730\u4ed3\u5e93\u6709\u4e09\u5927\u533a\u57df: \u5de5\u4f5c\u533a\u3001\u6682\u5b58\u533a\u3001\u7248\u672c\u533a \u521b\u5efa\u3001\u4fee\u6539\u6587\u4ef6\u7b49\u64cd\u4f5c\u662f\u5728\u5de5\u4f5c\u533a git add \u547d\u4ee4\u662f\u5c06\u5de5\u4f5c\u533a\u7684\u5185\u5bb9\u6dfb\u52a0\u5230\u6682\u5b58\u533a git commit\u547d\u4ee4\u5c06\u4e34\u65f6\u5b58\u533a\u5185\u5bb9\u6dfb\u52a0\u5230\u672c\u5730\u4ed3\u5e93\u4e2d add\u547d\u4ee4 \u6dfb\u52a0\u4e00\u4e2a\u6216\u591a\u4e2a\u6587\u4ef6\u5230\u6682\u5b58\u533a git add file1 file2 ... \u6dfb\u52a0\u6307\u5b9a\u76ee\u5f55\u5230\u6682\u5b58\u533a, \u5305\u62ec\u5b50\u76ee\u5f55 git add dir \u6dfb\u52a0\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u5230\u6682\u5b58\u533a git add . commit\u547d\u4ee4 \u63d0\u4ea4\u6682\u5b58\u533a\u5230\u672c\u5730\u4ed3\u5e93\u4e2d git commit -m 'message' \u53c2\u6570\u8bf4\u660e: -m: \u6dfb\u52a0-m\u53c2\u6570\u8868\u793a\u53ef\u4ee5\u76f4\u63a5\u8f93\u5165\u540e\u9762\u7684message \u5982\u679ccommit\u6ce8\u91ca\u5199\u9519\u4e86, \u53ea\u60f3\u6539\u4e00\u4e0b\u6ce8\u91ca, \u53ea\u9700\u8981: git commit --amend , \u5373\u53ef\u8fdb\u5165\u7f16\u8f91\u5668\u66f4\u6539\u6ce8\u91ca \u63d0\u4ea4\u6682\u5b58\u533a\u7684\u6307\u5b9a\u6587\u4ef6\u5230\u4ed3\u5e93\u533a git commit file1 file2 ... -m 'message' \u67e5\u770b\u5f53\u524d\u4ed3\u5e93\u6587\u4ef6\u72b6\u6001 git status \u7248\u672c\u56de\u9000 git reset\u547d\u4ee4\u7528\u4e8e\u56de\u9000\u7248\u672c, \u53ef\u4ee5\u6307\u5b9a\u9000\u56de\u67d0\u4e00\u6b21\u63d0\u4ea4\u7684\u7248\u672c\u3002git reset\u547d\u4ee4\u8bed\u6cd5\u5982\u4e0b\u3002 git reset [--soft | --mixed | --hard] [HEAD] \u53c2\u6570\u8bf4\u660e: --mixed: \u9ed8\u8ba4, \u64a4\u9500commit, \u5e76\u4e14\u64a4\u9500 git add . \u64cd\u4f5c, \u7528\u4e8e\u91cd\u7f6e\u6682\u5b58\u533a\u7684\u6587\u4ef6, \u5de5\u4f5c\u533a\u6587\u4ef6\u5185\u5bb9\u4fdd\u6301\u4e0d\u53d8 --soft: \u64a4\u9500commit, \u4f46\u4e0d\u64a4\u9500 git add . \u64cd\u4f5c, \u5de5\u4f5c\u533a\u6587\u4ef6\u5185\u5bb9\u4fdd\u6301\u4e0d\u53d8, \u7528\u4e8e\u56de\u9000\u5230\u67d0\u4e2a\u7248\u672c --hard: \u7528\u4e8e\u64a4\u9500\u5de5\u4f5c\u533a\u4e2d\u6240\u6709\u672a\u63d0\u4ea4\u7684\u4fee\u6539\u5185\u5bb9, \u5c06\u6682\u5b58\u533a\u4e0e\u5de5\u4f5c\u533a\u90fd\u56de\u5230\u4e0a\u4e00\u6b21\u7248\u672c, \u5e76\u5220\u9664\u4e4b\u524d\u7684\u6240\u6709\u4fe1\u606f\u63d0\u4ea4 HEAD: HEAD\u548cHEAD~0\u8868\u793a\u5f53\u524d\u7248\u672c HEAD^\u548cHEAD~1\u8868\u793a\u4e0a\u4e00\u4e2a\u7248\u672c HEAD^^\u548cHEAD~2\u8868\u793a\u4e0a\u4e0a\u4e00\u4e2a\u7248\u672c HEAD^^^\u548cHEAD~3\u8868\u793a\u4e0a\u4e0a\u4e0a\u4e00\u4e2a\u7248\u672c \u5176\u4ed6\u7248\u672c\u4ee5\u6b64\u7c7b\u63a8... \u6587\u4ef6\u6bd4\u8f83 git diff\u547d\u4ee4\u7528\u4e8e\u6bd4\u8f83\u6587\u4ef6\u7684\u4e0d\u540c, \u5373\u6bd4\u8f83\u6587\u4ef6\u5728\u6682\u5b58\u533a\u548c\u5de5\u4f5c\u533a\u7684\u5dee\u5f02 git diff\u547d\u4ee4\u663e\u793a\u5df2\u5199\u5165\u6682\u5b58\u533a\u548c\u5df2\u7ecf\u88ab\u4fee\u6539\u4f46\u5c1a\u672a\u5199\u5165\u6682\u5b58\u533a\u6587\u4ef6\u7684\u533a\u522b \u67e5\u770b\u5c1a\u672a\u7f13\u5b58\u7684\u6539\u52a8 git diff \u67e5\u770b\u5df2\u7f13\u5b58\u7684\u6539\u52a8 git diff --cached \u67e5\u770b\u5df2\u7f13\u5b58\u7684\u4e0e\u672a\u7f13\u5b58\u7684\u6240\u6709\u6539\u52a8 git diff HEAD \u663e\u793a\u6458\u8981, \u800c\u975e\u6574\u4e2adiff git diff --stat \u67e5\u770b\u67d0\u4e2a\u6587\u4ef6\u7684\u6539\u52a8 git diff HEAD -- file Git\u7684\u64a4\u9500\u4fee\u6539 Git\u7684\u64a4\u9500\u4fee\u6539\u6709\u4e24\u79cd\u65b9\u5f0f \u6587\u4ef6\u4fee\u6539\u540e\u8fd8\u6ca1\u6709\u88ab\u653e\u5230\u6682\u5b58\u533a, \u64a4\u9500\u4fee\u6539\u5c31\u80fd\u56de\u5230\u7248\u672c\u5e93\u672a\u4fee\u6539\u524d\u72b6\u6001 \u6587\u4ef6\u4fee\u6539\u540e\u6dfb\u52a0\u5230\u6682\u5b58\u533a, \u64a4\u9500\u6682\u5b58\u533a\u7684\u4fee\u6539\u5c31\u56de\u5230\u6dfb\u52a0\u5230\u6682\u5b58\u533a\u540e\u7684\u72b6\u6001, \u9700\u8981\u7ee7\u7eed\u6267\u884c\u64a4\u9500\u6587\u4ef6\u64cd\u4f5c, \u624d\u80fd\u5b8c\u5168\u64a4\u9500\u6210\u529f \u672a\u6dfb\u52a0\u5230\u7f13\u5b58\u533a git checkout file PS: \u53ef\u4ee5\u901a\u8fc7\u6b64\u547d\u4ee4\u627e\u56de\u8bef\u5220\u9664\u7684\u6587\u4ef6 \u5df2\u6dfb\u52a0\u5230\u7f13\u5b58\u533a git reset HEAD file git checkout file \u5206\u652f\u7ba1\u7406 \u67e5\u770b\u5206\u652f git branch \u521b\u5efa|\u5207\u6362\u5206\u652f git branch branch_name \u5206\u652f\u5b58\u5728\u8868\u793a\u5207\u6362, \u5426\u5219\u8868\u793a\u521b\u5efa \u521b\u5efa\u5e76\u5207\u6362\u5206\u652f git checkout -b branch_name \u5220\u9664\u5206\u652f git branch -d test \u82e5\u60f3\u8981\u5220\u9664\u5f53\u524d\u5206\u652f\u9700\u8981\u5148\u5207\u6362\u5230\u5176\u4ed6\u5206\u652f \u5408\u5e76\u5206\u652f git merge branch_name \u8868\u793a\u5c06\u540d\u4e3abranch_name\u7684\u5206\u652f\u5408\u5e76\u5230\u5f53\u524d\u5206\u652f \u91cd\u547d\u540d\u5206\u652f git branch -m old_name new_name \u5982\u679c\u8be5\u5206\u652f\u5df2\u7ecf\u88ab\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93, \u5219\u5728\u91cd\u547d\u540d\u672c\u5730\u5206\u652f\u540e, \u8fd8\u9700\u5220\u9664\u8fdc\u7a0b\u5206\u652f, \u518d\u4e0a\u4f20\u672c\u5730\u91cd\u547d\u540d\u540e\u7684\u5206\u652f \u5220\u9664: git push --delete origin old_name \u63a8\u9001: git push origin new_name \u67d0\u4e9b\u60c5\u51b5\u4e0b\u8fd8\u53ef\u80fd\u9700\u8981\u505a\u4e00\u6b21\u5173\u8054\u64cd\u4f5c: git branch --set-upstream-to origin/new_name","title":"Git\u5e38\u7528\u547d\u4ee4"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#git","text":"","title":"Git\u5e38\u7528\u547d\u4ee4"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_1","text":"git config --global user.name \"your name\"","title":"\u914d\u7f6e\u7528\u6237\u540d\u79f0"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_2","text":"git config --global user.email \"your email\"","title":"\u914d\u7f6e\u7535\u5b50\u90ae\u4ef6\u5730\u5740"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#git_1","text":"git init","title":"\u521b\u5efaGit\u7248\u672c\u5e93"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_3","text":"\u547d\u4ee4\u683c\u5f0f git clone <repo> <directory> \u53c2\u6570\u8bf4\u660e: repo: Git\u4ed3\u5e93\u5730\u5740 directory: \u672c\u5730\u76ee\u5f55\u540d\u79f0, \u53ef\u7701\u7565 \u793a\u4f8b: git clone git@github.com:public-apis/public-apis.git public_apis","title":"\u514b\u9686\u8fdc\u7a0b\u4ed3\u5e93"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_4","text":"Git\u672c\u5730\u4ed3\u5e93\u6709\u4e09\u5927\u533a\u57df: \u5de5\u4f5c\u533a\u3001\u6682\u5b58\u533a\u3001\u7248\u672c\u533a \u521b\u5efa\u3001\u4fee\u6539\u6587\u4ef6\u7b49\u64cd\u4f5c\u662f\u5728\u5de5\u4f5c\u533a git add \u547d\u4ee4\u662f\u5c06\u5de5\u4f5c\u533a\u7684\u5185\u5bb9\u6dfb\u52a0\u5230\u6682\u5b58\u533a git commit\u547d\u4ee4\u5c06\u4e34\u65f6\u5b58\u533a\u5185\u5bb9\u6dfb\u52a0\u5230\u672c\u5730\u4ed3\u5e93\u4e2d","title":"\u521b\u5efa\u6587\u4ef6\u5e76\u63d0\u4ea4\u5230\u7248\u672c\u5e93"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#add","text":"\u6dfb\u52a0\u4e00\u4e2a\u6216\u591a\u4e2a\u6587\u4ef6\u5230\u6682\u5b58\u533a git add file1 file2 ... \u6dfb\u52a0\u6307\u5b9a\u76ee\u5f55\u5230\u6682\u5b58\u533a, \u5305\u62ec\u5b50\u76ee\u5f55 git add dir \u6dfb\u52a0\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u5230\u6682\u5b58\u533a git add .","title":"add\u547d\u4ee4"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#commit","text":"","title":"commit\u547d\u4ee4"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_5","text":"git commit -m 'message' \u53c2\u6570\u8bf4\u660e: -m: \u6dfb\u52a0-m\u53c2\u6570\u8868\u793a\u53ef\u4ee5\u76f4\u63a5\u8f93\u5165\u540e\u9762\u7684message \u5982\u679ccommit\u6ce8\u91ca\u5199\u9519\u4e86, \u53ea\u60f3\u6539\u4e00\u4e0b\u6ce8\u91ca, \u53ea\u9700\u8981: git commit --amend , \u5373\u53ef\u8fdb\u5165\u7f16\u8f91\u5668\u66f4\u6539\u6ce8\u91ca","title":"\u63d0\u4ea4\u6682\u5b58\u533a\u5230\u672c\u5730\u4ed3\u5e93\u4e2d"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_6","text":"git commit file1 file2 ... -m 'message'","title":"\u63d0\u4ea4\u6682\u5b58\u533a\u7684\u6307\u5b9a\u6587\u4ef6\u5230\u4ed3\u5e93\u533a"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_7","text":"git status","title":"\u67e5\u770b\u5f53\u524d\u4ed3\u5e93\u6587\u4ef6\u72b6\u6001"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_8","text":"git reset\u547d\u4ee4\u7528\u4e8e\u56de\u9000\u7248\u672c, \u53ef\u4ee5\u6307\u5b9a\u9000\u56de\u67d0\u4e00\u6b21\u63d0\u4ea4\u7684\u7248\u672c\u3002git reset\u547d\u4ee4\u8bed\u6cd5\u5982\u4e0b\u3002 git reset [--soft | --mixed | --hard] [HEAD] \u53c2\u6570\u8bf4\u660e: --mixed: \u9ed8\u8ba4, \u64a4\u9500commit, \u5e76\u4e14\u64a4\u9500 git add . \u64cd\u4f5c, \u7528\u4e8e\u91cd\u7f6e\u6682\u5b58\u533a\u7684\u6587\u4ef6, \u5de5\u4f5c\u533a\u6587\u4ef6\u5185\u5bb9\u4fdd\u6301\u4e0d\u53d8 --soft: \u64a4\u9500commit, \u4f46\u4e0d\u64a4\u9500 git add . \u64cd\u4f5c, \u5de5\u4f5c\u533a\u6587\u4ef6\u5185\u5bb9\u4fdd\u6301\u4e0d\u53d8, \u7528\u4e8e\u56de\u9000\u5230\u67d0\u4e2a\u7248\u672c --hard: \u7528\u4e8e\u64a4\u9500\u5de5\u4f5c\u533a\u4e2d\u6240\u6709\u672a\u63d0\u4ea4\u7684\u4fee\u6539\u5185\u5bb9, \u5c06\u6682\u5b58\u533a\u4e0e\u5de5\u4f5c\u533a\u90fd\u56de\u5230\u4e0a\u4e00\u6b21\u7248\u672c, \u5e76\u5220\u9664\u4e4b\u524d\u7684\u6240\u6709\u4fe1\u606f\u63d0\u4ea4 HEAD: HEAD\u548cHEAD~0\u8868\u793a\u5f53\u524d\u7248\u672c HEAD^\u548cHEAD~1\u8868\u793a\u4e0a\u4e00\u4e2a\u7248\u672c HEAD^^\u548cHEAD~2\u8868\u793a\u4e0a\u4e0a\u4e00\u4e2a\u7248\u672c HEAD^^^\u548cHEAD~3\u8868\u793a\u4e0a\u4e0a\u4e0a\u4e00\u4e2a\u7248\u672c \u5176\u4ed6\u7248\u672c\u4ee5\u6b64\u7c7b\u63a8...","title":"\u7248\u672c\u56de\u9000"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_9","text":"git diff\u547d\u4ee4\u7528\u4e8e\u6bd4\u8f83\u6587\u4ef6\u7684\u4e0d\u540c, \u5373\u6bd4\u8f83\u6587\u4ef6\u5728\u6682\u5b58\u533a\u548c\u5de5\u4f5c\u533a\u7684\u5dee\u5f02 git diff\u547d\u4ee4\u663e\u793a\u5df2\u5199\u5165\u6682\u5b58\u533a\u548c\u5df2\u7ecf\u88ab\u4fee\u6539\u4f46\u5c1a\u672a\u5199\u5165\u6682\u5b58\u533a\u6587\u4ef6\u7684\u533a\u522b","title":"\u6587\u4ef6\u6bd4\u8f83"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_10","text":"git diff","title":"\u67e5\u770b\u5c1a\u672a\u7f13\u5b58\u7684\u6539\u52a8"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_11","text":"git diff --cached","title":"\u67e5\u770b\u5df2\u7f13\u5b58\u7684\u6539\u52a8"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_12","text":"git diff HEAD","title":"\u67e5\u770b\u5df2\u7f13\u5b58\u7684\u4e0e\u672a\u7f13\u5b58\u7684\u6240\u6709\u6539\u52a8"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#diff","text":"git diff --stat","title":"\u663e\u793a\u6458\u8981, \u800c\u975e\u6574\u4e2adiff"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_13","text":"git diff HEAD -- file","title":"\u67e5\u770b\u67d0\u4e2a\u6587\u4ef6\u7684\u6539\u52a8"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#git_2","text":"Git\u7684\u64a4\u9500\u4fee\u6539\u6709\u4e24\u79cd\u65b9\u5f0f \u6587\u4ef6\u4fee\u6539\u540e\u8fd8\u6ca1\u6709\u88ab\u653e\u5230\u6682\u5b58\u533a, \u64a4\u9500\u4fee\u6539\u5c31\u80fd\u56de\u5230\u7248\u672c\u5e93\u672a\u4fee\u6539\u524d\u72b6\u6001 \u6587\u4ef6\u4fee\u6539\u540e\u6dfb\u52a0\u5230\u6682\u5b58\u533a, \u64a4\u9500\u6682\u5b58\u533a\u7684\u4fee\u6539\u5c31\u56de\u5230\u6dfb\u52a0\u5230\u6682\u5b58\u533a\u540e\u7684\u72b6\u6001, \u9700\u8981\u7ee7\u7eed\u6267\u884c\u64a4\u9500\u6587\u4ef6\u64cd\u4f5c, \u624d\u80fd\u5b8c\u5168\u64a4\u9500\u6210\u529f","title":"Git\u7684\u64a4\u9500\u4fee\u6539"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_14","text":"git checkout file PS: \u53ef\u4ee5\u901a\u8fc7\u6b64\u547d\u4ee4\u627e\u56de\u8bef\u5220\u9664\u7684\u6587\u4ef6","title":"\u672a\u6dfb\u52a0\u5230\u7f13\u5b58\u533a"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_15","text":"git reset HEAD file git checkout file","title":"\u5df2\u6dfb\u52a0\u5230\u7f13\u5b58\u533a"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_16","text":"","title":"\u5206\u652f\u7ba1\u7406"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_17","text":"git branch","title":"\u67e5\u770b\u5206\u652f"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_18","text":"git branch branch_name \u5206\u652f\u5b58\u5728\u8868\u793a\u5207\u6362, \u5426\u5219\u8868\u793a\u521b\u5efa","title":"\u521b\u5efa|\u5207\u6362\u5206\u652f"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_19","text":"git checkout -b branch_name","title":"\u521b\u5efa\u5e76\u5207\u6362\u5206\u652f"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_20","text":"git branch -d test \u82e5\u60f3\u8981\u5220\u9664\u5f53\u524d\u5206\u652f\u9700\u8981\u5148\u5207\u6362\u5230\u5176\u4ed6\u5206\u652f","title":"\u5220\u9664\u5206\u652f"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_21","text":"git merge branch_name \u8868\u793a\u5c06\u540d\u4e3abranch_name\u7684\u5206\u652f\u5408\u5e76\u5230\u5f53\u524d\u5206\u652f","title":"\u5408\u5e76\u5206\u652f"},{"location":"soft/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#_22","text":"git branch -m old_name new_name \u5982\u679c\u8be5\u5206\u652f\u5df2\u7ecf\u88ab\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93, \u5219\u5728\u91cd\u547d\u540d\u672c\u5730\u5206\u652f\u540e, \u8fd8\u9700\u5220\u9664\u8fdc\u7a0b\u5206\u652f, \u518d\u4e0a\u4f20\u672c\u5730\u91cd\u547d\u540d\u540e\u7684\u5206\u652f \u5220\u9664: git push --delete origin old_name \u63a8\u9001: git push origin new_name \u67d0\u4e9b\u60c5\u51b5\u4e0b\u8fd8\u53ef\u80fd\u9700\u8981\u505a\u4e00\u6b21\u5173\u8054\u64cd\u4f5c: git branch --set-upstream-to origin/new_name","title":"\u91cd\u547d\u540d\u5206\u652f"},{"location":"soft/PostgreSQL%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","text":"PostgreSQL\u5e38\u7528\u547d\u4ee4 \u5907\u4efd\u6570\u636e\u5e93 pg_dump -h 127.0.0.1 -U postgres -d db >db.bak \u8fd8\u539f\u6570\u636e\u5e93 psql -h 127.0.0.1 -U postgres -d db < db.bak \u521b\u5efa\u6570\u636e\u5e93 create database testdb ; \u67e5\u770b\u6570\u636e\u5e93 \\l \u5220\u9664\u6570\u636e\u5e93 drop database testdb ; \u8fde\u63a5\u6570\u636e\u5e93 \\c testdb; \u521b\u5efa\u6ca1\u6709\u4e3b\u952e\u7684\u8868 create table tb1 ( id int not null , c_name varchar ( 32 ), c_phone char ( 14 )); \u521b\u5efa\u5305\u542b\u4e3b\u952e\u7684\u8868 -- \u65b9\u6cd51 create table tb2 ( id int primary key , c_name varchar ( 32 ), c_phone char ( 14 )); -- \u65b9\u6cd52 create table tb3 ( id int not null , c_name varchar ( 32 ), c_phone char ( 14 ), primary key ( id )); \u521b\u5efa\u5305\u542b\u591a\u4e2a\u4e3b\u952e\u7684\u8868 create table tb4 ( id int , c_name varchar ( 32 ), c_phone char ( 14 ), primary key ( id , c_name )); \u521b\u5efa\u4e3b\u952e\u81ea\u52a8\u589e\u957f\u7684\u8868 -- \u4e3b\u952e\u5b57\u6bb5\u4e0d\u7528\u663e\u793a\u58f0\u660enot null create table tb5 ( id serial primary key , c_name varchar ( 32 ), c_phone char ( 14 )); \u663e\u793a\u6240\u6709\u8868 \\d \u663e\u793a\u67d0\u5f20\u8868 \\d tb1 \u5220\u9664\u8868 drop table tb1 ; drop table tb2 , tb3 ; \u6269\u5c55\uff1a\u6a21\u5f0f(\u67b6\u6784)\uff0c\u6700\u5e38\u89c1\u7684public\u5c31\u662f\u4e00\u5f20\u6a21\u5f0f(\u67b6\u6784) -- \u521b\u5efa\u6a21\u5f0f(\u67b6\u6784)\uff1a create schema myschema ; -- \u5220\u9664\u6a21\u5f0f(\u67b6\u6784)\uff1a drop schema myschema ;","title":"PostgreSQL\u5e38\u7528\u547d\u4ee4"},{"location":"soft/PostgreSQL%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#postgresql","text":"\u5907\u4efd\u6570\u636e\u5e93 pg_dump -h 127.0.0.1 -U postgres -d db >db.bak \u8fd8\u539f\u6570\u636e\u5e93 psql -h 127.0.0.1 -U postgres -d db < db.bak \u521b\u5efa\u6570\u636e\u5e93 create database testdb ; \u67e5\u770b\u6570\u636e\u5e93 \\l \u5220\u9664\u6570\u636e\u5e93 drop database testdb ; \u8fde\u63a5\u6570\u636e\u5e93 \\c testdb; \u521b\u5efa\u6ca1\u6709\u4e3b\u952e\u7684\u8868 create table tb1 ( id int not null , c_name varchar ( 32 ), c_phone char ( 14 )); \u521b\u5efa\u5305\u542b\u4e3b\u952e\u7684\u8868 -- \u65b9\u6cd51 create table tb2 ( id int primary key , c_name varchar ( 32 ), c_phone char ( 14 )); -- \u65b9\u6cd52 create table tb3 ( id int not null , c_name varchar ( 32 ), c_phone char ( 14 ), primary key ( id )); \u521b\u5efa\u5305\u542b\u591a\u4e2a\u4e3b\u952e\u7684\u8868 create table tb4 ( id int , c_name varchar ( 32 ), c_phone char ( 14 ), primary key ( id , c_name )); \u521b\u5efa\u4e3b\u952e\u81ea\u52a8\u589e\u957f\u7684\u8868 -- \u4e3b\u952e\u5b57\u6bb5\u4e0d\u7528\u663e\u793a\u58f0\u660enot null create table tb5 ( id serial primary key , c_name varchar ( 32 ), c_phone char ( 14 )); \u663e\u793a\u6240\u6709\u8868 \\d \u663e\u793a\u67d0\u5f20\u8868 \\d tb1 \u5220\u9664\u8868 drop table tb1 ; drop table tb2 , tb3 ; \u6269\u5c55\uff1a\u6a21\u5f0f(\u67b6\u6784)\uff0c\u6700\u5e38\u89c1\u7684public\u5c31\u662f\u4e00\u5f20\u6a21\u5f0f(\u67b6\u6784) -- \u521b\u5efa\u6a21\u5f0f(\u67b6\u6784)\uff1a create schema myschema ; -- \u5220\u9664\u6a21\u5f0f(\u67b6\u6784)\uff1a drop schema myschema ;","title":"PostgreSQL\u5e38\u7528\u547d\u4ee4"},{"location":"soft/V2ray%2BTrojan%E9%85%8D%E7%BD%AE/","text":"V2ray+Trojan\u914d\u7f6e \u53c2\u8003: https://www.v2fly.org/config/overview.html \u51c6\u5907\u5de5\u4f5c \u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u5747\u4e0b\u8f7d v2ray-core \u5ba2\u6237\u7aef\u4e0b\u8f7d\u56fd\u5185\u5916\u8def\u7531\u5206\u6d41\u6587\u4ef6 \u8def\u7531\u5206\u6d41 \u670d\u52a1\u7aef { // \u914d\u7f6e\u65e5\u5fd7 \"log\" : { \"access\" : \"access.log\" , \"error\" : \"error.log\" , \"loglevel\" : \"debug\" }, // \u914d\u7f6e\u5165\u7ad9\u8fde\u63a5 \"inbounds\" : [ { // \u4f7f\u7528Trojan\u534f\u8bae \"protocol\" : \"trojan\" , \"settings\" : { \"clients\" : [ { // \u5bc6\u7801, \u5ba2\u6237\u7aef\u8ba4\u8bc1\u4f7f\u7528 \"password\" : \"password\" } ] }, \"port\" : 56789 , \"listen\" : \"0.0.0.0\" , \"tag\" : \"proxy\" } ], // \u914d\u7f6e\u51fa\u7ad9\u8fde\u63a5 \"outbounds\" : [ { \"protocol\" : \"freedom\" } ] } \u5ba2\u6237\u7aef { // \u914d\u7f6e\u65e5\u5fd7 \"log\" : { \"access\" : \"access.log\" , \"error\" : \"error.log\" , \"loglevel\" : \"debug\" }, // \u914d\u7f6e\u5165\u7ad9\u8fde\u63a5 \"inbounds\" : [ // \u7528\u4e8e\u8bbe\u7f6e\u7cfb\u7edfHTTP\u4ee3\u7406 { \"protocol\" : \"http\" , \"port\" : 8080 , \"listen\" : \"0.0.0.0\" }, // \u7528\u4e8e\u8bbe\u7f6e\u7cfb\u7edfSOCKS\u4ee3\u7406 { \"protocol\" : \"socks\" , \"settings\" : { // \u542f\u7528UDP\u534f\u8bae \"udp\" : true }, \"port\" : 1080 , \"listen\" : \"0.0.0.0\" } ], // \u914d\u7f6e\u51fa\u7ad9\u8fde\u63a5 \"outbounds\" : [ { // \u4f7f\u7528Trojan\u534f\u8bae \"protocol\" : \"trojan\" , \"settings\" : { \"servers\" : [ { // \u6539\u6210\u771f\u6b63\u7684\u670d\u52a1\u5668IP\u5730\u5740 \"address\" : \"127.0.0.1\" , // \u670d\u52a1\u5668\u7aef\u53e3 \"port\" : 56789 , // \u670d\u52a1\u7aef\u7684\u5bc6\u7801, \"password\" : \"password\" } ] }, // \u914d\u7f6e\u6807\u7b7e, \u4e0d\u80fd\u91cd\u590d \"tag\" : \"proxy\" }, { \"protocol\" : \"freedom\" , \"tag\" : \"direct\" } ], // \u914d\u7f6e\u8def\u7531, \u5b9e\u73b0\u5206\u6d41 \"routing\" : { // \u53ea\u4f7f\u7528\u57df\u540d\u8fdb\u884c\u8def\u7531\u9009\u62e9\uff0c\u9ed8\u8ba4\u503c \"domainStrategy\" : \"AsIs\" , // \u57df\u540d\u5339\u914d\u7b97\u6cd5 \"domainMatcher\" : \"mph\" , // \u8def\u7531\u89c4\u5219 \"rules\" : [ // \u4f18\u5148\u7ea7\u4ece\u4e0a\u5f80\u4e0b\u4f9d\u6b21\u9012\u51cf { \"domainMatcher\" : \"mph\" , \"type\" : \"field\" , // \u914d\u7f6e\u56fd\u5185\u8def\u7531 \"domains\" : [ \"geosite:private\" , \"geosite:cn\" , \"geosite:apple-cn\" , \"geosite:google-cn\" , \"geosite:category-games@cn\" , // \u907f\u514d geolocation-!cn \u5bfc\u81f4 github \u8d70\u4ee3\u7406 \"github.com\" ], // \u8bbf\u95ee\u4ee5\u4e0a\u7f51\u7ad9\u8d70\u76f4\u8fde \"outboundTag\" : \"direct\" }, { \"domainMatcher\" : \"mph\" , \"type\" : \"field\" , // \u914d\u7f6e\u56fd\u5916\u8def\u7531 \"domains\" : [ \"geosite:google\" , \"geosite:facebook\" , \"geosite:twitter\" , \"geosite:telegram\" , // geolocation-!cn \u5305\u542b\u4e86\u5e38\u89c1\u7684\u975e\u5927\u9646\u7ad9\u70b9\u57df\u540d // \u542f\u7528\u540e\u57fa\u672c\u4e0a\u6240\u6709\u56fd\u5916\u7f51\u7ad9(\u4f8b\u5982github)\u90fd\u8d70\u4ee3\u7406 \"geosite:geolocation-!cn\" ], // \u8bbf\u95ee\u4ee5\u4e0a\u7f51\u7ad9\u8d70\u4ee3\u7406 \"outboundTag\" : \"proxy\" }, { // \u5176\u4ed6\u7f51\u7ad9\u8d70\u76f4\u8fde \"type\" : \"field\" , \"network\" : \"tcp,udp\" , \"outboundTag\" : \"direct\" } ] } } \u5176\u4ed6 \u6d41\u91cf\u4ee3\u7406\u8fc7\u7a0b: \u6d4f\u89c8\u5668 -> \u7cfb\u7edf\u4ee3\u7406(SOCKS) -> \u5ba2\u6237\u7aefinbounds -> \u5ba2\u6237\u7aefoutbounds -> \u670d\u52a1\u7aefinbounds -> \u670d\u52a1\u7aefoutbounds \u6240\u4ee5 \u5ba2\u6237\u7aefoutbounds \u914d\u7f6e\u7684\u534f\u8bae\u8981\u4e8e \u670d\u52a1\u7aefinbounds \u4e00\u81f4, \u5426\u5219\u65e0\u6cd5\u4ee3\u7406\u6210\u529f \u56fd\u5185\u5916\u5206\u6d41\u8def: V2Ray \u8def\u7531\u89c4\u5219\u6587\u4ef6\u52a0\u5f3a\u7248\uff0c\u8bbf\u95ee \u8def\u7531\u5206\u6d41 \u4e0b\u8f7d geoip.dat \u548c geosite.dat \u7684\u6587\u4ef6, \u8986\u76d6\u5b98\u65b9\u540c\u540d\u6587\u4ef6 MAC\u811a\u672c \u9002\u7528\u4e8eMacOS\u7684\u4e00\u952e\u811a\u672c #!/bin/zsh getSOCKSProxyStatus (){ status = ` networksetup -getsocksfirewallproxy WI-FI | grep -E ^Enabled | cut -d \" \" -f 2 ` } enableSOCKSProxy (){ ` networksetup -setsocksfirewallproxy WI-FI 127 .0.0.1 1080 ` ` networksetup -setsocksfirewallproxystate WI-FI on ` echo \"Enable socks proxy for WI-FI\" } disableSOCKSProxy (){ ` networksetup -setsocksfirewallproxystate WI-FI off ` echo \"Disable socks proxy for WI-FI\" } startV2ray (){ nohup ~/.v2ray/v2ray --config ~/.v2ray/config.json > ~/.v2ray/nohup.log 2 > & 1 & echo \"V2ray started\" } stopV2ray (){ ps -ef | grep v2ray | grep -v v2ray.sh | grep -v grep | awk '{print $2}' | xargs kill -9 echo \"V2ray stopped\" } main (){ getSOCKSProxyStatus if [ $status == \"Yes\" ] ; then disableSOCKSProxy stopV2ray else startV2ray enableSOCKSProxy fi } main PS: \u914d\u5408alias\u522b\u540d alias v2=\"sh ~/.v2ray/v2ray.sh\" \u4f7f\u7528\u6548\u679c\u66f4\u4f73","title":"V2ray+Trojan\u914d\u7f6e"},{"location":"soft/V2ray%2BTrojan%E9%85%8D%E7%BD%AE/#v2raytrojan","text":"\u53c2\u8003: https://www.v2fly.org/config/overview.html","title":"V2ray+Trojan\u914d\u7f6e"},{"location":"soft/V2ray%2BTrojan%E9%85%8D%E7%BD%AE/#_1","text":"\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u5747\u4e0b\u8f7d v2ray-core \u5ba2\u6237\u7aef\u4e0b\u8f7d\u56fd\u5185\u5916\u8def\u7531\u5206\u6d41\u6587\u4ef6 \u8def\u7531\u5206\u6d41","title":"\u51c6\u5907\u5de5\u4f5c"},{"location":"soft/V2ray%2BTrojan%E9%85%8D%E7%BD%AE/#_2","text":"{ // \u914d\u7f6e\u65e5\u5fd7 \"log\" : { \"access\" : \"access.log\" , \"error\" : \"error.log\" , \"loglevel\" : \"debug\" }, // \u914d\u7f6e\u5165\u7ad9\u8fde\u63a5 \"inbounds\" : [ { // \u4f7f\u7528Trojan\u534f\u8bae \"protocol\" : \"trojan\" , \"settings\" : { \"clients\" : [ { // \u5bc6\u7801, \u5ba2\u6237\u7aef\u8ba4\u8bc1\u4f7f\u7528 \"password\" : \"password\" } ] }, \"port\" : 56789 , \"listen\" : \"0.0.0.0\" , \"tag\" : \"proxy\" } ], // \u914d\u7f6e\u51fa\u7ad9\u8fde\u63a5 \"outbounds\" : [ { \"protocol\" : \"freedom\" } ] }","title":"\u670d\u52a1\u7aef"},{"location":"soft/V2ray%2BTrojan%E9%85%8D%E7%BD%AE/#_3","text":"{ // \u914d\u7f6e\u65e5\u5fd7 \"log\" : { \"access\" : \"access.log\" , \"error\" : \"error.log\" , \"loglevel\" : \"debug\" }, // \u914d\u7f6e\u5165\u7ad9\u8fde\u63a5 \"inbounds\" : [ // \u7528\u4e8e\u8bbe\u7f6e\u7cfb\u7edfHTTP\u4ee3\u7406 { \"protocol\" : \"http\" , \"port\" : 8080 , \"listen\" : \"0.0.0.0\" }, // \u7528\u4e8e\u8bbe\u7f6e\u7cfb\u7edfSOCKS\u4ee3\u7406 { \"protocol\" : \"socks\" , \"settings\" : { // \u542f\u7528UDP\u534f\u8bae \"udp\" : true }, \"port\" : 1080 , \"listen\" : \"0.0.0.0\" } ], // \u914d\u7f6e\u51fa\u7ad9\u8fde\u63a5 \"outbounds\" : [ { // \u4f7f\u7528Trojan\u534f\u8bae \"protocol\" : \"trojan\" , \"settings\" : { \"servers\" : [ { // \u6539\u6210\u771f\u6b63\u7684\u670d\u52a1\u5668IP\u5730\u5740 \"address\" : \"127.0.0.1\" , // \u670d\u52a1\u5668\u7aef\u53e3 \"port\" : 56789 , // \u670d\u52a1\u7aef\u7684\u5bc6\u7801, \"password\" : \"password\" } ] }, // \u914d\u7f6e\u6807\u7b7e, \u4e0d\u80fd\u91cd\u590d \"tag\" : \"proxy\" }, { \"protocol\" : \"freedom\" , \"tag\" : \"direct\" } ], // \u914d\u7f6e\u8def\u7531, \u5b9e\u73b0\u5206\u6d41 \"routing\" : { // \u53ea\u4f7f\u7528\u57df\u540d\u8fdb\u884c\u8def\u7531\u9009\u62e9\uff0c\u9ed8\u8ba4\u503c \"domainStrategy\" : \"AsIs\" , // \u57df\u540d\u5339\u914d\u7b97\u6cd5 \"domainMatcher\" : \"mph\" , // \u8def\u7531\u89c4\u5219 \"rules\" : [ // \u4f18\u5148\u7ea7\u4ece\u4e0a\u5f80\u4e0b\u4f9d\u6b21\u9012\u51cf { \"domainMatcher\" : \"mph\" , \"type\" : \"field\" , // \u914d\u7f6e\u56fd\u5185\u8def\u7531 \"domains\" : [ \"geosite:private\" , \"geosite:cn\" , \"geosite:apple-cn\" , \"geosite:google-cn\" , \"geosite:category-games@cn\" , // \u907f\u514d geolocation-!cn \u5bfc\u81f4 github \u8d70\u4ee3\u7406 \"github.com\" ], // \u8bbf\u95ee\u4ee5\u4e0a\u7f51\u7ad9\u8d70\u76f4\u8fde \"outboundTag\" : \"direct\" }, { \"domainMatcher\" : \"mph\" , \"type\" : \"field\" , // \u914d\u7f6e\u56fd\u5916\u8def\u7531 \"domains\" : [ \"geosite:google\" , \"geosite:facebook\" , \"geosite:twitter\" , \"geosite:telegram\" , // geolocation-!cn \u5305\u542b\u4e86\u5e38\u89c1\u7684\u975e\u5927\u9646\u7ad9\u70b9\u57df\u540d // \u542f\u7528\u540e\u57fa\u672c\u4e0a\u6240\u6709\u56fd\u5916\u7f51\u7ad9(\u4f8b\u5982github)\u90fd\u8d70\u4ee3\u7406 \"geosite:geolocation-!cn\" ], // \u8bbf\u95ee\u4ee5\u4e0a\u7f51\u7ad9\u8d70\u4ee3\u7406 \"outboundTag\" : \"proxy\" }, { // \u5176\u4ed6\u7f51\u7ad9\u8d70\u76f4\u8fde \"type\" : \"field\" , \"network\" : \"tcp,udp\" , \"outboundTag\" : \"direct\" } ] } }","title":"\u5ba2\u6237\u7aef"},{"location":"soft/V2ray%2BTrojan%E9%85%8D%E7%BD%AE/#_4","text":"\u6d41\u91cf\u4ee3\u7406\u8fc7\u7a0b: \u6d4f\u89c8\u5668 -> \u7cfb\u7edf\u4ee3\u7406(SOCKS) -> \u5ba2\u6237\u7aefinbounds -> \u5ba2\u6237\u7aefoutbounds -> \u670d\u52a1\u7aefinbounds -> \u670d\u52a1\u7aefoutbounds \u6240\u4ee5 \u5ba2\u6237\u7aefoutbounds \u914d\u7f6e\u7684\u534f\u8bae\u8981\u4e8e \u670d\u52a1\u7aefinbounds \u4e00\u81f4, \u5426\u5219\u65e0\u6cd5\u4ee3\u7406\u6210\u529f \u56fd\u5185\u5916\u5206\u6d41\u8def: V2Ray \u8def\u7531\u89c4\u5219\u6587\u4ef6\u52a0\u5f3a\u7248\uff0c\u8bbf\u95ee \u8def\u7531\u5206\u6d41 \u4e0b\u8f7d geoip.dat \u548c geosite.dat \u7684\u6587\u4ef6, \u8986\u76d6\u5b98\u65b9\u540c\u540d\u6587\u4ef6","title":"\u5176\u4ed6"},{"location":"soft/V2ray%2BTrojan%E9%85%8D%E7%BD%AE/#mac","text":"\u9002\u7528\u4e8eMacOS\u7684\u4e00\u952e\u811a\u672c #!/bin/zsh getSOCKSProxyStatus (){ status = ` networksetup -getsocksfirewallproxy WI-FI | grep -E ^Enabled | cut -d \" \" -f 2 ` } enableSOCKSProxy (){ ` networksetup -setsocksfirewallproxy WI-FI 127 .0.0.1 1080 ` ` networksetup -setsocksfirewallproxystate WI-FI on ` echo \"Enable socks proxy for WI-FI\" } disableSOCKSProxy (){ ` networksetup -setsocksfirewallproxystate WI-FI off ` echo \"Disable socks proxy for WI-FI\" } startV2ray (){ nohup ~/.v2ray/v2ray --config ~/.v2ray/config.json > ~/.v2ray/nohup.log 2 > & 1 & echo \"V2ray started\" } stopV2ray (){ ps -ef | grep v2ray | grep -v v2ray.sh | grep -v grep | awk '{print $2}' | xargs kill -9 echo \"V2ray stopped\" } main (){ getSOCKSProxyStatus if [ $status == \"Yes\" ] ; then disableSOCKSProxy stopV2ray else startV2ray enableSOCKSProxy fi } main PS: \u914d\u5408alias\u522b\u540d alias v2=\"sh ~/.v2ray/v2ray.sh\" \u4f7f\u7528\u6548\u679c\u66f4\u4f73","title":"MAC\u811a\u672c"},{"location":"soft/VSCode%E5%85%8D%E5%AF%86%E5%8F%91%E5%B8%83%E4%BB%A3%E7%A0%81%E5%88%B0GitHub/","text":"VSCode\u514d\u5bc6\u53d1\u5e03\u4ee3\u7801\u5230GitHub \u8bbe\u7f6eGit\u5168\u5c40\u53d8\u91cf git config --global user.name \"your name\" git config --global user.email \"your email\" \u751f\u6210SSH Key ssh-keygen -t ed25519 -C \"your email\" \u6216 ssh-keygen -t rsa -b 4096 -C \"your email\" \u67e5\u770b\u516c\u94a5 cat ~/.ssh/id_ed25519.pub \u6216 cat ~/.ssh/id_rsa.pub \u6dfb\u52a0\u516c\u94a5\u5230GitHub\u8d26\u53f7 setting -> SSH and GPG keys -> New SSH key \u7c98\u8d34\u5bc6\u94a5\u5e76\u4fdd\u5b58 \u53d1\u5e03\u4ee3\u7801 \u6253\u5f00vscode\uff0c\u6253\u5f00\u6e90\u4ee3\u7801\u7ba1\u7406\uff0c\u70b9\u51fb\u53d1\u5e03\u5230Github\uff0c\u6839\u636e\u63d0\u793a\u64cd\u4f5c\u5373\u53ef","title":"VSCode\u514d\u5bc6\u53d1\u5e03\u4ee3\u7801\u5230GitHub"},{"location":"soft/VSCode%E5%85%8D%E5%AF%86%E5%8F%91%E5%B8%83%E4%BB%A3%E7%A0%81%E5%88%B0GitHub/#vscodegithub","text":"","title":"VSCode\u514d\u5bc6\u53d1\u5e03\u4ee3\u7801\u5230GitHub"},{"location":"soft/VSCode%E5%85%8D%E5%AF%86%E5%8F%91%E5%B8%83%E4%BB%A3%E7%A0%81%E5%88%B0GitHub/#git","text":"git config --global user.name \"your name\" git config --global user.email \"your email\"","title":"\u8bbe\u7f6eGit\u5168\u5c40\u53d8\u91cf"},{"location":"soft/VSCode%E5%85%8D%E5%AF%86%E5%8F%91%E5%B8%83%E4%BB%A3%E7%A0%81%E5%88%B0GitHub/#ssh-key","text":"ssh-keygen -t ed25519 -C \"your email\" \u6216 ssh-keygen -t rsa -b 4096 -C \"your email\"","title":"\u751f\u6210SSH Key"},{"location":"soft/VSCode%E5%85%8D%E5%AF%86%E5%8F%91%E5%B8%83%E4%BB%A3%E7%A0%81%E5%88%B0GitHub/#_1","text":"cat ~/.ssh/id_ed25519.pub \u6216 cat ~/.ssh/id_rsa.pub","title":"\u67e5\u770b\u516c\u94a5"},{"location":"soft/VSCode%E5%85%8D%E5%AF%86%E5%8F%91%E5%B8%83%E4%BB%A3%E7%A0%81%E5%88%B0GitHub/#github","text":"setting -> SSH and GPG keys -> New SSH key \u7c98\u8d34\u5bc6\u94a5\u5e76\u4fdd\u5b58","title":"\u6dfb\u52a0\u516c\u94a5\u5230GitHub\u8d26\u53f7"},{"location":"soft/VSCode%E5%85%8D%E5%AF%86%E5%8F%91%E5%B8%83%E4%BB%A3%E7%A0%81%E5%88%B0GitHub/#_2","text":"\u6253\u5f00vscode\uff0c\u6253\u5f00\u6e90\u4ee3\u7801\u7ba1\u7406\uff0c\u70b9\u51fb\u53d1\u5e03\u5230Github\uff0c\u6839\u636e\u63d0\u793a\u64cd\u4f5c\u5373\u53ef","title":"\u53d1\u5e03\u4ee3\u7801"},{"location":"soft/%E4%B8%8B%E8%BD%BDChrome%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%8C%85/","text":"\u4e0b\u8f7dChrome\u79bb\u7ebf\u5b89\u88c5\u5305 \u56fd\u5185 https://www.google.cn/chrome/?system=true&standalone=1 \u56fd\u5916 https://www.google.com/chrome/?system=true&standalone=1","title":"\u4e0b\u8f7dChrome\u79bb\u7ebf\u5b89\u88c5\u5305"},{"location":"soft/%E4%B8%8B%E8%BD%BDChrome%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%8C%85/#chrome","text":"\u56fd\u5185 https://www.google.cn/chrome/?system=true&standalone=1 \u56fd\u5916 https://www.google.com/chrome/?system=true&standalone=1","title":"\u4e0b\u8f7dChrome\u79bb\u7ebf\u5b89\u88c5\u5305"},{"location":"soft/%E9%AD%94%E5%85%BD3%E5%86%B0%E5%B0%81%E7%8E%8B%E5%BA%A7%E7%9A%84%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80/","text":"http://dz.gdl.netease.com/dz_war3_1.27a.dzp","title":"\u9b54\u517d3\u51b0\u5c01\u738b\u5ea7\u7684\u4e0b\u8f7d\u5730\u5740"},{"location":"windows/KMS%E6%BF%80%E6%B4%BB/","text":"KMS\u6fc0\u6d3b \u67e5\u8be2KMS\u5bc6\u94a5 Windows\u5bc6\u94a5\u5730\u5740 https://docs.microsoft.com/zh-cn/windows-server/get-started/kmsclientkeys Office\u5bc6\u94a5\u5730\u5740 https://docs.microsoft.com/zh-cn/DeployOffice/vlactivation/gvlks \u5e38\u7528\u5bc6\u94a5 \u7248\u672c \u5bc6\u94a5 Windows 11 \u4e13\u4e1a\u7248 Windows 10 \u4e13\u4e1a\u7248 W269N-WFGWX-YVC9B-4J6C9-T83GX Windows 11 \u4f01\u4e1a\u7248 Windows 10 \u4f01\u4e1a\u7248 NPPR9-FWDCX-D2C8J-H872K-2YT43 Windows 11 \u6559\u80b2\u7248 Windows 10 \u6559\u80b2\u7248 NW6C2-QMPVW-D7KKK-3GKT6-VCFB2 Windows 10 \u4f01\u4e1a\u7248 LTSC 2021 Windows 10 \u4f01\u4e1a\u7248 LTSC 2019 M7XTQ-FN8P6-TTKYV-9D4CC-J462D Office LTSC \u4e13\u4e1a\u589e\u5f3a\u7248 2021 FXYTK-NJJ8C-GB6DW-3DYQT-6F7TH Office LTSC \u6807\u51c6\u7248 2021 KDX7X-BNVR8-TXXGX-4Q7Y8-78VT3 Office \u4e13\u4e1a\u589e\u5f3a\u7248 2019 NMMKJ-6RK4F-KMJVX-8D9MJ-6MWKP Office \u6807\u51c6\u7248 2019 6NWWJ-YQWMR-QKGCB-6TMB3-9D9HK \u4f7f\u7528KMS\u6fc0\u6d3b \u4ee5\u7ba1\u7406\u5458\u8eab\u4efd\u8fd0\u884cCMD Windows\u6fc0\u6d3b \u5728CMD\u4e2d\u4f9d\u6b21\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4 slmgr /ipk W269N-WFGWX-YVC9B-4J6C9-T83GX # \u5b89\u88c5\u5bc6\u94a5 slmgr /skms kms.03k.org # \u8bbe\u7f6eKMS\u4e3b\u673a slmgr /ato # \u6fc0\u6d3b slmgr /dlv # \u67e5\u770b\u6fc0\u6d3b\u72b6\u6001 Office\u6fc0\u6d3b \u5728CMD\u4e2d\u4f9d\u6b21\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4 cd C:\\Program Files\\Microsoft Office\\Office16 # \u8fdb\u5165Office\u811a\u672c\u76ee\u5f55 cscript ospp.vbs /inpkey:FXYTK-NJJ8C-GB6DW-3DYQT-6F7TH # \u5b89\u88c5\u5bc6\u94a5 cscript ospp.vbs /sethst:kms.03k.org # \u8bbe\u7f6eKMS\u4e3b\u673a cscript ospp.vbs /act # \u6fc0\u6d3b cscript ospp.vbs /dstatus # \u67e5\u770b\u6fc0\u6d3b\u72b6\u6001 \u5173\u4e8eoffice\uff0c\u5982\u679c\u4e0a\u9762\u65b9\u6cd5\u65e0\u6cd5\u6fc0\u6d3b\u53ef\u5c1d\u8bd5\u5982\u4e0b\u65b9\u6cd5\uff0c\u5c06\u4ee5\u4e0b\u4ee3\u7801\u4fdd\u5b58\u4e3a.bat\u6587\u4ef6\uff0c\u7136\u540e\u53cc\u51fb\u6267\u884c\uff1a @echo off cd C:\\Program Files\\Microsoft Office\\Office16 cscript ospp.vbs /sethst:kms.03k.org cscript ospp.vbs /act cscript ospp.vbs /dstatus cscript ospp.vbs /remhst pause \u5176\u4ed6 kms.03k.org \u662f\u516c\u5171\u7684KMS\u6fc0\u6d3b\u4e3b\u673a\uff0c\u7c7b\u4f3c\u7684\u8fd8\u6709 kms.shax.vip \u548c 91.149.135.83 \u82e5\u4e0a\u8ff0\u547d\u4ee4\u65e0\u6cd5\u6fc0\u6d3b\u53ef\u5c1d\u8bd5\u66f4\u6362KMS\u4e3b\u673a","title":"KMS\u6fc0\u6d3b"},{"location":"windows/KMS%E6%BF%80%E6%B4%BB/#kms","text":"","title":"KMS\u6fc0\u6d3b"},{"location":"windows/KMS%E6%BF%80%E6%B4%BB/#kms_1","text":"","title":"\u67e5\u8be2KMS\u5bc6\u94a5"},{"location":"windows/KMS%E6%BF%80%E6%B4%BB/#windows","text":"https://docs.microsoft.com/zh-cn/windows-server/get-started/kmsclientkeys","title":"Windows\u5bc6\u94a5\u5730\u5740"},{"location":"windows/KMS%E6%BF%80%E6%B4%BB/#office","text":"https://docs.microsoft.com/zh-cn/DeployOffice/vlactivation/gvlks","title":"Office\u5bc6\u94a5\u5730\u5740"},{"location":"windows/KMS%E6%BF%80%E6%B4%BB/#_1","text":"\u7248\u672c \u5bc6\u94a5 Windows 11 \u4e13\u4e1a\u7248 Windows 10 \u4e13\u4e1a\u7248 W269N-WFGWX-YVC9B-4J6C9-T83GX Windows 11 \u4f01\u4e1a\u7248 Windows 10 \u4f01\u4e1a\u7248 NPPR9-FWDCX-D2C8J-H872K-2YT43 Windows 11 \u6559\u80b2\u7248 Windows 10 \u6559\u80b2\u7248 NW6C2-QMPVW-D7KKK-3GKT6-VCFB2 Windows 10 \u4f01\u4e1a\u7248 LTSC 2021 Windows 10 \u4f01\u4e1a\u7248 LTSC 2019 M7XTQ-FN8P6-TTKYV-9D4CC-J462D Office LTSC \u4e13\u4e1a\u589e\u5f3a\u7248 2021 FXYTK-NJJ8C-GB6DW-3DYQT-6F7TH Office LTSC \u6807\u51c6\u7248 2021 KDX7X-BNVR8-TXXGX-4Q7Y8-78VT3 Office \u4e13\u4e1a\u589e\u5f3a\u7248 2019 NMMKJ-6RK4F-KMJVX-8D9MJ-6MWKP Office \u6807\u51c6\u7248 2019 6NWWJ-YQWMR-QKGCB-6TMB3-9D9HK","title":"\u5e38\u7528\u5bc6\u94a5"},{"location":"windows/KMS%E6%BF%80%E6%B4%BB/#kms_2","text":"\u4ee5\u7ba1\u7406\u5458\u8eab\u4efd\u8fd0\u884cCMD","title":"\u4f7f\u7528KMS\u6fc0\u6d3b"},{"location":"windows/KMS%E6%BF%80%E6%B4%BB/#windows_1","text":"\u5728CMD\u4e2d\u4f9d\u6b21\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4 slmgr /ipk W269N-WFGWX-YVC9B-4J6C9-T83GX # \u5b89\u88c5\u5bc6\u94a5 slmgr /skms kms.03k.org # \u8bbe\u7f6eKMS\u4e3b\u673a slmgr /ato # \u6fc0\u6d3b slmgr /dlv # \u67e5\u770b\u6fc0\u6d3b\u72b6\u6001","title":"Windows\u6fc0\u6d3b"},{"location":"windows/KMS%E6%BF%80%E6%B4%BB/#office_1","text":"\u5728CMD\u4e2d\u4f9d\u6b21\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4 cd C:\\Program Files\\Microsoft Office\\Office16 # \u8fdb\u5165Office\u811a\u672c\u76ee\u5f55 cscript ospp.vbs /inpkey:FXYTK-NJJ8C-GB6DW-3DYQT-6F7TH # \u5b89\u88c5\u5bc6\u94a5 cscript ospp.vbs /sethst:kms.03k.org # \u8bbe\u7f6eKMS\u4e3b\u673a cscript ospp.vbs /act # \u6fc0\u6d3b cscript ospp.vbs /dstatus # \u67e5\u770b\u6fc0\u6d3b\u72b6\u6001 \u5173\u4e8eoffice\uff0c\u5982\u679c\u4e0a\u9762\u65b9\u6cd5\u65e0\u6cd5\u6fc0\u6d3b\u53ef\u5c1d\u8bd5\u5982\u4e0b\u65b9\u6cd5\uff0c\u5c06\u4ee5\u4e0b\u4ee3\u7801\u4fdd\u5b58\u4e3a.bat\u6587\u4ef6\uff0c\u7136\u540e\u53cc\u51fb\u6267\u884c\uff1a @echo off cd C:\\Program Files\\Microsoft Office\\Office16 cscript ospp.vbs /sethst:kms.03k.org cscript ospp.vbs /act cscript ospp.vbs /dstatus cscript ospp.vbs /remhst pause","title":"Office\u6fc0\u6d3b"},{"location":"windows/KMS%E6%BF%80%E6%B4%BB/#_2","text":"kms.03k.org \u662f\u516c\u5171\u7684KMS\u6fc0\u6d3b\u4e3b\u673a\uff0c\u7c7b\u4f3c\u7684\u8fd8\u6709 kms.shax.vip \u548c 91.149.135.83 \u82e5\u4e0a\u8ff0\u547d\u4ee4\u65e0\u6cd5\u6fc0\u6d3b\u53ef\u5c1d\u8bd5\u66f4\u6362KMS\u4e3b\u673a","title":"\u5176\u4ed6"},{"location":"windows/WSL%E4%BD%BF%E7%94%A8Debian%E5%90%AF%E5%8A%A8Docker%E6%8A%A5%E9%94%99/","text":"WSL\u4f7f\u7528Debian\u542f\u52a8Docker\u62a5\u9519 \u9488\u5bf9\u5982\u4e0b\u9519\u8bef\u63d0\u793a\u7684\u89e3\u51b3\u529e\u6cd5\uff1a grep: /etc/fstab: No such file or directory \u53c2\u8003\uff1a https://github.com/microsoft/WSL/discussions/4872 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u89e3\u51b3 sudo touch /etc/fstab sudo update-alternatives --set iptables /usr/sbin/iptables-legacy sudo update-alternatives --set ip6tables /usr/sbin/ip6tables-legacy sudo service docker start","title":"WSL\u4f7f\u7528Debian\u542f\u52a8Docker\u62a5\u9519"},{"location":"windows/WSL%E4%BD%BF%E7%94%A8Debian%E5%90%AF%E5%8A%A8Docker%E6%8A%A5%E9%94%99/#wsldebiandocker","text":"\u9488\u5bf9\u5982\u4e0b\u9519\u8bef\u63d0\u793a\u7684\u89e3\u51b3\u529e\u6cd5\uff1a grep: /etc/fstab: No such file or directory \u53c2\u8003\uff1a https://github.com/microsoft/WSL/discussions/4872 \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u89e3\u51b3 sudo touch /etc/fstab sudo update-alternatives --set iptables /usr/sbin/iptables-legacy sudo update-alternatives --set ip6tables /usr/sbin/ip6tables-legacy sudo service docker start","title":"WSL\u4f7f\u7528Debian\u542f\u52a8Docker\u62a5\u9519"},{"location":"windows/WSL%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/","text":"WSL\u7aef\u53e3\u8f6c\u53d1 \u589e\u52a0\u7aef\u53e3\u8f6c\u53d1 \u9ed8\u8ba4\u60c5\u51b5\u4e0bwsl\u4e2d\u7684\u7aef\u53e3\u53ea\u80fd\u591f\u88ab\u4e3b\u673a\u8bbf\u95ee\uff0c\u82e5\u60f3\u8981\u5c40\u57df\u7f51\u5185\u5176\u4ed6\u4e3b\u673a\u8bbf\u95ee\uff0c\u5219\u9700\u8981\u8bbe\u7f6e\u7aef\u53e3\u8f6c\u53d1 \u547d\u4ee4\u683c\u5f0f\uff1a netsh interface portproxy add v4tov4 listenaddress=\u76d1\u542c\u5730\u5740 listenport=\u76d1\u542c\u7aef\u53e3 connectaddress=\u88ab\u8f6c\u53d1\u5730\u5740 connectport=\u88ab\u8f6c\u53d1\u7aef\u53e3 \u547d\u4ee4\u8be6\u89e3\uff1a listenaddress \u5373\u5c40\u57df\u7f51\u5185\u5176\u4ed6\u4e3b\u673a\u8bbf\u95ee\u7684\u5730\u5740 listenport \u5373\u5c40\u57df\u7f51\u5185\u5176\u4ed6\u4e3b\u673a\u8bbf\u95ee\u7684\u7aef\u53e3 connectaddress \u5373WSL\u4e2d\u7684\u5730\u5740 connectport \u5373WSL\u4e2d\u7684\u7aef\u53e3 \u793a\u4f8b\uff1a netsh interface portproxy add v4tov4 listenaddress=0.0.0.0 listenport=5000 connectaddress=5000 connectport=192.168.1.254 \u5220\u9664\u7aef\u53e3\u8f6c\u53d1 \u547d\u4ee4\u683c\u5f0f\uff1a netsh interface portproxy delete v4tov4 listenaddress=\u76d1\u542c\u5730\u5740 listenport=\u76d1\u542c\u7aef\u53e3 \u793a\u4f8b\uff1a netsh interface portproxy delete v4tov4 listenaddress=0.0.0.0 listenport=5000 \u67e5\u770b\u8f6c\u53e3\u8f6c\u53d1 \u82e5\u5fd8\u8bb0\u8f6c\u53d1\u7684\u7684\u5730\u5740\u548c\u7aef\u53e3\u53ef\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b netsh interface portproxy show all","title":"WSL\u7aef\u53e3\u8f6c\u53d1"},{"location":"windows/WSL%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/#wsl","text":"","title":"WSL\u7aef\u53e3\u8f6c\u53d1"},{"location":"windows/WSL%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/#_1","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0bwsl\u4e2d\u7684\u7aef\u53e3\u53ea\u80fd\u591f\u88ab\u4e3b\u673a\u8bbf\u95ee\uff0c\u82e5\u60f3\u8981\u5c40\u57df\u7f51\u5185\u5176\u4ed6\u4e3b\u673a\u8bbf\u95ee\uff0c\u5219\u9700\u8981\u8bbe\u7f6e\u7aef\u53e3\u8f6c\u53d1 \u547d\u4ee4\u683c\u5f0f\uff1a netsh interface portproxy add v4tov4 listenaddress=\u76d1\u542c\u5730\u5740 listenport=\u76d1\u542c\u7aef\u53e3 connectaddress=\u88ab\u8f6c\u53d1\u5730\u5740 connectport=\u88ab\u8f6c\u53d1\u7aef\u53e3 \u547d\u4ee4\u8be6\u89e3\uff1a listenaddress \u5373\u5c40\u57df\u7f51\u5185\u5176\u4ed6\u4e3b\u673a\u8bbf\u95ee\u7684\u5730\u5740 listenport \u5373\u5c40\u57df\u7f51\u5185\u5176\u4ed6\u4e3b\u673a\u8bbf\u95ee\u7684\u7aef\u53e3 connectaddress \u5373WSL\u4e2d\u7684\u5730\u5740 connectport \u5373WSL\u4e2d\u7684\u7aef\u53e3 \u793a\u4f8b\uff1a netsh interface portproxy add v4tov4 listenaddress=0.0.0.0 listenport=5000 connectaddress=5000 connectport=192.168.1.254","title":"\u589e\u52a0\u7aef\u53e3\u8f6c\u53d1"},{"location":"windows/WSL%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/#_2","text":"\u547d\u4ee4\u683c\u5f0f\uff1a netsh interface portproxy delete v4tov4 listenaddress=\u76d1\u542c\u5730\u5740 listenport=\u76d1\u542c\u7aef\u53e3 \u793a\u4f8b\uff1a netsh interface portproxy delete v4tov4 listenaddress=0.0.0.0 listenport=5000","title":"\u5220\u9664\u7aef\u53e3\u8f6c\u53d1"},{"location":"windows/WSL%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/#_3","text":"\u82e5\u5fd8\u8bb0\u8f6c\u53d1\u7684\u7684\u5730\u5740\u548c\u7aef\u53e3\u53ef\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b netsh interface portproxy show all","title":"\u67e5\u770b\u8f6c\u53e3\u8f6c\u53d1"},{"location":"windows/Windows%2011%20%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%20MySQL%205.7.38/","text":"Windows 11 \u5b89\u88c5\u914d\u7f6e MySQL 5.7.38 1\u3001\u4e0b\u8f7d https://downloads.mysql.com/archives/get/p/23/file/mysql-5.7.38-winx64.zip 2\u3001\u521b\u5efa\u76ee\u5f55 mkdir C:\\MySQL\\5.7.38 3\u3001\u914d\u7f6e\u73af\u5883\u53d8\u91cf setx path \"%path%;C:\\MySQL\\5.7.38\\bin\" 4\u3001\u89e3\u538b mysql-5.7.38-winx64.zip \u5230\u76ee\u5f55 C:\\MySQL\\5.7.38 5\u3001\u5728\u76ee\u5f55 C:\\MySQL\\5.7.38 \u4e2d\u521b\u5efa\u914d\u7f6e\u6587\u4ef6 my.ini \u5e76\u5199\u5165\u5982\u4e0b\u5185\u5bb9 [mysqld] # set basedir to your installation path basedir=C:\\\\MySQL\\\\5.7.38 # set datadir to the location of your data directory datadir=C:\\\\MySQL\\\\5.7.38\\\\data 6\u3001\u4e0b\u8f7dvcredist_x64.exe\u5e76\u5b89\u88c5 Visual C++ Redistributable Packages for Visual Studio 2013 7\u3001\u521d\u59cb\u5316 mysqld --defaults-file=C:\\MySQL\\5.7.38\\my.ini --initialize --console \u6700\u540e\u4e00\u884c\u672b\u5c3e\u90e8\u5206\u8f93\u51fa\u7684\u662froot\u7528\u6237\u7684\u4e34\u65f6\u5bc6\u7801, \u7c7b\u4f3c 98h/D+zd#WB& , \u8bb0\u5f55\u4e0b\u6765 8\u3001\u5b89\u88c5\u670d\u52a1\u5e76\u542f\u52a8 mysqld --install sc start mysql 9\u3001\u914d\u7f6e\u6570\u636e\u5e93 mysql_secure_installation 10\u3001\u8bbe\u7f6eroot\u7528\u6237\u53ef\u8fdc\u7a0b\u767b\u5f55 mysql -u root -p grant all privileges on *.* to 'root'@'%' identified by 'mysql' with grant option; flush privileges; exit \u641e\u5b9a!","title":"Windows\u5b89\u88c5\u914d\u7f6eMySQ5.7"},{"location":"windows/Windows%2011%20%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%20MySQL%205.7.38/#windows-11-mysql-5738","text":"1\u3001\u4e0b\u8f7d https://downloads.mysql.com/archives/get/p/23/file/mysql-5.7.38-winx64.zip 2\u3001\u521b\u5efa\u76ee\u5f55 mkdir C:\\MySQL\\5.7.38 3\u3001\u914d\u7f6e\u73af\u5883\u53d8\u91cf setx path \"%path%;C:\\MySQL\\5.7.38\\bin\" 4\u3001\u89e3\u538b mysql-5.7.38-winx64.zip \u5230\u76ee\u5f55 C:\\MySQL\\5.7.38 5\u3001\u5728\u76ee\u5f55 C:\\MySQL\\5.7.38 \u4e2d\u521b\u5efa\u914d\u7f6e\u6587\u4ef6 my.ini \u5e76\u5199\u5165\u5982\u4e0b\u5185\u5bb9 [mysqld] # set basedir to your installation path basedir=C:\\\\MySQL\\\\5.7.38 # set datadir to the location of your data directory datadir=C:\\\\MySQL\\\\5.7.38\\\\data 6\u3001\u4e0b\u8f7dvcredist_x64.exe\u5e76\u5b89\u88c5 Visual C++ Redistributable Packages for Visual Studio 2013 7\u3001\u521d\u59cb\u5316 mysqld --defaults-file=C:\\MySQL\\5.7.38\\my.ini --initialize --console \u6700\u540e\u4e00\u884c\u672b\u5c3e\u90e8\u5206\u8f93\u51fa\u7684\u662froot\u7528\u6237\u7684\u4e34\u65f6\u5bc6\u7801, \u7c7b\u4f3c 98h/D+zd#WB& , \u8bb0\u5f55\u4e0b\u6765 8\u3001\u5b89\u88c5\u670d\u52a1\u5e76\u542f\u52a8 mysqld --install sc start mysql 9\u3001\u914d\u7f6e\u6570\u636e\u5e93 mysql_secure_installation 10\u3001\u8bbe\u7f6eroot\u7528\u6237\u53ef\u8fdc\u7a0b\u767b\u5f55 mysql -u root -p grant all privileges on *.* to 'root'@'%' identified by 'mysql' with grant option; flush privileges; exit \u641e\u5b9a!","title":"Windows 11 \u5b89\u88c5\u914d\u7f6e MySQL 5.7.38"},{"location":"windows/Windows10%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85.Net3.5/","text":"Windows10\u79bb\u7ebf\u5b89\u88c5.Net3.5 \u53cc\u51fbWindows10\u7684ISO\u955c\u50cf\u8fdb\u884c\u6302\u8f7d \u8bb0\u5f55\u6302\u8f7d\u955c\u50cf\u7684\u76d8\u7b26 \u6253\u5f00CMD\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4 dism.exe /online /enable-feature /featurename:netfx3 /Source:F:\\sources\\sxs \u6ce8\u610f\uff1a\u4e0a\u65b9\u4ee3\u7801\u4e2d F:\\sources\\sxs \u4e2d\u7684F\u5373\u662f\u6302\u8f7d\u955c\u50cf\u7684\u76d8\u7b26","title":"Windows10\u79bb\u7ebf\u5b89\u88c5.Net3.5"},{"location":"windows/Windows10%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85.Net3.5/#windows10net35","text":"\u53cc\u51fbWindows10\u7684ISO\u955c\u50cf\u8fdb\u884c\u6302\u8f7d \u8bb0\u5f55\u6302\u8f7d\u955c\u50cf\u7684\u76d8\u7b26 \u6253\u5f00CMD\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4 dism.exe /online /enable-feature /featurename:netfx3 /Source:F:\\sources\\sxs \u6ce8\u610f\uff1a\u4e0a\u65b9\u4ee3\u7801\u4e2d F:\\sources\\sxs \u4e2d\u7684F\u5373\u662f\u6302\u8f7d\u955c\u50cf\u7684\u76d8\u7b26","title":"Windows10\u79bb\u7ebf\u5b89\u88c5.Net3.5"},{"location":"windows/%E5%88%A0%E9%99%A43D%E5%AF%B9%E8%B1%A1/","text":"\u5220\u96643D\u5bf9\u8c61 \u6253\u5f00\u6ce8\u518c\u8868 \u6309\u4e0b\u7ec4\u5408\u952e Win+R \uff0c\u8f93\u5165 regedit \u6253\u5f00\u6ce8\u518c\u8868\u7f16\u8f91\u5668 \u5b9a\u4f4d\u4ee5\u4e0b\u8282\u70b9 \\HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\MyComputer\\NameSpace \u5220\u9664\u4ee5\u4e0b\u952e\u503c {0DB7E03F-FC29-4DC6-9020-FF41B59E513A} \u91cd\u542f\u8d44\u6e90\u7ba1\u7406\u5668 \u6309\u4e0b\u7ec4\u5408\u952e Ctrl+Shift+Esc \u627e\u5230\u201c\u8d44\u6e90\u7ba1\u7406\u5668\u201d\uff08 explorer.exe \uff09\uff0c\u53f3\u952e\u91cd\u542f\u5373\u53ef","title":"\u5220\u96643D\u5bf9\u8c61"},{"location":"windows/%E5%88%A0%E9%99%A43D%E5%AF%B9%E8%B1%A1/#3d","text":"\u6253\u5f00\u6ce8\u518c\u8868 \u6309\u4e0b\u7ec4\u5408\u952e Win+R \uff0c\u8f93\u5165 regedit \u6253\u5f00\u6ce8\u518c\u8868\u7f16\u8f91\u5668 \u5b9a\u4f4d\u4ee5\u4e0b\u8282\u70b9 \\HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\MyComputer\\NameSpace \u5220\u9664\u4ee5\u4e0b\u952e\u503c {0DB7E03F-FC29-4DC6-9020-FF41B59E513A} \u91cd\u542f\u8d44\u6e90\u7ba1\u7406\u5668 \u6309\u4e0b\u7ec4\u5408\u952e Ctrl+Shift+Esc \u627e\u5230\u201c\u8d44\u6e90\u7ba1\u7406\u5668\u201d\uff08 explorer.exe \uff09\uff0c\u53f3\u952e\u91cd\u542f\u5373\u53ef","title":"\u5220\u96643D\u5bf9\u8c61"},{"location":"windows/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85WSL/","text":"\u624b\u52a8\u5b89\u88c5WSL \u53c2\u8003\uff1a[ \u5b89\u88c5 WSL | Microsoft Docs ] \u6ce8\u89e3\uff1a\u4ee5\u4e0b\u547d\u4ee4\u5747\u5728CMD\u4e2d\u64cd\u4f5c \u542f\u7528WSL\u529f\u80fd dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart \u542f\u7528\u865a\u62df\u673a\u529f\u80fd dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart \u4e0b\u8f7d\u5e76\u5b89\u88c5Linux\u5185\u6838\u66f4\u65b0\u5305 X64 \u5305 ARM64 \u5305 \u8bbe\u7f6eWSL2\u4e3a\u9ed8\u8ba4\u7248\u672c wsl --set-default-version 2 \u4e0b\u8f7d\u53d1\u884c\u7248 Debian GNU/Linux Ubuntu 22.04 LTS \u66f4\u591a\u53d1\u884c\u7248\u4e0b\u8f7d\u53c2\u89c1\uff1a https://docs.microsoft.com/zh-cn/windows/wsl/install-manual#downloading-distributions \u89e3\u538b\u53d1\u884c\u7248 \u4e0b\u8f7d\u7684Linux\u53d1\u884c\u7248\u6587\u4ef6\u683c\u5f0f\u662f.appx\uff0c\u53ef\u76f4\u63a5\u53f3\u952e\u4f7f\u75287zip\u89e3\u538b\u6216\u4fee\u6539\u6269\u5c55\u540d\u4e3a.zip\u540e\u89e3\u538b \u89e3\u538b\u5230\u6307\u5b9a\u4f4d\u7f6e\u540e\uff08\u4f8b\u5982 D:\\WSL\\Debian\uff09\uff0c\u8fdb\u5165\u76ee\u5f55\u540e\u521b\u5efa\u53cc\u51fb\u201c\u53d1\u884c\u7248\u540d\u79f0.exe\u201d\u5373\u53ef\u5b89\u88c5 \u5907\u6ce8 \u540c\u4e00\u4e2a\u53d1\u884c\u7248\u9ed8\u8ba4\u53ea\u80fd\u5b89\u88c5\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u82e5\u60f3\u5b89\u88c5\u591a\u4e2a\u8bf7\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u64cd\u4f5c 1\u3001\u5148\u6b63\u5e38\u5b89\u88c5 2\u3001\u6253\u5f00\u6ce8\u518c\u8868\\HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Lxss 3\u3001\u5728\u53f3\u4fa7\u627e\u5230DistributionName 4\u3001\u53cc\u51fb\u4fee\u6539\u6210\u5176\u4ed6\u540d\u79f0\uff0c\u4f8b\u5982Debian1 5\u3001\u91cd\u65b0\u89e3\u538b\u53cc\u51fbexe\u5373\u53ef\u5b89\u88c5\u591a\u4e2a\u5b9e\u4f8b","title":"\u624b\u52a8\u5b89\u88c5WSL"},{"location":"windows/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85WSL/#wsl","text":"\u53c2\u8003\uff1a[ \u5b89\u88c5 WSL | Microsoft Docs ] \u6ce8\u89e3\uff1a\u4ee5\u4e0b\u547d\u4ee4\u5747\u5728CMD\u4e2d\u64cd\u4f5c","title":"\u624b\u52a8\u5b89\u88c5WSL"},{"location":"windows/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85WSL/#wsl_1","text":"dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart","title":"\u542f\u7528WSL\u529f\u80fd"},{"location":"windows/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85WSL/#_1","text":"dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart","title":"\u542f\u7528\u865a\u62df\u673a\u529f\u80fd"},{"location":"windows/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85WSL/#linux","text":"X64 \u5305 ARM64 \u5305","title":"\u4e0b\u8f7d\u5e76\u5b89\u88c5Linux\u5185\u6838\u66f4\u65b0\u5305"},{"location":"windows/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85WSL/#wsl2","text":"wsl --set-default-version 2","title":"\u8bbe\u7f6eWSL2\u4e3a\u9ed8\u8ba4\u7248\u672c"},{"location":"windows/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85WSL/#_2","text":"Debian GNU/Linux Ubuntu 22.04 LTS \u66f4\u591a\u53d1\u884c\u7248\u4e0b\u8f7d\u53c2\u89c1\uff1a https://docs.microsoft.com/zh-cn/windows/wsl/install-manual#downloading-distributions","title":"\u4e0b\u8f7d\u53d1\u884c\u7248"},{"location":"windows/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85WSL/#_3","text":"\u4e0b\u8f7d\u7684Linux\u53d1\u884c\u7248\u6587\u4ef6\u683c\u5f0f\u662f.appx\uff0c\u53ef\u76f4\u63a5\u53f3\u952e\u4f7f\u75287zip\u89e3\u538b\u6216\u4fee\u6539\u6269\u5c55\u540d\u4e3a.zip\u540e\u89e3\u538b \u89e3\u538b\u5230\u6307\u5b9a\u4f4d\u7f6e\u540e\uff08\u4f8b\u5982 D:\\WSL\\Debian\uff09\uff0c\u8fdb\u5165\u76ee\u5f55\u540e\u521b\u5efa\u53cc\u51fb\u201c\u53d1\u884c\u7248\u540d\u79f0.exe\u201d\u5373\u53ef\u5b89\u88c5","title":"\u89e3\u538b\u53d1\u884c\u7248"},{"location":"windows/%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85WSL/#_4","text":"\u540c\u4e00\u4e2a\u53d1\u884c\u7248\u9ed8\u8ba4\u53ea\u80fd\u5b89\u88c5\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u82e5\u60f3\u5b89\u88c5\u591a\u4e2a\u8bf7\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u64cd\u4f5c 1\u3001\u5148\u6b63\u5e38\u5b89\u88c5 2\u3001\u6253\u5f00\u6ce8\u518c\u8868\\HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Lxss 3\u3001\u5728\u53f3\u4fa7\u627e\u5230DistributionName 4\u3001\u53cc\u51fb\u4fee\u6539\u6210\u5176\u4ed6\u540d\u79f0\uff0c\u4f8b\u5982Debian1 5\u3001\u91cd\u65b0\u89e3\u538b\u53cc\u51fbexe\u5373\u53ef\u5b89\u88c5\u591a\u4e2a\u5b9e\u4f8b","title":"\u5907\u6ce8"},{"location":"windows/%E6%B8%85%E9%99%A4%E7%B3%BB%E7%BB%9F%E6%89%98%E7%9B%98%E5%9B%BE%E6%A0%87%E7%BC%93%E5%AD%98/","text":"\u6e05\u9664\u7cfb\u7edf\u6258\u76d8\u56fe\u6807\u7f13\u5b58 \u6253\u5f00\u6ce8\u518c\u8868 \u6309\u4e0b\u7ec4\u5408\u952e Win+R \uff0c\u8f93\u5165 regedit \u6253\u5f00\u6ce8\u518c\u8868\u7f16\u8f91\u5668 \u5b9a\u4f4d\u4ee5\u4e0b\u8282\u70b9 \\HKEY_CLASSES_ROOT\\Local Settings\\Software\\Microsoft\\Windows\\CurrentVersion\\TrayNotify \u5220\u9664\u4ee5\u4e0b\u4e24\u4e2a\u952e\u503c IconStreams \u548c PastIconsStream \u91cd\u542f\u8d44\u6e90\u7ba1\u7406\u5668 \u6309\u4e0b\u7ec4\u5408\u952e Ctrl+Shift+Esc \u627e\u5230\u201c\u8d44\u6e90\u7ba1\u7406\u5668\u201d\uff08 explorer.exe \uff09\uff0c\u53f3\u952e\u91cd\u542f\u5373\u53ef","title":"\u6e05\u9664\u7cfb\u7edf\u6258\u76d8\u56fe\u6807\u7f13\u5b58"},{"location":"windows/%E6%B8%85%E9%99%A4%E7%B3%BB%E7%BB%9F%E6%89%98%E7%9B%98%E5%9B%BE%E6%A0%87%E7%BC%93%E5%AD%98/#_1","text":"\u6253\u5f00\u6ce8\u518c\u8868 \u6309\u4e0b\u7ec4\u5408\u952e Win+R \uff0c\u8f93\u5165 regedit \u6253\u5f00\u6ce8\u518c\u8868\u7f16\u8f91\u5668 \u5b9a\u4f4d\u4ee5\u4e0b\u8282\u70b9 \\HKEY_CLASSES_ROOT\\Local Settings\\Software\\Microsoft\\Windows\\CurrentVersion\\TrayNotify \u5220\u9664\u4ee5\u4e0b\u4e24\u4e2a\u952e\u503c IconStreams \u548c PastIconsStream \u91cd\u542f\u8d44\u6e90\u7ba1\u7406\u5668 \u6309\u4e0b\u7ec4\u5408\u952e Ctrl+Shift+Esc \u627e\u5230\u201c\u8d44\u6e90\u7ba1\u7406\u5668\u201d\uff08 explorer.exe \uff09\uff0c\u53f3\u952e\u91cd\u542f\u5373\u53ef","title":"\u6e05\u9664\u7cfb\u7edf\u6258\u76d8\u56fe\u6807\u7f13\u5b58"},{"location":"windows/%E8%AE%BE%E7%BD%AEHyper-v%E4%B8%ADLinux%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%A8%E5%B1%8F/","text":"\u8bbe\u7f6eHyper-v\u4e2dLinux\u865a\u62df\u673a\u5168\u5c4f \u7f16\u8f91\u914d\u7f6e vim /etc/default/grub \u4fee\u6539\u914d\u7f6e \u627e\u5230\u6709 GRUB_CMDLINE_LINUX_DEFAULT \u7684\u8fd9\u884c \u4fee\u6539\u4e3a GRUB_CMDLINE_LINUX_DEFAULT=\"quiet splash video=hyperv_fb:1980x1080\" \u5176\u4e2d 1980x1080 \u5373\u662f\u5168\u5c4f\u7684\u5206\u8fa8\u7387\uff0c\u8bf7\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539 \u5237\u65b0\u914d\u7f6e Debian\u7cfb sudo update-grub sudo grub-mkconfig CentOS\u7cfb grub2-mkconfig -o /boot/grub2/grub.cfg \u7136\u540e\u91cd\u542f\u7cfb\u7edf\u5373\u53ef \u5176\u4ed6 \u5982\u679c\u4e0a\u8ff0\u65b9\u6cd5\u6ca1\u6709\u751f\u6548\uff0c\u53ef\u80fd\u662f\u9700\u8981\u5b89\u88c5\u4e00\u4e0b\u4f9d\u8d56 # 1\u3001\u5148\u5b89\u88c5\u4e0blinux\u6838\u5fc3\u548c\u5934\u6587\u4ef6 sudo apt-get install -y linux-image-3.11.0-15-generic linux-headers-3.11.0-15-generic 2\u3001\u518d\u5b89\u88c5\u6838\u5fc3\u6587\u4ef6\u6269\u5c55\u5305 sudo apt-get install linux-image-extra-virtual","title":"Hyper-v Linux\u865a\u62df\u673a\u5168\u5c4f"},{"location":"windows/%E8%AE%BE%E7%BD%AEHyper-v%E4%B8%ADLinux%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%A8%E5%B1%8F/#hyper-vlinux","text":"","title":"\u8bbe\u7f6eHyper-v\u4e2dLinux\u865a\u62df\u673a\u5168\u5c4f"},{"location":"windows/%E8%AE%BE%E7%BD%AEHyper-v%E4%B8%ADLinux%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%A8%E5%B1%8F/#_1","text":"vim /etc/default/grub","title":"\u7f16\u8f91\u914d\u7f6e"},{"location":"windows/%E8%AE%BE%E7%BD%AEHyper-v%E4%B8%ADLinux%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%A8%E5%B1%8F/#_2","text":"\u627e\u5230\u6709 GRUB_CMDLINE_LINUX_DEFAULT \u7684\u8fd9\u884c \u4fee\u6539\u4e3a GRUB_CMDLINE_LINUX_DEFAULT=\"quiet splash video=hyperv_fb:1980x1080\" \u5176\u4e2d 1980x1080 \u5373\u662f\u5168\u5c4f\u7684\u5206\u8fa8\u7387\uff0c\u8bf7\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539","title":"\u4fee\u6539\u914d\u7f6e"},{"location":"windows/%E8%AE%BE%E7%BD%AEHyper-v%E4%B8%ADLinux%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%A8%E5%B1%8F/#_3","text":"","title":"\u5237\u65b0\u914d\u7f6e"},{"location":"windows/%E8%AE%BE%E7%BD%AEHyper-v%E4%B8%ADLinux%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%A8%E5%B1%8F/#debian","text":"sudo update-grub sudo grub-mkconfig","title":"Debian\u7cfb"},{"location":"windows/%E8%AE%BE%E7%BD%AEHyper-v%E4%B8%ADLinux%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%A8%E5%B1%8F/#centos","text":"grub2-mkconfig -o /boot/grub2/grub.cfg \u7136\u540e\u91cd\u542f\u7cfb\u7edf\u5373\u53ef","title":"CentOS\u7cfb"},{"location":"windows/%E8%AE%BE%E7%BD%AEHyper-v%E4%B8%ADLinux%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%A8%E5%B1%8F/#_4","text":"\u5982\u679c\u4e0a\u8ff0\u65b9\u6cd5\u6ca1\u6709\u751f\u6548\uff0c\u53ef\u80fd\u662f\u9700\u8981\u5b89\u88c5\u4e00\u4e0b\u4f9d\u8d56 # 1\u3001\u5148\u5b89\u88c5\u4e0blinux\u6838\u5fc3\u548c\u5934\u6587\u4ef6 sudo apt-get install -y linux-image-3.11.0-15-generic linux-headers-3.11.0-15-generic 2\u3001\u518d\u5b89\u88c5\u6838\u5fc3\u6587\u4ef6\u6269\u5c55\u5305 sudo apt-get install linux-image-extra-virtual","title":"\u5176\u4ed6"}]}